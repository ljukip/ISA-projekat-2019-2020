{"ast":null,"code":"var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n/* Tabulator v4.7.2 (c) Oliver Folkerd */\n\n\n;\n\n(function (global, factory) {\n  if ((typeof exports === 'undefined' ? 'undefined' : _typeof(exports)) === 'object' && typeof module !== 'undefined') {\n    module.exports = factory();\n  } else if (typeof define === 'function' && define.amd) {\n    define(factory);\n  } else {\n    global.Tabulator = factory();\n  }\n})(this, function () {\n  'use strict'; // https://tc39.github.io/ecma262/#sec-array.prototype.findIndex\n\n  if (!Array.prototype.findIndex) {\n    Object.defineProperty(Array.prototype, 'findIndex', {\n      value: function value(predicate) {\n        // 1. Let O be ? ToObject(this value).\n        if (this == null) {\n          throw new TypeError('\"this\" is null or not defined');\n        }\n\n        var o = Object(this); // 2. Let len be ? ToLength(? Get(O, \"length\")).\n\n        var len = o.length >>> 0; // 3. If IsCallable(predicate) is false, throw a TypeError exception.\n\n        if (typeof predicate !== 'function') {\n          throw new TypeError('predicate must be a function');\n        } // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\n\n\n        var thisArg = arguments[1]; // 5. Let k be 0.\n\n        var k = 0; // 6. Repeat, while k < len\n\n        while (k < len) {\n          // a. Let Pk be ! ToString(k).\n          // b. Let kValue be ? Get(O, Pk).\n          // c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\n          // d. If testResult is true, return k.\n          var kValue = o[k];\n\n          if (predicate.call(thisArg, kValue, k, o)) {\n            return k;\n          } // e. Increase k by 1.\n\n\n          k++;\n        } // 7. Return -1.\n\n\n        return -1;\n      }\n    });\n  } // https://tc39.github.io/ecma262/#sec-array.prototype.find\n\n\n  if (!Array.prototype.find) {\n    Object.defineProperty(Array.prototype, 'find', {\n      value: function value(predicate) {\n        // 1. Let O be ? ToObject(this value).\n        if (this == null) {\n          throw new TypeError('\"this\" is null or not defined');\n        }\n\n        var o = Object(this); // 2. Let len be ? ToLength(? Get(O, \"length\")).\n\n        var len = o.length >>> 0; // 3. If IsCallable(predicate) is false, throw a TypeError exception.\n\n        if (typeof predicate !== 'function') {\n          throw new TypeError('predicate must be a function');\n        } // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\n\n\n        var thisArg = arguments[1]; // 5. Let k be 0.\n\n        var k = 0; // 6. Repeat, while k < len\n\n        while (k < len) {\n          // a. Let Pk be ! ToString(k).\n          // b. Let kValue be ? Get(O, Pk).\n          // c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\n          // d. If testResult is true, return kValue.\n          var kValue = o[k];\n\n          if (predicate.call(thisArg, kValue, k, o)) {\n            return kValue;\n          } // e. Increase k by 1.\n\n\n          k++;\n        } // 7. Return undefined.\n\n\n        return undefined;\n      }\n    });\n  } // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes#Polyfill\n\n\n  if (!String.prototype.includes) {\n    String.prototype.includes = function (search, start) {\n      'use strict';\n\n      if (search instanceof RegExp) {\n        throw TypeError('first argument must not be a RegExp');\n      }\n\n      if (start === undefined) {\n        start = 0;\n      }\n\n      return this.indexOf(search, start) !== -1;\n    };\n  } // https://tc39.github.io/ecma262/#sec-array.prototype.includes\n\n\n  if (!Array.prototype.includes) {\n    Object.defineProperty(Array.prototype, 'includes', {\n      value: function value(searchElement, fromIndex) {\n        if (this == null) {\n          throw new TypeError('\"this\" is null or not defined');\n        } // 1. Let O be ? ToObject(this value).\n\n\n        var o = Object(this); // 2. Let len be ? ToLength(? Get(O, \"length\")).\n\n        var len = o.length >>> 0; // 3. If len is 0, return false.\n\n        if (len === 0) {\n          return false;\n        } // 4. Let n be ? ToInteger(fromIndex).\n        //    (If fromIndex is undefined, this step produces the value 0.)\n\n\n        var n = fromIndex | 0; // 5. If n ≥ 0, then\n        //  a. Let k be n.\n        // 6. Else n < 0,\n        //  a. Let k be len + n.\n        //  b. If k < 0, let k be 0.\n\n        var k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);\n\n        function sameValueZero(x, y) {\n          return x === y || typeof x === 'number' && typeof y === 'number' && isNaN(x) && isNaN(y);\n        } // 7. Repeat, while k < len\n\n\n        while (k < len) {\n          // a. Let elementK be the result of ? Get(O, ! ToString(k)).\n          // b. If SameValueZero(searchElement, elementK) is true, return true.\n          if (sameValueZero(o[k], searchElement)) {\n            return true;\n          } // c. Increase k by 1.\n\n\n          k++;\n        } // 8. Return false\n\n\n        return false;\n      }\n    });\n  } // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Polyfill\n\n\n  if (typeof Object.assign !== 'function') {\n    // Must be writable: true, enumerable: false, configurable: true\n    Object.defineProperty(Object, \"assign\", {\n      value: function assign(target, varArgs) {\n        // .length of function is 2\n        'use strict';\n\n        if (target === null || target === undefined) {\n          throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        var to = Object(target);\n\n        for (var index = 1; index < arguments.length; index++) {\n          var nextSource = arguments[index];\n\n          if (nextSource !== null && nextSource !== undefined) {\n            for (var nextKey in nextSource) {\n              // Avoid bugs when hasOwnProperty is shadowed\n              if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n                to[nextKey] = nextSource[nextKey];\n              }\n            }\n          }\n        }\n\n        return to;\n      },\n      writable: true,\n      configurable: true\n    });\n  }\n\n  var ColumnManager = function ColumnManager(table) {\n    this.table = table; //hold parent table\n\n    this.blockHozScrollEvent = false;\n    this.headersElement = this.createHeadersElement();\n    this.element = this.createHeaderElement(); //containing element\n\n    this.rowManager = null; //hold row manager object\n\n    this.columns = []; // column definition object\n\n    this.columnsByIndex = []; //columns by index\n\n    this.columnsByField = {}; //columns by field\n\n    this.scrollLeft = 0;\n    this.element.insertBefore(this.headersElement, this.element.firstChild);\n  }; ////////////// Setup Functions /////////////////\n\n\n  ColumnManager.prototype.createHeadersElement = function () {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-headers\");\n    return el;\n  };\n\n  ColumnManager.prototype.createHeaderElement = function () {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-header\");\n\n    if (!this.table.options.headerVisible) {\n      el.classList.add(\"tabulator-header-hidden\");\n    }\n\n    return el;\n  };\n\n  ColumnManager.prototype.initialize = function () {\n    var self = this; //scroll body along with header\n    // self.element.addEventListener(\"scroll\", function(e){\n    // \tif(!self.blockHozScrollEvent){\n    // \t\tself.table.rowManager.scrollHorizontal(self.element.scrollLeft);\n    // \t}\n    // });\n  }; //link to row manager\n\n\n  ColumnManager.prototype.setRowManager = function (manager) {\n    this.rowManager = manager;\n  }; //return containing element\n\n\n  ColumnManager.prototype.getElement = function () {\n    return this.element;\n  }; //return header containing element\n\n\n  ColumnManager.prototype.getHeadersElement = function () {\n    return this.headersElement;\n  }; // ColumnManager.prototype.tempScrollBlock = function(){\n  // \tclearTimeout(this.blockHozScrollEvent);\n  // \tthis.blockHozScrollEvent = setTimeout(() => {this.blockHozScrollEvent = false;}, 50);\n  // }\n  //scroll horizontally to match table body\n\n\n  ColumnManager.prototype.scrollHorizontal = function (left) {\n    var hozAdjust = 0,\n        scrollWidth = this.element.scrollWidth - this.table.element.clientWidth; // this.tempScrollBlock();\n\n    this.element.scrollLeft = left; //adjust for vertical scrollbar moving table when present\n\n    if (left > scrollWidth) {\n      hozAdjust = left - scrollWidth;\n      this.element.style.marginLeft = -hozAdjust + \"px\";\n    } else {\n      this.element.style.marginLeft = 0;\n    } //keep frozen columns fixed in position\n    //this._calcFrozenColumnsPos(hozAdjust + 3);\n\n\n    this.scrollLeft = left;\n\n    if (this.table.modExists(\"frozenColumns\")) {\n      this.table.modules.frozenColumns.scrollHorizontal();\n    }\n  }; ///////////// Column Setup Functions /////////////\n\n\n  ColumnManager.prototype.generateColumnsFromRowData = function (data) {\n    var cols = [],\n        row,\n        sorter;\n\n    if (data && data.length) {\n      row = data[0];\n\n      for (var key in row) {\n        var col = {\n          field: key,\n          title: key\n        };\n        var value = row[key];\n\n        switch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n          case \"undefined\":\n            sorter = \"string\";\n            break;\n\n          case \"boolean\":\n            sorter = \"boolean\";\n            break;\n\n          case \"object\":\n            if (Array.isArray(value)) {\n              sorter = \"array\";\n            } else {\n              sorter = \"string\";\n            }\n\n            break;\n\n          default:\n            if (!isNaN(value) && value !== \"\") {\n              sorter = \"number\";\n            } else {\n              if (value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)) {\n                sorter = \"alphanum\";\n              } else {\n                sorter = \"string\";\n              }\n            }\n\n            break;\n        }\n\n        col.sorter = sorter;\n        cols.push(col);\n      }\n\n      this.table.options.columns = cols;\n      this.setColumns(this.table.options.columns);\n    }\n  };\n\n  ColumnManager.prototype.setColumns = function (cols, row) {\n    var self = this;\n\n    while (self.headersElement.firstChild) {\n      self.headersElement.removeChild(self.headersElement.firstChild);\n    }\n\n    self.columns = [];\n    self.columnsByIndex = [];\n    self.columnsByField = {}; //reset frozen columns\n\n    if (self.table.modExists(\"frozenColumns\")) {\n      self.table.modules.frozenColumns.reset();\n    }\n\n    cols.forEach(function (def, i) {\n      self._addColumn(def);\n    });\n\n    self._reIndexColumns();\n\n    if (self.table.options.responsiveLayout && self.table.modExists(\"responsiveLayout\", true)) {\n      self.table.modules.responsiveLayout.initialize();\n    }\n\n    self.redraw(true);\n  };\n\n  ColumnManager.prototype._addColumn = function (definition, before, nextToColumn) {\n    var column = new Column(definition, this),\n        colEl = column.getElement(),\n        index = nextToColumn ? this.findColumnIndex(nextToColumn) : nextToColumn;\n\n    if (nextToColumn && index > -1) {\n      var parentIndex = this.columns.indexOf(nextToColumn.getTopColumn());\n      var nextEl = nextToColumn.getElement();\n\n      if (before) {\n        this.columns.splice(parentIndex, 0, column);\n        nextEl.parentNode.insertBefore(colEl, nextEl);\n      } else {\n        this.columns.splice(parentIndex + 1, 0, column);\n        nextEl.parentNode.insertBefore(colEl, nextEl.nextSibling);\n      }\n    } else {\n      if (before) {\n        this.columns.unshift(column);\n        this.headersElement.insertBefore(column.getElement(), this.headersElement.firstChild);\n      } else {\n        this.columns.push(column);\n        this.headersElement.appendChild(column.getElement());\n      }\n\n      column.columnRendered();\n    }\n\n    return column;\n  };\n\n  ColumnManager.prototype.registerColumnField = function (col) {\n    if (col.definition.field) {\n      this.columnsByField[col.definition.field] = col;\n    }\n  };\n\n  ColumnManager.prototype.registerColumnPosition = function (col) {\n    this.columnsByIndex.push(col);\n  };\n\n  ColumnManager.prototype._reIndexColumns = function () {\n    this.columnsByIndex = [];\n    this.columns.forEach(function (column) {\n      column.reRegisterPosition();\n    });\n  }; //ensure column headers take up the correct amount of space in column groups\n\n\n  ColumnManager.prototype._verticalAlignHeaders = function () {\n    var self = this,\n        minHeight = 0;\n    self.columns.forEach(function (column) {\n      var height;\n      column.clearVerticalAlign();\n      height = column.getHeight();\n\n      if (height > minHeight) {\n        minHeight = height;\n      }\n    });\n    self.columns.forEach(function (column) {\n      column.verticalAlign(self.table.options.columnHeaderVertAlign, minHeight);\n    });\n    self.rowManager.adjustTableSize();\n  }; //////////////// Column Details /////////////////\n\n\n  ColumnManager.prototype.findColumn = function (subject) {\n    var self = this;\n\n    if ((typeof subject === 'undefined' ? 'undefined' : _typeof(subject)) == \"object\") {\n      if (subject instanceof Column) {\n        //subject is column element\n        return subject;\n      } else if (subject instanceof ColumnComponent) {\n        //subject is public column component\n        return subject._getSelf() || false;\n      } else if (typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement) {\n        //subject is a HTML element of the column header\n        var match = self.columns.find(function (column) {\n          return column.element === subject;\n        });\n        return match || false;\n      }\n    } else {\n      //subject should be treated as the field name of the column\n      return this.columnsByField[subject] || false;\n    } //catch all for any other type of input\n\n\n    return false;\n  };\n\n  ColumnManager.prototype.getColumnByField = function (field) {\n    return this.columnsByField[field];\n  };\n\n  ColumnManager.prototype.getColumnsByFieldRoot = function (root) {\n    var _this = this;\n\n    var matches = [];\n    Object.keys(this.columnsByField).forEach(function (field) {\n      var fieldRoot = field.split(\".\")[0];\n\n      if (fieldRoot === root) {\n        matches.push(_this.columnsByField[field]);\n      }\n    });\n    return matches;\n  };\n\n  ColumnManager.prototype.getColumnByIndex = function (index) {\n    return this.columnsByIndex[index];\n  };\n\n  ColumnManager.prototype.getFirstVisibileColumn = function (index) {\n    var index = this.columnsByIndex.findIndex(function (col) {\n      return col.visible;\n    });\n    return index > -1 ? this.columnsByIndex[index] : false;\n  };\n\n  ColumnManager.prototype.getColumns = function () {\n    return this.columns;\n  };\n\n  ColumnManager.prototype.findColumnIndex = function (column) {\n    return this.columnsByIndex.findIndex(function (col) {\n      return column === col;\n    });\n  }; //return all columns that are not groups\n\n\n  ColumnManager.prototype.getRealColumns = function () {\n    return this.columnsByIndex;\n  }; //travers across columns and call action\n\n\n  ColumnManager.prototype.traverse = function (callback) {\n    var self = this;\n    self.columnsByIndex.forEach(function (column, i) {\n      callback(column, i);\n    });\n  }; //get defintions of actual columns\n\n\n  ColumnManager.prototype.getDefinitions = function (active) {\n    var self = this,\n        output = [];\n    self.columnsByIndex.forEach(function (column) {\n      if (!active || active && column.visible) {\n        output.push(column.getDefinition());\n      }\n    });\n    return output;\n  }; //get full nested definition tree\n\n\n  ColumnManager.prototype.getDefinitionTree = function () {\n    var self = this,\n        output = [];\n    self.columns.forEach(function (column) {\n      output.push(column.getDefinition(true));\n    });\n    return output;\n  };\n\n  ColumnManager.prototype.getComponents = function (structured) {\n    var self = this,\n        output = [],\n        columns = structured ? self.columns : self.columnsByIndex;\n    columns.forEach(function (column) {\n      output.push(column.getComponent());\n    });\n    return output;\n  };\n\n  ColumnManager.prototype.getWidth = function () {\n    var width = 0;\n    this.columnsByIndex.forEach(function (column) {\n      if (column.visible) {\n        width += column.getWidth();\n      }\n    });\n    return width;\n  };\n\n  ColumnManager.prototype.moveColumn = function (from, to, after) {\n    this.moveColumnActual(from, to, after);\n\n    if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n      this.table.modules.responsiveLayout.initialize();\n    }\n\n    if (this.table.modExists(\"columnCalcs\")) {\n      this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\n    }\n\n    to.element.parentNode.insertBefore(from.element, to.element);\n\n    if (after) {\n      to.element.parentNode.insertBefore(to.element, from.element);\n    }\n\n    this._verticalAlignHeaders();\n\n    this.table.rowManager.reinitialize();\n  };\n\n  ColumnManager.prototype.moveColumnActual = function (from, to, after) {\n    if (from.parent.isGroup) {\n      this._moveColumnInArray(from.parent.columns, from, to, after);\n    } else {\n      this._moveColumnInArray(this.columns, from, to, after);\n    }\n\n    this._moveColumnInArray(this.columnsByIndex, from, to, after, true);\n\n    if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n      this.table.modules.responsiveLayout.initialize();\n    }\n\n    if (this.table.options.columnMoved) {\n      this.table.options.columnMoved.call(this.table, from.getComponent(), this.table.columnManager.getComponents());\n    }\n\n    if (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns) {\n      this.table.modules.persistence.save(\"columns\");\n    }\n  };\n\n  ColumnManager.prototype._moveColumnInArray = function (columns, from, to, after, updateRows) {\n    var fromIndex = columns.indexOf(from),\n        toIndex;\n\n    if (fromIndex > -1) {\n      columns.splice(fromIndex, 1);\n      toIndex = columns.indexOf(to);\n\n      if (toIndex > -1) {\n        if (after) {\n          toIndex = toIndex + 1;\n        }\n      } else {\n        toIndex = fromIndex;\n      }\n\n      columns.splice(toIndex, 0, from);\n\n      if (updateRows) {\n        this.table.rowManager.rows.forEach(function (row) {\n          if (row.cells.length) {\n            var cell = row.cells.splice(fromIndex, 1)[0];\n            row.cells.splice(toIndex, 0, cell);\n          }\n        });\n      }\n    }\n  };\n\n  ColumnManager.prototype.scrollToColumn = function (column, position, ifVisible) {\n    var _this2 = this;\n\n    var left = 0,\n        offset = 0,\n        adjust = 0,\n        colEl = column.getElement();\n    return new Promise(function (resolve, reject) {\n      if (typeof position === \"undefined\") {\n        position = _this2.table.options.scrollToColumnPosition;\n      }\n\n      if (typeof ifVisible === \"undefined\") {\n        ifVisible = _this2.table.options.scrollToColumnIfVisible;\n      }\n\n      if (column.visible) {\n        //align to correct position\n        switch (position) {\n          case \"middle\":\n          case \"center\":\n            adjust = -_this2.element.clientWidth / 2;\n            break;\n\n          case \"right\":\n            adjust = colEl.clientWidth - _this2.headersElement.clientWidth;\n            break;\n        } //check column visibility\n\n\n        if (!ifVisible) {\n          offset = colEl.offsetLeft;\n\n          if (offset > 0 && offset + colEl.offsetWidth < _this2.element.clientWidth) {\n            return false;\n          }\n        } //calculate scroll position\n\n\n        left = colEl.offsetLeft + _this2.element.scrollLeft + adjust;\n        left = Math.max(Math.min(left, _this2.table.rowManager.element.scrollWidth - _this2.table.rowManager.element.clientWidth), 0);\n\n        _this2.table.rowManager.scrollHorizontal(left);\n\n        _this2.scrollHorizontal(left);\n\n        resolve();\n      } else {\n        console.warn(\"Scroll Error - Column not visible\");\n        reject(\"Scroll Error - Column not visible\");\n      }\n    });\n  }; //////////////// Cell Management /////////////////\n\n\n  ColumnManager.prototype.generateCells = function (row) {\n    var self = this;\n    var cells = [];\n    self.columnsByIndex.forEach(function (column) {\n      cells.push(column.generateCell(row));\n    });\n    return cells;\n  }; //////////////// Column Management /////////////////\n\n\n  ColumnManager.prototype.getFlexBaseWidth = function () {\n    var self = this,\n        totalWidth = self.table.element.clientWidth,\n        //table element width\n    fixedWidth = 0; //adjust for vertical scrollbar if present\n\n    if (self.rowManager.element.scrollHeight > self.rowManager.element.clientHeight) {\n      totalWidth -= self.rowManager.element.offsetWidth - self.rowManager.element.clientWidth;\n    }\n\n    this.columnsByIndex.forEach(function (column) {\n      var width, minWidth, colWidth;\n\n      if (column.visible) {\n        width = column.definition.width || 0;\n        minWidth = typeof column.minWidth == \"undefined\" ? self.table.options.columnMinWidth : parseInt(column.minWidth);\n\n        if (typeof width == \"string\") {\n          if (width.indexOf(\"%\") > -1) {\n            colWidth = totalWidth / 100 * parseInt(width);\n          } else {\n            colWidth = parseInt(width);\n          }\n        } else {\n          colWidth = width;\n        }\n\n        fixedWidth += colWidth > minWidth ? colWidth : minWidth;\n      }\n    });\n    return fixedWidth;\n  };\n\n  ColumnManager.prototype.addColumn = function (definition, before, nextToColumn) {\n    var _this3 = this;\n\n    return new Promise(function (resolve, reject) {\n      var column = _this3._addColumn(definition, before, nextToColumn);\n\n      _this3._reIndexColumns();\n\n      if (_this3.table.options.responsiveLayout && _this3.table.modExists(\"responsiveLayout\", true)) {\n        _this3.table.modules.responsiveLayout.initialize();\n      }\n\n      if (_this3.table.modExists(\"columnCalcs\")) {\n        _this3.table.modules.columnCalcs.recalc(_this3.table.rowManager.activeRows);\n      }\n\n      _this3.redraw();\n\n      if (_this3.table.modules.layout.getMode() != \"fitColumns\") {\n        column.reinitializeWidth();\n      }\n\n      _this3._verticalAlignHeaders();\n\n      _this3.table.rowManager.reinitialize();\n\n      resolve(column);\n    });\n  }; //remove column from system\n\n\n  ColumnManager.prototype.deregisterColumn = function (column) {\n    var field = column.getField(),\n        index; //remove from field list\n\n    if (field) {\n      delete this.columnsByField[field];\n    } //remove from index list\n\n\n    index = this.columnsByIndex.indexOf(column);\n\n    if (index > -1) {\n      this.columnsByIndex.splice(index, 1);\n    } //remove from column list\n\n\n    index = this.columns.indexOf(column);\n\n    if (index > -1) {\n      this.columns.splice(index, 1);\n    }\n\n    if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n      this.table.modules.responsiveLayout.initialize();\n    }\n\n    this.redraw();\n  }; //redraw columns\n\n\n  ColumnManager.prototype.redraw = function (force) {\n    if (force) {\n      if (Tabulator.prototype.helpers.elVisible(this.element)) {\n        this._verticalAlignHeaders();\n      }\n\n      this.table.rowManager.resetScroll();\n      this.table.rowManager.reinitialize();\n    }\n\n    if ([\"fitColumns\", \"fitDataStretch\"].indexOf(this.table.modules.layout.getMode()) > -1) {\n      this.table.modules.layout.layout();\n    } else {\n      if (force) {\n        this.table.modules.layout.layout();\n      } else {\n        if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n          this.table.modules.responsiveLayout.update();\n        }\n      }\n    }\n\n    if (this.table.modExists(\"frozenColumns\")) {\n      this.table.modules.frozenColumns.layout();\n    }\n\n    if (this.table.modExists(\"columnCalcs\")) {\n      this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\n    }\n\n    if (force) {\n      if (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns) {\n        this.table.modules.persistence.save(\"columns\");\n      }\n\n      if (this.table.modExists(\"columnCalcs\")) {\n        this.table.modules.columnCalcs.redraw();\n      }\n    }\n\n    this.table.footerManager.redraw();\n  }; //public column object\n\n\n  var ColumnComponent = function ColumnComponent(column) {\n    this._column = column;\n    this.type = \"ColumnComponent\";\n  };\n\n  ColumnComponent.prototype.getElement = function () {\n    return this._column.getElement();\n  };\n\n  ColumnComponent.prototype.getDefinition = function () {\n    return this._column.getDefinition();\n  };\n\n  ColumnComponent.prototype.getField = function () {\n    return this._column.getField();\n  };\n\n  ColumnComponent.prototype.getCells = function () {\n    var cells = [];\n\n    this._column.cells.forEach(function (cell) {\n      cells.push(cell.getComponent());\n    });\n\n    return cells;\n  };\n\n  ColumnComponent.prototype.getVisibility = function () {\n    console.warn(\"getVisibility function is deprecated, you should now use the isVisible function\");\n    return this._column.visible;\n  };\n\n  ColumnComponent.prototype.isVisible = function () {\n    return this._column.visible;\n  };\n\n  ColumnComponent.prototype.show = function () {\n    if (this._column.isGroup) {\n      this._column.columns.forEach(function (column) {\n        column.show();\n      });\n    } else {\n      this._column.show();\n    }\n  };\n\n  ColumnComponent.prototype.hide = function () {\n    if (this._column.isGroup) {\n      this._column.columns.forEach(function (column) {\n        column.hide();\n      });\n    } else {\n      this._column.hide();\n    }\n  };\n\n  ColumnComponent.prototype.toggle = function () {\n    if (this._column.visible) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  };\n\n  ColumnComponent.prototype.delete = function () {\n    return this._column.delete();\n  };\n\n  ColumnComponent.prototype.getSubColumns = function () {\n    var output = [];\n\n    if (this._column.columns.length) {\n      this._column.columns.forEach(function (column) {\n        output.push(column.getComponent());\n      });\n    }\n\n    return output;\n  };\n\n  ColumnComponent.prototype.getParentColumn = function () {\n    return this._column.parent instanceof Column ? this._column.parent.getComponent() : false;\n  };\n\n  ColumnComponent.prototype._getSelf = function () {\n    return this._column;\n  };\n\n  ColumnComponent.prototype.scrollTo = function () {\n    return this._column.table.columnManager.scrollToColumn(this._column);\n  };\n\n  ColumnComponent.prototype.getTable = function () {\n    return this._column.table;\n  };\n\n  ColumnComponent.prototype.headerFilterFocus = function () {\n    if (this._column.table.modExists(\"filter\", true)) {\n      this._column.table.modules.filter.setHeaderFilterFocus(this._column);\n    }\n  };\n\n  ColumnComponent.prototype.reloadHeaderFilter = function () {\n    if (this._column.table.modExists(\"filter\", true)) {\n      this._column.table.modules.filter.reloadHeaderFilter(this._column);\n    }\n  };\n\n  ColumnComponent.prototype.getHeaderFilterValue = function () {\n    if (this._column.table.modExists(\"filter\", true)) {\n      return this._column.table.modules.filter.getHeaderFilterValue(this._column);\n    }\n  };\n\n  ColumnComponent.prototype.setHeaderFilterValue = function (value) {\n    if (this._column.table.modExists(\"filter\", true)) {\n      this._column.table.modules.filter.setHeaderFilterValue(this._column, value);\n    }\n  };\n\n  ColumnComponent.prototype.move = function (to, after) {\n    var toColumn = this._column.table.columnManager.findColumn(to);\n\n    if (toColumn) {\n      this._column.table.columnManager.moveColumn(this._column, toColumn, after);\n    } else {\n      console.warn(\"Move Error - No matching column found:\", toColumn);\n    }\n  };\n\n  ColumnComponent.prototype.getNextColumn = function () {\n    var nextCol = this._column.nextColumn();\n\n    return nextCol ? nextCol.getComponent() : false;\n  };\n\n  ColumnComponent.prototype.getPrevColumn = function () {\n    var prevCol = this._column.prevColumn();\n\n    return prevCol ? prevCol.getComponent() : false;\n  };\n\n  ColumnComponent.prototype.updateDefinition = function (updates) {\n    return this._column.updateDefinition(updates);\n  };\n\n  ColumnComponent.prototype.getWidth = function () {\n    return this._column.getWidth();\n  };\n\n  ColumnComponent.prototype.setWidth = function (width) {\n    if (width === true) {\n      return this._column.reinitializeWidth(true);\n    } else {\n      return this._column.setWidth(width);\n    }\n  };\n\n  ColumnComponent.prototype.validate = function () {\n    return this._column.validate();\n  };\n\n  var Column = function Column(def, parent) {\n    var self = this;\n    this.table = parent.table;\n    this.definition = def; //column definition\n\n    this.parent = parent; //hold parent object\n\n    this.type = \"column\"; //type of element\n\n    this.columns = []; //child columns\n\n    this.cells = []; //cells bound to this column\n\n    this.element = this.createElement(); //column header element\n\n    this.contentElement = false;\n    this.titleElement = false;\n    this.groupElement = this.createGroupElement(); //column group holder element\n\n    this.isGroup = false;\n    this.tooltip = false; //hold column tooltip\n\n    this.hozAlign = \"\"; //horizontal text alignment\n\n    this.vertAlign = \"\"; //vert text alignment\n    //multi dimensional filed handling\n\n    this.field = \"\";\n    this.fieldStructure = \"\";\n    this.getFieldValue = \"\";\n    this.setFieldValue = \"\";\n    this.titleFormatterRendered = false;\n    this.setField(this.definition.field);\n\n    if (this.table.options.invalidOptionWarnings) {\n      this.checkDefinition();\n    }\n\n    this.modules = {}; //hold module variables;\n\n    this.cellEvents = {\n      cellClick: false,\n      cellDblClick: false,\n      cellContext: false,\n      cellTap: false,\n      cellDblTap: false,\n      cellTapHold: false,\n      cellMouseEnter: false,\n      cellMouseLeave: false,\n      cellMouseOver: false,\n      cellMouseOut: false,\n      cellMouseMove: false\n    };\n    this.width = null; //column width\n\n    this.widthStyled = \"\"; //column width prestyled to improve render efficiency\n\n    this.minWidth = null; //column minimum width\n\n    this.minWidthStyled = \"\"; //column minimum prestyled to improve render efficiency\n\n    this.widthFixed = false; //user has specified a width for this column\n\n    this.visible = true; //default visible state\n\n    this.component = null;\n\n    this._mapDepricatedFunctionality(); //initialize column\n\n\n    if (def.columns) {\n      this.isGroup = true;\n      def.columns.forEach(function (def, i) {\n        var newCol = new Column(def, self);\n        self.attachColumn(newCol);\n      });\n      self.checkColumnVisibility();\n    } else {\n      parent.registerColumnField(this);\n    }\n\n    if (def.rowHandle && this.table.options.movableRows !== false && this.table.modExists(\"moveRow\")) {\n      this.table.modules.moveRow.setHandle(true);\n    }\n\n    this._buildHeader();\n\n    this.bindModuleColumns();\n  };\n\n  Column.prototype.createElement = function () {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-col\");\n    el.setAttribute(\"role\", \"columnheader\");\n    el.setAttribute(\"aria-sort\", \"none\");\n    return el;\n  };\n\n  Column.prototype.createGroupElement = function () {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-col-group-cols\");\n    return el;\n  };\n\n  Column.prototype.checkDefinition = function () {\n    var _this4 = this;\n\n    Object.keys(this.definition).forEach(function (key) {\n      if (_this4.defaultOptionList.indexOf(key) === -1) {\n        console.warn(\"Invalid column definition option in '\" + (_this4.field || _this4.definition.title) + \"' column:\", key);\n      }\n    });\n  };\n\n  Column.prototype.setField = function (field) {\n    this.field = field;\n    this.fieldStructure = field ? this.table.options.nestedFieldSeparator ? field.split(this.table.options.nestedFieldSeparator) : [field] : [];\n    this.getFieldValue = this.fieldStructure.length > 1 ? this._getNestedData : this._getFlatData;\n    this.setFieldValue = this.fieldStructure.length > 1 ? this._setNestedData : this._setFlatData;\n  }; //register column position with column manager\n\n\n  Column.prototype.registerColumnPosition = function (column) {\n    this.parent.registerColumnPosition(column);\n  }; //register column position with column manager\n\n\n  Column.prototype.registerColumnField = function (column) {\n    this.parent.registerColumnField(column);\n  }; //trigger position registration\n\n\n  Column.prototype.reRegisterPosition = function () {\n    if (this.isGroup) {\n      this.columns.forEach(function (column) {\n        column.reRegisterPosition();\n      });\n    } else {\n      this.registerColumnPosition(this);\n    }\n  };\n\n  Column.prototype._mapDepricatedFunctionality = function () {\n    if (typeof this.definition.hideInHtml !== \"undefined\") {\n      this.definition.htmlOutput = !this.definition.hideInHtml;\n      console.warn(\"hideInHtml column definition property is deprecated, you should now use htmlOutput\");\n    }\n\n    if (typeof this.definition.align !== \"undefined\") {\n      this.definition.hozAlign = this.definition.align;\n      console.warn(\"align column definition property is deprecated, you should now use hozAlign\");\n    }\n\n    if (typeof this.definition.downloadTitle !== \"undefined\") {\n      this.definition.titleDownload = this.definition.downloadTitle;\n      console.warn(\"downloadTitle definition property is deprecated, you should now use titleDownload\");\n    }\n  };\n\n  Column.prototype.setTooltip = function () {\n    var self = this,\n        def = self.definition; //set header tooltips\n\n    var tooltip = def.headerTooltip || def.tooltip === false ? def.headerTooltip : self.table.options.tooltipsHeader;\n\n    if (tooltip) {\n      if (tooltip === true) {\n        if (def.field) {\n          self.table.modules.localize.bind(\"columns|\" + def.field, function (value) {\n            self.element.setAttribute(\"title\", value || def.title);\n          });\n        } else {\n          self.element.setAttribute(\"title\", def.title);\n        }\n      } else {\n        if (typeof tooltip == \"function\") {\n          tooltip = tooltip(self.getComponent());\n\n          if (tooltip === false) {\n            tooltip = \"\";\n          }\n        }\n\n        self.element.setAttribute(\"title\", tooltip);\n      }\n    } else {\n      self.element.setAttribute(\"title\", \"\");\n    }\n  }; //build header element\n\n\n  Column.prototype._buildHeader = function () {\n    var self = this,\n        def = self.definition;\n\n    while (self.element.firstChild) {\n      self.element.removeChild(self.element.firstChild);\n    }\n\n    if (def.headerVertical) {\n      self.element.classList.add(\"tabulator-col-vertical\");\n\n      if (def.headerVertical === \"flip\") {\n        self.element.classList.add(\"tabulator-col-vertical-flip\");\n      }\n    }\n\n    self.contentElement = self._bindEvents();\n    self.contentElement = self._buildColumnHeaderContent();\n    self.element.appendChild(self.contentElement);\n\n    if (self.isGroup) {\n      self._buildGroupHeader();\n    } else {\n      self._buildColumnHeader();\n    }\n\n    self.setTooltip(); //set resizable handles\n\n    if (self.table.options.resizableColumns && self.table.modExists(\"resizeColumns\")) {\n      self.table.modules.resizeColumns.initializeColumn(\"header\", self, self.element);\n    } //set resizable handles\n\n\n    if (def.headerFilter && self.table.modExists(\"filter\") && self.table.modExists(\"edit\")) {\n      if (typeof def.headerFilterPlaceholder !== \"undefined\" && def.field) {\n        self.table.modules.localize.setHeaderFilterColumnPlaceholder(def.field, def.headerFilterPlaceholder);\n      }\n\n      self.table.modules.filter.initializeColumn(self);\n    } //set resizable handles\n\n\n    if (self.table.modExists(\"frozenColumns\")) {\n      self.table.modules.frozenColumns.initializeColumn(self);\n    } //set movable column\n\n\n    if (self.table.options.movableColumns && !self.isGroup && self.table.modExists(\"moveColumn\")) {\n      self.table.modules.moveColumn.initializeColumn(self);\n    } //set calcs column\n\n\n    if ((def.topCalc || def.bottomCalc) && self.table.modExists(\"columnCalcs\")) {\n      self.table.modules.columnCalcs.initializeColumn(self);\n    } //handle persistence\n\n\n    if (self.table.modExists(\"persistence\") && self.table.modules.persistence.config.columns) {\n      self.table.modules.persistence.initializeColumn(self);\n    } //update header tooltip on mouse enter\n\n\n    self.element.addEventListener(\"mouseenter\", function (e) {\n      self.setTooltip();\n    });\n  };\n\n  Column.prototype._bindEvents = function () {\n    var self = this,\n        def = self.definition,\n        dblTap,\n        tapHold,\n        tap; //setup header click event bindings\n\n    if (typeof def.headerClick == \"function\") {\n      self.element.addEventListener(\"click\", function (e) {\n        def.headerClick(e, self.getComponent());\n      });\n    }\n\n    if (typeof def.headerDblClick == \"function\") {\n      self.element.addEventListener(\"dblclick\", function (e) {\n        def.headerDblClick(e, self.getComponent());\n      });\n    }\n\n    if (typeof def.headerContext == \"function\") {\n      self.element.addEventListener(\"contextmenu\", function (e) {\n        def.headerContext(e, self.getComponent());\n      });\n    } //setup header tap event bindings\n\n\n    if (typeof def.headerTap == \"function\") {\n      tap = false;\n      self.element.addEventListener(\"touchstart\", function (e) {\n        tap = true;\n      }, {\n        passive: true\n      });\n      self.element.addEventListener(\"touchend\", function (e) {\n        if (tap) {\n          def.headerTap(e, self.getComponent());\n        }\n\n        tap = false;\n      });\n    }\n\n    if (typeof def.headerDblTap == \"function\") {\n      dblTap = null;\n      self.element.addEventListener(\"touchend\", function (e) {\n        if (dblTap) {\n          clearTimeout(dblTap);\n          dblTap = null;\n          def.headerDblTap(e, self.getComponent());\n        } else {\n          dblTap = setTimeout(function () {\n            clearTimeout(dblTap);\n            dblTap = null;\n          }, 300);\n        }\n      });\n    }\n\n    if (typeof def.headerTapHold == \"function\") {\n      tapHold = null;\n      self.element.addEventListener(\"touchstart\", function (e) {\n        clearTimeout(tapHold);\n        tapHold = setTimeout(function () {\n          clearTimeout(tapHold);\n          tapHold = null;\n          tap = false;\n          def.headerTapHold(e, self.getComponent());\n        }, 1000);\n      }, {\n        passive: true\n      });\n      self.element.addEventListener(\"touchend\", function (e) {\n        clearTimeout(tapHold);\n        tapHold = null;\n      });\n    } //store column cell click event bindings\n\n\n    if (typeof def.cellClick == \"function\") {\n      self.cellEvents.cellClick = def.cellClick;\n    }\n\n    if (typeof def.cellDblClick == \"function\") {\n      self.cellEvents.cellDblClick = def.cellDblClick;\n    }\n\n    if (typeof def.cellContext == \"function\") {\n      self.cellEvents.cellContext = def.cellContext;\n    } //store column mouse event bindings\n\n\n    if (typeof def.cellMouseEnter == \"function\") {\n      self.cellEvents.cellMouseEnter = def.cellMouseEnter;\n    }\n\n    if (typeof def.cellMouseLeave == \"function\") {\n      self.cellEvents.cellMouseLeave = def.cellMouseLeave;\n    }\n\n    if (typeof def.cellMouseOver == \"function\") {\n      self.cellEvents.cellMouseOver = def.cellMouseOver;\n    }\n\n    if (typeof def.cellMouseOut == \"function\") {\n      self.cellEvents.cellMouseOut = def.cellMouseOut;\n    }\n\n    if (typeof def.cellMouseMove == \"function\") {\n      self.cellEvents.cellMouseMove = def.cellMouseMove;\n    } //setup column cell tap event bindings\n\n\n    if (typeof def.cellTap == \"function\") {\n      self.cellEvents.cellTap = def.cellTap;\n    }\n\n    if (typeof def.cellDblTap == \"function\") {\n      self.cellEvents.cellDblTap = def.cellDblTap;\n    }\n\n    if (typeof def.cellTapHold == \"function\") {\n      self.cellEvents.cellTapHold = def.cellTapHold;\n    } //setup column cell edit callbacks\n\n\n    if (typeof def.cellEdited == \"function\") {\n      self.cellEvents.cellEdited = def.cellEdited;\n    }\n\n    if (typeof def.cellEditing == \"function\") {\n      self.cellEvents.cellEditing = def.cellEditing;\n    }\n\n    if (typeof def.cellEditCancelled == \"function\") {\n      self.cellEvents.cellEditCancelled = def.cellEditCancelled;\n    }\n  }; //build header element for header\n\n\n  Column.prototype._buildColumnHeader = function () {\n    var self = this,\n        def = self.definition,\n        table = self.table,\n        sortable; //set column sorter\n\n    if (table.modExists(\"sort\")) {\n      table.modules.sort.initializeColumn(self, self.contentElement);\n    } //set column header context menu\n\n\n    if ((def.headerContextMenu || def.headerMenu) && table.modExists(\"menu\")) {\n      table.modules.menu.initializeColumnHeader(self);\n    } //set column formatter\n\n\n    if (table.modExists(\"format\")) {\n      table.modules.format.initializeColumn(self);\n    } //set column editor\n\n\n    if (typeof def.editor != \"undefined\" && table.modExists(\"edit\")) {\n      table.modules.edit.initializeColumn(self);\n    } //set colum validator\n\n\n    if (typeof def.validator != \"undefined\" && table.modExists(\"validate\")) {\n      table.modules.validate.initializeColumn(self);\n    } //set column mutator\n\n\n    if (table.modExists(\"mutator\")) {\n      table.modules.mutator.initializeColumn(self);\n    } //set column accessor\n\n\n    if (table.modExists(\"accessor\")) {\n      table.modules.accessor.initializeColumn(self);\n    } //set respoviveLayout\n\n\n    if (_typeof(table.options.responsiveLayout) && table.modExists(\"responsiveLayout\")) {\n      table.modules.responsiveLayout.initializeColumn(self);\n    } //set column visibility\n\n\n    if (typeof def.visible != \"undefined\") {\n      if (def.visible) {\n        self.show(true);\n      } else {\n        self.hide(true);\n      }\n    } //asign additional css classes to column header\n\n\n    if (def.cssClass) {\n      var classeNames = def.cssClass.split(\" \");\n      classeNames.forEach(function (className) {\n        self.element.classList.add(className);\n      });\n    }\n\n    if (def.field) {\n      this.element.setAttribute(\"tabulator-field\", def.field);\n    } //set min width if present\n\n\n    self.setMinWidth(typeof def.minWidth == \"undefined\" ? self.table.options.columnMinWidth : parseInt(def.minWidth));\n    self.reinitializeWidth(); //set tooltip if present\n\n    self.tooltip = self.definition.tooltip || self.definition.tooltip === false ? self.definition.tooltip : self.table.options.tooltips; //set orizontal text alignment\n\n    self.hozAlign = typeof self.definition.hozAlign == \"undefined\" ? self.table.options.cellHozAlign : self.definition.hozAlign;\n    self.vertAlign = typeof self.definition.vertAlign == \"undefined\" ? self.table.options.cellVertAlign : self.definition.vertAlign;\n  };\n\n  Column.prototype._buildColumnHeaderContent = function () {\n    var def = this.definition,\n        table = this.table;\n    var contentElement = document.createElement(\"div\");\n    contentElement.classList.add(\"tabulator-col-content\");\n    this.titleElement = this._buildColumnHeaderTitle();\n    contentElement.appendChild(this.titleElement);\n    return contentElement;\n  }; //build title element of column\n\n\n  Column.prototype._buildColumnHeaderTitle = function () {\n    var self = this,\n        def = self.definition,\n        table = self.table,\n        title;\n    var titleHolderElement = document.createElement(\"div\");\n    titleHolderElement.classList.add(\"tabulator-col-title\");\n\n    if (def.editableTitle) {\n      var titleElement = document.createElement(\"input\");\n      titleElement.classList.add(\"tabulator-title-editor\");\n      titleElement.addEventListener(\"click\", function (e) {\n        e.stopPropagation();\n        titleElement.focus();\n      });\n      titleElement.addEventListener(\"change\", function () {\n        def.title = titleElement.value;\n        table.options.columnTitleChanged.call(self.table, self.getComponent());\n      });\n      titleHolderElement.appendChild(titleElement);\n\n      if (def.field) {\n        table.modules.localize.bind(\"columns|\" + def.field, function (text) {\n          titleElement.value = text || def.title || \"&nbsp;\";\n        });\n      } else {\n        titleElement.value = def.title || \"&nbsp;\";\n      }\n    } else {\n      if (def.field) {\n        table.modules.localize.bind(\"columns|\" + def.field, function (text) {\n          self._formatColumnHeaderTitle(titleHolderElement, text || def.title || \"&nbsp;\");\n        });\n      } else {\n        self._formatColumnHeaderTitle(titleHolderElement, def.title || \"&nbsp;\");\n      }\n    }\n\n    return titleHolderElement;\n  };\n\n  Column.prototype._formatColumnHeaderTitle = function (el, title) {\n    var _this5 = this;\n\n    var formatter, contents, params, mockCell, onRendered;\n\n    if (this.definition.titleFormatter && this.table.modExists(\"format\")) {\n      formatter = this.table.modules.format.getFormatter(this.definition.titleFormatter);\n\n      onRendered = function onRendered(callback) {\n        _this5.titleFormatterRendered = callback;\n      };\n\n      mockCell = {\n        getValue: function getValue() {\n          return title;\n        },\n        getElement: function getElement() {\n          return el;\n        }\n      };\n      params = this.definition.titleFormatterParams || {};\n      params = typeof params === \"function\" ? params() : params;\n      contents = formatter.call(this.table.modules.format, mockCell, params, onRendered);\n\n      switch (typeof contents === 'undefined' ? 'undefined' : _typeof(contents)) {\n        case \"object\":\n          if (contents instanceof Node) {\n            el.appendChild(contents);\n          } else {\n            el.innerHTML = \"\";\n            console.warn(\"Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", contents);\n          }\n\n          break;\n\n        case \"undefined\":\n        case \"null\":\n          el.innerHTML = \"\";\n          break;\n\n        default:\n          el.innerHTML = contents;\n      }\n    } else {\n      el.innerHTML = title;\n    }\n  }; //build header element for column group\n\n\n  Column.prototype._buildGroupHeader = function () {\n    var _this6 = this;\n\n    this.element.classList.add(\"tabulator-col-group\");\n    this.element.setAttribute(\"role\", \"columngroup\");\n    this.element.setAttribute(\"aria-title\", this.definition.title); //asign additional css classes to column header\n\n    if (this.definition.cssClass) {\n      var classeNames = this.definition.cssClass.split(\" \");\n      classeNames.forEach(function (className) {\n        _this6.element.classList.add(className);\n      });\n    } //set column header context menu\n\n\n    if ((this.definition.headerContextMenu || this.definition.headerMenu) && this.table.modExists(\"menu\")) {\n      this.table.modules.menu.initializeColumnHeader(this);\n    }\n\n    this.element.appendChild(this.groupElement);\n  }; //flat field lookup\n\n\n  Column.prototype._getFlatData = function (data) {\n    return data[this.field];\n  }; //nested field lookup\n\n\n  Column.prototype._getNestedData = function (data) {\n    var dataObj = data,\n        structure = this.fieldStructure,\n        length = structure.length,\n        output;\n\n    for (var _i = 0; _i < length; _i++) {\n      dataObj = dataObj[structure[_i]];\n      output = dataObj;\n\n      if (!dataObj) {\n        break;\n      }\n    }\n\n    return output;\n  }; //flat field set\n\n\n  Column.prototype._setFlatData = function (data, value) {\n    if (this.field) {\n      data[this.field] = value;\n    }\n  }; //nested field set\n\n\n  Column.prototype._setNestedData = function (data, value) {\n    var dataObj = data,\n        structure = this.fieldStructure,\n        length = structure.length;\n\n    for (var _i2 = 0; _i2 < length; _i2++) {\n      if (_i2 == length - 1) {\n        dataObj[structure[_i2]] = value;\n      } else {\n        if (!dataObj[structure[_i2]]) {\n          if (typeof value !== \"undefined\") {\n            dataObj[structure[_i2]] = {};\n          } else {\n            break;\n          }\n        }\n\n        dataObj = dataObj[structure[_i2]];\n      }\n    }\n  }; //attach column to this group\n\n\n  Column.prototype.attachColumn = function (column) {\n    var self = this;\n\n    if (self.groupElement) {\n      self.columns.push(column);\n      self.groupElement.appendChild(column.getElement());\n    } else {\n      console.warn(\"Column Warning - Column being attached to another column instead of column group\");\n    }\n  }; //vertically align header in column\n\n\n  Column.prototype.verticalAlign = function (alignment, height) {\n    //calculate height of column header and group holder element\n    var parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : height || this.parent.getHeadersElement().clientHeight; // var parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : this.parent.getHeadersElement().clientHeight;\n\n    this.element.style.height = parentHeight + \"px\";\n\n    if (this.isGroup) {\n      this.groupElement.style.minHeight = parentHeight - this.contentElement.offsetHeight + \"px\";\n    } //vertically align cell contents\n\n\n    if (!this.isGroup && alignment !== \"top\") {\n      if (alignment === \"bottom\") {\n        this.element.style.paddingTop = this.element.clientHeight - this.contentElement.offsetHeight + \"px\";\n      } else {\n        this.element.style.paddingTop = (this.element.clientHeight - this.contentElement.offsetHeight) / 2 + \"px\";\n      }\n    }\n\n    this.columns.forEach(function (column) {\n      column.verticalAlign(alignment);\n    });\n  }; //clear vertical alignmenet\n\n\n  Column.prototype.clearVerticalAlign = function () {\n    this.element.style.paddingTop = \"\";\n    this.element.style.height = \"\";\n    this.element.style.minHeight = \"\";\n    this.groupElement.style.minHeight = \"\";\n    this.columns.forEach(function (column) {\n      column.clearVerticalAlign();\n    });\n  };\n\n  Column.prototype.bindModuleColumns = function () {\n    //check if rownum formatter is being used on a column\n    if (this.definition.formatter == \"rownum\") {\n      this.table.rowManager.rowNumColumn = this;\n    }\n  }; //// Retreive Column Information ////\n  //return column header element\n\n\n  Column.prototype.getElement = function () {\n    return this.element;\n  }; //return colunm group element\n\n\n  Column.prototype.getGroupElement = function () {\n    return this.groupElement;\n  }; //return field name\n\n\n  Column.prototype.getField = function () {\n    return this.field;\n  }; //return the first column in a group\n\n\n  Column.prototype.getFirstColumn = function () {\n    if (!this.isGroup) {\n      return this;\n    } else {\n      if (this.columns.length) {\n        return this.columns[0].getFirstColumn();\n      } else {\n        return false;\n      }\n    }\n  }; //return the last column in a group\n\n\n  Column.prototype.getLastColumn = function () {\n    if (!this.isGroup) {\n      return this;\n    } else {\n      if (this.columns.length) {\n        return this.columns[this.columns.length - 1].getLastColumn();\n      } else {\n        return false;\n      }\n    }\n  }; //return all columns in a group\n\n\n  Column.prototype.getColumns = function () {\n    return this.columns;\n  }; //return all columns in a group\n\n\n  Column.prototype.getCells = function () {\n    return this.cells;\n  }; //retreive the top column in a group of columns\n\n\n  Column.prototype.getTopColumn = function () {\n    if (this.parent.isGroup) {\n      return this.parent.getTopColumn();\n    } else {\n      return this;\n    }\n  }; //return column definition object\n\n\n  Column.prototype.getDefinition = function (updateBranches) {\n    var colDefs = [];\n\n    if (this.isGroup && updateBranches) {\n      this.columns.forEach(function (column) {\n        colDefs.push(column.getDefinition(true));\n      });\n      this.definition.columns = colDefs;\n    }\n\n    return this.definition;\n  }; //////////////////// Actions ////////////////////\n\n\n  Column.prototype.checkColumnVisibility = function () {\n    var visible = false;\n    this.columns.forEach(function (column) {\n      if (column.visible) {\n        visible = true;\n      }\n    });\n\n    if (visible) {\n      this.show();\n      this.parent.table.options.columnVisibilityChanged.call(this.table, this.getComponent(), false);\n    } else {\n      this.hide();\n    }\n  }; //show column\n\n\n  Column.prototype.show = function (silent, responsiveToggle) {\n    if (!this.visible) {\n      this.visible = true;\n      this.element.style.display = \"\";\n\n      if (this.parent.isGroup) {\n        this.parent.checkColumnVisibility();\n      }\n\n      this.cells.forEach(function (cell) {\n        cell.show();\n      });\n\n      if (!this.isGroup && this.width === null) {\n        this.reinitializeWidth();\n      }\n\n      this.table.columnManager._verticalAlignHeaders();\n\n      if (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns) {\n        this.table.modules.persistence.save(\"columns\");\n      }\n\n      if (!responsiveToggle && this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n        this.table.modules.responsiveLayout.updateColumnVisibility(this, this.visible);\n      }\n\n      if (!silent) {\n        this.table.options.columnVisibilityChanged.call(this.table, this.getComponent(), true);\n      }\n\n      if (this.parent.isGroup) {\n        this.parent.matchChildWidths();\n      }\n    }\n  }; //hide column\n\n\n  Column.prototype.hide = function (silent, responsiveToggle) {\n    if (this.visible) {\n      this.visible = false;\n      this.element.style.display = \"none\";\n\n      this.table.columnManager._verticalAlignHeaders();\n\n      if (this.parent.isGroup) {\n        this.parent.checkColumnVisibility();\n      }\n\n      this.cells.forEach(function (cell) {\n        cell.hide();\n      });\n\n      if (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns) {\n        this.table.modules.persistence.save(\"columns\");\n      }\n\n      if (!responsiveToggle && this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n        this.table.modules.responsiveLayout.updateColumnVisibility(this, this.visible);\n      }\n\n      if (!silent) {\n        this.table.options.columnVisibilityChanged.call(this.table, this.getComponent(), false);\n      }\n\n      if (this.parent.isGroup) {\n        this.parent.matchChildWidths();\n      }\n    }\n  };\n\n  Column.prototype.matchChildWidths = function () {\n    var childWidth = 0;\n\n    if (this.contentElement && this.columns.length) {\n      this.columns.forEach(function (column) {\n        if (column.visible) {\n          childWidth += column.getWidth();\n        }\n      });\n      this.contentElement.style.maxWidth = childWidth - 1 + \"px\";\n\n      if (this.parent.isGroup) {\n        this.parent.matchChildWidths();\n      }\n    }\n  };\n\n  Column.prototype.setWidth = function (width) {\n    this.widthFixed = true;\n    this.setWidthActual(width);\n  };\n\n  Column.prototype.setWidthActual = function (width) {\n    if (isNaN(width)) {\n      width = Math.floor(this.table.element.clientWidth / 100 * parseInt(width));\n    }\n\n    width = Math.max(this.minWidth, width);\n    this.width = width;\n    this.widthStyled = width ? width + \"px\" : \"\";\n    this.element.style.width = this.widthStyled;\n\n    if (!this.isGroup) {\n      this.cells.forEach(function (cell) {\n        cell.setWidth();\n      });\n    }\n\n    if (this.parent.isGroup) {\n      this.parent.matchChildWidths();\n    } //set resizable handles\n\n\n    if (this.table.modExists(\"frozenColumns\")) {\n      this.table.modules.frozenColumns.layout();\n    }\n  };\n\n  Column.prototype.checkCellHeights = function () {\n    var rows = [];\n    this.cells.forEach(function (cell) {\n      if (cell.row.heightInitialized) {\n        if (cell.row.getElement().offsetParent !== null) {\n          rows.push(cell.row);\n          cell.row.clearCellHeight();\n        } else {\n          cell.row.heightInitialized = false;\n        }\n      }\n    });\n    rows.forEach(function (row) {\n      row.calcHeight();\n    });\n    rows.forEach(function (row) {\n      row.setCellHeight();\n    });\n  };\n\n  Column.prototype.getWidth = function () {\n    var width = 0;\n\n    if (this.isGroup) {\n      this.columns.forEach(function (column) {\n        if (column.visible) {\n          width += column.getWidth();\n        }\n      });\n    } else {\n      width = this.width;\n    }\n\n    return width;\n  };\n\n  Column.prototype.getHeight = function () {\n    return this.element.offsetHeight;\n  };\n\n  Column.prototype.setMinWidth = function (minWidth) {\n    this.minWidth = minWidth;\n    this.minWidthStyled = minWidth ? minWidth + \"px\" : \"\";\n    this.element.style.minWidth = this.minWidthStyled;\n    this.cells.forEach(function (cell) {\n      cell.setMinWidth();\n    });\n  };\n\n  Column.prototype.delete = function () {\n    var _this7 = this;\n\n    return new Promise(function (resolve, reject) {\n      if (_this7.isGroup) {\n        _this7.columns.forEach(function (column) {\n          column.delete();\n        });\n      } //cancel edit if column is currently being edited\n\n\n      if (_this7.table.modExists(\"edit\")) {\n        if (_this7.table.modules.edit.currentCell.column === _this7) {\n          _this7.table.modules.edit.cancelEdit();\n        }\n      }\n\n      var cellCount = _this7.cells.length;\n\n      for (var _i3 = 0; _i3 < cellCount; _i3++) {\n        _this7.cells[0].delete();\n      }\n\n      _this7.element.parentNode.removeChild(_this7.element);\n\n      _this7.table.columnManager.deregisterColumn(_this7);\n\n      resolve();\n    });\n  };\n\n  Column.prototype.columnRendered = function () {\n    if (this.titleFormatterRendered) {\n      this.titleFormatterRendered();\n    }\n  };\n\n  Column.prototype.validate = function () {\n    var invalid = [];\n    this.cells.forEach(function (cell) {\n      if (!cell.validate()) {\n        invalid.push(cell.getComponent());\n      }\n    });\n    return invalid.length ? invalid : true;\n  }; //////////////// Cell Management /////////////////\n  //generate cell for this column\n\n\n  Column.prototype.generateCell = function (row) {\n    var self = this;\n    var cell = new Cell(self, row);\n    this.cells.push(cell);\n    return cell;\n  };\n\n  Column.prototype.nextColumn = function () {\n    var index = this.table.columnManager.findColumnIndex(this);\n    return index > -1 ? this._nextVisibleColumn(index + 1) : false;\n  };\n\n  Column.prototype._nextVisibleColumn = function (index) {\n    var column = this.table.columnManager.getColumnByIndex(index);\n    return !column || column.visible ? column : this._nextVisibleColumn(index + 1);\n  };\n\n  Column.prototype.prevColumn = function () {\n    var index = this.table.columnManager.findColumnIndex(this);\n    return index > -1 ? this._prevVisibleColumn(index - 1) : false;\n  };\n\n  Column.prototype._prevVisibleColumn = function (index) {\n    var column = this.table.columnManager.getColumnByIndex(index);\n    return !column || column.visible ? column : this._prevVisibleColumn(index - 1);\n  };\n\n  Column.prototype.reinitializeWidth = function (force) {\n    this.widthFixed = false; //set width if present\n\n    if (typeof this.definition.width !== \"undefined\" && !force) {\n      this.setWidth(this.definition.width);\n    } //hide header filters to prevent them altering column width\n\n\n    if (this.table.modExists(\"filter\")) {\n      this.table.modules.filter.hideHeaderFilterElements();\n    }\n\n    this.fitToData(); //show header filters again after layout is complete\n\n    if (this.table.modExists(\"filter\")) {\n      this.table.modules.filter.showHeaderFilterElements();\n    }\n  }; //set column width to maximum cell width\n\n\n  Column.prototype.fitToData = function () {\n    var self = this;\n\n    if (!this.widthFixed) {\n      this.element.style.width = \"\";\n      self.cells.forEach(function (cell) {\n        cell.clearWidth();\n      });\n    }\n\n    var maxWidth = this.element.offsetWidth;\n\n    if (!self.width || !this.widthFixed) {\n      self.cells.forEach(function (cell) {\n        var width = cell.getWidth();\n\n        if (width > maxWidth) {\n          maxWidth = width;\n        }\n      });\n\n      if (maxWidth) {\n        self.setWidthActual(maxWidth + 1);\n      }\n    }\n  };\n\n  Column.prototype.updateDefinition = function (updates) {\n    var _this8 = this;\n\n    return new Promise(function (resolve, reject) {\n      var definition;\n\n      if (!_this8.isGroup) {\n        definition = Object.assign({}, _this8.getDefinition());\n        definition = Object.assign(definition, updates);\n\n        _this8.table.columnManager.addColumn(definition, false, _this8).then(function (column) {\n          if (definition.field == _this8.field) {\n            _this8.field = false; //cleair field name to prevent deletion of duplicate column from arrays\n          }\n\n          _this8.delete().then(function () {\n            resolve(column.getComponent());\n          }).catch(function (err) {\n            reject(err);\n          });\n        }).catch(function (err) {\n          reject(err);\n        });\n      } else {\n        console.warn(\"Column Update Error - The updateDefintion function is only available on columns, not column groups\");\n        reject(\"Column Update Error - The updateDefintion function is only available on columns, not column groups\");\n      }\n    });\n  };\n\n  Column.prototype.deleteCell = function (cell) {\n    var index = this.cells.indexOf(cell);\n\n    if (index > -1) {\n      this.cells.splice(index, 1);\n    }\n  };\n\n  Column.prototype.defaultOptionList = [\"title\", \"field\", \"columns\", \"visible\", \"align\", \"hozAlign\", \"vertAlign\", \"width\", \"minWidth\", \"widthGrow\", \"widthShrink\", \"resizable\", \"frozen\", \"responsive\", \"tooltip\", \"cssClass\", \"rowHandle\", \"hideInHtml\", \"print\", \"htmlOutput\", \"sorter\", \"sorterParams\", \"formatter\", \"formatterParams\", \"variableHeight\", \"editable\", \"editor\", \"editorParams\", \"validator\", \"mutator\", \"mutatorParams\", \"mutatorData\", \"mutatorDataParams\", \"mutatorEdit\", \"mutatorEditParams\", \"mutatorClipboard\", \"mutatorClipboardParams\", \"accessor\", \"accessorParams\", \"accessorData\", \"accessorDataParams\", \"accessorDownload\", \"accessorDownloadParams\", \"accessorClipboard\", \"accessorClipboardParams\", \"accessorPrint\", \"accessorPrintParams\", \"accessorHtmlOutput\", \"accessorHtmlOutputParams\", \"clipboard\", \"download\", \"downloadTitle\", \"topCalc\", \"topCalcParams\", \"topCalcFormatter\", \"topCalcFormatterParams\", \"bottomCalc\", \"bottomCalcParams\", \"bottomCalcFormatter\", \"bottomCalcFormatterParams\", \"cellClick\", \"cellDblClick\", \"cellContext\", \"cellTap\", \"cellDblTap\", \"cellTapHold\", \"cellMouseEnter\", \"cellMouseLeave\", \"cellMouseOver\", \"cellMouseOut\", \"cellMouseMove\", \"cellEditing\", \"cellEdited\", \"cellEditCancelled\", \"headerSort\", \"headerSortStartingDir\", \"headerSortTristate\", \"headerClick\", \"headerDblClick\", \"headerContext\", \"headerTap\", \"headerDblTap\", \"headerTapHold\", \"headerTooltip\", \"headerVertical\", \"editableTitle\", \"titleFormatter\", \"titleFormatterParams\", \"headerFilter\", \"headerFilterPlaceholder\", \"headerFilterParams\", \"headerFilterEmptyCheck\", \"headerFilterFunc\", \"headerFilterFuncParams\", \"headerFilterLiveFilter\", \"print\", \"headerContextMenu\", \"headerMenu\", \"contextMenu\", \"formatterPrint\", \"formatterPrintParams\", \"formatterClipboard\", \"formatterClipboardParams\", \"formatterHtmlOutput\", \"formatterHtmlOutputParams\", \"titlePrint\", \"titleClipboard\", \"titleHtmlOutput\", \"titleDownload\"]; //////////////// Event Bindings /////////////////\n  //////////////// Object Generation /////////////////\n\n  Column.prototype.getComponent = function () {\n    if (!this.component) {\n      this.component = new ColumnComponent(this);\n    }\n\n    return this.component;\n  };\n\n  var RowManager = function RowManager(table) {\n    this.table = table;\n    this.element = this.createHolderElement(); //containing element\n\n    this.tableElement = this.createTableElement(); //table element\n\n    this.heightFixer = this.createTableElement(); //table element\n\n    this.columnManager = null; //hold column manager object\n\n    this.height = 0; //hold height of table element\n\n    this.firstRender = false; //handle first render\n\n    this.renderMode = \"virtual\"; //current rendering mode\n\n    this.fixedHeight = false; //current rendering mode\n\n    this.rows = []; //hold row data objects\n\n    this.activeRows = []; //rows currently available to on display in the table\n\n    this.activeRowsCount = 0; //count of active rows\n\n    this.displayRows = []; //rows currently on display in the table\n\n    this.displayRowsCount = 0; //count of display rows\n\n    this.scrollTop = 0;\n    this.scrollLeft = 0;\n    this.vDomRowHeight = 20; //approximation of row heights for padding\n\n    this.vDomTop = 0; //hold position for first rendered row in the virtual DOM\n\n    this.vDomBottom = 0; //hold possition for last rendered row in the virtual DOM\n\n    this.vDomScrollPosTop = 0; //last scroll position of the vDom top;\n\n    this.vDomScrollPosBottom = 0; //last scroll position of the vDom bottom;\n\n    this.vDomTopPad = 0; //hold value of padding for top of virtual DOM\n\n    this.vDomBottomPad = 0; //hold value of padding for bottom of virtual DOM\n\n    this.vDomMaxRenderChain = 90; //the maximum number of dom elements that can be rendered in 1 go\n\n    this.vDomWindowBuffer = 0; //window row buffer before removing elements, to smooth scrolling\n\n    this.vDomWindowMinTotalRows = 20; //minimum number of rows to be generated in virtual dom (prevent buffering issues on tables with tall rows)\n\n    this.vDomWindowMinMarginRows = 5; //minimum number of rows to be generated in virtual dom margin\n\n    this.vDomTopNewRows = []; //rows to normalize after appending to optimize render speed\n\n    this.vDomBottomNewRows = []; //rows to normalize after appending to optimize render speed\n\n    this.rowNumColumn = false; //hold column component for row number column\n\n    this.redrawBlock = false; //prevent redraws to allow multiple data manipulations becore continuing\n\n    this.redrawBlockRestoreConfig = false; //store latest redraw function calls for when redraw is needed\n\n    this.redrawBlockRederInPosition = false; //store latest redraw function calls for when redraw is needed\n  }; //////////////// Setup Functions /////////////////\n\n\n  RowManager.prototype.createHolderElement = function () {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-tableHolder\");\n    el.setAttribute(\"tabindex\", 0);\n    return el;\n  };\n\n  RowManager.prototype.createTableElement = function () {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-table\");\n    return el;\n  }; //return containing element\n\n\n  RowManager.prototype.getElement = function () {\n    return this.element;\n  }; //return table element\n\n\n  RowManager.prototype.getTableElement = function () {\n    return this.tableElement;\n  }; //return position of row in table\n\n\n  RowManager.prototype.getRowPosition = function (row, active) {\n    if (active) {\n      return this.activeRows.indexOf(row);\n    } else {\n      return this.rows.indexOf(row);\n    }\n  }; //link to column manager\n\n\n  RowManager.prototype.setColumnManager = function (manager) {\n    this.columnManager = manager;\n  };\n\n  RowManager.prototype.initialize = function () {\n    var self = this;\n    self.setRenderMode(); //initialize manager\n\n    self.element.appendChild(self.tableElement);\n    self.firstRender = true; //scroll header along with table body\n\n    self.element.addEventListener(\"scroll\", function () {\n      var left = self.element.scrollLeft; //handle horizontal scrolling\n\n      if (self.scrollLeft != left) {\n        self.columnManager.scrollHorizontal(left);\n\n        if (self.table.options.groupBy) {\n          self.table.modules.groupRows.scrollHeaders(left);\n        }\n\n        if (self.table.modExists(\"columnCalcs\")) {\n          self.table.modules.columnCalcs.scrollHorizontal(left);\n        }\n\n        self.table.options.scrollHorizontal(left);\n      }\n\n      self.scrollLeft = left;\n    }); //handle virtual dom scrolling\n\n    if (this.renderMode === \"virtual\") {\n      self.element.addEventListener(\"scroll\", function () {\n        var top = self.element.scrollTop;\n        var dir = self.scrollTop > top; //handle verical scrolling\n\n        if (self.scrollTop != top) {\n          self.scrollTop = top;\n          self.scrollVertical(dir);\n\n          if (self.table.options.ajaxProgressiveLoad == \"scroll\") {\n            self.table.modules.ajax.nextPage(self.element.scrollHeight - self.element.clientHeight - top);\n          }\n\n          self.table.options.scrollVertical(top);\n        } else {\n          self.scrollTop = top;\n        }\n      });\n    }\n  }; ////////////////// Row Manipulation //////////////////\n\n\n  RowManager.prototype.findRow = function (subject) {\n    var self = this;\n\n    if ((typeof subject === 'undefined' ? 'undefined' : _typeof(subject)) == \"object\") {\n      if (subject instanceof Row) {\n        //subject is row element\n        return subject;\n      } else if (subject instanceof RowComponent) {\n        //subject is public row component\n        return subject._getSelf() || false;\n      } else if (typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement) {\n        //subject is a HTML element of the row\n        var match = self.rows.find(function (row) {\n          return row.element === subject;\n        });\n        return match || false;\n      }\n    } else if (typeof subject == \"undefined\" || subject === null) {\n      return false;\n    } else {\n      //subject should be treated as the index of the row\n      var _match = self.rows.find(function (row) {\n        return row.data[self.table.options.index] == subject;\n      });\n\n      return _match || false;\n    } //catch all for any other type of input\n\n\n    return false;\n  };\n\n  RowManager.prototype.getRowFromDataObject = function (data) {\n    var match = this.rows.find(function (row) {\n      return row.data === data;\n    });\n    return match || false;\n  };\n\n  RowManager.prototype.getRowFromPosition = function (position, active) {\n    if (active) {\n      return this.activeRows[position];\n    } else {\n      return this.rows[position];\n    }\n  };\n\n  RowManager.prototype.scrollToRow = function (row, position, ifVisible) {\n    var _this9 = this;\n\n    var rowIndex = this.getDisplayRows().indexOf(row),\n        rowEl = row.getElement(),\n        rowTop,\n        offset = 0;\n    return new Promise(function (resolve, reject) {\n      if (rowIndex > -1) {\n        if (typeof position === \"undefined\") {\n          position = _this9.table.options.scrollToRowPosition;\n        }\n\n        if (typeof ifVisible === \"undefined\") {\n          ifVisible = _this9.table.options.scrollToRowIfVisible;\n        }\n\n        if (position === \"nearest\") {\n          switch (_this9.renderMode) {\n            case \"classic\":\n              rowTop = Tabulator.prototype.helpers.elOffset(rowEl).top;\n              position = Math.abs(_this9.element.scrollTop - rowTop) > Math.abs(_this9.element.scrollTop + _this9.element.clientHeight - rowTop) ? \"bottom\" : \"top\";\n              break;\n\n            case \"virtual\":\n              position = Math.abs(_this9.vDomTop - rowIndex) > Math.abs(_this9.vDomBottom - rowIndex) ? \"bottom\" : \"top\";\n              break;\n          }\n        } //check row visibility\n\n\n        if (!ifVisible) {\n          if (Tabulator.prototype.helpers.elVisible(rowEl)) {\n            offset = Tabulator.prototype.helpers.elOffset(rowEl).top - Tabulator.prototype.helpers.elOffset(_this9.element).top;\n\n            if (offset > 0 && offset < _this9.element.clientHeight - rowEl.offsetHeight) {\n              return false;\n            }\n          }\n        } //scroll to row\n\n\n        switch (_this9.renderMode) {\n          case \"classic\":\n            _this9.element.scrollTop = Tabulator.prototype.helpers.elOffset(rowEl).top - Tabulator.prototype.helpers.elOffset(_this9.element).top + _this9.element.scrollTop;\n            break;\n\n          case \"virtual\":\n            _this9._virtualRenderFill(rowIndex, true);\n\n            break;\n        } //align to correct position\n\n\n        switch (position) {\n          case \"middle\":\n          case \"center\":\n            if (_this9.element.scrollHeight - _this9.element.scrollTop == _this9.element.clientHeight) {\n              _this9.element.scrollTop = _this9.element.scrollTop + (rowEl.offsetTop - _this9.element.scrollTop) - (_this9.element.scrollHeight - rowEl.offsetTop) / 2;\n            } else {\n              _this9.element.scrollTop = _this9.element.scrollTop - _this9.element.clientHeight / 2;\n            }\n\n            break;\n\n          case \"bottom\":\n            if (_this9.element.scrollHeight - _this9.element.scrollTop == _this9.element.clientHeight) {\n              _this9.element.scrollTop = _this9.element.scrollTop - (_this9.element.scrollHeight - rowEl.offsetTop) + rowEl.offsetHeight;\n            } else {\n              _this9.element.scrollTop = _this9.element.scrollTop - _this9.element.clientHeight + rowEl.offsetHeight;\n            }\n\n            break;\n        }\n\n        resolve();\n      } else {\n        console.warn(\"Scroll Error - Row not visible\");\n        reject(\"Scroll Error - Row not visible\");\n      }\n    });\n  }; ////////////////// Data Handling //////////////////\n\n\n  RowManager.prototype.setData = function (data, renderInPosition, columnsChanged) {\n    var _this10 = this;\n\n    var self = this;\n    return new Promise(function (resolve, reject) {\n      if (renderInPosition && _this10.getDisplayRows().length) {\n        if (self.table.options.pagination) {\n          self._setDataActual(data, true);\n        } else {\n          _this10.reRenderInPosition(function () {\n            self._setDataActual(data);\n          });\n        }\n      } else {\n        if (_this10.table.options.autoColumns && columnsChanged) {\n          _this10.table.columnManager.generateColumnsFromRowData(data);\n        }\n\n        _this10.resetScroll();\n\n        _this10._setDataActual(data);\n      }\n\n      resolve();\n    });\n  };\n\n  RowManager.prototype._setDataActual = function (data, renderInPosition) {\n    var self = this;\n    self.table.options.dataLoading.call(this.table, data);\n\n    this._wipeElements();\n\n    if (this.table.options.history && this.table.modExists(\"history\")) {\n      this.table.modules.history.clear();\n    }\n\n    if (Array.isArray(data)) {\n      if (this.table.modExists(\"selectRow\")) {\n        this.table.modules.selectRow.clearSelectionData();\n      }\n\n      if (this.table.options.reactiveData && this.table.modExists(\"reactiveData\", true)) {\n        this.table.modules.reactiveData.watchData(data);\n      }\n\n      data.forEach(function (def, i) {\n        if (def && (typeof def === 'undefined' ? 'undefined' : _typeof(def)) === \"object\") {\n          var row = new Row(def, self);\n          self.rows.push(row);\n        } else {\n          console.warn(\"Data Loading Warning - Invalid row data detected and ignored, expecting object but received:\", def);\n        }\n      });\n      self.refreshActiveData(false, false, renderInPosition);\n      self.table.options.dataLoaded.call(this.table, data);\n    } else {\n      console.error(\"Data Loading Error - Unable to process data due to invalid data type \\nExpecting: array \\nReceived: \", typeof data === 'undefined' ? 'undefined' : _typeof(data), \"\\nData:     \", data);\n    }\n  };\n\n  RowManager.prototype._wipeElements = function () {\n    this.rows.forEach(function (row) {\n      row.wipe();\n    });\n\n    if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n      this.table.modules.groupRows.wipe();\n    }\n\n    this.rows = [];\n    this.adjustTableSize();\n  };\n\n  RowManager.prototype.deleteRow = function (row, blockRedraw) {\n    var allIndex = this.rows.indexOf(row),\n        activeIndex = this.activeRows.indexOf(row);\n\n    if (activeIndex > -1) {\n      this.activeRows.splice(activeIndex, 1);\n    }\n\n    if (allIndex > -1) {\n      this.rows.splice(allIndex, 1);\n    }\n\n    this.setActiveRows(this.activeRows);\n    this.displayRowIterator(function (rows) {\n      var displayIndex = rows.indexOf(row);\n\n      if (displayIndex > -1) {\n        rows.splice(displayIndex, 1);\n      }\n    });\n\n    if (!blockRedraw) {\n      this.reRenderInPosition();\n    }\n\n    this.regenerateRowNumbers();\n    this.table.options.rowDeleted.call(this.table, row.getComponent());\n    this.table.options.dataEdited.call(this.table, this.getData());\n\n    if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n      this.table.modules.groupRows.updateGroupRows(true);\n    } else if (this.table.options.pagination && this.table.modExists(\"page\")) {\n      this.refreshActiveData(false, false, true);\n    } else {\n      if (this.table.options.pagination && this.table.modExists(\"page\")) {\n        this.refreshActiveData(\"page\");\n      }\n    }\n  };\n\n  RowManager.prototype.addRow = function (data, pos, index, blockRedraw) {\n    var row = this.addRowActual(data, pos, index, blockRedraw);\n\n    if (this.table.options.history && this.table.modExists(\"history\")) {\n      this.table.modules.history.action(\"rowAdd\", row, {\n        data: data,\n        pos: pos,\n        index: index\n      });\n    }\n\n    return row;\n  }; //add multiple rows\n\n\n  RowManager.prototype.addRows = function (data, pos, index) {\n    var _this11 = this;\n\n    var self = this,\n        length = 0,\n        rows = [];\n    return new Promise(function (resolve, reject) {\n      pos = _this11.findAddRowPos(pos);\n\n      if (!Array.isArray(data)) {\n        data = [data];\n      }\n\n      length = data.length - 1;\n\n      if (typeof index == \"undefined\" && pos || typeof index !== \"undefined\" && !pos) {\n        data.reverse();\n      }\n\n      data.forEach(function (item, i) {\n        var row = self.addRow(item, pos, index, true);\n        rows.push(row);\n      });\n\n      if (_this11.table.options.groupBy && _this11.table.modExists(\"groupRows\")) {\n        _this11.table.modules.groupRows.updateGroupRows(true);\n      } else if (_this11.table.options.pagination && _this11.table.modExists(\"page\")) {\n        _this11.refreshActiveData(false, false, true);\n      } else {\n        _this11.reRenderInPosition();\n      } //recalc column calculations if present\n\n\n      if (_this11.table.modExists(\"columnCalcs\")) {\n        _this11.table.modules.columnCalcs.recalc(_this11.table.rowManager.activeRows);\n      }\n\n      _this11.regenerateRowNumbers();\n\n      resolve(rows);\n    });\n  };\n\n  RowManager.prototype.findAddRowPos = function (pos) {\n    if (typeof pos === \"undefined\") {\n      pos = this.table.options.addRowPos;\n    }\n\n    if (pos === \"pos\") {\n      pos = true;\n    }\n\n    if (pos === \"bottom\") {\n      pos = false;\n    }\n\n    return pos;\n  };\n\n  RowManager.prototype.addRowActual = function (data, pos, index, blockRedraw) {\n    var row = data instanceof Row ? data : new Row(data || {}, this),\n        top = this.findAddRowPos(pos),\n        allIndex = -1,\n        activeIndex,\n        dispRows;\n\n    if (!index && this.table.options.pagination && this.table.options.paginationAddRow == \"page\") {\n      dispRows = this.getDisplayRows();\n\n      if (top) {\n        if (dispRows.length) {\n          index = dispRows[0];\n        } else {\n          if (this.activeRows.length) {\n            index = this.activeRows[this.activeRows.length - 1];\n            top = false;\n          }\n        }\n      } else {\n        if (dispRows.length) {\n          index = dispRows[dispRows.length - 1];\n          top = dispRows.length < this.table.modules.page.getPageSize() ? false : true;\n        }\n      }\n    }\n\n    if (typeof index !== \"undefined\") {\n      index = this.findRow(index);\n    }\n\n    if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n      this.table.modules.groupRows.assignRowToGroup(row);\n      var groupRows = row.getGroup().rows;\n\n      if (groupRows.length > 1) {\n        if (!index || index && groupRows.indexOf(index) == -1) {\n          if (top) {\n            if (groupRows[0] !== row) {\n              index = groupRows[0];\n\n              this._moveRowInArray(row.getGroup().rows, row, index, !top);\n            }\n          } else {\n            if (groupRows[groupRows.length - 1] !== row) {\n              index = groupRows[groupRows.length - 1];\n\n              this._moveRowInArray(row.getGroup().rows, row, index, !top);\n            }\n          }\n        } else {\n          this._moveRowInArray(row.getGroup().rows, row, index, !top);\n        }\n      }\n    }\n\n    if (index) {\n      allIndex = this.rows.indexOf(index);\n    }\n\n    if (index && allIndex > -1) {\n      activeIndex = this.activeRows.indexOf(index);\n      this.displayRowIterator(function (rows) {\n        var displayIndex = rows.indexOf(index);\n\n        if (displayIndex > -1) {\n          rows.splice(top ? displayIndex : displayIndex + 1, 0, row);\n        }\n      });\n\n      if (activeIndex > -1) {\n        this.activeRows.splice(top ? activeIndex : activeIndex + 1, 0, row);\n      }\n\n      this.rows.splice(top ? allIndex : allIndex + 1, 0, row);\n    } else {\n      if (top) {\n        this.displayRowIterator(function (rows) {\n          rows.unshift(row);\n        });\n        this.activeRows.unshift(row);\n        this.rows.unshift(row);\n      } else {\n        this.displayRowIterator(function (rows) {\n          rows.push(row);\n        });\n        this.activeRows.push(row);\n        this.rows.push(row);\n      }\n    }\n\n    this.setActiveRows(this.activeRows);\n    this.table.options.rowAdded.call(this.table, row.getComponent());\n    this.table.options.dataEdited.call(this.table, this.getData());\n\n    if (!blockRedraw) {\n      this.reRenderInPosition();\n    }\n\n    return row;\n  };\n\n  RowManager.prototype.moveRow = function (from, to, after) {\n    if (this.table.options.history && this.table.modExists(\"history\")) {\n      this.table.modules.history.action(\"rowMove\", from, {\n        posFrom: this.getRowPosition(from),\n        posTo: this.getRowPosition(to),\n        to: to,\n        after: after\n      });\n    }\n\n    this.moveRowActual(from, to, after);\n    this.regenerateRowNumbers();\n    this.table.options.rowMoved.call(this.table, from.getComponent());\n  };\n\n  RowManager.prototype.moveRowActual = function (from, to, after) {\n    var _this12 = this;\n\n    this._moveRowInArray(this.rows, from, to, after);\n\n    this._moveRowInArray(this.activeRows, from, to, after);\n\n    this.displayRowIterator(function (rows) {\n      _this12._moveRowInArray(rows, from, to, after);\n    });\n\n    if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n      if (!after && to instanceof Group) {\n        to = this.table.rowManager.prevDisplayRow(from) || to;\n      }\n\n      var toGroup = to.getGroup();\n      var fromGroup = from.getGroup();\n\n      if (toGroup === fromGroup) {\n        this._moveRowInArray(toGroup.rows, from, to, after);\n      } else {\n        if (fromGroup) {\n          fromGroup.removeRow(from);\n        }\n\n        toGroup.insertRow(from, to, after);\n      }\n    }\n  };\n\n  RowManager.prototype._moveRowInArray = function (rows, from, to, after) {\n    var fromIndex, toIndex, start, end;\n\n    if (from !== to) {\n      fromIndex = rows.indexOf(from);\n\n      if (fromIndex > -1) {\n        rows.splice(fromIndex, 1);\n        toIndex = rows.indexOf(to);\n\n        if (toIndex > -1) {\n          if (after) {\n            rows.splice(toIndex + 1, 0, from);\n          } else {\n            rows.splice(toIndex, 0, from);\n          }\n        } else {\n          rows.splice(fromIndex, 0, from);\n        }\n      } //restyle rows\n\n\n      if (rows === this.getDisplayRows()) {\n        start = fromIndex < toIndex ? fromIndex : toIndex;\n        end = toIndex > fromIndex ? toIndex : fromIndex + 1;\n\n        for (var _i4 = start; _i4 <= end; _i4++) {\n          if (rows[_i4]) {\n            this.styleRow(rows[_i4], _i4);\n          }\n        }\n      }\n    }\n  };\n\n  RowManager.prototype.clearData = function () {\n    this.setData([]);\n  };\n\n  RowManager.prototype.getRowIndex = function (row) {\n    return this.findRowIndex(row, this.rows);\n  };\n\n  RowManager.prototype.getDisplayRowIndex = function (row) {\n    var index = this.getDisplayRows().indexOf(row);\n    return index > -1 ? index : false;\n  };\n\n  RowManager.prototype.nextDisplayRow = function (row, rowOnly) {\n    var index = this.getDisplayRowIndex(row),\n        nextRow = false;\n\n    if (index !== false && index < this.displayRowsCount - 1) {\n      nextRow = this.getDisplayRows()[index + 1];\n    }\n\n    if (nextRow && (!(nextRow instanceof Row) || nextRow.type != \"row\")) {\n      return this.nextDisplayRow(nextRow, rowOnly);\n    }\n\n    return nextRow;\n  };\n\n  RowManager.prototype.prevDisplayRow = function (row, rowOnly) {\n    var index = this.getDisplayRowIndex(row),\n        prevRow = false;\n\n    if (index) {\n      prevRow = this.getDisplayRows()[index - 1];\n    }\n\n    if (rowOnly && prevRow && (!(prevRow instanceof Row) || prevRow.type != \"row\")) {\n      return this.prevDisplayRow(prevRow, rowOnly);\n    }\n\n    return prevRow;\n  };\n\n  RowManager.prototype.findRowIndex = function (row, list) {\n    var rowIndex;\n    row = this.findRow(row);\n\n    if (row) {\n      rowIndex = list.indexOf(row);\n\n      if (rowIndex > -1) {\n        return rowIndex;\n      }\n    }\n\n    return false;\n  };\n\n  RowManager.prototype.getData = function (active, transform) {\n    var output = [],\n        rows = this.getRows(active);\n    rows.forEach(function (row) {\n      if (row.type == \"row\") {\n        output.push(row.getData(transform || \"data\"));\n      }\n    });\n    return output;\n  };\n\n  RowManager.prototype.getComponents = function (active) {\n    var output = [],\n        rows = this.getRows(active);\n    rows.forEach(function (row) {\n      output.push(row.getComponent());\n    });\n    return output;\n  };\n\n  RowManager.prototype.getDataCount = function (active) {\n    var rows = this.getRows(active);\n    return rows.length;\n  };\n\n  RowManager.prototype._genRemoteRequest = function () {\n    var _this13 = this;\n\n    var table = this.table,\n        options = table.options,\n        params = {};\n\n    if (table.modExists(\"page\")) {\n      //set sort data if defined\n      if (options.ajaxSorting) {\n        var sorters = this.table.modules.sort.getSort();\n        sorters.forEach(function (item) {\n          delete item.column;\n        });\n        params[this.table.modules.page.paginationDataSentNames.sorters] = sorters;\n      } //set filter data if defined\n\n\n      if (options.ajaxFiltering) {\n        var filters = this.table.modules.filter.getFilters(true, true);\n        params[this.table.modules.page.paginationDataSentNames.filters] = filters;\n      }\n\n      this.table.modules.ajax.setParams(params, true);\n    }\n\n    table.modules.ajax.sendRequest().then(function (data) {\n      _this13._setDataActual(data, true);\n    }).catch(function (e) {});\n  }; //choose the path to refresh data after a filter update\n\n\n  RowManager.prototype.filterRefresh = function () {\n    var table = this.table,\n        options = table.options,\n        left = this.scrollLeft;\n\n    if (options.ajaxFiltering) {\n      if (options.pagination == \"remote\" && table.modExists(\"page\")) {\n        table.modules.page.reset(true);\n        table.modules.page.setPage(1).then(function () {}).catch(function () {});\n      } else if (options.ajaxProgressiveLoad) {\n        table.modules.ajax.loadData().then(function () {}).catch(function () {});\n      } else {\n        //assume data is url, make ajax call to url to get data\n        this._genRemoteRequest();\n      }\n    } else {\n      this.refreshActiveData(\"filter\");\n    }\n\n    this.scrollHorizontal(left);\n  }; //choose the path to refresh data after a sorter update\n\n\n  RowManager.prototype.sorterRefresh = function (loadOrignalData) {\n    var table = this.table,\n        options = this.table.options,\n        left = this.scrollLeft;\n\n    if (options.ajaxSorting) {\n      if ((options.pagination == \"remote\" || options.progressiveLoad) && table.modExists(\"page\")) {\n        table.modules.page.reset(true);\n        table.modules.page.setPage(1).then(function () {}).catch(function () {});\n      } else if (options.ajaxProgressiveLoad) {\n        table.modules.ajax.loadData().then(function () {}).catch(function () {});\n      } else {\n        //assume data is url, make ajax call to url to get data\n        this._genRemoteRequest();\n      }\n    } else {\n      this.refreshActiveData(loadOrignalData ? \"filter\" : \"sort\");\n    }\n\n    this.scrollHorizontal(left);\n  };\n\n  RowManager.prototype.scrollHorizontal = function (left) {\n    this.scrollLeft = left;\n    this.element.scrollLeft = left;\n\n    if (this.table.options.groupBy) {\n      this.table.modules.groupRows.scrollHeaders(left);\n    }\n\n    if (this.table.modExists(\"columnCalcs\")) {\n      this.table.modules.columnCalcs.scrollHorizontal(left);\n    }\n  }; //set active data set\n\n\n  RowManager.prototype.refreshActiveData = function (stage, skipStage, renderInPosition) {\n    var self = this,\n        table = this.table,\n        cascadeOrder = [\"all\", \"filter\", \"sort\", \"display\", \"freeze\", \"group\", \"tree\", \"page\"],\n        displayIndex;\n\n    if (this.redrawBlock) {\n      if (!this.redrawBlockRestoreConfig || cascadeOrder.indexOf(stage) < cascadeOrder.indexOf(this.redrawBlockRestoreConfig.stage)) {\n        this.redrawBlockRestoreConfig = {\n          stage: stage,\n          skipStage: skipStage,\n          renderInPosition: renderInPosition\n        };\n      }\n\n      return;\n    } else {\n      if (self.table.modExists(\"edit\")) {\n        self.table.modules.edit.cancelEdit();\n      }\n\n      if (!stage) {\n        stage = \"all\";\n      }\n\n      if (table.options.selectable && !table.options.selectablePersistence && table.modExists(\"selectRow\")) {\n        table.modules.selectRow.deselectRows();\n      } //cascade through data refresh stages\n\n\n      switch (stage) {\n        case \"all\":\n        case \"filter\":\n          if (!skipStage) {\n            if (table.modExists(\"filter\")) {\n              self.setActiveRows(table.modules.filter.filter(self.rows));\n            } else {\n              self.setActiveRows(self.rows.slice(0));\n            }\n          } else {\n            skipStage = false;\n          }\n\n        case \"sort\":\n          if (!skipStage) {\n            if (table.modExists(\"sort\")) {\n              table.modules.sort.sort(this.activeRows);\n            }\n          } else {\n            skipStage = false;\n          } //regenerate row numbers for row number formatter if in use\n\n\n          this.regenerateRowNumbers();\n        //generic stage to allow for pipeline trigger after the data manipulation stage\n\n        case \"display\":\n          this.resetDisplayRows();\n\n        case \"freeze\":\n          if (!skipStage) {\n            if (this.table.modExists(\"frozenRows\")) {\n              if (table.modules.frozenRows.isFrozen()) {\n                if (!table.modules.frozenRows.getDisplayIndex()) {\n                  table.modules.frozenRows.setDisplayIndex(this.getNextDisplayIndex());\n                }\n\n                displayIndex = table.modules.frozenRows.getDisplayIndex();\n                displayIndex = self.setDisplayRows(table.modules.frozenRows.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\n\n                if (displayIndex !== true) {\n                  table.modules.frozenRows.setDisplayIndex(displayIndex);\n                }\n              }\n            }\n          } else {\n            skipStage = false;\n          }\n\n        case \"group\":\n          if (!skipStage) {\n            if (table.options.groupBy && table.modExists(\"groupRows\")) {\n              if (!table.modules.groupRows.getDisplayIndex()) {\n                table.modules.groupRows.setDisplayIndex(this.getNextDisplayIndex());\n              }\n\n              displayIndex = table.modules.groupRows.getDisplayIndex();\n              displayIndex = self.setDisplayRows(table.modules.groupRows.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\n\n              if (displayIndex !== true) {\n                table.modules.groupRows.setDisplayIndex(displayIndex);\n              }\n            }\n          } else {\n            skipStage = false;\n          }\n\n        case \"tree\":\n          if (!skipStage) {\n            if (table.options.dataTree && table.modExists(\"dataTree\")) {\n              if (!table.modules.dataTree.getDisplayIndex()) {\n                table.modules.dataTree.setDisplayIndex(this.getNextDisplayIndex());\n              }\n\n              displayIndex = table.modules.dataTree.getDisplayIndex();\n              displayIndex = self.setDisplayRows(table.modules.dataTree.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\n\n              if (displayIndex !== true) {\n                table.modules.dataTree.setDisplayIndex(displayIndex);\n              }\n            }\n          } else {\n            skipStage = false;\n          }\n\n          if (table.options.pagination && table.modExists(\"page\") && !renderInPosition) {\n            if (table.modules.page.getMode() == \"local\") {\n              table.modules.page.reset();\n            }\n          }\n\n        case \"page\":\n          if (!skipStage) {\n            if (table.options.pagination && table.modExists(\"page\")) {\n              if (!table.modules.page.getDisplayIndex()) {\n                table.modules.page.setDisplayIndex(this.getNextDisplayIndex());\n              }\n\n              displayIndex = table.modules.page.getDisplayIndex();\n\n              if (table.modules.page.getMode() == \"local\") {\n                table.modules.page.setMaxRows(this.getDisplayRows(displayIndex - 1).length);\n              }\n\n              displayIndex = self.setDisplayRows(table.modules.page.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\n\n              if (displayIndex !== true) {\n                table.modules.page.setDisplayIndex(displayIndex);\n              }\n            }\n          } else {\n            skipStage = false;\n          }\n\n      }\n\n      if (Tabulator.prototype.helpers.elVisible(self.element)) {\n        if (renderInPosition) {\n          self.reRenderInPosition();\n        } else {\n          self.renderTable();\n\n          if (table.options.layoutColumnsOnNewData) {\n            self.table.columnManager.redraw(true);\n          }\n        }\n      }\n\n      if (table.modExists(\"columnCalcs\")) {\n        table.modules.columnCalcs.recalc(this.activeRows);\n      }\n    }\n  }; //regenerate row numbers for row number formatter if in use\n\n\n  RowManager.prototype.regenerateRowNumbers = function () {\n    var _this14 = this;\n\n    if (this.rowNumColumn) {\n      this.activeRows.forEach(function (row) {\n        var cell = row.getCell(_this14.rowNumColumn);\n\n        if (cell) {\n          cell._generateContents();\n        }\n      });\n    }\n  };\n\n  RowManager.prototype.setActiveRows = function (activeRows) {\n    this.activeRows = activeRows;\n    this.activeRowsCount = this.activeRows.length;\n  }; //reset display rows array\n\n\n  RowManager.prototype.resetDisplayRows = function () {\n    this.displayRows = [];\n    this.displayRows.push(this.activeRows.slice(0));\n    this.displayRowsCount = this.displayRows[0].length;\n\n    if (this.table.modExists(\"frozenRows\")) {\n      this.table.modules.frozenRows.setDisplayIndex(0);\n    }\n\n    if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n      this.table.modules.groupRows.setDisplayIndex(0);\n    }\n\n    if (this.table.options.pagination && this.table.modExists(\"page\")) {\n      this.table.modules.page.setDisplayIndex(0);\n    }\n  };\n\n  RowManager.prototype.getNextDisplayIndex = function () {\n    return this.displayRows.length;\n  }; //set display row pipeline data\n\n\n  RowManager.prototype.setDisplayRows = function (displayRows, index) {\n    var output = true;\n\n    if (index && typeof this.displayRows[index] != \"undefined\") {\n      this.displayRows[index] = displayRows;\n      output = true;\n    } else {\n      this.displayRows.push(displayRows);\n      output = index = this.displayRows.length - 1;\n    }\n\n    if (index == this.displayRows.length - 1) {\n      this.displayRowsCount = this.displayRows[this.displayRows.length - 1].length;\n    }\n\n    return output;\n  };\n\n  RowManager.prototype.getDisplayRows = function (index) {\n    if (typeof index == \"undefined\") {\n      return this.displayRows.length ? this.displayRows[this.displayRows.length - 1] : [];\n    } else {\n      return this.displayRows[index] || [];\n    }\n  };\n\n  RowManager.prototype.getVisibleRows = function (viewable) {\n    var topEdge = this.element.scrollTop,\n        bottomEdge = this.element.clientHeight + topEdge,\n        topFound = false,\n        topRow = 0,\n        bottomRow = 0,\n        rows = this.getDisplayRows();\n\n    if (viewable) {\n      this.getDisplayRows();\n\n      for (var i = this.vDomTop; i <= this.vDomBottom; i++) {\n        if (rows[i]) {\n          if (!topFound) {\n            if (topEdge - rows[i].getElement().offsetTop >= 0) {\n              topRow = i;\n            } else {\n              topFound = true;\n\n              if (bottomEdge - rows[i].getElement().offsetTop >= 0) {\n                bottomRow = i;\n              } else {\n                break;\n              }\n            }\n          } else {\n            if (bottomEdge - rows[i].getElement().offsetTop >= 0) {\n              bottomRow = i;\n            } else {\n              break;\n            }\n          }\n        }\n      }\n    } else {\n      topRow = this.vDomTop;\n      bottomRow = this.vDomBottom;\n    }\n\n    return rows.slice(topRow, bottomRow + 1);\n  }; //repeat action accross display rows\n\n\n  RowManager.prototype.displayRowIterator = function (callback) {\n    this.displayRows.forEach(callback);\n    this.displayRowsCount = this.displayRows[this.displayRows.length - 1].length;\n  }; //return only actual rows (not group headers etc)\n\n\n  RowManager.prototype.getRows = function (active) {\n    var rows;\n\n    switch (active) {\n      case \"active\":\n        rows = this.activeRows;\n        break;\n\n      case \"display\":\n        rows = this.table.rowManager.getDisplayRows();\n        break;\n\n      case \"visible\":\n        rows = this.getVisibleRows(true);\n        break;\n\n      default:\n        rows = this.rows;\n    }\n\n    return rows;\n  }; ///////////////// Table Rendering /////////////////\n  //trigger rerender of table in current position\n\n\n  RowManager.prototype.reRenderInPosition = function (callback) {\n    if (this.getRenderMode() == \"virtual\") {\n      if (this.redrawBlock) {\n        if (callback) {\n          callback();\n        } else {\n          this.redrawBlockRederInPosition = true;\n        }\n      } else {\n        var scrollTop = this.element.scrollTop;\n        var topRow = false;\n        var topOffset = false;\n        var left = this.scrollLeft;\n        var rows = this.getDisplayRows();\n\n        for (var i = this.vDomTop; i <= this.vDomBottom; i++) {\n          if (rows[i]) {\n            var diff = scrollTop - rows[i].getElement().offsetTop;\n\n            if (topOffset === false || Math.abs(diff) < topOffset) {\n              topOffset = diff;\n              topRow = i;\n            } else {\n              break;\n            }\n          }\n        }\n\n        if (callback) {\n          callback();\n        }\n\n        this._virtualRenderFill(topRow === false ? this.displayRowsCount - 1 : topRow, true, topOffset || 0);\n\n        this.scrollHorizontal(left);\n      }\n    } else {\n      this.renderTable();\n\n      if (callback) {\n        callback();\n      }\n    }\n  };\n\n  RowManager.prototype.setRenderMode = function () {\n    if (this.table.options.virtualDom) {\n      this.renderMode = \"virtual\";\n\n      if (this.table.element.clientHeight || this.table.options.height) {\n        this.fixedHeight = true;\n      } else {\n        this.fixedHeight = false;\n      }\n    } else {\n      this.renderMode = \"classic\";\n    }\n  };\n\n  RowManager.prototype.getRenderMode = function () {\n    return this.renderMode;\n  };\n\n  RowManager.prototype.renderTable = function () {\n    this.table.options.renderStarted.call(this.table);\n    this.element.scrollTop = 0;\n\n    switch (this.renderMode) {\n      case \"classic\":\n        this._simpleRender();\n\n        break;\n\n      case \"virtual\":\n        this._virtualRenderFill();\n\n        break;\n    }\n\n    if (this.firstRender) {\n      if (this.displayRowsCount) {\n        this.firstRender = false;\n        this.table.modules.layout.layout();\n      } else {\n        this.renderEmptyScroll();\n      }\n    }\n\n    if (this.table.modExists(\"frozenColumns\")) {\n      this.table.modules.frozenColumns.layout();\n    }\n\n    if (!this.displayRowsCount) {\n      if (this.table.options.placeholder) {\n        this.table.options.placeholder.setAttribute(\"tabulator-render-mode\", this.renderMode);\n        this.getElement().appendChild(this.table.options.placeholder);\n        this.table.options.placeholder.style.width = this.table.columnManager.getWidth() + \"px\";\n      }\n    }\n\n    this.table.options.renderComplete.call(this.table);\n  }; //simple render on heightless table\n\n\n  RowManager.prototype._simpleRender = function () {\n    this._clearVirtualDom();\n\n    if (this.displayRowsCount) {\n      this.checkClassicModeGroupHeaderWidth();\n    } else {\n      this.renderEmptyScroll();\n    }\n  };\n\n  RowManager.prototype.checkClassicModeGroupHeaderWidth = function () {\n    var self = this,\n        element = this.tableElement,\n        onlyGroupHeaders = true;\n    self.getDisplayRows().forEach(function (row, index) {\n      self.styleRow(row, index);\n      element.appendChild(row.getElement());\n      row.initialize(true);\n\n      if (row.type !== \"group\") {\n        onlyGroupHeaders = false;\n      }\n    });\n\n    if (onlyGroupHeaders) {\n      element.style.minWidth = self.table.columnManager.getWidth() + \"px\";\n    } else {\n      element.style.minWidth = \"\";\n    }\n  }; //show scrollbars on empty table div\n\n\n  RowManager.prototype.renderEmptyScroll = function () {\n    if (this.table.options.placeholder) {\n      this.tableElement.style.display = \"none\";\n    } else {\n      this.tableElement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n      this.tableElement.style.minHeight = \"1px\";\n      this.tableElement.style.visibility = \"hidden\";\n    }\n  };\n\n  RowManager.prototype._clearVirtualDom = function () {\n    var element = this.tableElement;\n\n    if (this.table.options.placeholder && this.table.options.placeholder.parentNode) {\n      this.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder);\n    } // element.children.detach();\n\n\n    while (element.firstChild) {\n      element.removeChild(element.firstChild);\n    }\n\n    element.style.paddingTop = \"\";\n    element.style.paddingBottom = \"\";\n    element.style.minWidth = \"\";\n    element.style.minHeight = \"\";\n    element.style.display = \"\";\n    element.style.visibility = \"\";\n    this.scrollTop = 0;\n    this.scrollLeft = 0;\n    this.vDomTop = 0;\n    this.vDomBottom = 0;\n    this.vDomTopPad = 0;\n    this.vDomBottomPad = 0;\n  };\n\n  RowManager.prototype.styleRow = function (row, index) {\n    var rowEl = row.getElement();\n\n    if (index % 2) {\n      rowEl.classList.add(\"tabulator-row-even\");\n      rowEl.classList.remove(\"tabulator-row-odd\");\n    } else {\n      rowEl.classList.add(\"tabulator-row-odd\");\n      rowEl.classList.remove(\"tabulator-row-even\");\n    }\n  }; //full virtual render\n\n\n  RowManager.prototype._virtualRenderFill = function (position, forceMove, offset) {\n    var self = this,\n        element = self.tableElement,\n        holder = self.element,\n        topPad = 0,\n        rowsHeight = 0,\n        topPadHeight = 0,\n        i = 0,\n        onlyGroupHeaders = true,\n        rows = self.getDisplayRows();\n    position = position || 0;\n    offset = offset || 0;\n\n    if (!position) {\n      self._clearVirtualDom();\n    } else {\n      while (element.firstChild) {\n        element.removeChild(element.firstChild);\n      } //check if position is too close to bottom of table\n\n\n      var heightOccupied = (self.displayRowsCount - position + 1) * self.vDomRowHeight;\n\n      if (heightOccupied < self.height) {\n        position -= Math.ceil((self.height - heightOccupied) / self.vDomRowHeight);\n\n        if (position < 0) {\n          position = 0;\n        }\n      } //calculate initial pad\n\n\n      topPad = Math.min(Math.max(Math.floor(self.vDomWindowBuffer / self.vDomRowHeight), self.vDomWindowMinMarginRows), position);\n      position -= topPad;\n    }\n\n    if (self.displayRowsCount && Tabulator.prototype.helpers.elVisible(self.element)) {\n      self.vDomTop = position;\n      self.vDomBottom = position - 1;\n\n      while ((rowsHeight <= self.height + self.vDomWindowBuffer || i < self.vDomWindowMinTotalRows) && self.vDomBottom < self.displayRowsCount - 1) {\n        var index = self.vDomBottom + 1,\n            row = rows[index],\n            rowHeight = 0;\n        self.styleRow(row, index);\n        element.appendChild(row.getElement());\n\n        if (!row.initialized) {\n          row.initialize(true);\n        } else {\n          if (!row.heightInitialized) {\n            row.normalizeHeight(true);\n          }\n        }\n\n        rowHeight = row.getHeight();\n\n        if (i < topPad) {\n          topPadHeight += rowHeight;\n        } else {\n          rowsHeight += rowHeight;\n        }\n\n        if (rowHeight > this.vDomWindowBuffer) {\n          this.vDomWindowBuffer = rowHeight * 2;\n        }\n\n        if (row.type !== \"group\") {\n          onlyGroupHeaders = false;\n        }\n\n        self.vDomBottom++;\n        i++;\n      }\n\n      if (!position) {\n        this.vDomTopPad = 0; //adjust rowheight to match average of rendered elements\n\n        self.vDomRowHeight = Math.floor((rowsHeight + topPadHeight) / i);\n        self.vDomBottomPad = self.vDomRowHeight * (self.displayRowsCount - self.vDomBottom - 1);\n        self.vDomScrollHeight = topPadHeight + rowsHeight + self.vDomBottomPad - self.height;\n      } else {\n        self.vDomTopPad = !forceMove ? self.scrollTop - topPadHeight : self.vDomRowHeight * this.vDomTop + offset;\n        self.vDomBottomPad = self.vDomBottom == self.displayRowsCount - 1 ? 0 : Math.max(self.vDomScrollHeight - self.vDomTopPad - rowsHeight - topPadHeight, 0);\n      }\n\n      element.style.paddingTop = self.vDomTopPad + \"px\";\n      element.style.paddingBottom = self.vDomBottomPad + \"px\";\n\n      if (forceMove) {\n        this.scrollTop = self.vDomTopPad + topPadHeight + offset - (this.element.scrollWidth > this.element.clientWidth ? this.element.offsetHeight - this.element.clientHeight : 0);\n      }\n\n      this.scrollTop = Math.min(this.scrollTop, this.element.scrollHeight - this.height); //adjust for horizontal scrollbar if present (and not at top of table)\n\n      if (this.element.scrollWidth > this.element.offsetWidth && forceMove) {\n        this.scrollTop += this.element.offsetHeight - this.element.clientHeight;\n      }\n\n      this.vDomScrollPosTop = this.scrollTop;\n      this.vDomScrollPosBottom = this.scrollTop;\n      holder.scrollTop = this.scrollTop;\n      element.style.minWidth = onlyGroupHeaders ? self.table.columnManager.getWidth() + \"px\" : \"\";\n\n      if (self.table.options.groupBy) {\n        if (self.table.modules.layout.getMode() != \"fitDataFill\" && self.displayRowsCount == self.table.modules.groupRows.countGroups()) {\n          self.tableElement.style.minWidth = self.table.columnManager.getWidth();\n        }\n      }\n    } else {\n      this.renderEmptyScroll();\n    }\n\n    if (!this.fixedHeight) {\n      this.adjustTableSize();\n    }\n  }; //handle vertical scrolling\n\n\n  RowManager.prototype.scrollVertical = function (dir) {\n    var topDiff = this.scrollTop - this.vDomScrollPosTop;\n    var bottomDiff = this.scrollTop - this.vDomScrollPosBottom;\n    var margin = this.vDomWindowBuffer * 2;\n\n    if (-topDiff > margin || bottomDiff > margin) {\n      //if big scroll redraw table;\n      var left = this.scrollLeft;\n\n      this._virtualRenderFill(Math.floor(this.element.scrollTop / this.element.scrollHeight * this.displayRowsCount));\n\n      this.scrollHorizontal(left);\n    } else {\n      if (dir) {\n        //scrolling up\n        if (topDiff < 0) {\n          this._addTopRow(-topDiff);\n        }\n\n        if (bottomDiff < 0) {\n          //hide bottom row if needed\n          if (this.vDomScrollHeight - this.scrollTop > this.vDomWindowBuffer) {\n            this._removeBottomRow(-bottomDiff);\n          } else {\n            this.vDomScrollPosBottom = this.scrollTop;\n          }\n        }\n      } else {\n        //scrolling down\n        if (topDiff >= 0) {\n          //hide top row if needed\n          if (this.scrollTop > this.vDomWindowBuffer) {\n            this._removeTopRow(topDiff);\n          } else {\n            this.vDomScrollPosTop = this.scrollTop;\n          }\n        }\n\n        if (bottomDiff >= 0) {\n          this._addBottomRow(bottomDiff);\n        }\n      }\n    }\n  };\n\n  RowManager.prototype._addTopRow = function (topDiff) {\n    var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var table = this.tableElement,\n        rows = this.getDisplayRows();\n\n    if (this.vDomTop) {\n      var index = this.vDomTop - 1,\n          topRow = rows[index],\n          topRowHeight = topRow.getHeight() || this.vDomRowHeight; //hide top row if needed\n\n      if (topDiff >= topRowHeight) {\n        this.styleRow(topRow, index);\n        table.insertBefore(topRow.getElement(), table.firstChild);\n\n        if (!topRow.initialized || !topRow.heightInitialized) {\n          this.vDomTopNewRows.push(topRow);\n\n          if (!topRow.heightInitialized) {\n            topRow.clearCellHeight();\n          }\n        }\n\n        topRow.initialize();\n        this.vDomTopPad -= topRowHeight;\n\n        if (this.vDomTopPad < 0) {\n          this.vDomTopPad = index * this.vDomRowHeight;\n        }\n\n        if (!index) {\n          this.vDomTopPad = 0;\n        }\n\n        table.style.paddingTop = this.vDomTopPad + \"px\";\n        this.vDomScrollPosTop -= topRowHeight;\n        this.vDomTop--;\n      }\n\n      topDiff = -(this.scrollTop - this.vDomScrollPosTop);\n\n      if (topRow.getHeight() > this.vDomWindowBuffer) {\n        this.vDomWindowBuffer = topRow.getHeight() * 2;\n      }\n\n      if (i < this.vDomMaxRenderChain && this.vDomTop && topDiff >= (rows[this.vDomTop - 1].getHeight() || this.vDomRowHeight)) {\n        this._addTopRow(topDiff, i + 1);\n      } else {\n        this._quickNormalizeRowHeight(this.vDomTopNewRows);\n      }\n    }\n  };\n\n  RowManager.prototype._removeTopRow = function (topDiff) {\n    var table = this.tableElement,\n        topRow = this.getDisplayRows()[this.vDomTop],\n        topRowHeight = topRow.getHeight() || this.vDomRowHeight;\n\n    if (topDiff >= topRowHeight) {\n      var rowEl = topRow.getElement();\n      rowEl.parentNode.removeChild(rowEl);\n      this.vDomTopPad += topRowHeight;\n      table.style.paddingTop = this.vDomTopPad + \"px\";\n      this.vDomScrollPosTop += this.vDomTop ? topRowHeight : topRowHeight + this.vDomWindowBuffer;\n      this.vDomTop++;\n      topDiff = this.scrollTop - this.vDomScrollPosTop;\n\n      this._removeTopRow(topDiff);\n    }\n  };\n\n  RowManager.prototype._addBottomRow = function (bottomDiff) {\n    var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var table = this.tableElement,\n        rows = this.getDisplayRows();\n\n    if (this.vDomBottom < this.displayRowsCount - 1) {\n      var index = this.vDomBottom + 1,\n          bottomRow = rows[index],\n          bottomRowHeight = bottomRow.getHeight() || this.vDomRowHeight; //hide bottom row if needed\n\n      if (bottomDiff >= bottomRowHeight) {\n        this.styleRow(bottomRow, index);\n        table.appendChild(bottomRow.getElement());\n\n        if (!bottomRow.initialized || !bottomRow.heightInitialized) {\n          this.vDomBottomNewRows.push(bottomRow);\n\n          if (!bottomRow.heightInitialized) {\n            bottomRow.clearCellHeight();\n          }\n        }\n\n        bottomRow.initialize();\n        this.vDomBottomPad -= bottomRowHeight;\n\n        if (this.vDomBottomPad < 0 || index == this.displayRowsCount - 1) {\n          this.vDomBottomPad = 0;\n        }\n\n        table.style.paddingBottom = this.vDomBottomPad + \"px\";\n        this.vDomScrollPosBottom += bottomRowHeight;\n        this.vDomBottom++;\n      }\n\n      bottomDiff = this.scrollTop - this.vDomScrollPosBottom;\n\n      if (bottomRow.getHeight() > this.vDomWindowBuffer) {\n        this.vDomWindowBuffer = bottomRow.getHeight() * 2;\n      }\n\n      if (i < this.vDomMaxRenderChain && this.vDomBottom < this.displayRowsCount - 1 && bottomDiff >= (rows[this.vDomBottom + 1].getHeight() || this.vDomRowHeight)) {\n        this._addBottomRow(bottomDiff, i + 1);\n      } else {\n        this._quickNormalizeRowHeight(this.vDomBottomNewRows);\n      }\n    }\n  };\n\n  RowManager.prototype._removeBottomRow = function (bottomDiff) {\n    var table = this.tableElement,\n        bottomRow = this.getDisplayRows()[this.vDomBottom],\n        bottomRowHeight = bottomRow.getHeight() || this.vDomRowHeight;\n\n    if (bottomDiff >= bottomRowHeight) {\n      var rowEl = bottomRow.getElement();\n\n      if (rowEl.parentNode) {\n        rowEl.parentNode.removeChild(rowEl);\n      }\n\n      this.vDomBottomPad += bottomRowHeight;\n\n      if (this.vDomBottomPad < 0) {\n        this.vDomBottomPad = 0;\n      }\n\n      table.style.paddingBottom = this.vDomBottomPad + \"px\";\n      this.vDomScrollPosBottom -= bottomRowHeight;\n      this.vDomBottom--;\n      bottomDiff = -(this.scrollTop - this.vDomScrollPosBottom);\n\n      this._removeBottomRow(bottomDiff);\n    }\n  };\n\n  RowManager.prototype._quickNormalizeRowHeight = function (rows) {\n    rows.forEach(function (row) {\n      row.calcHeight();\n    });\n    rows.forEach(function (row) {\n      row.setCellHeight();\n    });\n    rows.length = 0;\n  }; //normalize height of active rows\n\n\n  RowManager.prototype.normalizeHeight = function () {\n    this.activeRows.forEach(function (row) {\n      row.normalizeHeight();\n    });\n  }; //adjust the height of the table holder to fit in the Tabulator element\n\n\n  RowManager.prototype.adjustTableSize = function () {\n    var initialHeight = this.element.clientHeight,\n        modExists;\n\n    if (this.renderMode === \"virtual\") {\n      var otherHeight = this.columnManager.getElement().offsetHeight + (this.table.footerManager && !this.table.footerManager.external ? this.table.footerManager.getElement().offsetHeight : 0);\n\n      if (this.fixedHeight) {\n        this.element.style.minHeight = \"calc(100% - \" + otherHeight + \"px)\";\n        this.element.style.height = \"calc(100% - \" + otherHeight + \"px)\";\n        this.element.style.maxHeight = \"calc(100% - \" + otherHeight + \"px)\";\n      } else {\n        this.element.style.height = \"\";\n        this.element.style.height = this.table.element.clientHeight - otherHeight + \"px\";\n        this.element.scrollTop = this.scrollTop;\n      }\n\n      this.height = this.element.clientHeight;\n      this.vDomWindowBuffer = this.table.options.virtualDomBuffer || this.height; //check if the table has changed size when dealing with variable height tables\n\n      if (!this.fixedHeight && initialHeight != this.element.clientHeight) {\n        modExists = this.table.modExists(\"resizeTable\");\n\n        if (modExists && !this.table.modules.resizeTable.autoResize || !modExists) {\n          this.redraw();\n        }\n      }\n    }\n  }; //renitialize all rows\n\n\n  RowManager.prototype.reinitialize = function () {\n    this.rows.forEach(function (row) {\n      row.reinitialize();\n    });\n  }; //prevent table from being redrawn\n\n\n  RowManager.prototype.blockRedraw = function () {\n    this.redrawBlock = true;\n    this.redrawBlockRestoreConfig = false;\n  }; //restore table redrawing\n\n\n  RowManager.prototype.restoreRedraw = function () {\n    this.redrawBlock = false;\n\n    if (this.redrawBlockRestoreConfig) {\n      this.refreshActiveData(this.redrawBlockRestoreConfig.stage, this.redrawBlockRestoreConfig.skipStage, this.redrawBlockRestoreConfig.renderInPosition);\n      this.redrawBlockRestoreConfig = false;\n    } else {\n      if (this.redrawBlockRederInPosition) {\n        this.reRenderInPosition();\n      }\n    }\n\n    this.redrawBlockRederInPosition = false;\n  }; //redraw table\n\n\n  RowManager.prototype.redraw = function (force) {\n    var pos = 0,\n        left = this.scrollLeft;\n    this.adjustTableSize();\n    this.table.tableWidth = this.table.element.clientWidth;\n\n    if (!force) {\n      if (this.renderMode == \"classic\") {\n        if (this.table.options.groupBy) {\n          this.refreshActiveData(\"group\", false, false);\n        } else {\n          this._simpleRender();\n        }\n      } else {\n        this.reRenderInPosition();\n        this.scrollHorizontal(left);\n      }\n\n      if (!this.displayRowsCount) {\n        if (this.table.options.placeholder) {\n          this.getElement().appendChild(this.table.options.placeholder);\n        }\n      }\n    } else {\n      this.renderTable();\n    }\n  };\n\n  RowManager.prototype.resetScroll = function () {\n    this.element.scrollLeft = 0;\n    this.element.scrollTop = 0;\n\n    if (this.table.browser === \"ie\") {\n      var event = document.createEvent(\"Event\");\n      event.initEvent(\"scroll\", false, true);\n      this.element.dispatchEvent(event);\n    } else {\n      this.element.dispatchEvent(new Event('scroll'));\n    }\n  }; //public row object\n\n\n  var RowComponent = function RowComponent(row) {\n    this._row = row;\n  };\n\n  RowComponent.prototype.getData = function (transform) {\n    return this._row.getData(transform);\n  };\n\n  RowComponent.prototype.getElement = function () {\n    return this._row.getElement();\n  };\n\n  RowComponent.prototype.getCells = function () {\n    var cells = [];\n\n    this._row.getCells().forEach(function (cell) {\n      cells.push(cell.getComponent());\n    });\n\n    return cells;\n  };\n\n  RowComponent.prototype.getCell = function (column) {\n    var cell = this._row.getCell(column);\n\n    return cell ? cell.getComponent() : false;\n  };\n\n  RowComponent.prototype.getIndex = function () {\n    return this._row.getData(\"data\")[this._row.table.options.index];\n  };\n\n  RowComponent.prototype.getPosition = function (active) {\n    return this._row.table.rowManager.getRowPosition(this._row, active);\n  };\n\n  RowComponent.prototype.delete = function () {\n    return this._row.delete();\n  };\n\n  RowComponent.prototype.scrollTo = function () {\n    return this._row.table.rowManager.scrollToRow(this._row);\n  };\n\n  RowComponent.prototype.pageTo = function () {\n    if (this._row.table.modExists(\"page\", true)) {\n      return this._row.table.modules.page.setPageToRow(this._row);\n    }\n  };\n\n  RowComponent.prototype.move = function (to, after) {\n    this._row.moveToRow(to, after);\n  };\n\n  RowComponent.prototype.update = function (data) {\n    return this._row.updateData(data);\n  };\n\n  RowComponent.prototype.normalizeHeight = function () {\n    this._row.normalizeHeight(true);\n  };\n\n  RowComponent.prototype.select = function () {\n    this._row.table.modules.selectRow.selectRows(this._row);\n  };\n\n  RowComponent.prototype.deselect = function () {\n    this._row.table.modules.selectRow.deselectRows(this._row);\n  };\n\n  RowComponent.prototype.toggleSelect = function () {\n    this._row.table.modules.selectRow.toggleRow(this._row);\n  };\n\n  RowComponent.prototype.isSelected = function () {\n    return this._row.table.modules.selectRow.isRowSelected(this._row);\n  };\n\n  RowComponent.prototype._getSelf = function () {\n    return this._row;\n  };\n\n  RowComponent.prototype.validate = function () {\n    return this._row.validate();\n  };\n\n  RowComponent.prototype.freeze = function () {\n    if (this._row.table.modExists(\"frozenRows\", true)) {\n      this._row.table.modules.frozenRows.freezeRow(this._row);\n    }\n  };\n\n  RowComponent.prototype.unfreeze = function () {\n    if (this._row.table.modExists(\"frozenRows\", true)) {\n      this._row.table.modules.frozenRows.unfreezeRow(this._row);\n    }\n  };\n\n  RowComponent.prototype.isFrozen = function () {\n    if (this._row.table.modExists(\"frozenRows\", true)) {\n      var index = this._row.table.modules.frozenRows.rows.indexOf(this._row);\n\n      return index > -1;\n    }\n\n    return false;\n  };\n\n  RowComponent.prototype.treeCollapse = function () {\n    if (this._row.table.modExists(\"dataTree\", true)) {\n      this._row.table.modules.dataTree.collapseRow(this._row);\n    }\n  };\n\n  RowComponent.prototype.treeExpand = function () {\n    if (this._row.table.modExists(\"dataTree\", true)) {\n      this._row.table.modules.dataTree.expandRow(this._row);\n    }\n  };\n\n  RowComponent.prototype.treeToggle = function () {\n    if (this._row.table.modExists(\"dataTree\", true)) {\n      this._row.table.modules.dataTree.toggleRow(this._row);\n    }\n  };\n\n  RowComponent.prototype.getTreeParent = function () {\n    if (this._row.table.modExists(\"dataTree\", true)) {\n      return this._row.table.modules.dataTree.getTreeParent(this._row);\n    }\n\n    return false;\n  };\n\n  RowComponent.prototype.getTreeChildren = function () {\n    if (this._row.table.modExists(\"dataTree\", true)) {\n      return this._row.table.modules.dataTree.getTreeChildren(this._row);\n    }\n\n    return false;\n  };\n\n  RowComponent.prototype.addTreeChild = function (data, pos, index) {\n    if (this._row.table.modExists(\"dataTree\", true)) {\n      return this._row.table.modules.dataTree.addTreeChildRow(this._row, data, pos, index);\n    }\n\n    return false;\n  };\n\n  RowComponent.prototype.reformat = function () {\n    return this._row.reinitialize();\n  };\n\n  RowComponent.prototype.getGroup = function () {\n    return this._row.getGroup().getComponent();\n  };\n\n  RowComponent.prototype.getTable = function () {\n    return this._row.table;\n  };\n\n  RowComponent.prototype.getNextRow = function () {\n    var row = this._row.nextRow();\n\n    return row ? row.getComponent() : row;\n  };\n\n  RowComponent.prototype.getPrevRow = function () {\n    var row = this._row.prevRow();\n\n    return row ? row.getComponent() : row;\n  };\n\n  var Row = function Row(data, parent) {\n    var type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"row\";\n    this.table = parent.table;\n    this.parent = parent;\n    this.data = {};\n    this.type = type; //type of element\n\n    this.element = this.createElement();\n    this.modules = {}; //hold module variables;\n\n    this.cells = [];\n    this.height = 0; //hold element height\n\n    this.heightStyled = \"\"; //hold element height prestyled to improve render efficiency\n\n    this.manualHeight = false; //user has manually set row height\n\n    this.outerHeight = 0; //holde lements outer height\n\n    this.initialized = false; //element has been rendered\n\n    this.heightInitialized = false; //element has resized cells to fit\n\n    this.component = null;\n    this.setData(data);\n    this.generateElement();\n  };\n\n  Row.prototype.createElement = function () {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-row\");\n    el.setAttribute(\"role\", \"row\");\n    return el;\n  };\n\n  Row.prototype.getElement = function () {\n    return this.element;\n  };\n\n  Row.prototype.detachElement = function () {\n    if (this.element && this.element.parentNode) {\n      this.element.parentNode.removeChild(this.element);\n    }\n  };\n\n  Row.prototype.generateElement = function () {\n    var self = this,\n        dblTap,\n        tapHold,\n        tap; //set row selection characteristics\n\n    if (self.table.options.selectable !== false && self.table.modExists(\"selectRow\")) {\n      self.table.modules.selectRow.initializeRow(this);\n    } //setup movable rows\n\n\n    if (self.table.options.movableRows !== false && self.table.modExists(\"moveRow\")) {\n      self.table.modules.moveRow.initializeRow(this);\n    } //setup data tree\n\n\n    if (self.table.options.dataTree !== false && self.table.modExists(\"dataTree\")) {\n      self.table.modules.dataTree.initializeRow(this);\n    } //setup column colapse container\n\n\n    if (self.table.options.responsiveLayout === \"collapse\" && self.table.modExists(\"responsiveLayout\")) {\n      self.table.modules.responsiveLayout.initializeRow(this);\n    } //set column menu\n\n\n    if (self.table.options.rowContextMenu && this.table.modExists(\"menu\")) {\n      self.table.modules.menu.initializeRow(this);\n    } //handle row click events\n\n\n    if (self.table.options.rowClick) {\n      self.element.addEventListener(\"click\", function (e) {\n        self.table.options.rowClick(e, self.getComponent());\n      });\n    }\n\n    if (self.table.options.rowDblClick) {\n      self.element.addEventListener(\"dblclick\", function (e) {\n        self.table.options.rowDblClick(e, self.getComponent());\n      });\n    }\n\n    if (self.table.options.rowContext) {\n      self.element.addEventListener(\"contextmenu\", function (e) {\n        self.table.options.rowContext(e, self.getComponent());\n      });\n    } //handle mouse events\n\n\n    if (self.table.options.rowMouseEnter) {\n      self.element.addEventListener(\"mouseenter\", function (e) {\n        self.table.options.rowMouseEnter(e, self.getComponent());\n      });\n    }\n\n    if (self.table.options.rowMouseLeave) {\n      self.element.addEventListener(\"mouseleave\", function (e) {\n        self.table.options.rowMouseLeave(e, self.getComponent());\n      });\n    }\n\n    if (self.table.options.rowMouseOver) {\n      self.element.addEventListener(\"mouseover\", function (e) {\n        self.table.options.rowMouseOver(e, self.getComponent());\n      });\n    }\n\n    if (self.table.options.rowMouseOut) {\n      self.element.addEventListener(\"mouseout\", function (e) {\n        self.table.options.rowMouseOut(e, self.getComponent());\n      });\n    }\n\n    if (self.table.options.rowMouseMove) {\n      self.element.addEventListener(\"mousemove\", function (e) {\n        self.table.options.rowMouseMove(e, self.getComponent());\n      });\n    }\n\n    if (self.table.options.rowTap) {\n      tap = false;\n      self.element.addEventListener(\"touchstart\", function (e) {\n        tap = true;\n      }, {\n        passive: true\n      });\n      self.element.addEventListener(\"touchend\", function (e) {\n        if (tap) {\n          self.table.options.rowTap(e, self.getComponent());\n        }\n\n        tap = false;\n      });\n    }\n\n    if (self.table.options.rowDblTap) {\n      dblTap = null;\n      self.element.addEventListener(\"touchend\", function (e) {\n        if (dblTap) {\n          clearTimeout(dblTap);\n          dblTap = null;\n          self.table.options.rowDblTap(e, self.getComponent());\n        } else {\n          dblTap = setTimeout(function () {\n            clearTimeout(dblTap);\n            dblTap = null;\n          }, 300);\n        }\n      });\n    }\n\n    if (self.table.options.rowTapHold) {\n      tapHold = null;\n      self.element.addEventListener(\"touchstart\", function (e) {\n        clearTimeout(tapHold);\n        tapHold = setTimeout(function () {\n          clearTimeout(tapHold);\n          tapHold = null;\n          tap = false;\n          self.table.options.rowTapHold(e, self.getComponent());\n        }, 1000);\n      }, {\n        passive: true\n      });\n      self.element.addEventListener(\"touchend\", function (e) {\n        clearTimeout(tapHold);\n        tapHold = null;\n      });\n    }\n  };\n\n  Row.prototype.generateCells = function () {\n    this.cells = this.table.columnManager.generateCells(this);\n  }; //functions to setup on first render\n\n\n  Row.prototype.initialize = function (force) {\n    var self = this;\n\n    if (!self.initialized || force) {\n      self.deleteCells();\n\n      while (self.element.firstChild) {\n        self.element.removeChild(self.element.firstChild);\n      } //handle frozen cells\n\n\n      if (this.table.modExists(\"frozenColumns\")) {\n        this.table.modules.frozenColumns.layoutRow(this);\n      }\n\n      this.generateCells();\n      self.cells.forEach(function (cell) {\n        self.element.appendChild(cell.getElement());\n        cell.cellRendered();\n      });\n\n      if (force) {\n        self.normalizeHeight();\n      } //setup movable rows\n\n\n      if (self.table.options.dataTree && self.table.modExists(\"dataTree\")) {\n        self.table.modules.dataTree.layoutRow(this);\n      } //setup column colapse container\n\n\n      if (self.table.options.responsiveLayout === \"collapse\" && self.table.modExists(\"responsiveLayout\")) {\n        self.table.modules.responsiveLayout.layoutRow(this);\n      }\n\n      if (self.table.options.rowFormatter) {\n        self.table.options.rowFormatter(self.getComponent());\n      } //set resizable handles\n\n\n      if (self.table.options.resizableRows && self.table.modExists(\"resizeRows\")) {\n        self.table.modules.resizeRows.initializeRow(self);\n      }\n\n      self.initialized = true;\n    }\n  };\n\n  Row.prototype.reinitializeHeight = function () {\n    this.heightInitialized = false;\n\n    if (this.element.offsetParent !== null) {\n      this.normalizeHeight(true);\n    }\n  };\n\n  Row.prototype.reinitialize = function () {\n    this.initialized = false;\n    this.heightInitialized = false;\n\n    if (!this.manualHeight) {\n      this.height = 0;\n      this.heightStyled = \"\";\n    }\n\n    if (this.element.offsetParent !== null) {\n      this.initialize(true);\n    }\n  }; //get heights when doing bulk row style calcs in virtual DOM\n\n\n  Row.prototype.calcHeight = function (force) {\n    var maxHeight = 0,\n        minHeight = this.table.options.resizableRows ? this.element.clientHeight : 0;\n    this.cells.forEach(function (cell) {\n      var height = cell.getHeight();\n\n      if (height > maxHeight) {\n        maxHeight = height;\n      }\n    });\n\n    if (force) {\n      this.height = Math.max(maxHeight, minHeight);\n    } else {\n      this.height = this.manualHeight ? this.height : Math.max(maxHeight, minHeight);\n    }\n\n    this.heightStyled = this.height ? this.height + \"px\" : \"\";\n    this.outerHeight = this.element.offsetHeight;\n  }; //set of cells\n\n\n  Row.prototype.setCellHeight = function () {\n    this.cells.forEach(function (cell) {\n      cell.setHeight();\n    });\n    this.heightInitialized = true;\n  };\n\n  Row.prototype.clearCellHeight = function () {\n    this.cells.forEach(function (cell) {\n      cell.clearHeight();\n    });\n  }; //normalize the height of elements in the row\n\n\n  Row.prototype.normalizeHeight = function (force) {\n    if (force) {\n      this.clearCellHeight();\n    }\n\n    this.calcHeight(force);\n    this.setCellHeight();\n  }; // Row.prototype.setHeight = function(height){\n  // \tthis.height = height;\n  // \tthis.setCellHeight();\n  // };\n  //set height of rows\n\n\n  Row.prototype.setHeight = function (height, force) {\n    if (this.height != height || force) {\n      this.manualHeight = true;\n      this.height = height;\n      this.heightStyled = height ? height + \"px\" : \"\";\n      this.setCellHeight(); // this.outerHeight = this.element.outerHeight();\n\n      this.outerHeight = this.element.offsetHeight;\n    }\n  }; //return rows outer height\n\n\n  Row.prototype.getHeight = function () {\n    return this.outerHeight;\n  }; //return rows outer Width\n\n\n  Row.prototype.getWidth = function () {\n    return this.element.offsetWidth;\n  }; //////////////// Cell Management /////////////////\n\n\n  Row.prototype.deleteCell = function (cell) {\n    var index = this.cells.indexOf(cell);\n\n    if (index > -1) {\n      this.cells.splice(index, 1);\n    }\n  }; //////////////// Data Management /////////////////\n\n\n  Row.prototype.setData = function (data) {\n    if (this.table.modExists(\"mutator\")) {\n      data = this.table.modules.mutator.transformRow(data, \"data\");\n    }\n\n    this.data = data;\n\n    if (this.table.options.reactiveData && this.table.modExists(\"reactiveData\", true)) {\n      this.table.modules.reactiveData.watchRow(this);\n    }\n  }; //update the rows data\n\n\n  Row.prototype.updateData = function (updatedData) {\n    var _this15 = this;\n\n    var visible = Tabulator.prototype.helpers.elVisible(this.element),\n        tempData = {},\n        newRowData;\n    return new Promise(function (resolve, reject) {\n      if (typeof updatedData === \"string\") {\n        updatedData = JSON.parse(updatedData);\n      }\n\n      if (_this15.table.options.reactiveData && _this15.table.modExists(\"reactiveData\", true)) {\n        _this15.table.modules.reactiveData.block();\n      } //mutate incomming data if needed\n\n\n      if (_this15.table.modExists(\"mutator\")) {\n        tempData = Object.assign(tempData, _this15.data);\n        tempData = Object.assign(tempData, updatedData);\n        newRowData = _this15.table.modules.mutator.transformRow(tempData, \"data\", updatedData);\n      } else {\n        newRowData = updatedData;\n      } //set data\n\n\n      for (var attrname in newRowData) {\n        _this15.data[attrname] = newRowData[attrname];\n      }\n\n      if (_this15.table.options.reactiveData && _this15.table.modExists(\"reactiveData\", true)) {\n        _this15.table.modules.reactiveData.unblock();\n      } //update affected cells only\n\n\n      for (var attrname in updatedData) {\n        var columns = _this15.table.columnManager.getColumnsByFieldRoot(attrname);\n\n        columns.forEach(function (column) {\n          var cell = _this15.getCell(column.getField());\n\n          if (cell) {\n            var value = column.getFieldValue(newRowData);\n\n            if (cell.getValue() != value) {\n              cell.setValueProcessData(value);\n\n              if (visible) {\n                cell.cellRendered();\n              }\n            }\n          }\n        });\n      } //Partial reinitialization if visible\n\n\n      if (visible) {\n        _this15.normalizeHeight(true);\n\n        if (_this15.table.options.rowFormatter) {\n          _this15.table.options.rowFormatter(_this15.getComponent());\n        }\n      } else {\n        _this15.initialized = false;\n        _this15.height = 0;\n        _this15.heightStyled = \"\";\n      }\n\n      if (_this15.table.options.dataTree !== false && _this15.table.modExists(\"dataTree\") && _this15.table.modules.dataTree.redrawNeeded(updatedData)) {\n        _this15.table.modules.dataTree.initializeRow(_this15);\n\n        _this15.table.modules.dataTree.layoutRow(_this15);\n\n        _this15.table.rowManager.refreshActiveData(\"tree\", false, true);\n      } //this.reinitialize();\n\n\n      _this15.table.options.rowUpdated.call(_this15.table, _this15.getComponent());\n\n      resolve();\n    });\n  };\n\n  Row.prototype.getData = function (transform) {\n    var self = this;\n\n    if (transform) {\n      if (self.table.modExists(\"accessor\")) {\n        return self.table.modules.accessor.transformRow(self.data, transform);\n      }\n    } else {\n      return this.data;\n    }\n  };\n\n  Row.prototype.getCell = function (column) {\n    var match = false;\n    column = this.table.columnManager.findColumn(column);\n    match = this.cells.find(function (cell) {\n      return cell.column === column;\n    });\n    return match;\n  };\n\n  Row.prototype.getCellIndex = function (findCell) {\n    return this.cells.findIndex(function (cell) {\n      return cell === findCell;\n    });\n  };\n\n  Row.prototype.findNextEditableCell = function (index) {\n    var nextCell = false;\n\n    if (index < this.cells.length - 1) {\n      for (var i = index + 1; i < this.cells.length; i++) {\n        var cell = this.cells[i];\n\n        if (cell.column.modules.edit && Tabulator.prototype.helpers.elVisible(cell.getElement())) {\n          var allowEdit = true;\n\n          if (typeof cell.column.modules.edit.check == \"function\") {\n            allowEdit = cell.column.modules.edit.check(cell.getComponent());\n          }\n\n          if (allowEdit) {\n            nextCell = cell;\n            break;\n          }\n        }\n      }\n    }\n\n    return nextCell;\n  };\n\n  Row.prototype.findPrevEditableCell = function (index) {\n    var prevCell = false;\n\n    if (index > 0) {\n      for (var i = index - 1; i >= 0; i--) {\n        var cell = this.cells[i],\n            allowEdit = true;\n\n        if (cell.column.modules.edit && Tabulator.prototype.helpers.elVisible(cell.getElement())) {\n          if (typeof cell.column.modules.edit.check == \"function\") {\n            allowEdit = cell.column.modules.edit.check(cell.getComponent());\n          }\n\n          if (allowEdit) {\n            prevCell = cell;\n            break;\n          }\n        }\n      }\n    }\n\n    return prevCell;\n  };\n\n  Row.prototype.getCells = function () {\n    return this.cells;\n  };\n\n  Row.prototype.nextRow = function () {\n    var row = this.table.rowManager.nextDisplayRow(this, true);\n    return row || false;\n  };\n\n  Row.prototype.prevRow = function () {\n    var row = this.table.rowManager.prevDisplayRow(this, true);\n    return row || false;\n  };\n\n  Row.prototype.moveToRow = function (to, before) {\n    var toRow = this.table.rowManager.findRow(to);\n\n    if (toRow) {\n      this.table.rowManager.moveRowActual(this, toRow, !before);\n      this.table.rowManager.refreshActiveData(\"display\", false, true);\n    } else {\n      console.warn(\"Move Error - No matching row found:\", to);\n    }\n  };\n\n  Row.prototype.validate = function () {\n    var invalid = [];\n    this.cells.forEach(function (cell) {\n      if (!cell.validate()) {\n        invalid.push(cell.getComponent());\n      }\n    });\n    return invalid.length ? invalid : true;\n  }; ///////////////////// Actions  /////////////////////\n\n\n  Row.prototype.delete = function () {\n    var _this16 = this;\n\n    return new Promise(function (resolve, reject) {\n      var index, rows;\n\n      if (_this16.table.options.history && _this16.table.modExists(\"history\")) {\n        if (_this16.table.options.groupBy && _this16.table.modExists(\"groupRows\")) {\n          rows = _this16.getGroup().rows;\n          index = rows.indexOf(_this16);\n\n          if (index) {\n            index = rows[index - 1];\n          }\n        } else {\n          index = _this16.table.rowManager.getRowIndex(_this16);\n\n          if (index) {\n            index = _this16.table.rowManager.rows[index - 1];\n          }\n        }\n\n        _this16.table.modules.history.action(\"rowDelete\", _this16, {\n          data: _this16.getData(),\n          pos: !index,\n          index: index\n        });\n      }\n\n      _this16.deleteActual();\n\n      resolve();\n    });\n  };\n\n  Row.prototype.deleteActual = function (blockRedraw) {\n    var index = this.table.rowManager.getRowIndex(this);\n    this.detatchModules(); // if(this.table.options.dataTree && this.table.modExists(\"dataTree\")){\n    // \tthis.table.modules.dataTree.collapseRow(this, true);\n    // }\n    //remove any reactive data watchers from row object\n\n    if (this.table.options.reactiveData && this.table.modExists(\"reactiveData\", true)) {} // this.table.modules.reactiveData.unwatchRow(this);\n    //remove from group\n\n\n    if (this.modules.group) {\n      this.modules.group.removeRow(this);\n    }\n\n    this.table.rowManager.deleteRow(this, blockRedraw);\n    this.deleteCells();\n    this.initialized = false;\n    this.heightInitialized = false;\n\n    if (this.table.options.dataTree && this.table.modExists(\"dataTree\", true)) {\n      this.table.modules.dataTree.rowDelete(this);\n    } //recalc column calculations if present\n\n\n    if (this.table.modExists(\"columnCalcs\")) {\n      if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n        this.table.modules.columnCalcs.recalcRowGroup(this);\n      } else {\n        this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\n      }\n    }\n  };\n\n  Row.prototype.detatchModules = function () {\n    //deselect row if it is selected\n    if (this.table.modExists(\"selectRow\")) {\n      this.table.modules.selectRow._deselectRow(this, true);\n    } //cancel edit if row is currently being edited\n\n\n    if (this.table.modExists(\"edit\")) {\n      if (this.table.modules.edit.currentCell.row === this) {\n        this.table.modules.edit.cancelEdit();\n      }\n    }\n\n    if (this.table.modExists(\"frozenRows\")) {\n      this.table.modules.frozenRows.detachRow(this);\n    }\n  };\n\n  Row.prototype.deleteCells = function () {\n    var cellCount = this.cells.length;\n\n    for (var _i5 = 0; _i5 < cellCount; _i5++) {\n      this.cells[0].delete();\n    }\n  };\n\n  Row.prototype.wipe = function () {\n    this.detatchModules();\n    this.deleteCells();\n\n    while (this.element.firstChild) {\n      this.element.removeChild(this.element.firstChild);\n    }\n\n    this.element = false;\n    this.modules = {};\n\n    if (this.element.parentNode) {\n      this.element.parentNode.removeChild(this.element);\n    }\n  };\n\n  Row.prototype.getGroup = function () {\n    return this.modules.group || false;\n  }; //////////////// Object Generation /////////////////\n\n\n  Row.prototype.getComponent = function () {\n    if (!this.component) {\n      this.component = new RowComponent(this);\n    }\n\n    return this.component;\n  }; //public row object\n\n\n  var CellComponent = function CellComponent(cell) {\n    this._cell = cell;\n  };\n\n  CellComponent.prototype.getValue = function () {\n    return this._cell.getValue();\n  };\n\n  CellComponent.prototype.getOldValue = function () {\n    return this._cell.getOldValue();\n  };\n\n  CellComponent.prototype.getElement = function () {\n    return this._cell.getElement();\n  };\n\n  CellComponent.prototype.getRow = function () {\n    return this._cell.row.getComponent();\n  };\n\n  CellComponent.prototype.getData = function () {\n    return this._cell.row.getData();\n  };\n\n  CellComponent.prototype.getField = function () {\n    return this._cell.column.getField();\n  };\n\n  CellComponent.prototype.getColumn = function () {\n    return this._cell.column.getComponent();\n  };\n\n  CellComponent.prototype.setValue = function (value, mutate) {\n    if (typeof mutate == \"undefined\") {\n      mutate = true;\n    }\n\n    this._cell.setValue(value, mutate);\n  };\n\n  CellComponent.prototype.restoreOldValue = function () {\n    this._cell.setValueActual(this._cell.getOldValue());\n  };\n\n  CellComponent.prototype.edit = function (force) {\n    return this._cell.edit(force);\n  };\n\n  CellComponent.prototype.cancelEdit = function () {\n    this._cell.cancelEdit();\n  };\n\n  CellComponent.prototype.isEdited = function () {\n    return !!this._cell.modules.edit && this._cell.modules.edit.edited;\n  };\n\n  CellComponent.prototype.clearEdited = function () {\n    if (self.table.modExists(\"edit\", true)) {\n      this._cell.table.modules.edit.clearEdited(this._cell);\n    }\n  };\n\n  CellComponent.prototype.isValid = function () {\n    return this._cell.modules.validate ? !this._cell.modules.validate.invalid : true;\n  };\n\n  CellComponent.prototype.validate = function () {\n    return this._cell.validate();\n  };\n\n  CellComponent.prototype.clearValidation = function () {\n    if (self.table.modExists(\"validate\", true)) {\n      this._cell.table.modules.validate.clearValidation(this._cell);\n    }\n  };\n\n  CellComponent.prototype.nav = function () {\n    return this._cell.nav();\n  };\n\n  CellComponent.prototype.checkHeight = function () {\n    this._cell.checkHeight();\n  };\n\n  CellComponent.prototype.getTable = function () {\n    return this._cell.table;\n  };\n\n  CellComponent.prototype._getSelf = function () {\n    return this._cell;\n  };\n\n  var Cell = function Cell(column, row) {\n    this.table = column.table;\n    this.column = column;\n    this.row = row;\n    this.element = null;\n    this.value = null;\n    this.oldValue = null;\n    this.modules = {};\n    this.height = null;\n    this.width = null;\n    this.minWidth = null;\n    this.component = null;\n    this.build();\n  }; //////////////// Setup Functions /////////////////\n  //generate element\n\n\n  Cell.prototype.build = function () {\n    this.generateElement();\n    this.setWidth();\n\n    this._configureCell();\n\n    this.setValueActual(this.column.getFieldValue(this.row.data));\n  };\n\n  Cell.prototype.generateElement = function () {\n    this.element = document.createElement('div');\n    this.element.className = \"tabulator-cell\";\n    this.element.setAttribute(\"role\", \"gridcell\");\n    this.element = this.element;\n  };\n\n  Cell.prototype._configureCell = function () {\n    var self = this,\n        cellEvents = self.column.cellEvents,\n        element = self.element,\n        field = this.column.getField(),\n        vertAligns = {\n      top: \"flex-start\",\n      bottom: \"flex-end\",\n      middle: \"center\"\n    },\n        hozAligns = {\n      left: \"flex-start\",\n      right: \"flex-end\",\n      center: \"center\"\n    }; //set text alignment\n\n    element.style.textAlign = self.column.hozAlign;\n\n    if (self.column.vertAlign) {\n      element.style.display = \"inline-flex\";\n      element.style.alignItems = vertAligns[self.column.vertAlign] || \"\";\n\n      if (self.column.hozAlign) {\n        element.style.justifyContent = hozAligns[self.column.hozAlign] || \"\";\n      }\n    }\n\n    if (field) {\n      element.setAttribute(\"tabulator-field\", field);\n    } //add class to cell if needed\n\n\n    if (self.column.definition.cssClass) {\n      var classNames = self.column.definition.cssClass.split(\" \");\n      classNames.forEach(function (className) {\n        element.classList.add(className);\n      });\n    } //update tooltip on mouse enter\n\n\n    if (this.table.options.tooltipGenerationMode === \"hover\") {\n      element.addEventListener(\"mouseenter\", function (e) {\n        self._generateTooltip();\n      });\n    }\n\n    self._bindClickEvents(cellEvents);\n\n    self._bindTouchEvents(cellEvents);\n\n    self._bindMouseEvents(cellEvents);\n\n    if (self.column.modules.edit) {\n      self.table.modules.edit.bindEditor(self);\n    }\n\n    if (self.column.definition.rowHandle && self.table.options.movableRows !== false && self.table.modExists(\"moveRow\")) {\n      self.table.modules.moveRow.initializeCell(self);\n    } //hide cell if not visible\n\n\n    if (!self.column.visible) {\n      self.hide();\n    }\n  };\n\n  Cell.prototype._bindClickEvents = function (cellEvents) {\n    var self = this,\n        element = self.element; //set event bindings\n\n    if (cellEvents.cellClick || self.table.options.cellClick) {\n      element.addEventListener(\"click\", function (e) {\n        var component = self.getComponent();\n\n        if (cellEvents.cellClick) {\n          cellEvents.cellClick.call(self.table, e, component);\n        }\n\n        if (self.table.options.cellClick) {\n          self.table.options.cellClick.call(self.table, e, component);\n        }\n      });\n    }\n\n    if (cellEvents.cellDblClick || this.table.options.cellDblClick) {\n      element.addEventListener(\"dblclick\", function (e) {\n        var component = self.getComponent();\n\n        if (cellEvents.cellDblClick) {\n          cellEvents.cellDblClick.call(self.table, e, component);\n        }\n\n        if (self.table.options.cellDblClick) {\n          self.table.options.cellDblClick.call(self.table, e, component);\n        }\n      });\n    } else {\n      element.addEventListener(\"dblclick\", function (e) {\n        if (self.table.modExists(\"edit\")) {\n          if (self.table.modules.edit.currentCell === self) {\n            return; //prevent instant selection of editor content\n          }\n        }\n\n        e.preventDefault();\n\n        try {\n          if (document.selection) {\n            // IE\n            var range = document.body.createTextRange();\n            range.moveToElementText(self.element);\n            range.select();\n          } else if (window.getSelection) {\n            var range = document.createRange();\n            range.selectNode(self.element);\n            window.getSelection().removeAllRanges();\n            window.getSelection().addRange(range);\n          }\n        } catch (e) {}\n      });\n    }\n\n    if (cellEvents.cellContext || this.table.options.cellContext) {\n      element.addEventListener(\"contextmenu\", function (e) {\n        var component = self.getComponent();\n\n        if (cellEvents.cellContext) {\n          cellEvents.cellContext.call(self.table, e, component);\n        }\n\n        if (self.table.options.cellContext) {\n          self.table.options.cellContext.call(self.table, e, component);\n        }\n      });\n    }\n  };\n\n  Cell.prototype._bindMouseEvents = function (cellEvents) {\n    var self = this,\n        element = self.element;\n\n    if (cellEvents.cellMouseEnter || self.table.options.cellMouseEnter) {\n      element.addEventListener(\"mouseenter\", function (e) {\n        var component = self.getComponent();\n\n        if (cellEvents.cellMouseEnter) {\n          cellEvents.cellMouseEnter.call(self.table, e, component);\n        }\n\n        if (self.table.options.cellMouseEnter) {\n          self.table.options.cellMouseEnter.call(self.table, e, component);\n        }\n      });\n    }\n\n    if (cellEvents.cellMouseLeave || self.table.options.cellMouseLeave) {\n      element.addEventListener(\"mouseleave\", function (e) {\n        var component = self.getComponent();\n\n        if (cellEvents.cellMouseLeave) {\n          cellEvents.cellMouseLeave.call(self.table, e, component);\n        }\n\n        if (self.table.options.cellMouseLeave) {\n          self.table.options.cellMouseLeave.call(self.table, e, component);\n        }\n      });\n    }\n\n    if (cellEvents.cellMouseOver || self.table.options.cellMouseOver) {\n      element.addEventListener(\"mouseover\", function (e) {\n        var component = self.getComponent();\n\n        if (cellEvents.cellMouseOver) {\n          cellEvents.cellMouseOver.call(self.table, e, component);\n        }\n\n        if (self.table.options.cellMouseOver) {\n          self.table.options.cellMouseOver.call(self.table, e, component);\n        }\n      });\n    }\n\n    if (cellEvents.cellMouseOut || self.table.options.cellMouseOut) {\n      element.addEventListener(\"mouseout\", function (e) {\n        var component = self.getComponent();\n\n        if (cellEvents.cellMouseOut) {\n          cellEvents.cellMouseOut.call(self.table, e, component);\n        }\n\n        if (self.table.options.cellMouseOut) {\n          self.table.options.cellMouseOut.call(self.table, e, component);\n        }\n      });\n    }\n\n    if (cellEvents.cellMouseMove || self.table.options.cellMouseMove) {\n      element.addEventListener(\"mousemove\", function (e) {\n        var component = self.getComponent();\n\n        if (cellEvents.cellMouseMove) {\n          cellEvents.cellMouseMove.call(self.table, e, component);\n        }\n\n        if (self.table.options.cellMouseMove) {\n          self.table.options.cellMouseMove.call(self.table, e, component);\n        }\n      });\n    }\n  };\n\n  Cell.prototype._bindTouchEvents = function (cellEvents) {\n    var self = this,\n        element = self.element,\n        dblTap,\n        tapHold,\n        tap;\n\n    if (cellEvents.cellTap || this.table.options.cellTap) {\n      tap = false;\n      element.addEventListener(\"touchstart\", function (e) {\n        tap = true;\n      }, {\n        passive: true\n      });\n      element.addEventListener(\"touchend\", function (e) {\n        if (tap) {\n          var component = self.getComponent();\n\n          if (cellEvents.cellTap) {\n            cellEvents.cellTap.call(self.table, e, component);\n          }\n\n          if (self.table.options.cellTap) {\n            self.table.options.cellTap.call(self.table, e, component);\n          }\n        }\n\n        tap = false;\n      });\n    }\n\n    if (cellEvents.cellDblTap || this.table.options.cellDblTap) {\n      dblTap = null;\n      element.addEventListener(\"touchend\", function (e) {\n        if (dblTap) {\n          clearTimeout(dblTap);\n          dblTap = null;\n          var component = self.getComponent();\n\n          if (cellEvents.cellDblTap) {\n            cellEvents.cellDblTap.call(self.table, e, component);\n          }\n\n          if (self.table.options.cellDblTap) {\n            self.table.options.cellDblTap.call(self.table, e, component);\n          }\n        } else {\n          dblTap = setTimeout(function () {\n            clearTimeout(dblTap);\n            dblTap = null;\n          }, 300);\n        }\n      });\n    }\n\n    if (cellEvents.cellTapHold || this.table.options.cellTapHold) {\n      tapHold = null;\n      element.addEventListener(\"touchstart\", function (e) {\n        clearTimeout(tapHold);\n        tapHold = setTimeout(function () {\n          clearTimeout(tapHold);\n          tapHold = null;\n          tap = false;\n          var component = self.getComponent();\n\n          if (cellEvents.cellTapHold) {\n            cellEvents.cellTapHold.call(self.table, e, component);\n          }\n\n          if (self.table.options.cellTapHold) {\n            self.table.options.cellTapHold.call(self.table, e, component);\n          }\n        }, 1000);\n      }, {\n        passive: true\n      });\n      element.addEventListener(\"touchend\", function (e) {\n        clearTimeout(tapHold);\n        tapHold = null;\n      });\n    }\n  }; //generate cell contents\n\n\n  Cell.prototype._generateContents = function () {\n    var val;\n\n    if (this.table.modExists(\"format\")) {\n      val = this.table.modules.format.formatValue(this);\n    } else {\n      val = this.element.innerHTML = this.value;\n    }\n\n    switch (typeof val === 'undefined' ? 'undefined' : _typeof(val)) {\n      case \"object\":\n        if (val instanceof Node) {\n          //clear previous cell contents\n          while (this.element.firstChild) {\n            this.element.removeChild(this.element.firstChild);\n          }\n\n          this.element.appendChild(val);\n        } else {\n          this.element.innerHTML = \"\";\n\n          if (val != null) {\n            console.warn(\"Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", val);\n          }\n        }\n\n        break;\n\n      case \"undefined\":\n      case \"null\":\n        this.element.innerHTML = \"\";\n        break;\n\n      default:\n        this.element.innerHTML = val;\n    }\n  };\n\n  Cell.prototype.cellRendered = function () {\n    if (this.table.modExists(\"format\") && this.table.modules.format.cellRendered) {\n      this.table.modules.format.cellRendered(this);\n    }\n  }; //generate tooltip text\n\n\n  Cell.prototype._generateTooltip = function () {\n    var tooltip = this.column.tooltip;\n\n    if (tooltip) {\n      if (tooltip === true) {\n        tooltip = this.value;\n      } else if (typeof tooltip == \"function\") {\n        tooltip = tooltip(this.getComponent());\n\n        if (tooltip === false) {\n          tooltip = \"\";\n        }\n      }\n\n      if (typeof tooltip === \"undefined\") {\n        tooltip = \"\";\n      }\n\n      this.element.setAttribute(\"title\", tooltip);\n    } else {\n      this.element.setAttribute(\"title\", \"\");\n    }\n  }; //////////////////// Getters ////////////////////\n\n\n  Cell.prototype.getElement = function () {\n    return this.element;\n  };\n\n  Cell.prototype.getValue = function () {\n    return this.value;\n  };\n\n  Cell.prototype.getOldValue = function () {\n    return this.oldValue;\n  }; //////////////////// Actions ////////////////////\n\n\n  Cell.prototype.setValue = function (value, mutate) {\n    var changed = this.setValueProcessData(value, mutate),\n        component;\n\n    if (changed) {\n      if (this.table.options.history && this.table.modExists(\"history\")) {\n        this.table.modules.history.action(\"cellEdit\", this, {\n          oldValue: this.oldValue,\n          newValue: this.value\n        });\n      }\n\n      component = this.getComponent();\n\n      if (this.column.cellEvents.cellEdited) {\n        this.column.cellEvents.cellEdited.call(this.table, component);\n      }\n\n      this.cellRendered();\n      this.table.options.cellEdited.call(this.table, component);\n      this.table.options.dataEdited.call(this.table, this.table.rowManager.getData());\n    }\n  };\n\n  Cell.prototype.setValueProcessData = function (value, mutate) {\n    var changed = false;\n\n    if (this.value != value) {\n      changed = true;\n\n      if (mutate) {\n        if (this.column.modules.mutate) {\n          value = this.table.modules.mutator.transformCell(this, value);\n        }\n      }\n    }\n\n    this.setValueActual(value);\n\n    if (changed && this.table.modExists(\"columnCalcs\")) {\n      if (this.column.definition.topCalc || this.column.definition.bottomCalc) {\n        if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n          if (this.table.options.columnCalcs == \"table\" || this.table.options.columnCalcs == \"both\") {\n            this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\n          }\n\n          if (this.table.options.columnCalcs != \"table\") {\n            this.table.modules.columnCalcs.recalcRowGroup(this.row);\n          }\n        } else {\n          this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\n        }\n      }\n    }\n\n    return changed;\n  };\n\n  Cell.prototype.setValueActual = function (value) {\n    this.oldValue = this.value;\n    this.value = value;\n\n    if (this.table.options.reactiveData && this.table.modExists(\"reactiveData\")) {\n      this.table.modules.reactiveData.block();\n    }\n\n    this.column.setFieldValue(this.row.data, value);\n\n    if (this.table.options.reactiveData && this.table.modExists(\"reactiveData\")) {\n      this.table.modules.reactiveData.unblock();\n    }\n\n    this._generateContents();\n\n    this._generateTooltip(); //set resizable handles\n\n\n    if (this.table.options.resizableColumns && this.table.modExists(\"resizeColumns\")) {\n      this.table.modules.resizeColumns.initializeColumn(\"cell\", this.column, this.element);\n    } //set column menu\n\n\n    if (this.column.definition.contextMenu && this.table.modExists(\"menu\")) {\n      this.table.modules.menu.initializeCell(this);\n    } //handle frozen cells\n\n\n    if (this.table.modExists(\"frozenColumns\")) {\n      this.table.modules.frozenColumns.layoutElement(this.element, this.column);\n    }\n  };\n\n  Cell.prototype.setWidth = function () {\n    this.width = this.column.width;\n    this.element.style.width = this.column.widthStyled;\n  };\n\n  Cell.prototype.clearWidth = function () {\n    this.width = \"\";\n    this.element.style.width = \"\";\n  };\n\n  Cell.prototype.getWidth = function () {\n    return this.width || this.element.offsetWidth;\n  };\n\n  Cell.prototype.setMinWidth = function () {\n    this.minWidth = this.column.minWidth;\n    this.element.style.minWidth = this.column.minWidthStyled;\n  };\n\n  Cell.prototype.checkHeight = function () {\n    // var height = this.element.css(\"height\");\n    this.row.reinitializeHeight();\n  };\n\n  Cell.prototype.clearHeight = function () {\n    this.element.style.height = \"\";\n    this.height = null;\n  };\n\n  Cell.prototype.setHeight = function () {\n    this.height = this.row.height;\n    this.element.style.height = this.row.heightStyled;\n  };\n\n  Cell.prototype.getHeight = function () {\n    return this.height || this.element.offsetHeight;\n  };\n\n  Cell.prototype.show = function () {\n    this.element.style.display = \"\";\n  };\n\n  Cell.prototype.hide = function () {\n    this.element.style.display = \"none\";\n  };\n\n  Cell.prototype.edit = function (force) {\n    if (this.table.modExists(\"edit\", true)) {\n      return this.table.modules.edit.editCell(this, force);\n    }\n  };\n\n  Cell.prototype.cancelEdit = function () {\n    if (this.table.modExists(\"edit\", true)) {\n      var editing = this.table.modules.edit.getCurrentCell();\n\n      if (editing && editing._getSelf() === this) {\n        this.table.modules.edit.cancelEdit();\n      } else {\n        console.warn(\"Cancel Editor Error - This cell is not currently being edited \");\n      }\n    }\n  };\n\n  Cell.prototype.validate = function () {\n    if (this.column.modules.validate && this.table.modExists(\"validate\", true)) {\n      var valid = this.table.modules.validate.validate(this.column.modules.validate, this, this.getValue());\n      return valid === true;\n    } else {\n      return true;\n    }\n  };\n\n  Cell.prototype.delete = function () {\n    if (!this.table.rowManager.redrawBlock && this.element.parentNode) {\n      this.element.parentNode.removeChild(this.element);\n    }\n\n    if (this.modules.validate && this.modules.validate.invalid) {\n      this.table.modules.validate.clearValidation(this);\n    }\n\n    if (this.modules.edit && this.modules.edit.edited) {\n      this.table.modules.edit.clearEdited(this);\n    }\n\n    this.element = false;\n    this.column.deleteCell(this);\n    this.row.deleteCell(this);\n    this.calcs = {};\n  }; //////////////// Navigation /////////////////\n\n\n  Cell.prototype.nav = function () {\n    var self = this,\n        nextCell = false,\n        index = this.row.getCellIndex(this);\n    return {\n      next: function next() {\n        var nextCell = this.right(),\n            nextRow;\n\n        if (!nextCell) {\n          nextRow = self.table.rowManager.nextDisplayRow(self.row, true);\n\n          if (nextRow) {\n            nextCell = nextRow.findNextEditableCell(-1);\n\n            if (nextCell) {\n              nextCell.edit();\n              return true;\n            }\n          }\n        } else {\n          return true;\n        }\n\n        return false;\n      },\n      prev: function prev() {\n        var nextCell = this.left(),\n            prevRow;\n\n        if (!nextCell) {\n          prevRow = self.table.rowManager.prevDisplayRow(self.row, true);\n\n          if (prevRow) {\n            nextCell = prevRow.findPrevEditableCell(prevRow.cells.length);\n\n            if (nextCell) {\n              nextCell.edit();\n              return true;\n            }\n          }\n        } else {\n          return true;\n        }\n\n        return false;\n      },\n      left: function left() {\n        nextCell = self.row.findPrevEditableCell(index);\n\n        if (nextCell) {\n          nextCell.edit();\n          return true;\n        } else {\n          return false;\n        }\n      },\n      right: function right() {\n        nextCell = self.row.findNextEditableCell(index);\n\n        if (nextCell) {\n          nextCell.edit();\n          return true;\n        } else {\n          return false;\n        }\n      },\n      up: function up() {\n        var nextRow = self.table.rowManager.prevDisplayRow(self.row, true);\n\n        if (nextRow) {\n          nextRow.cells[index].edit();\n        }\n      },\n      down: function down() {\n        var nextRow = self.table.rowManager.nextDisplayRow(self.row, true);\n\n        if (nextRow) {\n          nextRow.cells[index].edit();\n        }\n      }\n    };\n  };\n\n  Cell.prototype.getIndex = function () {\n    this.row.getCellIndex(this);\n  }; //////////////// Object Generation /////////////////\n\n\n  Cell.prototype.getComponent = function () {\n    if (!this.component) {\n      this.component = new CellComponent(this);\n    }\n\n    return this.component;\n  };\n\n  var FooterManager = function FooterManager(table) {\n    this.table = table;\n    this.active = false;\n    this.element = this.createElement(); //containing element\n\n    this.external = false;\n    this.links = [];\n\n    this._initialize();\n  };\n\n  FooterManager.prototype.createElement = function () {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-footer\");\n    return el;\n  };\n\n  FooterManager.prototype._initialize = function (element) {\n    if (this.table.options.footerElement) {\n      switch (_typeof(this.table.options.footerElement)) {\n        case \"string\":\n          if (this.table.options.footerElement[0] === \"<\") {\n            this.element.innerHTML = this.table.options.footerElement;\n          } else {\n            this.external = true;\n            this.element = document.querySelector(this.table.options.footerElement);\n          }\n\n          break;\n\n        default:\n          this.element = this.table.options.footerElement;\n          break;\n      }\n    }\n  };\n\n  FooterManager.prototype.getElement = function () {\n    return this.element;\n  };\n\n  FooterManager.prototype.append = function (element, parent) {\n    this.activate(parent);\n    this.element.appendChild(element);\n    this.table.rowManager.adjustTableSize();\n  };\n\n  FooterManager.prototype.prepend = function (element, parent) {\n    this.activate(parent);\n    this.element.insertBefore(element, this.element.firstChild);\n    this.table.rowManager.adjustTableSize();\n  };\n\n  FooterManager.prototype.remove = function (element) {\n    element.parentNode.removeChild(element);\n    this.deactivate();\n  };\n\n  FooterManager.prototype.deactivate = function (force) {\n    if (!this.element.firstChild || force) {\n      if (!this.external) {\n        this.element.parentNode.removeChild(this.element);\n      }\n\n      this.active = false;\n    } // this.table.rowManager.adjustTableSize();\n\n  };\n\n  FooterManager.prototype.activate = function (parent) {\n    if (!this.active) {\n      this.active = true;\n\n      if (!this.external) {\n        this.table.element.appendChild(this.getElement());\n        this.table.element.style.display = '';\n      }\n    }\n\n    if (parent) {\n      this.links.push(parent);\n    }\n  };\n\n  FooterManager.prototype.redraw = function () {\n    this.links.forEach(function (link) {\n      link.footerRedraw();\n    });\n  };\n\n  var Tabulator = function Tabulator(element, options) {\n    this.options = {};\n    this.columnManager = null; // hold Column Manager\n\n    this.rowManager = null; //hold Row Manager\n\n    this.footerManager = null; //holder Footer Manager\n\n    this.browser = \"\"; //hold current browser type\n\n    this.browserSlow = false; //handle reduced functionality for slower browsers\n\n    this.browserMobile = false; //check if running on moble, prevent resize cancelling edit on keyboard appearence\n\n    this.modules = {}; //hold all modules bound to this table\n\n    this.initializeElement(element);\n    this.initializeOptions(options || {});\n\n    this._create();\n\n    Tabulator.prototype.comms.register(this); //register table for inderdevice communication\n  }; //default setup options\n\n\n  Tabulator.prototype.defaultOptions = {\n    height: false,\n    //height of tabulator\n    minHeight: false,\n    //minimum height of tabulator\n    maxHeight: false,\n    //maximum height of tabulator\n    layout: \"fitData\",\n    ///layout type \"fitColumns\" | \"fitData\"\n    layoutColumnsOnNewData: false,\n    //update column widths on setData\n    columnMinWidth: 40,\n    //minimum global width for a column\n    columnHeaderVertAlign: \"top\",\n    //vertical alignment of column headers\n    columnVertAlign: false,\n    // DEPRECATED - Left to allow warning\n    resizableColumns: true,\n    //resizable columns\n    resizableRows: false,\n    //resizable rows\n    autoResize: true,\n    //auto resize table\n    columns: [],\n    //store for colum header info\n    cellHozAlign: \"\",\n    //horizontal align columns\n    cellVertAlign: \"\",\n    //certical align columns\n    data: [],\n    //default starting data\n    autoColumns: false,\n    //build columns from data row structure\n    reactiveData: false,\n    //enable data reactivity\n    nestedFieldSeparator: \".\",\n    //seperatpr for nested data\n    tooltips: false,\n    //Tool tip value\n    tooltipsHeader: false,\n    //Tool tip for headers\n    tooltipGenerationMode: \"load\",\n    //when to generate tooltips\n    initialSort: false,\n    //initial sorting criteria\n    initialFilter: false,\n    //initial filtering criteria\n    initialHeaderFilter: false,\n    //initial header filtering criteria\n    columnHeaderSortMulti: true,\n    //multiple or single column sorting\n    sortOrderReverse: false,\n    //reverse internal sort ordering\n    headerSort: true,\n    //set default global header sort\n    headerSortTristate: false,\n    //set default tristate header sorting\n    footerElement: false,\n    //hold footer element\n    index: \"id\",\n    //filed for row index\n    keybindings: [],\n    //array for keybindings\n    tabEndNewRow: false,\n    //create new row when tab to end of table\n    invalidOptionWarnings: true,\n    //allow toggling of invalid option warnings\n    clipboard: false,\n    //enable clipboard\n    clipboardCopyStyled: true,\n    //formatted table data\n    clipboardCopyConfig: false,\n    //clipboard config\n    clipboardCopyFormatter: false,\n    //DEPRICATED - REMOVE in 5.0\n    clipboardCopyRowRange: \"active\",\n    //restrict clipboard to visible rows only\n    clipboardPasteParser: \"table\",\n    //convert pasted clipboard data to rows\n    clipboardPasteAction: \"insert\",\n    //how to insert pasted data into the table\n    clipboardCopied: function clipboardCopied() {},\n    //data has been copied to the clipboard\n    clipboardPasted: function clipboardPasted() {},\n    //data has been pasted into the table\n    clipboardPasteError: function clipboardPasteError() {},\n    //data has not successfully been pasted into the table\n    downloadDataFormatter: false,\n    //function to manipulate table data before it is downloaded\n    downloadReady: function downloadReady(data, blob) {\n      return blob;\n    },\n    //function to manipulate download data\n    downloadComplete: false,\n    //function to manipulate download data\n    downloadConfig: {},\n    //download config\n    downloadRowRange: \"active\",\n    //restrict download to active rows only\n    dataTree: false,\n    //enable data tree\n    dataTreeElementColumn: false,\n    dataTreeBranchElement: true,\n    //show data tree branch element\n    dataTreeChildIndent: 9,\n    //data tree child indent in px\n    dataTreeChildField: \"_children\",\n    //data tre column field to look for child rows\n    dataTreeCollapseElement: false,\n    //data tree row collapse element\n    dataTreeExpandElement: false,\n    //data tree row expand element\n    dataTreeStartExpanded: false,\n    dataTreeRowExpanded: function dataTreeRowExpanded() {},\n    //row has been expanded\n    dataTreeRowCollapsed: function dataTreeRowCollapsed() {},\n    //row has been collapsed\n    dataTreeChildColumnCalcs: false,\n    //include visible data tree rows in column calculations\n    dataTreeSelectPropagate: false,\n    //seleccting a parent row selects its children\n    printAsHtml: false,\n    //enable print as html\n    printFormatter: false,\n    //printing page formatter\n    printHeader: false,\n    //page header contents\n    printFooter: false,\n    //page footer contents\n    printCopyStyle: true,\n    //DEPRICATED - REMOVE in 5.0\n    printStyled: true,\n    //enable print as html styling\n    printVisibleRows: true,\n    //DEPRICATED - REMOVE in 5.0\n    printRowRange: \"visible\",\n    //restrict print to visible rows only\n    printConfig: {},\n    //print config options\n    addRowPos: \"bottom\",\n    //position to insert blank rows, top|bottom\n    selectable: \"highlight\",\n    //highlight rows on hover\n    selectableRangeMode: \"drag\",\n    //highlight rows on hover\n    selectableRollingSelection: true,\n    //roll selection once maximum number of selectable rows is reached\n    selectablePersistence: true,\n    // maintain selection when table view is updated\n    selectableCheck: function selectableCheck(data, row) {\n      return true;\n    },\n    //check wheather row is selectable\n    headerFilterLiveFilterDelay: 300,\n    //delay before updating column after user types in header filter\n    headerFilterPlaceholder: false,\n    //placeholder text to display in header filters\n    headerVisible: true,\n    //hide header\n    history: false,\n    //enable edit history\n    locale: false,\n    //current system language\n    langs: {},\n    virtualDom: true,\n    //enable DOM virtualization\n    virtualDomBuffer: 0,\n    // set virtual DOM buffer size\n    persistentLayout: false,\n    //DEPRICATED - REMOVE in 5.0\n    persistentSort: false,\n    //DEPRICATED - REMOVE in 5.0\n    persistentFilter: false,\n    //DEPRICATED - REMOVE in 5.0\n    persistenceID: \"\",\n    //key for persistent storage\n    persistenceMode: true,\n    //mode for storing persistence information\n    persistenceReaderFunc: false,\n    //function for handling persistence data reading\n    persistenceWriterFunc: false,\n    //function for handling persistence data writing\n    persistence: false,\n    responsiveLayout: false,\n    //responsive layout flags\n    responsiveLayoutCollapseStartOpen: true,\n    //start showing collapsed data\n    responsiveLayoutCollapseUseFormatters: true,\n    //responsive layout collapse formatter\n    responsiveLayoutCollapseFormatter: false,\n    //responsive layout collapse formatter\n    pagination: false,\n    //set pagination type\n    paginationSize: false,\n    //set number of rows to a page\n    paginationInitialPage: 1,\n    //initail page to show on load\n    paginationButtonCount: 5,\n    // set count of page button\n    paginationSizeSelector: false,\n    //add pagination size selector element\n    paginationElement: false,\n    //element to hold pagination numbers\n    paginationDataSent: {},\n    //pagination data sent to the server\n    paginationDataReceived: {},\n    //pagination data received from the server\n    paginationAddRow: \"page\",\n    //add rows on table or page\n    ajaxURL: false,\n    //url for ajax loading\n    ajaxURLGenerator: false,\n    ajaxParams: {},\n    //params for ajax loading\n    ajaxConfig: \"get\",\n    //ajax request type\n    ajaxContentType: \"form\",\n    //ajax request type\n    ajaxRequestFunc: false,\n    //promise function\n    ajaxLoader: true,\n    //show loader\n    ajaxLoaderLoading: false,\n    //loader element\n    ajaxLoaderError: false,\n    //loader element\n    ajaxFiltering: false,\n    ajaxSorting: false,\n    ajaxProgressiveLoad: false,\n    //progressive loading\n    ajaxProgressiveLoadDelay: 0,\n    //delay between requests\n    ajaxProgressiveLoadScrollMargin: 0,\n    //margin before scroll begins\n    groupBy: false,\n    //enable table grouping and set field to group by\n    groupStartOpen: true,\n    //starting state of group\n    groupValues: false,\n    groupHeader: false,\n    //header generation function\n    groupHeaderPrint: null,\n    groupHeaderClipboard: null,\n    groupHeaderHtmlOutput: null,\n    groupHeaderDownload: null,\n    htmlOutputConfig: false,\n    //html outypu config\n    movableColumns: false,\n    //enable movable columns\n    movableRows: false,\n    //enable movable rows\n    movableRowsConnectedTables: false,\n    //tables for movable rows to be connected to\n    movableRowsConnectedElements: false,\n    //other elements for movable rows to be connected to\n    movableRowsSender: false,\n    movableRowsReceiver: \"insert\",\n    movableRowsSendingStart: function movableRowsSendingStart() {},\n    movableRowsSent: function movableRowsSent() {},\n    movableRowsSentFailed: function movableRowsSentFailed() {},\n    movableRowsSendingStop: function movableRowsSendingStop() {},\n    movableRowsReceivingStart: function movableRowsReceivingStart() {},\n    movableRowsReceived: function movableRowsReceived() {},\n    movableRowsReceivedFailed: function movableRowsReceivedFailed() {},\n    movableRowsReceivingStop: function movableRowsReceivingStop() {},\n    movableRowsElementDrop: function movableRowsElementDrop() {},\n    scrollToRowPosition: \"top\",\n    scrollToRowIfVisible: true,\n    scrollToColumnPosition: \"left\",\n    scrollToColumnIfVisible: true,\n    rowFormatter: false,\n    rowFormatterPrint: null,\n    rowFormatterClipboard: null,\n    rowFormatterHtmlOutput: null,\n    placeholder: false,\n    //table building callbacks\n    tableBuilding: function tableBuilding() {},\n    tableBuilt: function tableBuilt() {},\n    //render callbacks\n    renderStarted: function renderStarted() {},\n    renderComplete: function renderComplete() {},\n    //row callbacks\n    rowClick: false,\n    rowDblClick: false,\n    rowContext: false,\n    rowTap: false,\n    rowDblTap: false,\n    rowTapHold: false,\n    rowMouseEnter: false,\n    rowMouseLeave: false,\n    rowMouseOver: false,\n    rowMouseOut: false,\n    rowMouseMove: false,\n    rowContextMenu: false,\n    rowAdded: function rowAdded() {},\n    rowDeleted: function rowDeleted() {},\n    rowMoved: function rowMoved() {},\n    rowUpdated: function rowUpdated() {},\n    rowSelectionChanged: function rowSelectionChanged() {},\n    rowSelected: function rowSelected() {},\n    rowDeselected: function rowDeselected() {},\n    rowResized: function rowResized() {},\n    //cell callbacks\n    //row callbacks\n    cellClick: false,\n    cellDblClick: false,\n    cellContext: false,\n    cellTap: false,\n    cellDblTap: false,\n    cellTapHold: false,\n    cellMouseEnter: false,\n    cellMouseLeave: false,\n    cellMouseOver: false,\n    cellMouseOut: false,\n    cellMouseMove: false,\n    cellEditing: function cellEditing() {},\n    cellEdited: function cellEdited() {},\n    cellEditCancelled: function cellEditCancelled() {},\n    //column callbacks\n    columnMoved: false,\n    columnResized: function columnResized() {},\n    columnTitleChanged: function columnTitleChanged() {},\n    columnVisibilityChanged: function columnVisibilityChanged() {},\n    //HTML iport callbacks\n    htmlImporting: function htmlImporting() {},\n    htmlImported: function htmlImported() {},\n    //data callbacks\n    dataLoading: function dataLoading() {},\n    dataLoaded: function dataLoaded() {},\n    dataEdited: function dataEdited() {},\n    //ajax callbacks\n    ajaxRequesting: function ajaxRequesting() {},\n    ajaxResponse: false,\n    ajaxError: function ajaxError() {},\n    //filtering callbacks\n    dataFiltering: false,\n    dataFiltered: false,\n    //sorting callbacks\n    dataSorting: function dataSorting() {},\n    dataSorted: function dataSorted() {},\n    //grouping callbacks\n    groupToggleElement: \"arrow\",\n    groupClosedShowCalcs: false,\n    dataGrouping: function dataGrouping() {},\n    dataGrouped: false,\n    groupVisibilityChanged: function groupVisibilityChanged() {},\n    groupClick: false,\n    groupDblClick: false,\n    groupContext: false,\n    groupContextMenu: false,\n    groupTap: false,\n    groupDblTap: false,\n    groupTapHold: false,\n    columnCalcs: true,\n    //pagination callbacks\n    pageLoaded: function pageLoaded() {},\n    //localization callbacks\n    localized: function localized() {},\n    //validation callbacks\n    validationMode: \"blocking\",\n    validationFailed: function validationFailed() {},\n    //history callbacks\n    historyUndo: function historyUndo() {},\n    historyRedo: function historyRedo() {},\n    //scroll callbacks\n    scrollHorizontal: function scrollHorizontal() {},\n    scrollVertical: function scrollVertical() {}\n  };\n\n  Tabulator.prototype.initializeOptions = function (options) {\n    //warn user if option is not available\n    if (options.invalidOptionWarnings !== false) {\n      for (var key in options) {\n        if (typeof this.defaultOptions[key] === \"undefined\") {\n          console.warn(\"Invalid table constructor option:\", key);\n        }\n      }\n    } //assign options to table\n\n\n    for (var key in this.defaultOptions) {\n      if (key in options) {\n        this.options[key] = options[key];\n      } else {\n        if (Array.isArray(this.defaultOptions[key])) {\n          this.options[key] = [];\n        } else if (_typeof(this.defaultOptions[key]) === \"object\" && this.defaultOptions[key] !== null) {\n          this.options[key] = {};\n        } else {\n          this.options[key] = this.defaultOptions[key];\n        }\n      }\n    }\n  };\n\n  Tabulator.prototype.initializeElement = function (element) {\n    if (typeof HTMLElement !== \"undefined\" && element instanceof HTMLElement) {\n      this.element = element;\n      return true;\n    } else if (typeof element === \"string\") {\n      this.element = document.querySelector(element);\n\n      if (this.element) {\n        return true;\n      } else {\n        console.error(\"Tabulator Creation Error - no element found matching selector: \", element);\n        return false;\n      }\n    } else {\n      console.error(\"Tabulator Creation Error - Invalid element provided:\", element);\n      return false;\n    }\n  }; //convert depricated functionality to new functions\n\n\n  Tabulator.prototype._mapDepricatedFunctionality = function () {\n    //map depricated persistance setup options\n    if (this.options.persistentLayout || this.options.persistentSort || this.options.persistentFilter) {\n      if (!this.options.persistence) {\n        this.options.persistence = {};\n      }\n    }\n\n    if (this.options.downloadDataFormatter) {\n      console.warn(\"DEPRECATION WARNING - downloadDataFormatter option has been deprecated\");\n    }\n\n    if (typeof this.options.clipboardCopyHeader !== \"undefined\") {\n      this.options.columnHeaders = this.options.clipboardCopyHeader;\n      console.warn(\"DEPRECATION WARNING - clipboardCopyHeader option has been deprecated, please use the columnHeaders property on the clipboardCopyConfig option\");\n    }\n\n    if (this.options.printVisibleRows !== true) {\n      console.warn(\"printVisibleRows option is deprecated, you should now use the printRowRange option\");\n      this.options.persistence.printRowRange = \"active\";\n    }\n\n    if (this.options.printCopyStyle !== true) {\n      console.warn(\"printCopyStyle option is deprecated, you should now use the printStyled option\");\n      this.options.persistence.printStyled = this.options.printCopyStyle;\n    }\n\n    if (this.options.persistentLayout) {\n      console.warn(\"persistentLayout option is deprecated, you should now use the persistence option\");\n\n      if (this.options.persistence !== true && typeof this.options.persistence.columns === \"undefined\") {\n        this.options.persistence.columns = true;\n      }\n    }\n\n    if (this.options.persistentSort) {\n      console.warn(\"persistentSort option is deprecated, you should now use the persistence option\");\n\n      if (this.options.persistence !== true && typeof this.options.persistence.sort === \"undefined\") {\n        this.options.persistence.sort = true;\n      }\n    }\n\n    if (this.options.persistentFilter) {\n      console.warn(\"persistentFilter option is deprecated, you should now use the persistence option\");\n\n      if (this.options.persistence !== true && typeof this.options.persistence.filter === \"undefined\") {\n        this.options.persistence.filter = true;\n      }\n    }\n\n    if (this.options.columnVertAlign) {\n      console.warn(\"columnVertAlign option is deprecated, you should now use the columnHeaderVertAlign option\");\n      this.options.columnHeaderVertAlign = this.options.columnVertAlign;\n    }\n  };\n\n  Tabulator.prototype._clearSelection = function () {\n    this.element.classList.add(\"tabulator-block-select\");\n\n    if (window.getSelection) {\n      if (window.getSelection().empty) {\n        // Chrome\n        window.getSelection().empty();\n      } else if (window.getSelection().removeAllRanges) {\n        // Firefox\n        window.getSelection().removeAllRanges();\n      }\n    } else if (document.selection) {\n      // IE?\n      document.selection.empty();\n    }\n\n    this.element.classList.remove(\"tabulator-block-select\");\n  }; //concreate table\n\n\n  Tabulator.prototype._create = function () {\n    this._clearObjectPointers();\n\n    this._mapDepricatedFunctionality();\n\n    this.bindModules();\n\n    if (this.element.tagName === \"TABLE\") {\n      if (this.modExists(\"htmlTableImport\", true)) {\n        this.modules.htmlTableImport.parseTable();\n      }\n    }\n\n    this.columnManager = new ColumnManager(this);\n    this.rowManager = new RowManager(this);\n    this.footerManager = new FooterManager(this);\n    this.columnManager.setRowManager(this.rowManager);\n    this.rowManager.setColumnManager(this.columnManager);\n\n    this._buildElement();\n\n    this._loadInitialData();\n  }; //clear pointers to objects in default config object\n\n\n  Tabulator.prototype._clearObjectPointers = function () {\n    this.options.columns = this.options.columns.slice(0);\n\n    if (!this.options.reactiveData) {\n      this.options.data = this.options.data.slice(0);\n    }\n  }; //build tabulator element\n\n\n  Tabulator.prototype._buildElement = function () {\n    var _this17 = this;\n\n    var element = this.element,\n        mod = this.modules,\n        options = this.options;\n    options.tableBuilding.call(this);\n    element.classList.add(\"tabulator\");\n    element.setAttribute(\"role\", \"grid\"); //empty element\n\n    while (element.firstChild) {\n      element.removeChild(element.firstChild);\n    } //set table height\n\n\n    if (options.height) {\n      options.height = isNaN(options.height) ? options.height : options.height + \"px\";\n      element.style.height = options.height;\n    } //set table min height\n\n\n    if (options.minHeight !== false) {\n      options.minHeight = isNaN(options.minHeight) ? options.minHeight : options.minHeight + \"px\";\n      element.style.minHeight = options.minHeight;\n    } //set table maxHeight\n\n\n    if (options.maxHeight !== false) {\n      options.maxHeight = isNaN(options.maxHeight) ? options.maxHeight : options.maxHeight + \"px\";\n      element.style.maxHeight = options.maxHeight;\n    }\n\n    this.columnManager.initialize();\n    this.rowManager.initialize();\n\n    this._detectBrowser();\n\n    if (this.modExists(\"layout\", true)) {\n      mod.layout.initialize(options.layout);\n    } //set localization\n\n\n    if (options.headerFilterPlaceholder !== false) {\n      mod.localize.setHeaderFilterPlaceholder(options.headerFilterPlaceholder);\n    }\n\n    for (var locale in options.langs) {\n      mod.localize.installLang(locale, options.langs[locale]);\n    }\n\n    mod.localize.setLocale(options.locale); //configure placeholder element\n\n    if (typeof options.placeholder == \"string\") {\n      var el = document.createElement(\"div\");\n      el.classList.add(\"tabulator-placeholder\");\n      var span = document.createElement(\"span\");\n      span.innerHTML = options.placeholder;\n      el.appendChild(span);\n      options.placeholder = el;\n    } //build table elements\n\n\n    element.appendChild(this.columnManager.getElement());\n    element.appendChild(this.rowManager.getElement());\n\n    if (options.footerElement) {\n      this.footerManager.activate();\n    }\n\n    if (options.persistence && this.modExists(\"persistence\", true)) {\n      mod.persistence.initialize();\n    }\n\n    if (options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.columns) {\n      options.columns = mod.persistence.load(\"columns\", options.columns);\n    }\n\n    if (options.movableRows && this.modExists(\"moveRow\")) {\n      mod.moveRow.initialize();\n    }\n\n    if (options.autoColumns && this.options.data) {\n      this.columnManager.generateColumnsFromRowData(this.options.data);\n    }\n\n    if (this.modExists(\"columnCalcs\")) {\n      mod.columnCalcs.initialize();\n    }\n\n    this.columnManager.setColumns(options.columns);\n\n    if (options.dataTree && this.modExists(\"dataTree\", true)) {\n      mod.dataTree.initialize();\n    }\n\n    if (this.modExists(\"frozenRows\")) {\n      this.modules.frozenRows.initialize();\n    }\n\n    if ((options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.sort || options.initialSort) && this.modExists(\"sort\", true)) {\n      var sorters = [];\n\n      if (options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.sort) {\n        sorters = mod.persistence.load(\"sort\");\n\n        if (sorters === false && options.initialSort) {\n          sorters = options.initialSort;\n        }\n      } else if (options.initialSort) {\n        sorters = options.initialSort;\n      }\n\n      mod.sort.setSort(sorters);\n    }\n\n    if ((options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.filter || options.initialFilter) && this.modExists(\"filter\", true)) {\n      var filters = [];\n\n      if (options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.filter) {\n        filters = mod.persistence.load(\"filter\");\n\n        if (filters === false && options.initialFilter) {\n          filters = options.initialFilter;\n        }\n      } else if (options.initialFilter) {\n        filters = options.initialFilter;\n      }\n\n      mod.filter.setFilter(filters);\n    }\n\n    if (options.initialHeaderFilter && this.modExists(\"filter\", true)) {\n      options.initialHeaderFilter.forEach(function (item) {\n        var column = _this17.columnManager.findColumn(item.field);\n\n        if (column) {\n          mod.filter.setHeaderFilterValue(column, item.value);\n        } else {\n          console.warn(\"Column Filter Error - No matching column found:\", item.field);\n          return false;\n        }\n      });\n    }\n\n    if (this.modExists(\"ajax\")) {\n      mod.ajax.initialize();\n    }\n\n    if (options.pagination && this.modExists(\"page\", true)) {\n      mod.page.initialize();\n    }\n\n    if (options.groupBy && this.modExists(\"groupRows\", true)) {\n      mod.groupRows.initialize();\n    }\n\n    if (this.modExists(\"keybindings\")) {\n      mod.keybindings.initialize();\n    }\n\n    if (this.modExists(\"selectRow\")) {\n      mod.selectRow.clearSelectionData(true);\n    }\n\n    if (options.autoResize && this.modExists(\"resizeTable\")) {\n      mod.resizeTable.initialize();\n    }\n\n    if (this.modExists(\"clipboard\")) {\n      mod.clipboard.initialize();\n    }\n\n    if (options.printAsHtml && this.modExists(\"print\")) {\n      mod.print.initialize();\n    }\n\n    options.tableBuilt.call(this);\n  };\n\n  Tabulator.prototype._loadInitialData = function () {\n    var self = this;\n\n    if (self.options.pagination && self.modExists(\"page\")) {\n      self.modules.page.reset(true, true);\n\n      if (self.options.pagination == \"local\") {\n        if (self.options.data.length) {\n          self.rowManager.setData(self.options.data, false, true);\n        } else {\n          if ((self.options.ajaxURL || self.options.ajaxURLGenerator) && self.modExists(\"ajax\")) {\n            self.modules.ajax.loadData(false, true).then(function () {}).catch(function () {\n              if (self.options.paginationInitialPage) {\n                self.modules.page.setPage(self.options.paginationInitialPage);\n              }\n            });\n            return;\n          } else {\n            self.rowManager.setData(self.options.data, false, true);\n          }\n        }\n\n        if (self.options.paginationInitialPage) {\n          self.modules.page.setPage(self.options.paginationInitialPage);\n        }\n      } else {\n        if (self.options.ajaxURL) {\n          self.modules.page.setPage(self.options.paginationInitialPage).then(function () {}).catch(function () {});\n        } else {\n          self.rowManager.setData([], false, true);\n        }\n      }\n    } else {\n      if (self.options.data.length) {\n        self.rowManager.setData(self.options.data);\n      } else {\n        if ((self.options.ajaxURL || self.options.ajaxURLGenerator) && self.modExists(\"ajax\")) {\n          self.modules.ajax.loadData(false, true).then(function () {}).catch(function () {});\n        } else {\n          self.rowManager.setData(self.options.data, false, true);\n        }\n      }\n    }\n  }; //deconstructor\n\n\n  Tabulator.prototype.destroy = function () {\n    var element = this.element;\n    Tabulator.prototype.comms.deregister(this); //deregister table from inderdevice communication\n\n    if (this.options.reactiveData && this.modExists(\"reactiveData\", true)) {\n      this.modules.reactiveData.unwatchData();\n    } //clear row data\n\n\n    this.rowManager.rows.forEach(function (row) {\n      row.wipe();\n    });\n    this.rowManager.rows = [];\n    this.rowManager.activeRows = [];\n    this.rowManager.displayRows = []; //clear event bindings\n\n    if (this.options.autoResize && this.modExists(\"resizeTable\")) {\n      this.modules.resizeTable.clearBindings();\n    }\n\n    if (this.modExists(\"keybindings\")) {\n      this.modules.keybindings.clearBindings();\n    } //clear DOM\n\n\n    while (element.firstChild) {\n      element.removeChild(element.firstChild);\n    }\n\n    element.classList.remove(\"tabulator\");\n  };\n\n  Tabulator.prototype._detectBrowser = function () {\n    var ua = navigator.userAgent || navigator.vendor || window.opera;\n\n    if (ua.indexOf(\"Trident\") > -1) {\n      this.browser = \"ie\";\n      this.browserSlow = true;\n    } else if (ua.indexOf(\"Edge\") > -1) {\n      this.browser = \"edge\";\n      this.browserSlow = true;\n    } else if (ua.indexOf(\"Firefox\") > -1) {\n      this.browser = \"firefox\";\n      this.browserSlow = false;\n    } else {\n      this.browser = \"other\";\n      this.browserSlow = false;\n    }\n\n    this.browserMobile = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(ua) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(ua.substr(0, 4));\n  }; ////////////////// Data Handling //////////////////\n  //block table redrawing\n\n\n  Tabulator.prototype.blockRedraw = function () {\n    return this.rowManager.blockRedraw();\n  }; //restore table redrawing\n\n\n  Tabulator.prototype.restoreRedraw = function () {\n    return this.rowManager.restoreRedraw();\n  }; //local data from local file\n\n\n  Tabulator.prototype.setDataFromLocalFile = function (extensions) {\n    var _this18 = this;\n\n    return new Promise(function (resolve, reject) {\n      var input = document.createElement(\"input\");\n      input.type = \"file\";\n      input.accept = extensions || \".json,application/json\";\n      input.addEventListener(\"change\", function (e) {\n        var file = input.files[0],\n            reader = new FileReader(),\n            data;\n        reader.readAsText(file);\n\n        reader.onload = function (e) {\n          try {\n            data = JSON.parse(reader.result);\n          } catch (e) {\n            console.warn(\"File Load Error - File contents is invalid JSON\", e);\n            reject(e);\n            return;\n          }\n\n          _this18.setData(data).then(function (data) {\n            resolve(data);\n          }).catch(function (err) {\n            resolve(err);\n          });\n        };\n\n        reader.onerror = function (e) {\n          console.warn(\"File Load Error - Unable to read file\");\n          reject();\n        };\n      });\n      input.click();\n    });\n  }; //load data\n\n\n  Tabulator.prototype.setData = function (data, params, config) {\n    if (this.modExists(\"ajax\")) {\n      this.modules.ajax.blockActiveRequest();\n    }\n\n    return this._setData(data, params, config, false, true);\n  };\n\n  Tabulator.prototype._setData = function (data, params, config, inPosition, columnsChanged) {\n    var self = this;\n\n    if (typeof data === \"string\") {\n      if (data.indexOf(\"{\") == 0 || data.indexOf(\"[\") == 0) {\n        //data is a json encoded string\n        return self.rowManager.setData(JSON.parse(data), inPosition, columnsChanged);\n      } else {\n        if (self.modExists(\"ajax\", true)) {\n          if (params) {\n            self.modules.ajax.setParams(params);\n          }\n\n          if (config) {\n            self.modules.ajax.setConfig(config);\n          }\n\n          self.modules.ajax.setUrl(data);\n\n          if (self.options.pagination == \"remote\" && self.modExists(\"page\", true)) {\n            self.modules.page.reset(true, true);\n            return self.modules.page.setPage(1);\n          } else {\n            //assume data is url, make ajax call to url to get data\n            return self.modules.ajax.loadData(inPosition, columnsChanged);\n          }\n        }\n      }\n    } else {\n      if (data) {\n        //asume data is already an object\n        return self.rowManager.setData(data, inPosition, columnsChanged);\n      } else {\n        //no data provided, check if ajaxURL is present;\n        if (self.modExists(\"ajax\") && (self.modules.ajax.getUrl || self.options.ajaxURLGenerator)) {\n          if (self.options.pagination == \"remote\" && self.modExists(\"page\", true)) {\n            self.modules.page.reset(true, true);\n            return self.modules.page.setPage(1);\n          } else {\n            return self.modules.ajax.loadData(inPosition, columnsChanged);\n          }\n        } else {\n          //empty data\n          return self.rowManager.setData([], inPosition, columnsChanged);\n        }\n      }\n    }\n  }; //clear data\n\n\n  Tabulator.prototype.clearData = function () {\n    if (this.modExists(\"ajax\")) {\n      this.modules.ajax.blockActiveRequest();\n    }\n\n    this.rowManager.clearData();\n  }; //get table data array\n\n\n  Tabulator.prototype.getData = function (active) {\n    if (active === true) {\n      console.warn(\"passing a boolean to the getData function is deprecated, you should now pass the string 'active'\");\n      active = \"active\";\n    }\n\n    return this.rowManager.getData(active);\n  }; //get table data array count\n\n\n  Tabulator.prototype.getDataCount = function (active) {\n    if (active === true) {\n      console.warn(\"passing a boolean to the getDataCount function is deprecated, you should now pass the string 'active'\");\n      active = \"active\";\n    }\n\n    return this.rowManager.getDataCount(active);\n  }; //search for specific row components\n\n\n  Tabulator.prototype.searchRows = function (field, type, value) {\n    if (this.modExists(\"filter\", true)) {\n      return this.modules.filter.search(\"rows\", field, type, value);\n    }\n  }; //search for specific data\n\n\n  Tabulator.prototype.searchData = function (field, type, value) {\n    if (this.modExists(\"filter\", true)) {\n      return this.modules.filter.search(\"data\", field, type, value);\n    }\n  }; //get table html\n\n\n  Tabulator.prototype.getHtml = function (visible, style, config) {\n    if (this.modExists(\"export\", true)) {\n      return this.modules.export.getHtml(visible, style, config);\n    }\n  }; //get print html\n\n\n  Tabulator.prototype.print = function (visible, style, config) {\n    if (this.modExists(\"print\", true)) {\n      return this.modules.print.printFullscreen(visible, style, config);\n    }\n  }; //retrieve Ajax URL\n\n\n  Tabulator.prototype.getAjaxUrl = function () {\n    if (this.modExists(\"ajax\", true)) {\n      return this.modules.ajax.getUrl();\n    }\n  }; //replace data, keeping table in position with same sort\n\n\n  Tabulator.prototype.replaceData = function (data, params, config) {\n    if (this.modExists(\"ajax\")) {\n      this.modules.ajax.blockActiveRequest();\n    }\n\n    return this._setData(data, params, config, true);\n  }; //update table data\n\n\n  Tabulator.prototype.updateData = function (data) {\n    var _this19 = this;\n\n    var self = this;\n    var responses = 0;\n    return new Promise(function (resolve, reject) {\n      if (_this19.modExists(\"ajax\")) {\n        _this19.modules.ajax.blockActiveRequest();\n      }\n\n      if (typeof data === \"string\") {\n        data = JSON.parse(data);\n      }\n\n      if (data) {\n        data.forEach(function (item) {\n          var row = self.rowManager.findRow(item[self.options.index]);\n\n          if (row) {\n            responses++;\n            row.updateData(item).then(function () {\n              responses--;\n\n              if (!responses) {\n                resolve();\n              }\n            });\n          }\n        });\n      } else {\n        console.warn(\"Update Error - No data provided\");\n        reject(\"Update Error - No data provided\");\n      }\n    });\n  };\n\n  Tabulator.prototype.addData = function (data, pos, index) {\n    var _this20 = this;\n\n    return new Promise(function (resolve, reject) {\n      if (_this20.modExists(\"ajax\")) {\n        _this20.modules.ajax.blockActiveRequest();\n      }\n\n      if (typeof data === \"string\") {\n        data = JSON.parse(data);\n      }\n\n      if (data) {\n        _this20.rowManager.addRows(data, pos, index).then(function (rows) {\n          var output = [];\n          rows.forEach(function (row) {\n            output.push(row.getComponent());\n          });\n          resolve(output);\n        });\n      } else {\n        console.warn(\"Update Error - No data provided\");\n        reject(\"Update Error - No data provided\");\n      }\n    });\n  }; //update table data\n\n\n  Tabulator.prototype.updateOrAddData = function (data) {\n    var _this21 = this;\n\n    var self = this,\n        rows = [],\n        responses = 0;\n    return new Promise(function (resolve, reject) {\n      if (_this21.modExists(\"ajax\")) {\n        _this21.modules.ajax.blockActiveRequest();\n      }\n\n      if (typeof data === \"string\") {\n        data = JSON.parse(data);\n      }\n\n      if (data) {\n        data.forEach(function (item) {\n          var row = self.rowManager.findRow(item[self.options.index]);\n          responses++;\n\n          if (row) {\n            row.updateData(item).then(function () {\n              responses--;\n              rows.push(row.getComponent());\n\n              if (!responses) {\n                resolve(rows);\n              }\n            });\n          } else {\n            self.rowManager.addRows(item).then(function (newRows) {\n              responses--;\n              rows.push(newRows[0].getComponent());\n\n              if (!responses) {\n                resolve(rows);\n              }\n            });\n          }\n        });\n      } else {\n        console.warn(\"Update Error - No data provided\");\n        reject(\"Update Error - No data provided\");\n      }\n    });\n  }; //get row object\n\n\n  Tabulator.prototype.getRow = function (index) {\n    var row = this.rowManager.findRow(index);\n\n    if (row) {\n      return row.getComponent();\n    } else {\n      console.warn(\"Find Error - No matching row found:\", index);\n      return false;\n    }\n  }; //get row object\n\n\n  Tabulator.prototype.getRowFromPosition = function (position, active) {\n    var row = this.rowManager.getRowFromPosition(position, active);\n\n    if (row) {\n      return row.getComponent();\n    } else {\n      console.warn(\"Find Error - No matching row found:\", position);\n      return false;\n    }\n  }; //delete row from table\n\n\n  Tabulator.prototype.deleteRow = function (index) {\n    var _this22 = this;\n\n    return new Promise(function (resolve, reject) {\n      var self = _this22,\n          count = 0,\n          successCount = 0,\n          foundRows = [];\n\n      function doneCheck() {\n        count++;\n\n        if (count == index.length) {\n          if (successCount) {\n            self.rowManager.reRenderInPosition();\n            resolve();\n          }\n        }\n      }\n\n      if (!Array.isArray(index)) {\n        index = [index];\n      } //find matching rows\n\n\n      index.forEach(function (item) {\n        var row = _this22.rowManager.findRow(item, true);\n\n        if (row) {\n          foundRows.push(row);\n        } else {\n          console.warn(\"Delete Error - No matching row found:\", item);\n          reject(\"Delete Error - No matching row found\");\n          doneCheck();\n        }\n      }); //sort rows into correct order to ensure smooth delete from table\n\n      foundRows.sort(function (a, b) {\n        return _this22.rowManager.rows.indexOf(a) > _this22.rowManager.rows.indexOf(b) ? 1 : -1;\n      });\n      foundRows.forEach(function (row) {\n        row.delete().then(function () {\n          successCount++;\n          doneCheck();\n        }).catch(function (err) {\n          doneCheck();\n          reject(err);\n        });\n      });\n    });\n  }; //add row to table\n\n\n  Tabulator.prototype.addRow = function (data, pos, index) {\n    var _this23 = this;\n\n    return new Promise(function (resolve, reject) {\n      if (typeof data === \"string\") {\n        data = JSON.parse(data);\n      }\n\n      _this23.rowManager.addRows(data, pos, index).then(function (rows) {\n        //recalc column calculations if present\n        if (_this23.modExists(\"columnCalcs\")) {\n          _this23.modules.columnCalcs.recalc(_this23.rowManager.activeRows);\n        }\n\n        resolve(rows[0].getComponent());\n      });\n    });\n  }; //update a row if it exitsts otherwise create it\n\n\n  Tabulator.prototype.updateOrAddRow = function (index, data) {\n    var _this24 = this;\n\n    return new Promise(function (resolve, reject) {\n      var row = _this24.rowManager.findRow(index);\n\n      if (typeof data === \"string\") {\n        data = JSON.parse(data);\n      }\n\n      if (row) {\n        row.updateData(data).then(function () {\n          //recalc column calculations if present\n          if (_this24.modExists(\"columnCalcs\")) {\n            _this24.modules.columnCalcs.recalc(_this24.rowManager.activeRows);\n          }\n\n          resolve(row.getComponent());\n        }).catch(function (err) {\n          reject(err);\n        });\n      } else {\n        row = _this24.rowManager.addRows(data).then(function (rows) {\n          //recalc column calculations if present\n          if (_this24.modExists(\"columnCalcs\")) {\n            _this24.modules.columnCalcs.recalc(_this24.rowManager.activeRows);\n          }\n\n          resolve(rows[0].getComponent());\n        }).catch(function (err) {\n          reject(err);\n        });\n      }\n    });\n  }; //update row data\n\n\n  Tabulator.prototype.updateRow = function (index, data) {\n    var _this25 = this;\n\n    return new Promise(function (resolve, reject) {\n      var row = _this25.rowManager.findRow(index);\n\n      if (typeof data === \"string\") {\n        data = JSON.parse(data);\n      }\n\n      if (row) {\n        row.updateData(data).then(function () {\n          resolve(row.getComponent());\n        }).catch(function (err) {\n          reject(err);\n        });\n      } else {\n        console.warn(\"Update Error - No matching row found:\", index);\n        reject(\"Update Error - No matching row found\");\n      }\n    });\n  }; //scroll to row in DOM\n\n\n  Tabulator.prototype.scrollToRow = function (index, position, ifVisible) {\n    var _this26 = this;\n\n    return new Promise(function (resolve, reject) {\n      var row = _this26.rowManager.findRow(index);\n\n      if (row) {\n        _this26.rowManager.scrollToRow(row, position, ifVisible).then(function () {\n          resolve();\n        }).catch(function (err) {\n          reject(err);\n        });\n      } else {\n        console.warn(\"Scroll Error - No matching row found:\", index);\n        reject(\"Scroll Error - No matching row found\");\n      }\n    });\n  };\n\n  Tabulator.prototype.moveRow = function (from, to, after) {\n    var fromRow = this.rowManager.findRow(from);\n\n    if (fromRow) {\n      fromRow.moveToRow(to, after);\n    } else {\n      console.warn(\"Move Error - No matching row found:\", from);\n    }\n  };\n\n  Tabulator.prototype.getRows = function (active) {\n    if (active === true) {\n      console.warn(\"passing a boolean to the getRows function is deprecated, you should now pass the string 'active'\");\n      active = \"active\";\n    }\n\n    return this.rowManager.getComponents(active);\n  }; //get position of row in table\n\n\n  Tabulator.prototype.getRowPosition = function (index, active) {\n    var row = this.rowManager.findRow(index);\n\n    if (row) {\n      return this.rowManager.getRowPosition(row, active);\n    } else {\n      console.warn(\"Position Error - No matching row found:\", index);\n      return false;\n    }\n  }; //copy table data to clipboard\n\n\n  Tabulator.prototype.copyToClipboard = function (selector) {\n    if (this.modExists(\"clipboard\", true)) {\n      this.modules.clipboard.copy(selector);\n    }\n  }; /////////////// Column Functions  ///////////////\n\n\n  Tabulator.prototype.setColumns = function (definition) {\n    this.columnManager.setColumns(definition);\n  };\n\n  Tabulator.prototype.getColumns = function (structured) {\n    return this.columnManager.getComponents(structured);\n  };\n\n  Tabulator.prototype.getColumn = function (field) {\n    var col = this.columnManager.findColumn(field);\n\n    if (col) {\n      return col.getComponent();\n    } else {\n      console.warn(\"Find Error - No matching column found:\", field);\n      return false;\n    }\n  };\n\n  Tabulator.prototype.getColumnDefinitions = function () {\n    return this.columnManager.getDefinitionTree();\n  };\n\n  Tabulator.prototype.getColumnLayout = function () {\n    if (this.modExists(\"persistence\", true)) {\n      return this.modules.persistence.parseColumns(this.columnManager.getColumns());\n    }\n  };\n\n  Tabulator.prototype.setColumnLayout = function (layout) {\n    if (this.modExists(\"persistence\", true)) {\n      this.columnManager.setColumns(this.modules.persistence.mergeDefinition(this.options.columns, layout));\n      return true;\n    }\n\n    return false;\n  };\n\n  Tabulator.prototype.showColumn = function (field) {\n    var column = this.columnManager.findColumn(field);\n\n    if (column) {\n      column.show();\n\n      if (this.options.responsiveLayout && this.modExists(\"responsiveLayout\", true)) {\n        this.modules.responsiveLayout.update();\n      }\n    } else {\n      console.warn(\"Column Show Error - No matching column found:\", field);\n      return false;\n    }\n  };\n\n  Tabulator.prototype.hideColumn = function (field) {\n    var column = this.columnManager.findColumn(field);\n\n    if (column) {\n      column.hide();\n\n      if (this.options.responsiveLayout && this.modExists(\"responsiveLayout\", true)) {\n        this.modules.responsiveLayout.update();\n      }\n    } else {\n      console.warn(\"Column Hide Error - No matching column found:\", field);\n      return false;\n    }\n  };\n\n  Tabulator.prototype.toggleColumn = function (field) {\n    var column = this.columnManager.findColumn(field);\n\n    if (column) {\n      if (column.visible) {\n        column.hide();\n      } else {\n        column.show();\n      }\n    } else {\n      console.warn(\"Column Visibility Toggle Error - No matching column found:\", field);\n      return false;\n    }\n  };\n\n  Tabulator.prototype.addColumn = function (definition, before, field) {\n    var _this27 = this;\n\n    return new Promise(function (resolve, reject) {\n      var column = _this27.columnManager.findColumn(field);\n\n      _this27.columnManager.addColumn(definition, before, column).then(function (column) {\n        resolve(column.getComponent());\n      }).catch(function (err) {\n        reject(err);\n      });\n    });\n  };\n\n  Tabulator.prototype.deleteColumn = function (field) {\n    var _this28 = this;\n\n    return new Promise(function (resolve, reject) {\n      var column = _this28.columnManager.findColumn(field);\n\n      if (column) {\n        column.delete().then(function () {\n          resolve();\n        }).catch(function (err) {\n          reject(err);\n        });\n      } else {\n        console.warn(\"Column Delete Error - No matching column found:\", field);\n        reject();\n      }\n    });\n  };\n\n  Tabulator.prototype.updateColumnDefinition = function (field, definition) {\n    var _this29 = this;\n\n    return new Promise(function (resolve, reject) {\n      var column = _this29.columnManager.findColumn(field);\n\n      if (column) {\n        column.updateDefinition(definition).then(function (col) {\n          resolve(col);\n        }).catch(function (err) {\n          reject(err);\n        });\n      } else {\n        console.warn(\"Column Update Error - No matching column found:\", field);\n        reject();\n      }\n    });\n  };\n\n  Tabulator.prototype.moveColumn = function (from, to, after) {\n    var fromColumn = this.columnManager.findColumn(from);\n    var toColumn = this.columnManager.findColumn(to);\n\n    if (fromColumn) {\n      if (toColumn) {\n        this.columnManager.moveColumn(fromColumn, toColumn, after);\n      } else {\n        console.warn(\"Move Error - No matching column found:\", toColumn);\n      }\n    } else {\n      console.warn(\"Move Error - No matching column found:\", from);\n    }\n  }; //scroll to column in DOM\n\n\n  Tabulator.prototype.scrollToColumn = function (field, position, ifVisible) {\n    var _this30 = this;\n\n    return new Promise(function (resolve, reject) {\n      var column = _this30.columnManager.findColumn(field);\n\n      if (column) {\n        _this30.columnManager.scrollToColumn(column, position, ifVisible).then(function () {\n          resolve();\n        }).catch(function (err) {\n          reject(err);\n        });\n      } else {\n        console.warn(\"Scroll Error - No matching column found:\", field);\n        reject(\"Scroll Error - No matching column found\");\n      }\n    });\n  }; //////////// Localization Functions  ////////////\n\n\n  Tabulator.prototype.setLocale = function (locale) {\n    this.modules.localize.setLocale(locale);\n  };\n\n  Tabulator.prototype.getLocale = function () {\n    return this.modules.localize.getLocale();\n  };\n\n  Tabulator.prototype.getLang = function (locale) {\n    return this.modules.localize.getLang(locale);\n  }; //////////// General Public Functions ////////////\n  //redraw list without updating data\n\n\n  Tabulator.prototype.redraw = function (force) {\n    this.columnManager.redraw(force);\n    this.rowManager.redraw(force);\n  };\n\n  Tabulator.prototype.setHeight = function (height) {\n    if (this.rowManager.renderMode !== \"classic\") {\n      this.options.height = isNaN(height) ? height : height + \"px\";\n      this.element.style.height = this.options.height;\n      this.rowManager.setRenderMode();\n      this.rowManager.redraw();\n    } else {\n      console.warn(\"setHeight function is not available in classic render mode\");\n    }\n  }; ///////////////////// Sorting ////////////////////\n  //trigger sort\n\n\n  Tabulator.prototype.setSort = function (sortList, dir) {\n    if (this.modExists(\"sort\", true)) {\n      this.modules.sort.setSort(sortList, dir);\n      this.rowManager.sorterRefresh();\n    }\n  };\n\n  Tabulator.prototype.getSorters = function () {\n    if (this.modExists(\"sort\", true)) {\n      return this.modules.sort.getSort();\n    }\n  };\n\n  Tabulator.prototype.clearSort = function () {\n    if (this.modExists(\"sort\", true)) {\n      this.modules.sort.clear();\n      this.rowManager.sorterRefresh();\n    }\n  }; ///////////////////// Filtering ////////////////////\n  //set standard filters\n\n\n  Tabulator.prototype.setFilter = function (field, type, value, params) {\n    if (this.modExists(\"filter\", true)) {\n      this.modules.filter.setFilter(field, type, value, params);\n      this.rowManager.filterRefresh();\n    }\n  }; //add filter to array\n\n\n  Tabulator.prototype.addFilter = function (field, type, value, params) {\n    if (this.modExists(\"filter\", true)) {\n      this.modules.filter.addFilter(field, type, value, params);\n      this.rowManager.filterRefresh();\n    }\n  }; //get all filters\n\n\n  Tabulator.prototype.getFilters = function (all) {\n    if (this.modExists(\"filter\", true)) {\n      return this.modules.filter.getFilters(all);\n    }\n  };\n\n  Tabulator.prototype.setHeaderFilterFocus = function (field) {\n    if (this.modExists(\"filter\", true)) {\n      var column = this.columnManager.findColumn(field);\n\n      if (column) {\n        this.modules.filter.setHeaderFilterFocus(column);\n      } else {\n        console.warn(\"Column Filter Focus Error - No matching column found:\", field);\n        return false;\n      }\n    }\n  };\n\n  Tabulator.prototype.getHeaderFilterValue = function (field) {\n    if (this.modExists(\"filter\", true)) {\n      var column = this.columnManager.findColumn(field);\n\n      if (column) {\n        return this.modules.filter.getHeaderFilterValue(column);\n      } else {\n        console.warn(\"Column Filter Error - No matching column found:\", field);\n      }\n    }\n  };\n\n  Tabulator.prototype.setHeaderFilterValue = function (field, value) {\n    if (this.modExists(\"filter\", true)) {\n      var column = this.columnManager.findColumn(field);\n\n      if (column) {\n        this.modules.filter.setHeaderFilterValue(column, value);\n      } else {\n        console.warn(\"Column Filter Error - No matching column found:\", field);\n        return false;\n      }\n    }\n  };\n\n  Tabulator.prototype.getHeaderFilters = function () {\n    if (this.modExists(\"filter\", true)) {\n      return this.modules.filter.getHeaderFilters();\n    }\n  }; //remove filter from array\n\n\n  Tabulator.prototype.removeFilter = function (field, type, value) {\n    if (this.modExists(\"filter\", true)) {\n      this.modules.filter.removeFilter(field, type, value);\n      this.rowManager.filterRefresh();\n    }\n  }; //clear filters\n\n\n  Tabulator.prototype.clearFilter = function (all) {\n    if (this.modExists(\"filter\", true)) {\n      this.modules.filter.clearFilter(all);\n      this.rowManager.filterRefresh();\n    }\n  }; //clear header filters\n\n\n  Tabulator.prototype.clearHeaderFilter = function () {\n    if (this.modExists(\"filter\", true)) {\n      this.modules.filter.clearHeaderFilter();\n      this.rowManager.filterRefresh();\n    }\n  }; ///////////////////// select ////////////////////\n\n\n  Tabulator.prototype.selectRow = function (rows) {\n    if (this.modExists(\"selectRow\", true)) {\n      if (rows === true) {\n        console.warn(\"passing a boolean to the selectRowselectRow function is deprecated, you should now pass the string 'active'\");\n        rows = \"active\";\n      }\n\n      this.modules.selectRow.selectRows(rows);\n    }\n  };\n\n  Tabulator.prototype.deselectRow = function (rows) {\n    if (this.modExists(\"selectRow\", true)) {\n      this.modules.selectRow.deselectRows(rows);\n    }\n  };\n\n  Tabulator.prototype.toggleSelectRow = function (row) {\n    if (this.modExists(\"selectRow\", true)) {\n      this.modules.selectRow.toggleRow(row);\n    }\n  };\n\n  Tabulator.prototype.getSelectedRows = function () {\n    if (this.modExists(\"selectRow\", true)) {\n      return this.modules.selectRow.getSelectedRows();\n    }\n  };\n\n  Tabulator.prototype.getSelectedData = function () {\n    if (this.modExists(\"selectRow\", true)) {\n      return this.modules.selectRow.getSelectedData();\n    }\n  }; ///////////////////// validation  ////////////////////\n\n\n  Tabulator.prototype.getInvalidCells = function () {\n    if (this.modExists(\"validate\", true)) {\n      return this.modules.validate.getInvalidCells();\n    }\n  };\n\n  Tabulator.prototype.clearCellValidation = function (cells) {\n    var _this31 = this;\n\n    if (this.modExists(\"validate\", true)) {\n      if (!cells) {\n        cells = this.modules.validate.getInvalidCells();\n      }\n\n      if (!Array.isArray(cells)) {\n        cells = [cells];\n      }\n\n      cells.forEach(function (cell) {\n        _this31.modules.validate.clearValidation(cell._getSelf());\n      });\n    }\n  };\n\n  Tabulator.prototype.validate = function (cells) {\n    var output = []; //clear row data\n\n    this.rowManager.rows.forEach(function (row) {\n      var valid = row.validate();\n\n      if (valid !== true) {\n        output = output.concat(valid);\n      }\n    });\n    return output.length ? output : true;\n  }; //////////// Pagination Functions  ////////////\n\n\n  Tabulator.prototype.setMaxPage = function (max) {\n    if (this.options.pagination && this.modExists(\"page\")) {\n      this.modules.page.setMaxPage(max);\n    } else {\n      return false;\n    }\n  };\n\n  Tabulator.prototype.setPage = function (page) {\n    if (this.options.pagination && this.modExists(\"page\")) {\n      return this.modules.page.setPage(page);\n    } else {\n      return new Promise(function (resolve, reject) {\n        reject();\n      });\n    }\n  };\n\n  Tabulator.prototype.setPageToRow = function (row) {\n    var _this32 = this;\n\n    return new Promise(function (resolve, reject) {\n      if (_this32.options.pagination && _this32.modExists(\"page\")) {\n        row = _this32.rowManager.findRow(row);\n\n        if (row) {\n          _this32.modules.page.setPageToRow(row).then(function () {\n            resolve();\n          }).catch(function () {\n            reject();\n          });\n        } else {\n          reject();\n        }\n      } else {\n        reject();\n      }\n    });\n  };\n\n  Tabulator.prototype.setPageSize = function (size) {\n    if (this.options.pagination && this.modExists(\"page\")) {\n      this.modules.page.setPageSize(size);\n      this.modules.page.setPage(1).then(function () {}).catch(function () {});\n    } else {\n      return false;\n    }\n  };\n\n  Tabulator.prototype.getPageSize = function () {\n    if (this.options.pagination && this.modExists(\"page\", true)) {\n      return this.modules.page.getPageSize();\n    }\n  };\n\n  Tabulator.prototype.previousPage = function () {\n    if (this.options.pagination && this.modExists(\"page\")) {\n      this.modules.page.previousPage();\n    } else {\n      return false;\n    }\n  };\n\n  Tabulator.prototype.nextPage = function () {\n    if (this.options.pagination && this.modExists(\"page\")) {\n      this.modules.page.nextPage();\n    } else {\n      return false;\n    }\n  };\n\n  Tabulator.prototype.getPage = function () {\n    if (this.options.pagination && this.modExists(\"page\")) {\n      return this.modules.page.getPage();\n    } else {\n      return false;\n    }\n  };\n\n  Tabulator.prototype.getPageMax = function () {\n    if (this.options.pagination && this.modExists(\"page\")) {\n      return this.modules.page.getPageMax();\n    } else {\n      return false;\n    }\n  }; ///////////////// Grouping Functions ///////////////\n\n\n  Tabulator.prototype.setGroupBy = function (groups) {\n    if (this.modExists(\"groupRows\", true)) {\n      this.options.groupBy = groups;\n      this.modules.groupRows.initialize();\n      this.rowManager.refreshActiveData(\"display\");\n\n      if (this.options.persistence && this.modExists(\"persistence\", true) && this.modules.persistence.config.group) {\n        this.modules.persistence.save(\"group\");\n      }\n    } else {\n      return false;\n    }\n  };\n\n  Tabulator.prototype.setGroupStartOpen = function (values) {\n    if (this.modExists(\"groupRows\", true)) {\n      this.options.groupStartOpen = values;\n      this.modules.groupRows.initialize();\n\n      if (this.options.groupBy) {\n        this.rowManager.refreshActiveData(\"group\");\n\n        if (this.options.persistence && this.modExists(\"persistence\", true) && this.modules.persistence.config.group) {\n          this.modules.persistence.save(\"group\");\n        }\n      } else {\n        console.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n      }\n    } else {\n      return false;\n    }\n  };\n\n  Tabulator.prototype.setGroupHeader = function (values) {\n    if (this.modExists(\"groupRows\", true)) {\n      this.options.groupHeader = values;\n      this.modules.groupRows.initialize();\n\n      if (this.options.groupBy) {\n        this.rowManager.refreshActiveData(\"group\");\n\n        if (this.options.persistence && this.modExists(\"persistence\", true) && this.modules.persistence.config.group) {\n          this.modules.persistence.save(\"group\");\n        }\n      } else {\n        console.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n      }\n    } else {\n      return false;\n    }\n  };\n\n  Tabulator.prototype.getGroups = function (values) {\n    if (this.modExists(\"groupRows\", true)) {\n      return this.modules.groupRows.getGroups(true);\n    } else {\n      return false;\n    }\n  }; // get grouped table data in the same format as getData()\n\n\n  Tabulator.prototype.getGroupedData = function () {\n    if (this.modExists(\"groupRows\", true)) {\n      return this.options.groupBy ? this.modules.groupRows.getGroupedData() : this.getData();\n    }\n  };\n\n  Tabulator.prototype.getEditedCells = function () {\n    if (this.modExists(\"edit\", true)) {\n      return this.modules.edit.getEditedCells();\n    }\n  };\n\n  Tabulator.prototype.clearCellEdited = function (cells) {\n    var _this33 = this;\n\n    if (this.modExists(\"edit\", true)) {\n      if (!cells) {\n        cells = this.modules.edit.getEditedCells();\n      }\n\n      if (!Array.isArray(cells)) {\n        cells = [cells];\n      }\n\n      cells.forEach(function (cell) {\n        _this33.modules.edit.clearEdited(cell._getSelf());\n      });\n    }\n  }; ///////////////// Column Calculation Functions ///////////////\n\n\n  Tabulator.prototype.getCalcResults = function () {\n    if (this.modExists(\"columnCalcs\", true)) {\n      return this.modules.columnCalcs.getResults();\n    } else {\n      return false;\n    }\n  };\n\n  Tabulator.prototype.recalc = function () {\n    if (this.modExists(\"columnCalcs\", true)) {\n      this.modules.columnCalcs.recalcAll(this.rowManager.activeRows);\n    }\n  }; /////////////// Navigation Management //////////////\n\n\n  Tabulator.prototype.navigatePrev = function () {\n    var cell = false;\n\n    if (this.modExists(\"edit\", true)) {\n      cell = this.modules.edit.currentCell;\n\n      if (cell) {\n        return cell.nav().prev();\n      }\n    }\n\n    return false;\n  };\n\n  Tabulator.prototype.navigateNext = function () {\n    var cell = false;\n\n    if (this.modExists(\"edit\", true)) {\n      cell = this.modules.edit.currentCell;\n\n      if (cell) {\n        return cell.nav().next();\n      }\n    }\n\n    return false;\n  };\n\n  Tabulator.prototype.navigateLeft = function () {\n    var cell = false;\n\n    if (this.modExists(\"edit\", true)) {\n      cell = this.modules.edit.currentCell;\n\n      if (cell) {\n        e.preventDefault();\n        return cell.nav().left();\n      }\n    }\n\n    return false;\n  };\n\n  Tabulator.prototype.navigateRight = function () {\n    var cell = false;\n\n    if (this.modExists(\"edit\", true)) {\n      cell = this.modules.edit.currentCell;\n\n      if (cell) {\n        e.preventDefault();\n        return cell.nav().right();\n      }\n    }\n\n    return false;\n  };\n\n  Tabulator.prototype.navigateUp = function () {\n    var cell = false;\n\n    if (this.modExists(\"edit\", true)) {\n      cell = this.modules.edit.currentCell;\n\n      if (cell) {\n        e.preventDefault();\n        return cell.nav().up();\n      }\n    }\n\n    return false;\n  };\n\n  Tabulator.prototype.navigateDown = function () {\n    var cell = false;\n\n    if (this.modExists(\"edit\", true)) {\n      cell = this.modules.edit.currentCell;\n\n      if (cell) {\n        e.preventDefault();\n        return cell.nav().down();\n      }\n    }\n\n    return false;\n  }; /////////////// History Management //////////////\n\n\n  Tabulator.prototype.undo = function () {\n    if (this.options.history && this.modExists(\"history\", true)) {\n      return this.modules.history.undo();\n    } else {\n      return false;\n    }\n  };\n\n  Tabulator.prototype.redo = function () {\n    if (this.options.history && this.modExists(\"history\", true)) {\n      return this.modules.history.redo();\n    } else {\n      return false;\n    }\n  };\n\n  Tabulator.prototype.getHistoryUndoSize = function () {\n    if (this.options.history && this.modExists(\"history\", true)) {\n      return this.modules.history.getHistoryUndoSize();\n    } else {\n      return false;\n    }\n  };\n\n  Tabulator.prototype.getHistoryRedoSize = function () {\n    if (this.options.history && this.modExists(\"history\", true)) {\n      return this.modules.history.getHistoryRedoSize();\n    } else {\n      return false;\n    }\n  }; /////////////// Download Management //////////////\n\n\n  Tabulator.prototype.download = function (type, filename, options, active) {\n    if (this.modExists(\"download\", true)) {\n      this.modules.download.download(type, filename, options, active);\n    }\n  };\n\n  Tabulator.prototype.downloadToTab = function (type, filename, options, active) {\n    if (this.modExists(\"download\", true)) {\n      this.modules.download.download(type, filename, options, active, true);\n    }\n  }; /////////// Inter Table Communications ///////////\n\n\n  Tabulator.prototype.tableComms = function (table, module, action, data) {\n    this.modules.comms.receive(table, module, action, data);\n  }; ////////////// Extension Management //////////////\n  //object to hold module\n\n\n  Tabulator.prototype.moduleBindings = {}; //extend module\n\n  Tabulator.prototype.extendModule = function (name, property, values) {\n    if (Tabulator.prototype.moduleBindings[name]) {\n      var source = Tabulator.prototype.moduleBindings[name].prototype[property];\n\n      if (source) {\n        if ((typeof values === 'undefined' ? 'undefined' : _typeof(values)) == \"object\") {\n          for (var key in values) {\n            source[key] = values[key];\n          }\n        } else {\n          console.warn(\"Module Error - Invalid value type, it must be an object\");\n        }\n      } else {\n        console.warn(\"Module Error - property does not exist:\", property);\n      }\n    } else {\n      console.warn(\"Module Error - module does not exist:\", name);\n    }\n  }; //add module to tabulator\n\n\n  Tabulator.prototype.registerModule = function (name, module) {\n    var self = this;\n    Tabulator.prototype.moduleBindings[name] = module;\n  }; //ensure that module are bound to instantiated function\n\n\n  Tabulator.prototype.bindModules = function () {\n    this.modules = {};\n\n    for (var name in Tabulator.prototype.moduleBindings) {\n      this.modules[name] = new Tabulator.prototype.moduleBindings[name](this);\n    }\n  }; //Check for module\n\n\n  Tabulator.prototype.modExists = function (plugin, required) {\n    if (this.modules[plugin]) {\n      return true;\n    } else {\n      if (required) {\n        console.error(\"Tabulator Module Not Installed: \" + plugin);\n      }\n\n      return false;\n    }\n  };\n\n  Tabulator.prototype.helpers = {\n    elVisible: function elVisible(el) {\n      return !(el.offsetWidth <= 0 && el.offsetHeight <= 0);\n    },\n    elOffset: function elOffset(el) {\n      var box = el.getBoundingClientRect();\n      return {\n        top: box.top + window.pageYOffset - document.documentElement.clientTop,\n        left: box.left + window.pageXOffset - document.documentElement.clientLeft\n      };\n    },\n    deepClone: function deepClone(obj) {\n      var clone = Array.isArray(obj) ? [] : {};\n\n      for (var i in obj) {\n        if (obj[i] != null && _typeof(obj[i]) === \"object\") {\n          if (obj[i] instanceof Date) {\n            clone[i] = new Date(obj[i]);\n          } else {\n            clone[i] = this.deepClone(obj[i]);\n          }\n        } else {\n          clone[i] = obj[i];\n        }\n      }\n\n      return clone;\n    }\n  };\n  Tabulator.prototype.comms = {\n    tables: [],\n    register: function register(table) {\n      Tabulator.prototype.comms.tables.push(table);\n    },\n    deregister: function deregister(table) {\n      var index = Tabulator.prototype.comms.tables.indexOf(table);\n\n      if (index > -1) {\n        Tabulator.prototype.comms.tables.splice(index, 1);\n      }\n    },\n    lookupTable: function lookupTable(query, silent) {\n      var results = [],\n          matches,\n          match;\n\n      if (typeof query === \"string\") {\n        matches = document.querySelectorAll(query);\n\n        if (matches.length) {\n          for (var i = 0; i < matches.length; i++) {\n            match = Tabulator.prototype.comms.matchElement(matches[i]);\n\n            if (match) {\n              results.push(match);\n            }\n          }\n        }\n      } else if (typeof HTMLElement !== \"undefined\" && query instanceof HTMLElement || query instanceof Tabulator) {\n        match = Tabulator.prototype.comms.matchElement(query);\n\n        if (match) {\n          results.push(match);\n        }\n      } else if (Array.isArray(query)) {\n        query.forEach(function (item) {\n          results = results.concat(Tabulator.prototype.comms.lookupTable(item));\n        });\n      } else {\n        if (!silent) {\n          console.warn(\"Table Connection Error - Invalid Selector\", query);\n        }\n      }\n\n      return results;\n    },\n    matchElement: function matchElement(element) {\n      return Tabulator.prototype.comms.tables.find(function (table) {\n        return element instanceof Tabulator ? table === element : table.element === element;\n      });\n    }\n  };\n\n  Tabulator.prototype.findTable = function (query) {\n    var results = Tabulator.prototype.comms.lookupTable(query, true);\n    return Array.isArray(results) && !results.length ? false : results;\n  };\n\n  var Layout = function Layout(table) {\n    this.table = table;\n    this.mode = null;\n  }; //initialize layout system\n\n\n  Layout.prototype.initialize = function (layout) {\n    if (this.modes[layout]) {\n      this.mode = layout;\n    } else {\n      console.warn(\"Layout Error - invalid mode set, defaulting to 'fitData' : \" + layout);\n      this.mode = 'fitData';\n    }\n\n    this.table.element.setAttribute(\"tabulator-layout\", this.mode);\n  };\n\n  Layout.prototype.getMode = function () {\n    return this.mode;\n  }; //trigger table layout\n\n\n  Layout.prototype.layout = function () {\n    this.modes[this.mode].call(this, this.table.columnManager.columnsByIndex);\n  }; //layout render functions\n\n\n  Layout.prototype.modes = {\n    //resize columns to fit data they contain\n    \"fitData\": function fitData(columns) {\n      columns.forEach(function (column) {\n        column.reinitializeWidth();\n      });\n\n      if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n        this.table.modules.responsiveLayout.update();\n      }\n    },\n    //resize columns to fit data they contain and stretch row to fill table\n    \"fitDataFill\": function fitDataFill(columns) {\n      columns.forEach(function (column) {\n        column.reinitializeWidth();\n      });\n\n      if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n        this.table.modules.responsiveLayout.update();\n      }\n    },\n    //resize columns to fit data they contain\n    \"fitDataTable\": function fitDataTable(columns) {\n      columns.forEach(function (column) {\n        column.reinitializeWidth();\n      });\n\n      if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n        this.table.modules.responsiveLayout.update();\n      }\n    },\n    //resize columns to fit data the contain and stretch last column to fill table\n    \"fitDataStretch\": function fitDataStretch(columns) {\n      var _this34 = this;\n\n      var colsWidth = 0,\n          tableWidth = this.table.rowManager.element.clientWidth,\n          gap = 0,\n          lastCol = false;\n      columns.forEach(function (column, i) {\n        if (!column.widthFixed) {\n          column.reinitializeWidth();\n        }\n\n        if (_this34.table.options.responsiveLayout ? column.modules.responsive.visible : column.visible) {\n          lastCol = column;\n        }\n\n        if (column.visible) {\n          colsWidth += column.getWidth();\n        }\n      });\n\n      if (lastCol) {\n        gap = tableWidth - colsWidth + lastCol.getWidth();\n\n        if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n          lastCol.setWidth(0);\n          this.table.modules.responsiveLayout.update();\n        }\n\n        if (gap > 0) {\n          lastCol.setWidth(gap);\n        } else {\n          lastCol.reinitializeWidth();\n        }\n      } else {\n        if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n          this.table.modules.responsiveLayout.update();\n        }\n      }\n    },\n    //resize columns to fit\n    \"fitColumns\": function fitColumns(columns) {\n      var self = this;\n      var totalWidth = self.table.element.clientWidth; //table element width\n\n      var fixedWidth = 0; //total width of columns with a defined width\n\n      var flexWidth = 0; //total width available to flexible columns\n\n      var flexGrowUnits = 0; //total number of widthGrow blocks accross all columns\n\n      var flexColWidth = 0; //desired width of flexible columns\n\n      var flexColumns = []; //array of flexible width columns\n\n      var fixedShrinkColumns = []; //array of fixed width columns that can shrink\n\n      var flexShrinkUnits = 0; //total number of widthShrink blocks accross all columns\n\n      var overflowWidth = 0; //horizontal overflow width\n\n      var gapFill = 0; //number of pixels to be added to final column to close and half pixel gaps\n\n      function calcWidth(width) {\n        var colWidth;\n\n        if (typeof width == \"string\") {\n          if (width.indexOf(\"%\") > -1) {\n            colWidth = totalWidth / 100 * parseInt(width);\n          } else {\n            colWidth = parseInt(width);\n          }\n        } else {\n          colWidth = width;\n        }\n\n        return colWidth;\n      } //ensure columns resize to take up the correct amount of space\n\n\n      function scaleColumns(columns, freeSpace, colWidth, shrinkCols) {\n        var oversizeCols = [],\n            oversizeSpace = 0,\n            remainingSpace = 0,\n            nextColWidth = 0,\n            gap = 0,\n            changeUnits = 0,\n            undersizeCols = [];\n\n        function calcGrow(col) {\n          return colWidth * (col.column.definition.widthGrow || 1);\n        }\n\n        function calcShrink(col) {\n          return calcWidth(col.width) - colWidth * (col.column.definition.widthShrink || 0);\n        }\n\n        columns.forEach(function (col, i) {\n          var width = shrinkCols ? calcShrink(col) : calcGrow(col);\n\n          if (col.column.minWidth >= width) {\n            oversizeCols.push(col);\n          } else {\n            undersizeCols.push(col);\n            changeUnits += shrinkCols ? col.column.definition.widthShrink || 1 : col.column.definition.widthGrow || 1;\n          }\n        });\n\n        if (oversizeCols.length) {\n          oversizeCols.forEach(function (col) {\n            oversizeSpace += shrinkCols ? col.width - col.column.minWidth : col.column.minWidth;\n            col.width = col.column.minWidth;\n          });\n          remainingSpace = freeSpace - oversizeSpace;\n          nextColWidth = changeUnits ? Math.floor(remainingSpace / changeUnits) : remainingSpace;\n          gap = remainingSpace - nextColWidth * changeUnits;\n          gap += scaleColumns(undersizeCols, remainingSpace, nextColWidth, shrinkCols);\n        } else {\n          gap = changeUnits ? freeSpace - Math.floor(freeSpace / changeUnits) * changeUnits : freeSpace;\n          undersizeCols.forEach(function (column) {\n            column.width = shrinkCols ? calcShrink(column) : calcGrow(column);\n          });\n        }\n\n        return gap;\n      }\n\n      if (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n        this.table.modules.responsiveLayout.update();\n      } //adjust for vertical scrollbar if present\n\n\n      if (this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight) {\n        totalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\n      }\n\n      columns.forEach(function (column) {\n        var width, minWidth, colWidth;\n\n        if (column.visible) {\n          width = column.definition.width;\n          minWidth = parseInt(column.minWidth);\n\n          if (width) {\n            colWidth = calcWidth(width);\n            fixedWidth += colWidth > minWidth ? colWidth : minWidth;\n\n            if (column.definition.widthShrink) {\n              fixedShrinkColumns.push({\n                column: column,\n                width: colWidth > minWidth ? colWidth : minWidth\n              });\n              flexShrinkUnits += column.definition.widthShrink;\n            }\n          } else {\n            flexColumns.push({\n              column: column,\n              width: 0\n            });\n            flexGrowUnits += column.definition.widthGrow || 1;\n          }\n        }\n      }); //calculate available space\n\n      flexWidth = totalWidth - fixedWidth; //calculate correct column size\n\n      flexColWidth = Math.floor(flexWidth / flexGrowUnits); //generate column widths\n\n      var gapFill = scaleColumns(flexColumns, flexWidth, flexColWidth, false); //increase width of last column to account for rounding errors\n\n      if (flexColumns.length && gapFill > 0) {\n        flexColumns[flexColumns.length - 1].width += +gapFill;\n      } //caculate space for columns to be shrunk into\n\n\n      flexColumns.forEach(function (col) {\n        flexWidth -= col.width;\n      });\n      overflowWidth = Math.abs(gapFill) + flexWidth; //shrink oversize columns if there is no available space\n\n      if (overflowWidth > 0 && flexShrinkUnits) {\n        gapFill = scaleColumns(fixedShrinkColumns, overflowWidth, Math.floor(overflowWidth / flexShrinkUnits), true);\n      } //decrease width of last column to account for rounding errors\n\n\n      if (fixedShrinkColumns.length) {\n        fixedShrinkColumns[fixedShrinkColumns.length - 1].width -= gapFill;\n      }\n\n      flexColumns.forEach(function (col) {\n        col.column.setWidth(col.width);\n      });\n      fixedShrinkColumns.forEach(function (col) {\n        col.column.setWidth(col.width);\n      });\n    }\n  };\n  Tabulator.prototype.registerModule(\"layout\", Layout);\n\n  var Localize = function Localize(table) {\n    this.table = table; //hold Tabulator object\n\n    this.locale = \"default\"; //current locale\n\n    this.lang = false; //current language\n\n    this.bindings = {}; //update events to call when locale is changed\n  }; //set header placehoder\n\n\n  Localize.prototype.setHeaderFilterPlaceholder = function (placeholder) {\n    this.langs.default.headerFilters.default = placeholder;\n  }; //set header filter placeholder by column\n\n\n  Localize.prototype.setHeaderFilterColumnPlaceholder = function (column, placeholder) {\n    this.langs.default.headerFilters.columns[column] = placeholder;\n\n    if (this.lang && !this.lang.headerFilters.columns[column]) {\n      this.lang.headerFilters.columns[column] = placeholder;\n    }\n  }; //setup a lang description object\n\n\n  Localize.prototype.installLang = function (locale, lang) {\n    if (this.langs[locale]) {\n      this._setLangProp(this.langs[locale], lang);\n    } else {\n      this.langs[locale] = lang;\n    }\n  };\n\n  Localize.prototype._setLangProp = function (lang, values) {\n    for (var key in values) {\n      if (lang[key] && _typeof(lang[key]) == \"object\") {\n        this._setLangProp(lang[key], values[key]);\n      } else {\n        lang[key] = values[key];\n      }\n    }\n  }; //set current locale\n\n\n  Localize.prototype.setLocale = function (desiredLocale) {\n    var self = this;\n    desiredLocale = desiredLocale || \"default\"; //fill in any matching languge values\n\n    function traverseLang(trans, path) {\n      for (var prop in trans) {\n        if (_typeof(trans[prop]) == \"object\") {\n          if (!path[prop]) {\n            path[prop] = {};\n          }\n\n          traverseLang(trans[prop], path[prop]);\n        } else {\n          path[prop] = trans[prop];\n        }\n      }\n    } //determing correct locale to load\n\n\n    if (desiredLocale === true && navigator.language) {\n      //get local from system\n      desiredLocale = navigator.language.toLowerCase();\n    }\n\n    if (desiredLocale) {\n      //if locale is not set, check for matching top level locale else use default\n      if (!self.langs[desiredLocale]) {\n        var prefix = desiredLocale.split(\"-\")[0];\n\n        if (self.langs[prefix]) {\n          console.warn(\"Localization Error - Exact matching locale not found, using closest match: \", desiredLocale, prefix);\n          desiredLocale = prefix;\n        } else {\n          console.warn(\"Localization Error - Matching locale not found, using default: \", desiredLocale);\n          desiredLocale = \"default\";\n        }\n      }\n    }\n\n    self.locale = desiredLocale; //load default lang template\n\n    self.lang = Tabulator.prototype.helpers.deepClone(self.langs.default || {});\n\n    if (desiredLocale != \"default\") {\n      traverseLang(self.langs[desiredLocale], self.lang);\n    }\n\n    self.table.options.localized.call(self.table, self.locale, self.lang);\n\n    self._executeBindings();\n  }; //get current locale\n\n\n  Localize.prototype.getLocale = function (locale) {\n    return self.locale;\n  }; //get lang object for given local or current if none provided\n\n\n  Localize.prototype.getLang = function (locale) {\n    return locale ? this.langs[locale] : this.lang;\n  }; //get text for current locale\n\n\n  Localize.prototype.getText = function (path, value) {\n    var path = value ? path + \"|\" + value : path,\n        pathArray = path.split(\"|\"),\n        text = this._getLangElement(pathArray, this.locale); // if(text === false){\n    // \tconsole.warn(\"Localization Error - Matching localized text not found for given path: \", path);\n    // }\n\n\n    return text || \"\";\n  }; //traverse langs object and find localized copy\n\n\n  Localize.prototype._getLangElement = function (path, locale) {\n    var self = this;\n    var root = self.lang;\n    path.forEach(function (level) {\n      var rootPath;\n\n      if (root) {\n        rootPath = root[level];\n\n        if (typeof rootPath != \"undefined\") {\n          root = rootPath;\n        } else {\n          root = false;\n        }\n      }\n    });\n    return root;\n  }; //set update binding\n\n\n  Localize.prototype.bind = function (path, callback) {\n    if (!this.bindings[path]) {\n      this.bindings[path] = [];\n    }\n\n    this.bindings[path].push(callback);\n    callback(this.getText(path), this.lang);\n  }; //itterate through bindings and trigger updates\n\n\n  Localize.prototype._executeBindings = function () {\n    var self = this;\n\n    var _loop = function _loop(path) {\n      self.bindings[path].forEach(function (binding) {\n        binding(self.getText(path), self.lang);\n      });\n    };\n\n    for (var path in self.bindings) {\n      _loop(path);\n    }\n  }; //Localized text listings\n\n\n  Localize.prototype.langs = {\n    \"default\": {\n      //hold default locale text\n      \"groups\": {\n        \"item\": \"item\",\n        \"items\": \"items\"\n      },\n      \"columns\": {},\n      \"ajax\": {\n        \"loading\": \"Loading\",\n        \"error\": \"Error\"\n      },\n      \"pagination\": {\n        \"page_size\": \"Page Size\",\n        \"page_title\": \"Show Page\",\n        \"first\": \"First\",\n        \"first_title\": \"First Page\",\n        \"last\": \"Last\",\n        \"last_title\": \"Last Page\",\n        \"prev\": \"Prev\",\n        \"prev_title\": \"Prev Page\",\n        \"next\": \"Next\",\n        \"next_title\": \"Next Page\",\n        \"all\": \"All\"\n      },\n      \"headerFilters\": {\n        \"default\": \"filter column...\",\n        \"columns\": {}\n      }\n    }\n  };\n  Tabulator.prototype.registerModule(\"localize\", Localize);\n\n  var Comms = function Comms(table) {\n    this.table = table;\n  };\n\n  Comms.prototype.getConnections = function (selectors) {\n    var self = this,\n        connections = [],\n        connection;\n    connection = Tabulator.prototype.comms.lookupTable(selectors);\n    connection.forEach(function (con) {\n      if (self.table !== con) {\n        connections.push(con);\n      }\n    });\n    return connections;\n  };\n\n  Comms.prototype.send = function (selectors, module, action, data) {\n    var self = this,\n        connections = this.getConnections(selectors);\n    connections.forEach(function (connection) {\n      connection.tableComms(self.table.element, module, action, data);\n    });\n\n    if (!connections.length && selectors) {\n      console.warn(\"Table Connection Error - No tables matching selector found\", selectors);\n    }\n  };\n\n  Comms.prototype.receive = function (table, module, action, data) {\n    if (this.table.modExists(module)) {\n      return this.table.modules[module].commsReceived(table, action, data);\n    } else {\n      console.warn(\"Inter-table Comms Error - no such module:\", module);\n    }\n  };\n\n  Tabulator.prototype.registerModule(\"comms\", Comms);\n\n  var Accessor = function Accessor(table) {\n    this.table = table; //hold Tabulator object\n\n    this.allowedTypes = [\"\", \"data\", \"download\", \"clipboard\", \"print\", \"htmlOutput\"]; //list of accessor types\n  }; //initialize column accessor\n\n\n  Accessor.prototype.initializeColumn = function (column) {\n    var self = this,\n        match = false,\n        config = {};\n    this.allowedTypes.forEach(function (type) {\n      var key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n          accessor;\n\n      if (column.definition[key]) {\n        accessor = self.lookupAccessor(column.definition[key]);\n\n        if (accessor) {\n          match = true;\n          config[key] = {\n            accessor: accessor,\n            params: column.definition[key + \"Params\"] || {}\n          };\n        }\n      }\n    });\n\n    if (match) {\n      column.modules.accessor = config;\n    }\n  };\n\n  Accessor.prototype.lookupAccessor = function (value) {\n    var accessor = false; //set column accessor\n\n    switch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n      case \"string\":\n        if (this.accessors[value]) {\n          accessor = this.accessors[value];\n        } else {\n          console.warn(\"Accessor Error - No such accessor found, ignoring: \", value);\n        }\n\n        break;\n\n      case \"function\":\n        accessor = value;\n        break;\n    }\n\n    return accessor;\n  }; //apply accessor to row\n\n\n  Accessor.prototype.transformRow = function (dataIn, type) {\n    var self = this,\n        key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)); //clone data object with deep copy to isolate internal data from returned result\n\n    var data = Tabulator.prototype.helpers.deepClone(dataIn || {});\n    self.table.columnManager.traverse(function (column) {\n      var value, accessor, params, component;\n\n      if (column.modules.accessor) {\n        accessor = column.modules.accessor[key] || column.modules.accessor.accessor || false;\n\n        if (accessor) {\n          value = column.getFieldValue(data);\n\n          if (value != \"undefined\") {\n            component = column.getComponent();\n            params = typeof accessor.params === \"function\" ? accessor.params(value, data, type, component) : accessor.params;\n            column.setFieldValue(data, accessor.accessor(value, data, type, params, component));\n          }\n        }\n      }\n    });\n    return data;\n  }, //default accessors\n  Accessor.prototype.accessors = {};\n  Tabulator.prototype.registerModule(\"accessor\", Accessor);\n\n  var Ajax = function Ajax(table) {\n    this.table = table; //hold Tabulator object\n\n    this.config = false; //hold config object for ajax request\n\n    this.url = \"\"; //request URL\n\n    this.urlGenerator = false;\n    this.params = false; //request parameters\n\n    this.loaderElement = this.createLoaderElement(); //loader message div\n\n    this.msgElement = this.createMsgElement(); //message element\n\n    this.loadingElement = false;\n    this.errorElement = false;\n    this.loaderPromise = false;\n    this.progressiveLoad = false;\n    this.loading = false;\n    this.requestOrder = 0; //prevent requests comming out of sequence if overridden by another load request\n  }; //initialize setup options\n\n\n  Ajax.prototype.initialize = function () {\n    var template;\n    this.loaderElement.appendChild(this.msgElement);\n\n    if (this.table.options.ajaxLoaderLoading) {\n      if (typeof this.table.options.ajaxLoaderLoading == \"string\") {\n        template = document.createElement('template');\n        template.innerHTML = this.table.options.ajaxLoaderLoading.trim();\n        this.loadingElement = template.content.firstChild;\n      } else {\n        this.loadingElement = this.table.options.ajaxLoaderLoading;\n      }\n    }\n\n    this.loaderPromise = this.table.options.ajaxRequestFunc || this.defaultLoaderPromise;\n    this.urlGenerator = this.table.options.ajaxURLGenerator || this.defaultURLGenerator;\n\n    if (this.table.options.ajaxLoaderError) {\n      if (typeof this.table.options.ajaxLoaderError == \"string\") {\n        template = document.createElement('template');\n        template.innerHTML = this.table.options.ajaxLoaderError.trim();\n        this.errorElement = template.content.firstChild;\n      } else {\n        this.errorElement = this.table.options.ajaxLoaderError;\n      }\n    }\n\n    if (this.table.options.ajaxParams) {\n      this.setParams(this.table.options.ajaxParams);\n    }\n\n    if (this.table.options.ajaxConfig) {\n      this.setConfig(this.table.options.ajaxConfig);\n    }\n\n    if (this.table.options.ajaxURL) {\n      this.setUrl(this.table.options.ajaxURL);\n    }\n\n    if (this.table.options.ajaxProgressiveLoad) {\n      if (this.table.options.pagination) {\n        this.progressiveLoad = false;\n        console.error(\"Progressive Load Error - Pagination and progressive load cannot be used at the same time\");\n      } else {\n        if (this.table.modExists(\"page\")) {\n          this.progressiveLoad = this.table.options.ajaxProgressiveLoad;\n          this.table.modules.page.initializeProgressive(this.progressiveLoad);\n        } else {\n          console.error(\"Pagination plugin is required for progressive ajax loading\");\n        }\n      }\n    }\n  };\n\n  Ajax.prototype.createLoaderElement = function () {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-loader\");\n    return el;\n  };\n\n  Ajax.prototype.createMsgElement = function () {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-loader-msg\");\n    el.setAttribute(\"role\", \"alert\");\n    return el;\n  }; //set ajax params\n\n\n  Ajax.prototype.setParams = function (params, update) {\n    if (update) {\n      this.params = this.params || {};\n\n      for (var key in params) {\n        this.params[key] = params[key];\n      }\n    } else {\n      this.params = params;\n    }\n  };\n\n  Ajax.prototype.getParams = function () {\n    return this.params || {};\n  }; //load config object\n\n\n  Ajax.prototype.setConfig = function (config) {\n    this._loadDefaultConfig();\n\n    if (typeof config == \"string\") {\n      this.config.method = config;\n    } else {\n      for (var key in config) {\n        this.config[key] = config[key];\n      }\n    }\n  }; //create config object from default\n\n\n  Ajax.prototype._loadDefaultConfig = function (force) {\n    var self = this;\n\n    if (!self.config || force) {\n      self.config = {}; //load base config from defaults\n\n      for (var key in self.defaultConfig) {\n        self.config[key] = self.defaultConfig[key];\n      }\n    }\n  }; //set request url\n\n\n  Ajax.prototype.setUrl = function (url) {\n    this.url = url;\n  }; //get request url\n\n\n  Ajax.prototype.getUrl = function () {\n    return this.url;\n  }; //lstandard loading function\n\n\n  Ajax.prototype.loadData = function (inPosition, columnsChanged) {\n    var self = this;\n\n    if (this.progressiveLoad) {\n      return this._loadDataProgressive();\n    } else {\n      return this._loadDataStandard(inPosition, columnsChanged);\n    }\n  };\n\n  Ajax.prototype.nextPage = function (diff) {\n    var margin;\n\n    if (!this.loading) {\n      margin = this.table.options.ajaxProgressiveLoadScrollMargin || this.table.rowManager.getElement().clientHeight * 2;\n\n      if (diff < margin) {\n        this.table.modules.page.nextPage().then(function () {}).catch(function () {});\n      }\n    }\n  };\n\n  Ajax.prototype.blockActiveRequest = function () {\n    this.requestOrder++;\n  };\n\n  Ajax.prototype._loadDataProgressive = function () {\n    this.table.rowManager.setData([]);\n    return this.table.modules.page.setPage(1);\n  };\n\n  Ajax.prototype._loadDataStandard = function (inPosition, columnsChanged) {\n    var _this35 = this;\n\n    return new Promise(function (resolve, reject) {\n      _this35.sendRequest(inPosition).then(function (data) {\n        _this35.table.rowManager.setData(data, inPosition, columnsChanged).then(function () {\n          resolve();\n        }).catch(function (e) {\n          reject(e);\n        });\n      }).catch(function (e) {\n        reject(e);\n      });\n    });\n  };\n\n  Ajax.prototype.generateParamsList = function (data, prefix) {\n    var self = this,\n        output = [];\n    prefix = prefix || \"\";\n\n    if (Array.isArray(data)) {\n      data.forEach(function (item, i) {\n        output = output.concat(self.generateParamsList(item, prefix ? prefix + \"[\" + i + \"]\" : i));\n      });\n    } else if ((typeof data === 'undefined' ? 'undefined' : _typeof(data)) === \"object\") {\n      for (var key in data) {\n        output = output.concat(self.generateParamsList(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\n      }\n    } else {\n      output.push({\n        key: prefix,\n        value: data\n      });\n    }\n\n    return output;\n  };\n\n  Ajax.prototype.serializeParams = function (params) {\n    var output = this.generateParamsList(params),\n        encoded = [];\n    output.forEach(function (item) {\n      encoded.push(encodeURIComponent(item.key) + \"=\" + encodeURIComponent(item.value));\n    });\n    return encoded.join(\"&\");\n  }; //send ajax request\n\n\n  Ajax.prototype.sendRequest = function (silent) {\n    var _this36 = this;\n\n    var self = this,\n        url = self.url,\n        requestNo,\n        esc,\n        query;\n    self.requestOrder++;\n    requestNo = self.requestOrder;\n\n    self._loadDefaultConfig();\n\n    return new Promise(function (resolve, reject) {\n      if (self.table.options.ajaxRequesting.call(_this36.table, self.url, self.params) !== false) {\n        self.loading = true;\n\n        if (!silent) {\n          self.showLoader();\n        }\n\n        _this36.loaderPromise(url, self.config, self.params).then(function (data) {\n          if (requestNo === self.requestOrder) {\n            if (self.table.options.ajaxResponse) {\n              data = self.table.options.ajaxResponse.call(self.table, self.url, self.params, data);\n            }\n\n            resolve(data);\n            self.hideLoader();\n            self.loading = false;\n          } else {\n            console.warn(\"Ajax Response Blocked - An active ajax request was blocked by an attempt to change table data while the request was being made\");\n          }\n        }).catch(function (error) {\n          console.error(\"Ajax Load Error: \", error);\n          self.table.options.ajaxError.call(self.table, error);\n          self.showError();\n          setTimeout(function () {\n            self.hideLoader();\n          }, 3000);\n          self.loading = false;\n          reject();\n        });\n      } else {\n        reject();\n      }\n    });\n  };\n\n  Ajax.prototype.showLoader = function () {\n    var shouldLoad = typeof this.table.options.ajaxLoader === \"function\" ? this.table.options.ajaxLoader() : this.table.options.ajaxLoader;\n\n    if (shouldLoad) {\n      this.hideLoader();\n\n      while (this.msgElement.firstChild) {\n        this.msgElement.removeChild(this.msgElement.firstChild);\n      }\n\n      this.msgElement.classList.remove(\"tabulator-error\");\n      this.msgElement.classList.add(\"tabulator-loading\");\n\n      if (this.loadingElement) {\n        this.msgElement.appendChild(this.loadingElement);\n      } else {\n        this.msgElement.innerHTML = this.table.modules.localize.getText(\"ajax|loading\");\n      }\n\n      this.table.element.appendChild(this.loaderElement);\n    }\n  };\n\n  Ajax.prototype.showError = function () {\n    this.hideLoader();\n\n    while (this.msgElement.firstChild) {\n      this.msgElement.removeChild(this.msgElement.firstChild);\n    }\n\n    this.msgElement.classList.remove(\"tabulator-loading\");\n    this.msgElement.classList.add(\"tabulator-error\");\n\n    if (this.errorElement) {\n      this.msgElement.appendChild(this.errorElement);\n    } else {\n      this.msgElement.innerHTML = this.table.modules.localize.getText(\"ajax|error\");\n    }\n\n    this.table.element.appendChild(this.loaderElement);\n  };\n\n  Ajax.prototype.hideLoader = function () {\n    if (this.loaderElement.parentNode) {\n      this.loaderElement.parentNode.removeChild(this.loaderElement);\n    }\n  }; //default ajax config object\n\n\n  Ajax.prototype.defaultConfig = {\n    method: \"GET\"\n  };\n\n  Ajax.prototype.defaultURLGenerator = function (url, config, params) {\n    if (url) {\n      if (params && Object.keys(params).length) {\n        if (!config.method || config.method.toLowerCase() == \"get\") {\n          config.method = \"get\";\n          url += (url.includes(\"?\") ? \"&\" : \"?\") + this.serializeParams(params);\n        }\n      }\n    }\n\n    return url;\n  };\n\n  Ajax.prototype.defaultLoaderPromise = function (url, config, params) {\n    var self = this,\n        contentType;\n    return new Promise(function (resolve, reject) {\n      //set url\n      url = self.urlGenerator(url, config, params); //set body content if not GET request\n\n      if (config.method.toUpperCase() != \"GET\") {\n        contentType = _typeof(self.table.options.ajaxContentType) === \"object\" ? self.table.options.ajaxContentType : self.contentTypeFormatters[self.table.options.ajaxContentType];\n\n        if (contentType) {\n          for (var key in contentType.headers) {\n            if (!config.headers) {\n              config.headers = {};\n            }\n\n            if (typeof config.headers[key] === \"undefined\") {\n              config.headers[key] = contentType.headers[key];\n            }\n          }\n\n          config.body = contentType.body.call(self, url, config, params);\n        } else {\n          console.warn(\"Ajax Error - Invalid ajaxContentType value:\", self.table.options.ajaxContentType);\n        }\n      }\n\n      if (url) {\n        //configure headers\n        if (typeof config.headers === \"undefined\") {\n          config.headers = {};\n        }\n\n        if (typeof config.headers.Accept === \"undefined\") {\n          config.headers.Accept = \"application/json\";\n        }\n\n        if (typeof config.headers[\"X-Requested-With\"] === \"undefined\") {\n          config.headers[\"X-Requested-With\"] = \"XMLHttpRequest\";\n        }\n\n        if (typeof config.mode === \"undefined\") {\n          config.mode = \"cors\";\n        }\n\n        if (config.mode == \"cors\") {\n          if (typeof config.headers[\"Access-Control-Allow-Origin\"] === \"undefined\") {\n            config.headers[\"Access-Control-Allow-Origin\"] = window.location.origin;\n          }\n\n          if (typeof config.credentials === \"undefined\") {\n            config.credentials = 'same-origin';\n          }\n        } else {\n          if (typeof config.credentials === \"undefined\") {\n            config.credentials = 'include';\n          }\n        } //send request\n\n\n        fetch(url, config).then(function (response) {\n          if (response.ok) {\n            response.json().then(function (data) {\n              resolve(data);\n            }).catch(function (error) {\n              reject(error);\n              console.warn(\"Ajax Load Error - Invalid JSON returned\", error);\n            });\n          } else {\n            console.error(\"Ajax Load Error - Connection Error: \" + response.status, response.statusText);\n            reject(response);\n          }\n        }).catch(function (error) {\n          console.error(\"Ajax Load Error - Connection Error: \", error);\n          reject(error);\n        });\n      } else {\n        console.warn(\"Ajax Load Error - No URL Set\");\n        resolve([]);\n      }\n    });\n  };\n\n  Ajax.prototype.contentTypeFormatters = {\n    \"json\": {\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: function body(url, config, params) {\n        return JSON.stringify(params);\n      }\n    },\n    \"form\": {\n      headers: {},\n      body: function body(url, config, params) {\n        var output = this.generateParamsList(params),\n            form = new FormData();\n        output.forEach(function (item) {\n          form.append(item.key, item.value);\n        });\n        return form;\n      }\n    }\n  };\n  Tabulator.prototype.registerModule(\"ajax\", Ajax);\n\n  var ColumnCalcs = function ColumnCalcs(table) {\n    this.table = table; //hold Tabulator object\n\n    this.topCalcs = [];\n    this.botCalcs = [];\n    this.genColumn = false;\n    this.topElement = this.createElement();\n    this.botElement = this.createElement();\n    this.topRow = false;\n    this.botRow = false;\n    this.topInitialized = false;\n    this.botInitialized = false;\n    this.initialize();\n  };\n\n  ColumnCalcs.prototype.createElement = function () {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-calcs-holder\");\n    return el;\n  };\n\n  ColumnCalcs.prototype.initialize = function () {\n    this.genColumn = new Column({\n      field: \"value\"\n    }, this);\n  }; //dummy functions to handle being mock column manager\n\n\n  ColumnCalcs.prototype.registerColumnField = function () {}; //initialize column calcs\n\n\n  ColumnCalcs.prototype.initializeColumn = function (column) {\n    var def = column.definition;\n    var config = {\n      topCalcParams: def.topCalcParams || {},\n      botCalcParams: def.bottomCalcParams || {}\n    };\n\n    if (def.topCalc) {\n      switch (_typeof(def.topCalc)) {\n        case \"string\":\n          if (this.calculations[def.topCalc]) {\n            config.topCalc = this.calculations[def.topCalc];\n          } else {\n            console.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.topCalc);\n          }\n\n          break;\n\n        case \"function\":\n          config.topCalc = def.topCalc;\n          break;\n      }\n\n      if (config.topCalc) {\n        column.modules.columnCalcs = config;\n        this.topCalcs.push(column);\n\n        if (this.table.options.columnCalcs != \"group\") {\n          this.initializeTopRow();\n        }\n      }\n    }\n\n    if (def.bottomCalc) {\n      switch (_typeof(def.bottomCalc)) {\n        case \"string\":\n          if (this.calculations[def.bottomCalc]) {\n            config.botCalc = this.calculations[def.bottomCalc];\n          } else {\n            console.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.bottomCalc);\n          }\n\n          break;\n\n        case \"function\":\n          config.botCalc = def.bottomCalc;\n          break;\n      }\n\n      if (config.botCalc) {\n        column.modules.columnCalcs = config;\n        this.botCalcs.push(column);\n\n        if (this.table.options.columnCalcs != \"group\") {\n          this.initializeBottomRow();\n        }\n      }\n    }\n  };\n\n  ColumnCalcs.prototype.removeCalcs = function () {\n    var changed = false;\n\n    if (this.topInitialized) {\n      this.topInitialized = false;\n      this.topElement.parentNode.removeChild(this.topElement);\n      changed = true;\n    }\n\n    if (this.botInitialized) {\n      this.botInitialized = false;\n      this.table.footerManager.remove(this.botElement);\n      changed = true;\n    }\n\n    if (changed) {\n      this.table.rowManager.adjustTableSize();\n    }\n  };\n\n  ColumnCalcs.prototype.initializeTopRow = function () {\n    if (!this.topInitialized) {\n      // this.table.columnManager.headersElement.after(this.topElement);\n      this.table.columnManager.getElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\n      this.topInitialized = true;\n    }\n  };\n\n  ColumnCalcs.prototype.initializeBottomRow = function () {\n    if (!this.botInitialized) {\n      this.table.footerManager.prepend(this.botElement);\n      this.botInitialized = true;\n    }\n  };\n\n  ColumnCalcs.prototype.scrollHorizontal = function (left) {\n    var hozAdjust = 0,\n        scrollWidth = this.table.columnManager.getElement().scrollWidth - this.table.element.clientWidth;\n\n    if (this.botInitialized) {\n      this.botRow.getElement().style.marginLeft = -left + \"px\";\n    }\n  };\n\n  ColumnCalcs.prototype.recalc = function (rows) {\n    var data, row;\n\n    if (this.topInitialized || this.botInitialized) {\n      data = this.rowsToData(rows);\n\n      if (this.topInitialized) {\n        if (this.topRow) {\n          this.topRow.deleteCells();\n        }\n\n        row = this.generateRow(\"top\", this.rowsToData(rows));\n        this.topRow = row;\n\n        while (this.topElement.firstChild) {\n          this.topElement.removeChild(this.topElement.firstChild);\n        }\n\n        this.topElement.appendChild(row.getElement());\n        row.initialize(true);\n      }\n\n      if (this.botInitialized) {\n        if (this.botRow) {\n          this.botRow.deleteCells();\n        }\n\n        row = this.generateRow(\"bottom\", this.rowsToData(rows));\n        this.botRow = row;\n\n        while (this.botElement.firstChild) {\n          this.botElement.removeChild(this.botElement.firstChild);\n        }\n\n        this.botElement.appendChild(row.getElement());\n        row.initialize(true);\n      }\n\n      this.table.rowManager.adjustTableSize(); //set resizable handles\n\n      if (this.table.modExists(\"frozenColumns\")) {\n        this.table.modules.frozenColumns.layout();\n      }\n    }\n  };\n\n  ColumnCalcs.prototype.recalcRowGroup = function (row) {\n    this.recalcGroup(this.table.modules.groupRows.getRowGroup(row));\n  };\n\n  ColumnCalcs.prototype.recalcAll = function () {\n    var _this37 = this;\n\n    if (this.topCalcs.length || this.botCalcs.length) {\n      if (this.table.options.columnCalcs !== \"group\") {\n        this.recalc(this.table.rowManager.activeRows);\n      }\n\n      if (this.table.options.groupBy && this.table.options.columnCalcs !== \"table\") {\n        var groups = table.modules.groupRows.getChildGroups();\n        groups.forEach(function (group) {\n          _this37.recalcGroup(group);\n        });\n      }\n    }\n  };\n\n  ColumnCalcs.prototype.recalcGroup = function (group) {\n    var data, rowData;\n\n    if (group) {\n      if (group.calcs) {\n        if (group.calcs.bottom) {\n          data = this.rowsToData(group.rows);\n          rowData = this.generateRowData(\"bottom\", data);\n          group.calcs.bottom.updateData(rowData);\n          group.calcs.bottom.reinitialize();\n        }\n\n        if (group.calcs.top) {\n          data = this.rowsToData(group.rows);\n          rowData = this.generateRowData(\"top\", data);\n          group.calcs.top.updateData(rowData);\n          group.calcs.top.reinitialize();\n        }\n      }\n    }\n  }; //generate top stats row\n\n\n  ColumnCalcs.prototype.generateTopRow = function (rows) {\n    return this.generateRow(\"top\", this.rowsToData(rows));\n  }; //generate bottom stats row\n\n\n  ColumnCalcs.prototype.generateBottomRow = function (rows) {\n    return this.generateRow(\"bottom\", this.rowsToData(rows));\n  };\n\n  ColumnCalcs.prototype.rowsToData = function (rows) {\n    var _this38 = this;\n\n    var data = [];\n    rows.forEach(function (row) {\n      data.push(row.getData());\n\n      if (_this38.table.options.dataTree && _this38.table.options.dataTreeChildColumnCalcs) {\n        if (row.modules.dataTree.open) {\n          var children = _this38.rowsToData(_this38.table.modules.dataTree.getFilteredTreeChildren(row));\n\n          data = data.concat(children);\n        }\n      }\n    });\n    return data;\n  }; //generate stats row\n\n\n  ColumnCalcs.prototype.generateRow = function (pos, data) {\n    var self = this,\n        rowData = this.generateRowData(pos, data),\n        row;\n\n    if (self.table.modExists(\"mutator\")) {\n      self.table.modules.mutator.disable();\n    }\n\n    row = new Row(rowData, this, \"calc\");\n\n    if (self.table.modExists(\"mutator\")) {\n      self.table.modules.mutator.enable();\n    }\n\n    row.getElement().classList.add(\"tabulator-calcs\", \"tabulator-calcs-\" + pos);\n\n    row.generateCells = function () {\n      var cells = [];\n      self.table.columnManager.columnsByIndex.forEach(function (column) {\n        //set field name of mock column\n        self.genColumn.setField(column.getField());\n        self.genColumn.hozAlign = column.hozAlign;\n\n        if (column.definition[pos + \"CalcFormatter\"] && self.table.modExists(\"format\")) {\n          self.genColumn.modules.format = {\n            formatter: self.table.modules.format.getFormatter(column.definition[pos + \"CalcFormatter\"]),\n            params: column.definition[pos + \"CalcFormatterParams\"]\n          };\n        } else {\n          self.genColumn.modules.format = {\n            formatter: self.table.modules.format.getFormatter(\"plaintext\"),\n            params: {}\n          };\n        } //ensure css class defintion is replicated to calculation cell\n\n\n        self.genColumn.definition.cssClass = column.definition.cssClass; //generate cell and assign to correct column\n\n        var cell = new Cell(self.genColumn, row);\n        cell.column = column;\n        cell.setWidth();\n        column.cells.push(cell);\n        cells.push(cell);\n\n        if (!column.visible) {\n          cell.hide();\n        }\n      });\n      this.cells = cells;\n    };\n\n    return row;\n  }; //generate stats row\n\n\n  ColumnCalcs.prototype.generateRowData = function (pos, data) {\n    var rowData = {},\n        calcs = pos == \"top\" ? this.topCalcs : this.botCalcs,\n        type = pos == \"top\" ? \"topCalc\" : \"botCalc\",\n        params,\n        paramKey;\n    calcs.forEach(function (column) {\n      var values = [];\n\n      if (column.modules.columnCalcs && column.modules.columnCalcs[type]) {\n        data.forEach(function (item) {\n          values.push(column.getFieldValue(item));\n        });\n        paramKey = type + \"Params\";\n        params = typeof column.modules.columnCalcs[paramKey] === \"function\" ? column.modules.columnCalcs[paramKey](values, data) : column.modules.columnCalcs[paramKey];\n        column.setFieldValue(rowData, column.modules.columnCalcs[type](values, data, params));\n      }\n    });\n    return rowData;\n  };\n\n  ColumnCalcs.prototype.hasTopCalcs = function () {\n    return !!this.topCalcs.length;\n  };\n\n  ColumnCalcs.prototype.hasBottomCalcs = function () {\n    return !!this.botCalcs.length;\n  }; //handle table redraw\n\n\n  ColumnCalcs.prototype.redraw = function () {\n    if (this.topRow) {\n      this.topRow.normalizeHeight(true);\n    }\n\n    if (this.botRow) {\n      this.botRow.normalizeHeight(true);\n    }\n  }; //return the calculated\n\n\n  ColumnCalcs.prototype.getResults = function () {\n    var self = this,\n        results = {},\n        groups;\n\n    if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n      groups = this.table.modules.groupRows.getGroups(true);\n      groups.forEach(function (group) {\n        results[group.getKey()] = self.getGroupResults(group);\n      });\n    } else {\n      results = {\n        top: this.topRow ? this.topRow.getData() : {},\n        bottom: this.botRow ? this.botRow.getData() : {}\n      };\n    }\n\n    return results;\n  }; //get results from a group\n\n\n  ColumnCalcs.prototype.getGroupResults = function (group) {\n    var self = this,\n        groupObj = group._getSelf(),\n        subGroups = group.getSubGroups(),\n        subGroupResults = {},\n        results = {};\n\n    subGroups.forEach(function (subgroup) {\n      subGroupResults[subgroup.getKey()] = self.getGroupResults(subgroup);\n    });\n    results = {\n      top: groupObj.calcs.top ? groupObj.calcs.top.getData() : {},\n      bottom: groupObj.calcs.bottom ? groupObj.calcs.bottom.getData() : {},\n      groups: subGroupResults\n    };\n    return results;\n  }; //default calculations\n\n\n  ColumnCalcs.prototype.calculations = {\n    \"avg\": function avg(values, data, calcParams) {\n      var output = 0,\n          precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : 2;\n\n      if (values.length) {\n        output = values.reduce(function (sum, value) {\n          value = Number(value);\n          return sum + value;\n        });\n        output = output / values.length;\n        output = precision !== false ? output.toFixed(precision) : output;\n      }\n\n      return parseFloat(output).toString();\n    },\n    \"max\": function max(values, data, calcParams) {\n      var output = null,\n          precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n      values.forEach(function (value) {\n        value = Number(value);\n\n        if (value > output || output === null) {\n          output = value;\n        }\n      });\n      return output !== null ? precision !== false ? output.toFixed(precision) : output : \"\";\n    },\n    \"min\": function min(values, data, calcParams) {\n      var output = null,\n          precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n      values.forEach(function (value) {\n        value = Number(value);\n\n        if (value < output || output === null) {\n          output = value;\n        }\n      });\n      return output !== null ? precision !== false ? output.toFixed(precision) : output : \"\";\n    },\n    \"sum\": function sum(values, data, calcParams) {\n      var output = 0,\n          precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n      if (values.length) {\n        values.forEach(function (value) {\n          value = Number(value);\n          output += !isNaN(value) ? Number(value) : 0;\n        });\n      }\n\n      return precision !== false ? output.toFixed(precision) : output;\n    },\n    \"concat\": function concat(values, data, calcParams) {\n      var output = 0;\n\n      if (values.length) {\n        output = values.reduce(function (sum, value) {\n          return String(sum) + String(value);\n        });\n      }\n\n      return output;\n    },\n    \"count\": function count(values, data, calcParams) {\n      var output = 0;\n\n      if (values.length) {\n        values.forEach(function (value) {\n          if (value) {\n            output++;\n          }\n        });\n      }\n\n      return output;\n    }\n  };\n  Tabulator.prototype.registerModule(\"columnCalcs\", ColumnCalcs);\n\n  var Clipboard = function Clipboard(table) {\n    this.table = table;\n    this.mode = true;\n\n    this.pasteParser = function () {};\n\n    this.pasteAction = function () {};\n\n    this.customSelection = false;\n    this.rowRange = false;\n    this.blocked = true; //block copy actions not originating from this command\n  };\n\n  Clipboard.prototype.initialize = function () {\n    var _this39 = this;\n\n    this.mode = this.table.options.clipboard;\n    this.rowRange = this.table.options.clipboardCopyRowRange;\n\n    if (this.mode === true || this.mode === \"copy\") {\n      this.table.element.addEventListener(\"copy\", function (e) {\n        var plain, html, list;\n\n        if (!_this39.blocked) {\n          e.preventDefault();\n\n          if (_this39.customSelection) {\n            plain = _this39.customSelection;\n\n            if (_this39.table.options.clipboardCopyFormatter) {\n              plain = _this39.table.options.clipboardCopyFormatter(\"plain\", plain);\n            }\n          } else {\n            var list = _this39.table.modules.export.generateExportList(_this39.rowRange, _this39.table.options.clipboardCopyStyled, _this39.table.options.clipboardCopyConfig, \"clipboard\");\n\n            html = _this39.table.modules.export.genereateHTMLTable(list);\n            plain = html ? _this39.generatePlainContent(list) : \"\";\n\n            if (_this39.table.options.clipboardCopyFormatter) {\n              plain = _this39.table.options.clipboardCopyFormatter(\"plain\", plain);\n              html = _this39.table.options.clipboardCopyFormatter(\"html\", html);\n            }\n          }\n\n          if (window.clipboardData && window.clipboardData.setData) {\n            window.clipboardData.setData('Text', plain);\n          } else if (e.clipboardData && e.clipboardData.setData) {\n            e.clipboardData.setData('text/plain', plain);\n\n            if (html) {\n              e.clipboardData.setData('text/html', html);\n            }\n          } else if (e.originalEvent && e.originalEvent.clipboardData.setData) {\n            e.originalEvent.clipboardData.setData('text/plain', plain);\n\n            if (html) {\n              e.originalEvent.clipboardData.setData('text/html', html);\n            }\n          }\n\n          _this39.table.options.clipboardCopied.call(_this39.table, plain, html);\n\n          _this39.reset();\n        }\n      });\n    }\n\n    if (this.mode === true || this.mode === \"paste\") {\n      this.table.element.addEventListener(\"paste\", function (e) {\n        _this39.paste(e);\n      });\n    }\n\n    this.setPasteParser(this.table.options.clipboardPasteParser);\n    this.setPasteAction(this.table.options.clipboardPasteAction);\n  };\n\n  Clipboard.prototype.reset = function () {\n    this.blocked = false;\n    this.originalSelectionText = \"\";\n  };\n\n  Clipboard.prototype.generatePlainContent = function (list) {\n    var output = [];\n    list.forEach(function (row) {\n      var rowData = [];\n      row.columns.forEach(function (col) {\n        var value = \"\";\n\n        if (col) {\n          if (row.type === \"group\") {\n            col.value = col.component.getKey();\n          }\n\n          switch (_typeof(col.value)) {\n            case \"object\":\n              value = JSON.stringify(col.value);\n              break;\n\n            case \"undefined\":\n            case \"null\":\n              value = \"\";\n              break;\n\n            default:\n              value = col.value;\n          }\n        }\n\n        rowData.push(value);\n      });\n      output.push(rowData.join(\"\\t\"));\n    });\n    return output.join(\"\\n\");\n  };\n\n  Clipboard.prototype.copy = function (range, internal) {\n    var range, sel, textRange;\n    this.blocked = false;\n    this.customSelection = false;\n\n    if (this.mode === true || this.mode === \"copy\") {\n      this.rowRange = range || this.table.options.clipboardCopyRowRange;\n\n      if (typeof window.getSelection != \"undefined\" && typeof document.createRange != \"undefined\") {\n        range = document.createRange();\n        range.selectNodeContents(this.table.element);\n        sel = window.getSelection();\n\n        if (sel.toString() && internal) {\n          this.customSelection = sel.toString();\n        }\n\n        sel.removeAllRanges();\n        sel.addRange(range);\n      } else if (typeof document.selection != \"undefined\" && typeof document.body.createTextRange != \"undefined\") {\n        textRange = document.body.createTextRange();\n        textRange.moveToElementText(this.table.element);\n        textRange.select();\n      }\n\n      document.execCommand('copy');\n\n      if (sel) {\n        sel.removeAllRanges();\n      }\n    }\n  }; //PASTE EVENT HANDLING\n\n\n  Clipboard.prototype.setPasteAction = function (action) {\n    switch (typeof action === 'undefined' ? 'undefined' : _typeof(action)) {\n      case \"string\":\n        this.pasteAction = this.pasteActions[action];\n\n        if (!this.pasteAction) {\n          console.warn(\"Clipboard Error - No such paste action found:\", action);\n        }\n\n        break;\n\n      case \"function\":\n        this.pasteAction = action;\n        break;\n    }\n  };\n\n  Clipboard.prototype.setPasteParser = function (parser) {\n    switch (typeof parser === 'undefined' ? 'undefined' : _typeof(parser)) {\n      case \"string\":\n        this.pasteParser = this.pasteParsers[parser];\n\n        if (!this.pasteParser) {\n          console.warn(\"Clipboard Error - No such paste parser found:\", parser);\n        }\n\n        break;\n\n      case \"function\":\n        this.pasteParser = parser;\n        break;\n    }\n  };\n\n  Clipboard.prototype.paste = function (e) {\n    var data, rowData, rows;\n\n    if (this.checkPaseOrigin(e)) {\n      data = this.getPasteData(e);\n      rowData = this.pasteParser.call(this, data);\n\n      if (rowData) {\n        e.preventDefault();\n\n        if (this.table.modExists(\"mutator\")) {\n          rowData = this.mutateData(rowData);\n        }\n\n        rows = this.pasteAction.call(this, rowData);\n        this.table.options.clipboardPasted.call(this.table, data, rowData, rows);\n      } else {\n        this.table.options.clipboardPasteError.call(this.table, data);\n      }\n    }\n  };\n\n  Clipboard.prototype.mutateData = function (data) {\n    var self = this,\n        output = [];\n\n    if (Array.isArray(data)) {\n      data.forEach(function (row) {\n        output.push(self.table.modules.mutator.transformRow(row, \"clipboard\"));\n      });\n    } else {\n      output = data;\n    }\n\n    return output;\n  };\n\n  Clipboard.prototype.checkPaseOrigin = function (e) {\n    var valid = true;\n\n    if (e.target.tagName != \"DIV\" || this.table.modules.edit.currentCell) {\n      valid = false;\n    }\n\n    return valid;\n  };\n\n  Clipboard.prototype.getPasteData = function (e) {\n    var data;\n\n    if (window.clipboardData && window.clipboardData.getData) {\n      data = window.clipboardData.getData('Text');\n    } else if (e.clipboardData && e.clipboardData.getData) {\n      data = e.clipboardData.getData('text/plain');\n    } else if (e.originalEvent && e.originalEvent.clipboardData.getData) {\n      data = e.originalEvent.clipboardData.getData('text/plain');\n    }\n\n    return data;\n  };\n\n  Clipboard.prototype.pasteParsers = {\n    table: function table(clipboard) {\n      var data = [],\n          success = false,\n          headerFindSuccess = true,\n          columns = this.table.columnManager.columns,\n          columnMap = [],\n          rows = []; //get data from clipboard into array of columns and rows.\n\n      clipboard = clipboard.split(\"\\n\");\n      clipboard.forEach(function (row) {\n        data.push(row.split(\"\\t\"));\n      });\n\n      if (data.length && !(data.length === 1 && data[0].length < 2)) {\n        success = true; //check if headers are present by title\n\n        data[0].forEach(function (value) {\n          var column = columns.find(function (column) {\n            return value && column.definition.title && value.trim() && column.definition.title.trim() === value.trim();\n          });\n\n          if (column) {\n            columnMap.push(column);\n          } else {\n            headerFindSuccess = false;\n          }\n        }); //check if column headers are present by field\n\n        if (!headerFindSuccess) {\n          headerFindSuccess = true;\n          columnMap = [];\n          data[0].forEach(function (value) {\n            var column = columns.find(function (column) {\n              return value && column.field && value.trim() && column.field.trim() === value.trim();\n            });\n\n            if (column) {\n              columnMap.push(column);\n            } else {\n              headerFindSuccess = false;\n            }\n          });\n\n          if (!headerFindSuccess) {\n            columnMap = this.table.columnManager.columnsByIndex;\n          }\n        } //remove header row if found\n\n\n        if (headerFindSuccess) {\n          data.shift();\n        }\n\n        data.forEach(function (item) {\n          var row = {};\n          item.forEach(function (value, i) {\n            if (columnMap[i]) {\n              row[columnMap[i].field] = value;\n            }\n          });\n          rows.push(row);\n        });\n        return rows;\n      } else {\n        return false;\n      }\n    }\n  };\n  Clipboard.prototype.pasteActions = {\n    replace: function replace(rows) {\n      return this.table.setData(rows);\n    },\n    update: function update(rows) {\n      return this.table.updateOrAddData(rows);\n    },\n    insert: function insert(rows) {\n      return this.table.addData(rows);\n    }\n  };\n  Tabulator.prototype.registerModule(\"clipboard\", Clipboard);\n\n  var DataTree = function DataTree(table) {\n    this.table = table;\n    this.indent = 10;\n    this.field = \"\";\n    this.collapseEl = null;\n    this.expandEl = null;\n    this.branchEl = null;\n    this.elementField = false;\n\n    this.startOpen = function () {};\n\n    this.displayIndex = 0;\n  };\n\n  DataTree.prototype.initialize = function () {\n    var dummyEl = null,\n        firstCol = this.table.columnManager.getFirstVisibileColumn(),\n        options = this.table.options;\n    this.field = options.dataTreeChildField;\n    this.indent = options.dataTreeChildIndent;\n    this.elementField = options.dataTreeElementColumn || (firstCol ? firstCol.field : false);\n\n    if (options.dataTreeBranchElement) {\n      if (options.dataTreeBranchElement === true) {\n        this.branchEl = document.createElement(\"div\");\n        this.branchEl.classList.add(\"tabulator-data-tree-branch\");\n      } else {\n        if (typeof options.dataTreeBranchElement === \"string\") {\n          dummyEl = document.createElement(\"div\");\n          dummyEl.innerHTML = options.dataTreeBranchElement;\n          this.branchEl = dummyEl.firstChild;\n        } else {\n          this.branchEl = options.dataTreeBranchElement;\n        }\n      }\n    }\n\n    if (options.dataTreeCollapseElement) {\n      if (typeof options.dataTreeCollapseElement === \"string\") {\n        dummyEl = document.createElement(\"div\");\n        dummyEl.innerHTML = options.dataTreeCollapseElement;\n        this.collapseEl = dummyEl.firstChild;\n      } else {\n        this.collapseEl = options.dataTreeCollapseElement;\n      }\n    } else {\n      this.collapseEl = document.createElement(\"div\");\n      this.collapseEl.classList.add(\"tabulator-data-tree-control\");\n      this.collapseEl.tabIndex = 0;\n      this.collapseEl.innerHTML = \"<div class='tabulator-data-tree-control-collapse'></div>\";\n    }\n\n    if (options.dataTreeExpandElement) {\n      if (typeof options.dataTreeExpandElement === \"string\") {\n        dummyEl = document.createElement(\"div\");\n        dummyEl.innerHTML = options.dataTreeExpandElement;\n        this.expandEl = dummyEl.firstChild;\n      } else {\n        this.expandEl = options.dataTreeExpandElement;\n      }\n    } else {\n      this.expandEl = document.createElement(\"div\");\n      this.expandEl.classList.add(\"tabulator-data-tree-control\");\n      this.expandEl.tabIndex = 0;\n      this.expandEl.innerHTML = \"<div class='tabulator-data-tree-control-expand'></div>\";\n    }\n\n    switch (_typeof(options.dataTreeStartExpanded)) {\n      case \"boolean\":\n        this.startOpen = function (row, index) {\n          return options.dataTreeStartExpanded;\n        };\n\n        break;\n\n      case \"function\":\n        this.startOpen = options.dataTreeStartExpanded;\n        break;\n\n      default:\n        this.startOpen = function (row, index) {\n          return options.dataTreeStartExpanded[index];\n        };\n\n        break;\n    }\n  };\n\n  DataTree.prototype.initializeRow = function (row) {\n    var childArray = row.getData()[this.field];\n    var isArray = Array.isArray(childArray);\n    var children = isArray || !isArray && (typeof childArray === 'undefined' ? 'undefined' : _typeof(childArray)) === \"object\" && childArray !== null;\n\n    if (!children && row.modules.dataTree && row.modules.dataTree.branchEl) {\n      row.modules.dataTree.branchEl.parentNode.removeChild(row.modules.dataTree.branchEl);\n    }\n\n    if (!children && row.modules.dataTree && row.modules.dataTree.controlEl) {\n      row.modules.dataTree.controlEl.parentNode.removeChild(row.modules.dataTree.controlEl);\n    }\n\n    row.modules.dataTree = {\n      index: row.modules.dataTree ? row.modules.dataTree.index : 0,\n      open: children ? row.modules.dataTree ? row.modules.dataTree.open : this.startOpen(row.getComponent(), 0) : false,\n      controlEl: row.modules.dataTree && children ? row.modules.dataTree.controlEl : false,\n      branchEl: row.modules.dataTree && children ? row.modules.dataTree.branchEl : false,\n      parent: row.modules.dataTree ? row.modules.dataTree.parent : false,\n      children: children\n    };\n  };\n\n  DataTree.prototype.layoutRow = function (row) {\n    var cell = this.elementField ? row.getCell(this.elementField) : row.getCells()[0],\n        el = cell.getElement(),\n        config = row.modules.dataTree;\n\n    if (config.branchEl) {\n      if (config.branchEl.parentNode) {\n        config.branchEl.parentNode.removeChild(config.branchEl);\n      }\n\n      config.branchEl = false;\n    }\n\n    if (config.controlEl) {\n      if (config.controlEl.parentNode) {\n        config.controlEl.parentNode.removeChild(config.controlEl);\n      }\n\n      config.controlEl = false;\n    }\n\n    this.generateControlElement(row, el);\n    row.element.classList.add(\"tabulator-tree-level-\" + config.index);\n\n    if (config.index) {\n      if (this.branchEl) {\n        config.branchEl = this.branchEl.cloneNode(true);\n        el.insertBefore(config.branchEl, el.firstChild);\n        config.branchEl.style.marginLeft = (config.branchEl.offsetWidth + config.branchEl.style.marginRight) * (config.index - 1) + config.index * this.indent + \"px\";\n      } else {\n        el.style.paddingLeft = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-left')) + config.index * this.indent + \"px\";\n      }\n    }\n  };\n\n  DataTree.prototype.generateControlElement = function (row, el) {\n    var _this40 = this;\n\n    var config = row.modules.dataTree,\n        el = el || row.getCells()[0].getElement(),\n        oldControl = config.controlEl;\n\n    if (config.children !== false) {\n      if (config.open) {\n        config.controlEl = this.collapseEl.cloneNode(true);\n        config.controlEl.addEventListener(\"click\", function (e) {\n          e.stopPropagation();\n\n          _this40.collapseRow(row);\n        });\n      } else {\n        config.controlEl = this.expandEl.cloneNode(true);\n        config.controlEl.addEventListener(\"click\", function (e) {\n          e.stopPropagation();\n\n          _this40.expandRow(row);\n        });\n      }\n\n      config.controlEl.addEventListener(\"mousedown\", function (e) {\n        e.stopPropagation();\n      });\n\n      if (oldControl && oldControl.parentNode === el) {\n        oldControl.parentNode.replaceChild(config.controlEl, oldControl);\n      } else {\n        el.insertBefore(config.controlEl, el.firstChild);\n      }\n    }\n  };\n\n  DataTree.prototype.setDisplayIndex = function (index) {\n    this.displayIndex = index;\n  };\n\n  DataTree.prototype.getDisplayIndex = function () {\n    return this.displayIndex;\n  };\n\n  DataTree.prototype.getRows = function (rows) {\n    var _this41 = this;\n\n    var output = [];\n    rows.forEach(function (row, i) {\n      var config, children;\n      output.push(row);\n\n      if (row instanceof Row) {\n        config = row.modules.dataTree.children;\n\n        if (!config.index && config.children !== false) {\n          children = _this41.getChildren(row);\n          children.forEach(function (child) {\n            output.push(child);\n          });\n        }\n      }\n    });\n    return output;\n  };\n\n  DataTree.prototype.getChildren = function (row) {\n    var _this42 = this;\n\n    var config = row.modules.dataTree,\n        children = [],\n        output = [];\n\n    if (config.children !== false && config.open) {\n      if (!Array.isArray(config.children)) {\n        config.children = this.generateChildren(row);\n      }\n\n      if (this.table.modExists(\"filter\")) {\n        children = this.table.modules.filter.filter(config.children);\n      } else {\n        children = config.children;\n      }\n\n      if (this.table.modExists(\"sort\")) {\n        this.table.modules.sort.sort(children);\n      }\n\n      children.forEach(function (child) {\n        output.push(child);\n\n        var subChildren = _this42.getChildren(child);\n\n        subChildren.forEach(function (sub) {\n          output.push(sub);\n        });\n      });\n    }\n\n    return output;\n  };\n\n  DataTree.prototype.generateChildren = function (row) {\n    var _this43 = this;\n\n    var children = [];\n    var childArray = row.getData()[this.field];\n\n    if (!Array.isArray(childArray)) {\n      childArray = [childArray];\n    }\n\n    childArray.forEach(function (childData) {\n      var childRow = new Row(childData || {}, _this43.table.rowManager);\n      childRow.modules.dataTree.index = row.modules.dataTree.index + 1;\n      childRow.modules.dataTree.parent = row;\n\n      if (childRow.modules.dataTree.children) {\n        childRow.modules.dataTree.open = _this43.startOpen(childRow.getComponent(), childRow.modules.dataTree.index);\n      }\n\n      children.push(childRow);\n    });\n    return children;\n  };\n\n  DataTree.prototype.expandRow = function (row, silent) {\n    var config = row.modules.dataTree;\n\n    if (config.children !== false) {\n      config.open = true;\n      row.reinitialize();\n      this.table.rowManager.refreshActiveData(\"tree\", false, true);\n      this.table.options.dataTreeRowExpanded(row.getComponent(), row.modules.dataTree.index);\n    }\n  };\n\n  DataTree.prototype.collapseRow = function (row) {\n    var config = row.modules.dataTree;\n\n    if (config.children !== false) {\n      config.open = false;\n      row.reinitialize();\n      this.table.rowManager.refreshActiveData(\"tree\", false, true);\n      this.table.options.dataTreeRowCollapsed(row.getComponent(), row.modules.dataTree.index);\n    }\n  };\n\n  DataTree.prototype.toggleRow = function (row) {\n    var config = row.modules.dataTree;\n\n    if (config.children !== false) {\n      if (config.open) {\n        this.collapseRow(row);\n      } else {\n        this.expandRow(row);\n      }\n    }\n  };\n\n  DataTree.prototype.getTreeParent = function (row) {\n    return row.modules.dataTree.parent ? row.modules.dataTree.parent.getComponent() : false;\n  };\n\n  DataTree.prototype.getFilteredTreeChildren = function (row) {\n    var config = row.modules.dataTree,\n        output = [],\n        children;\n\n    if (config.children) {\n      if (!Array.isArray(config.children)) {\n        config.children = this.generateChildren(row);\n      }\n\n      if (this.table.modExists(\"filter\")) {\n        children = this.table.modules.filter.filter(config.children);\n      } else {\n        children = config.children;\n      }\n\n      children.forEach(function (childRow) {\n        if (childRow instanceof Row) {\n          output.push(childRow);\n        }\n      });\n    }\n\n    return output;\n  };\n\n  DataTree.prototype.rowDelete = function (row) {\n    var parent = row.modules.dataTree.parent,\n        childIndex;\n\n    if (parent) {\n      childIndex = this.findChildIndex(row, parent);\n\n      if (childIndex !== false) {\n        parent.data[this.field].splice(childIndex, 1);\n      }\n\n      if (!parent.data[this.field].length) {\n        delete parent.data[this.field];\n      }\n\n      this.initializeRow(parent);\n      this.layoutRow(parent);\n    }\n\n    this.table.rowManager.refreshActiveData(\"tree\", false, true);\n  };\n\n  DataTree.prototype.addTreeChildRow = function (row, data, top, index) {\n    var childIndex = false;\n\n    if (typeof data === \"string\") {\n      data = JSON.parse(data);\n    }\n\n    if (!Array.isArray(row.data[this.field])) {\n      row.data[this.field] = [];\n      row.modules.dataTree.open = this.startOpen(row.getComponent(), row.modules.dataTree.index);\n    }\n\n    if (typeof index !== \"undefined\") {\n      childIndex = this.findChildIndex(index, row);\n\n      if (childIndex !== false) {\n        row.data[this.field].splice(top ? childIndex : childIndex + 1, 0, data);\n      }\n    }\n\n    if (childIndex === false) {\n      if (top) {\n        row.data[this.field].unshift(data);\n      } else {\n        row.data[this.field].push(data);\n      }\n    }\n\n    this.initializeRow(row);\n    this.layoutRow(row);\n    this.table.rowManager.refreshActiveData(\"tree\", false, true);\n  };\n\n  DataTree.prototype.findChildIndex = function (subject, parent) {\n    var _this44 = this;\n\n    var match = false;\n\n    if ((typeof subject === 'undefined' ? 'undefined' : _typeof(subject)) == \"object\") {\n      if (subject instanceof Row) {\n        //subject is row element\n        match = subject.data;\n      } else if (subject instanceof RowComponent) {\n        //subject is public row component\n        match = subject._getSelf().data;\n      } else if (typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement) {\n        if (parent.modules.dataTree) {\n          match = parent.modules.dataTree.children.find(function (childRow) {\n            return childRow instanceof Row ? childRow.element === subject : false;\n          });\n\n          if (match) {\n            match = match.data;\n          }\n        }\n      }\n    } else if (typeof subject == \"undefined\" || subject === null) {\n      match = false;\n    } else {\n      //subject should be treated as the index of the row\n      match = parent.data[this.field].find(function (row) {\n        return row.data[_this44.table.options.index] == subject;\n      });\n    }\n\n    if (match) {\n      if (Array.isArray(parent.data[this.field])) {\n        match = parent.data[this.field].indexOf(match);\n      }\n\n      if (match == -1) {\n        match = false;\n      }\n    } //catch all for any other type of input\n\n\n    return match;\n  };\n\n  DataTree.prototype.getTreeChildren = function (row) {\n    var config = row.modules.dataTree,\n        output = [];\n\n    if (config.children) {\n      if (!Array.isArray(config.children)) {\n        config.children = this.generateChildren(row);\n      }\n\n      config.children.forEach(function (childRow) {\n        if (childRow instanceof Row) {\n          output.push(childRow.getComponent());\n        }\n      });\n    }\n\n    return output;\n  };\n\n  DataTree.prototype.checkForRestyle = function (cell) {\n    if (!cell.row.cells.indexOf(cell)) {\n      cell.row.reinitialize();\n    }\n  };\n\n  DataTree.prototype.getChildField = function () {\n    return this.field;\n  };\n\n  DataTree.prototype.redrawNeeded = function (data) {\n    return (this.field ? typeof data[this.field] !== \"undefined\" : false) || (this.elementField ? typeof data[this.elementField] !== \"undefined\" : false);\n  };\n\n  Tabulator.prototype.registerModule(\"dataTree\", DataTree);\n\n  var Download = function Download(table) {\n    this.table = table; //hold Tabulator object\n  }; //trigger file download\n\n\n  Download.prototype.download = function (type, filename, options, range, interceptCallback) {\n    var self = this,\n        downloadFunc = false;\n\n    function buildLink(data, mime) {\n      if (interceptCallback) {\n        if (interceptCallback === true) {\n          self.triggerDownload(data, mime, type, filename, true);\n        } else {\n          interceptCallback(data);\n        }\n      } else {\n        self.triggerDownload(data, mime, type, filename);\n      }\n    }\n\n    if (typeof type == \"function\") {\n      downloadFunc = type;\n    } else {\n      if (self.downloaders[type]) {\n        downloadFunc = self.downloaders[type];\n      } else {\n        console.warn(\"Download Error - No such download type found: \", type);\n      }\n    }\n\n    if (downloadFunc) {\n      var list = this.generateExportList(range);\n      downloadFunc.call(this.table, list, options || {}, buildLink);\n    }\n  };\n\n  Download.prototype.generateExportList = function (range) {\n    var list = this.table.modules.export.generateExportList(this.table.options.downloadConfig, false, range || this.table.options.downloadRowRange, \"download\"); //assign group header formatter\n\n    var groupHeader = this.table.options.groupHeaderDownload;\n\n    if (groupHeader && !Array.isArray(groupHeader)) {\n      groupHeader = [groupHeader];\n    }\n\n    list.forEach(function (row) {\n      var group;\n\n      if (row.type === \"group\") {\n        group = row.columns[0];\n\n        if (groupHeader && groupHeader[row.indent]) {\n          group.value = groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n        }\n      }\n    });\n    return list;\n  };\n\n  Download.prototype.triggerDownload = function (data, mime, type, filename, newTab) {\n    var element = document.createElement('a'),\n        blob = new Blob([data], {\n      type: mime\n    }),\n        filename = filename || \"Tabulator.\" + (typeof type === \"function\" ? \"txt\" : type);\n    blob = this.table.options.downloadReady.call(this.table, data, blob);\n\n    if (blob) {\n      if (newTab) {\n        window.open(window.URL.createObjectURL(blob));\n      } else {\n        if (navigator.msSaveOrOpenBlob) {\n          navigator.msSaveOrOpenBlob(blob, filename);\n        } else {\n          element.setAttribute('href', window.URL.createObjectURL(blob)); //set file title\n\n          element.setAttribute('download', filename); //trigger download\n\n          element.style.display = 'none';\n          document.body.appendChild(element);\n          element.click(); //remove temporary link element\n\n          document.body.removeChild(element);\n        }\n      }\n\n      if (this.table.options.downloadComplete) {\n        this.table.options.downloadComplete();\n      }\n    }\n  };\n\n  Download.prototype.commsReceived = function (table, action, data) {\n    switch (action) {\n      case \"intercept\":\n        this.download(data.type, \"\", data.options, data.active, data.intercept);\n        break;\n    }\n  }; //downloaders\n\n\n  Download.prototype.downloaders = {\n    csv: function csv(list, options, setFileContents) {\n      var delimiter = options && options.delimiter ? options.delimiter : \",\",\n          fileContents = [],\n          headers = [];\n      list.forEach(function (row) {\n        var item = [];\n\n        switch (row.type) {\n          case \"group\":\n            console.warn(\"Download Warning - CSV downloader cannot process row groups\");\n            break;\n\n          case \"calc\":\n            console.warn(\"Download Warning - CSV downloader cannot process column calculations\");\n            break;\n\n          case \"header\":\n            row.columns.forEach(function (col, i) {\n              if (col && col.depth === 1) {\n                headers[i] = typeof col.value == \"undefined\" || typeof col.value == \"null\" ? \"\" : col.value;\n              }\n            });\n            break;\n\n          case \"row\":\n            row.columns.forEach(function (col) {\n              if (col) {\n                switch (_typeof(col.value)) {\n                  case \"object\":\n                    col.value = JSON.stringify(col.value);\n                    break;\n\n                  case \"undefined\":\n                  case \"null\":\n                    col.value = \"\";\n                    break;\n                }\n\n                item.push('\"' + String(col.value).split('\"').join('\"\"') + '\"');\n              }\n            });\n            fileContents.push(item.join(delimiter));\n            break;\n        }\n      });\n\n      if (headers.length) {\n        fileContents = [headers].concat(fileContents);\n      }\n\n      fileContents = fileContents.join(\"\\n\");\n\n      if (options.bom) {\n        fileContents = '\\uFEFF' + fileContents;\n      }\n\n      setFileContents(fileContents, \"text/csv\");\n    },\n    json: function json(list, options, setFileContents) {\n      var fileContents = [];\n      list.forEach(function (row) {\n        var item = {};\n\n        switch (row.type) {\n          case \"header\":\n            break;\n\n          case \"group\":\n            console.warn(\"Download Warning - JSON downloader cannot process row groups\");\n            break;\n\n          case \"calc\":\n            console.warn(\"Download Warning - JSON downloader cannot process column calculations\");\n            break;\n\n          case \"row\":\n            row.columns.forEach(function (col) {\n              if (col) {\n                item[col.component.getField()] = col.value;\n              }\n            });\n            fileContents.push(item);\n            break;\n        }\n      });\n      fileContents = JSON.stringify(fileContents, null, '\\t');\n      setFileContents(fileContents, \"application/json\");\n    },\n    pdf: function pdf(list, options, setFileContents) {\n      var header = [],\n          body = [],\n          autoTableParams = {},\n          rowGroupStyles = options.rowGroupStyles || {\n        fontStyle: \"bold\",\n        fontSize: 12,\n        cellPadding: 6,\n        fillColor: 220\n      },\n          rowCalcStyles = options.rowCalcStyles || {\n        fontStyle: \"bold\",\n        fontSize: 10,\n        cellPadding: 4,\n        fillColor: 232\n      },\n          jsPDFParams = options.jsPDF || {},\n          title = options && options.title ? options.title : \"\";\n\n      if (!jsPDFParams.orientation) {\n        jsPDFParams.orientation = options.orientation || \"landscape\";\n      }\n\n      if (!jsPDFParams.unit) {\n        jsPDFParams.unit = \"pt\";\n      } //parse row list\n\n\n      list.forEach(function (row) {\n        var item = {};\n\n        switch (row.type) {\n          case \"header\":\n            header.push(parseRow(row));\n            break;\n\n          case \"group\":\n            body.push(parseRow(row, rowGroupStyles));\n            break;\n\n          case \"calc\":\n            body.push(parseRow(row, rowCalcStyles));\n            break;\n\n          case \"row\":\n            body.push(parseRow(row));\n            break;\n        }\n      });\n\n      function parseRow(row, styles) {\n        var rowData = [];\n        row.columns.forEach(function (col) {\n          var cell;\n\n          if (col) {\n            switch (_typeof(col.value)) {\n              case \"object\":\n                col.value = JSON.stringify(col.value);\n                break;\n\n              case \"undefined\":\n              case \"null\":\n                col.value = \"\";\n                break;\n            }\n\n            cell = {\n              content: col.value,\n              colSpan: col.width,\n              rowSpan: col.height\n            };\n\n            if (styles) {\n              cell.styles = styles;\n            }\n\n            rowData.push(cell);\n          } else {\n            rowData.push(\"\");\n          }\n        });\n        return rowData;\n      } //configure PDF\n\n\n      var doc = new jsPDF(jsPDFParams); //set document to landscape, better for most tables\n\n      if (options && options.autoTable) {\n        if (typeof options.autoTable === \"function\") {\n          autoTableParams = options.autoTable(doc) || {};\n        } else {\n          autoTableParams = options.autoTable;\n        }\n      }\n\n      if (title) {\n        autoTableParams.addPageContent = function (data) {\n          doc.text(title, 40, 30);\n        };\n      }\n\n      autoTableParams.head = header;\n      autoTableParams.body = body;\n      doc.autoTable(autoTableParams);\n\n      if (options && options.documentProcessing) {\n        options.documentProcessing(doc);\n      }\n\n      setFileContents(doc.output(\"arraybuffer\"), \"application/pdf\");\n    },\n    xlsx: function xlsx(list, options, setFileContents) {\n      var self = this,\n          sheetName = options.sheetName || \"Sheet1\",\n          workbook = XLSX.utils.book_new(),\n          output;\n      workbook.SheetNames = [];\n      workbook.Sheets = {};\n\n      function generateSheet() {\n        var rows = [],\n            merges = [],\n            worksheet = {},\n            range = {\n          s: {\n            c: 0,\n            r: 0\n          },\n          e: {\n            c: list[0] ? list[0].columns.reduce(function (a, b) {\n              return a + (b && b.width ? b.width : 1);\n            }, 0) : 0,\n            r: list.length\n          }\n        }; //parse row list\n\n        list.forEach(function (row, i) {\n          var rowData = [];\n          row.columns.forEach(function (col, j) {\n            if (col) {\n              rowData.push(!(col.value instanceof Date) && _typeof(col.value) === \"object\" ? JSON.stringify(col.value) : col.value);\n\n              if (col.width > 1 || col.height > -1) {\n                merges.push({\n                  s: {\n                    r: i,\n                    c: j\n                  },\n                  e: {\n                    r: i + col.height - 1,\n                    c: j + col.width - 1\n                  }\n                });\n              }\n            } else {\n              rowData.push(\"\");\n            }\n          });\n          rows.push(rowData);\n        }); //convert rows to worksheet\n\n        XLSX.utils.sheet_add_aoa(worksheet, rows);\n        worksheet['!ref'] = XLSX.utils.encode_range(range);\n\n        if (merges.length) {\n          worksheet[\"!merges\"] = merges;\n        }\n\n        return worksheet;\n      }\n\n      if (options.sheetOnly) {\n        setFileContents(generateSheet());\n        return;\n      }\n\n      if (options.sheets) {\n        for (var sheet in options.sheets) {\n          if (options.sheets[sheet] === true) {\n            workbook.SheetNames.push(sheet);\n            workbook.Sheets[sheet] = generateSheet();\n          } else {\n            workbook.SheetNames.push(sheet);\n            this.table.modules.comms.send(options.sheets[sheet], \"download\", \"intercept\", {\n              type: \"xlsx\",\n              options: {\n                sheetOnly: true\n              },\n              active: self.active,\n              intercept: function intercept(data) {\n                workbook.Sheets[sheet] = data;\n              }\n            });\n          }\n        }\n      } else {\n        workbook.SheetNames.push(sheetName);\n        workbook.Sheets[sheetName] = generateSheet();\n      }\n\n      if (options.documentProcessing) {\n        workbook = options.documentProcessing(workbook);\n      } //convert workbook to binary array\n\n\n      function s2ab(s) {\n        var buf = new ArrayBuffer(s.length);\n        var view = new Uint8Array(buf);\n\n        for (var i = 0; i != s.length; ++i) {\n          view[i] = s.charCodeAt(i) & 0xFF;\n        }\n\n        return buf;\n      }\n\n      output = XLSX.write(workbook, {\n        bookType: 'xlsx',\n        bookSST: true,\n        type: 'binary'\n      });\n      setFileContents(s2ab(output), \"application/octet-stream\");\n    },\n    html: function html(list, options, setFileContents) {\n      if (this.modExists(\"export\", true)) {\n        setFileContents(this.modules.export.genereateHTMLTable(list), \"text/html\");\n      }\n    }\n  };\n  Tabulator.prototype.registerModule(\"download\", Download);\n\n  var Edit = function Edit(table) {\n    this.table = table; //hold Tabulator object\n\n    this.currentCell = false; //hold currently editing cell\n\n    this.mouseClick = false; //hold mousedown state to prevent click binding being overriden by editor opening\n\n    this.recursionBlock = false; //prevent focus recursion\n\n    this.invalidEdit = false;\n    this.editedCells = [];\n  }; //initialize column editor\n\n\n  Edit.prototype.initializeColumn = function (column) {\n    var self = this,\n        config = {\n      editor: false,\n      blocked: false,\n      check: column.definition.editable,\n      params: column.definition.editorParams || {}\n    }; //set column editor\n\n    switch (_typeof(column.definition.editor)) {\n      case \"string\":\n        if (column.definition.editor === \"tick\") {\n          column.definition.editor = \"tickCross\";\n          console.warn(\"DEPRECATION WARNING - the tick editor has been deprecated, please use the tickCross editor\");\n        }\n\n        if (self.editors[column.definition.editor]) {\n          config.editor = self.editors[column.definition.editor];\n        } else {\n          console.warn(\"Editor Error - No such editor found: \", column.definition.editor);\n        }\n\n        break;\n\n      case \"function\":\n        config.editor = column.definition.editor;\n        break;\n\n      case \"boolean\":\n        if (column.definition.editor === true) {\n          if (typeof column.definition.formatter !== \"function\") {\n            if (column.definition.formatter === \"tick\") {\n              column.definition.formatter = \"tickCross\";\n              console.warn(\"DEPRECATION WARNING - the tick editor has been deprecated, please use the tickCross editor\");\n            }\n\n            if (self.editors[column.definition.formatter]) {\n              config.editor = self.editors[column.definition.formatter];\n            } else {\n              config.editor = self.editors[\"input\"];\n            }\n          } else {\n            console.warn(\"Editor Error - Cannot auto lookup editor for a custom formatter: \", column.definition.formatter);\n          }\n        }\n\n        break;\n    }\n\n    if (config.editor) {\n      column.modules.edit = config;\n    }\n  };\n\n  Edit.prototype.getCurrentCell = function () {\n    return this.currentCell ? this.currentCell.getComponent() : false;\n  };\n\n  Edit.prototype.clearEditor = function (cancel) {\n    var cell = this.currentCell,\n        cellEl;\n    this.invalidEdit = false;\n\n    if (cell) {\n      this.currentCell = false;\n      cellEl = cell.getElement();\n\n      if (cancel) {\n        cell.validate();\n      } else {\n        cellEl.classList.remove(\"tabulator-validation-fail\");\n      }\n\n      cellEl.classList.remove(\"tabulator-editing\");\n\n      while (cellEl.firstChild) {\n        cellEl.removeChild(cellEl.firstChild);\n      }\n\n      cell.row.getElement().classList.remove(\"tabulator-row-editing\");\n    }\n  };\n\n  Edit.prototype.cancelEdit = function () {\n    if (this.currentCell) {\n      var cell = this.currentCell;\n      var component = this.currentCell.getComponent();\n      this.clearEditor(true);\n      cell.setValueActual(cell.getValue());\n      cell.cellRendered();\n\n      if (cell.column.cellEvents.cellEditCancelled) {\n        cell.column.cellEvents.cellEditCancelled.call(this.table, component);\n      }\n\n      this.table.options.cellEditCancelled.call(this.table, component);\n    }\n  }; //return a formatted value for a cell\n\n\n  Edit.prototype.bindEditor = function (cell) {\n    var self = this,\n        element = cell.getElement();\n    element.setAttribute(\"tabindex\", 0);\n    element.addEventListener(\"click\", function (e) {\n      if (!element.classList.contains(\"tabulator-editing\")) {\n        element.focus({\n          preventScroll: true\n        });\n      }\n    });\n    element.addEventListener(\"mousedown\", function (e) {\n      self.mouseClick = true;\n    });\n    element.addEventListener(\"focus\", function (e) {\n      if (!self.recursionBlock) {\n        self.edit(cell, e, false);\n      }\n    });\n  };\n\n  Edit.prototype.focusCellNoEvent = function (cell, block) {\n    this.recursionBlock = true;\n\n    if (!(block && this.table.browser === \"ie\")) {\n      cell.getElement().focus({\n        preventScroll: true\n      });\n    }\n\n    this.recursionBlock = false;\n  };\n\n  Edit.prototype.editCell = function (cell, forceEdit) {\n    this.focusCellNoEvent(cell);\n    this.edit(cell, false, forceEdit);\n  };\n\n  Edit.prototype.focusScrollAdjust = function (cell) {\n    if (this.table.rowManager.getRenderMode() == \"virtual\") {\n      var topEdge = this.table.rowManager.element.scrollTop,\n          bottomEdge = this.table.rowManager.element.clientHeight + this.table.rowManager.element.scrollTop,\n          rowEl = cell.row.getElement(),\n          offset = rowEl.offsetTop;\n\n      if (rowEl.offsetTop < topEdge) {\n        this.table.rowManager.element.scrollTop -= topEdge - rowEl.offsetTop;\n      } else {\n        if (rowEl.offsetTop + rowEl.offsetHeight > bottomEdge) {\n          this.table.rowManager.element.scrollTop += rowEl.offsetTop + rowEl.offsetHeight - bottomEdge;\n        }\n      }\n\n      var leftEdge = this.table.rowManager.element.scrollLeft,\n          rightEdge = this.table.rowManager.element.clientWidth + this.table.rowManager.element.scrollLeft,\n          cellEl = cell.getElement(),\n          offset = cellEl.offsetLeft;\n\n      if (this.table.modExists(\"frozenColumns\")) {\n        leftEdge += parseInt(this.table.modules.frozenColumns.leftMargin);\n        rightEdge -= parseInt(this.table.modules.frozenColumns.rightMargin);\n      }\n\n      if (cellEl.offsetLeft < leftEdge) {\n        this.table.rowManager.element.scrollLeft -= leftEdge - cellEl.offsetLeft;\n      } else {\n        if (cellEl.offsetLeft + cellEl.offsetWidth > rightEdge) {\n          this.table.rowManager.element.scrollLeft += cellEl.offsetLeft + cellEl.offsetWidth - rightEdge;\n        }\n      }\n    }\n  };\n\n  Edit.prototype.edit = function (cell, e, forceEdit) {\n    var self = this,\n        allowEdit = true,\n        rendered = function rendered() {},\n        element = cell.getElement(),\n        cellEditor,\n        component,\n        params; //prevent editing if another cell is refusing to leave focus (eg. validation fail)\n\n\n    if (this.currentCell) {\n      if (!this.invalidEdit) {\n        this.cancelEdit();\n      }\n\n      return;\n    } //handle successfull value change\n\n\n    function success(value) {\n      if (self.currentCell === cell) {\n        var valid = true;\n\n        if (cell.column.modules.validate && self.table.modExists(\"validate\") && self.table.options.validationMode != \"manual\") {\n          valid = self.table.modules.validate.validate(cell.column.modules.validate, cell, value);\n        }\n\n        if (valid === true || self.table.options.validationMode === \"highlight\") {\n          self.clearEditor();\n          cell.setValue(value, true);\n\n          if (!cell.modules.edit) {\n            cell.modules.edit = {};\n          }\n\n          cell.modules.edit.edited = true;\n\n          if (self.editedCells.indexOf(cell) == -1) {\n            self.editedCells.push(cell);\n          }\n\n          if (self.table.options.dataTree && self.table.modExists(\"dataTree\")) {\n            self.table.modules.dataTree.checkForRestyle(cell);\n          }\n\n          if (valid !== true) {\n            element.classList.add(\"tabulator-validation-fail\");\n            self.table.options.validationFailed.call(self.table, cell.getComponent(), value, valid);\n            return false;\n          }\n\n          return true;\n        } else {\n          self.invalidEdit = true;\n          element.classList.add(\"tabulator-validation-fail\");\n          self.focusCellNoEvent(cell, true);\n          rendered();\n          self.table.options.validationFailed.call(self.table, cell.getComponent(), value, valid);\n          return false;\n        }\n      } else {// console.warn(\"Edit Success Error - cannot call success on a cell that is no longer being edited\");\n      }\n    } //handle aborted edit\n\n\n    function cancel() {\n      if (self.currentCell === cell) {\n        self.cancelEdit();\n\n        if (self.table.options.dataTree && self.table.modExists(\"dataTree\")) {\n          self.table.modules.dataTree.checkForRestyle(cell);\n        }\n      } else {// console.warn(\"Edit Success Error - cannot call cancel on a cell that is no longer being edited\");\n      }\n    }\n\n    function onRendered(callback) {\n      rendered = callback;\n    }\n\n    if (!cell.column.modules.edit.blocked) {\n      if (e) {\n        e.stopPropagation();\n      }\n\n      switch (_typeof(cell.column.modules.edit.check)) {\n        case \"function\":\n          allowEdit = cell.column.modules.edit.check(cell.getComponent());\n          break;\n\n        case \"boolean\":\n          allowEdit = cell.column.modules.edit.check;\n          break;\n      }\n\n      if (allowEdit || forceEdit) {\n        self.cancelEdit();\n        self.currentCell = cell;\n        this.focusScrollAdjust(cell);\n        component = cell.getComponent();\n\n        if (this.mouseClick) {\n          this.mouseClick = false;\n\n          if (cell.column.cellEvents.cellClick) {\n            cell.column.cellEvents.cellClick.call(this.table, e, component);\n          }\n        }\n\n        if (cell.column.cellEvents.cellEditing) {\n          cell.column.cellEvents.cellEditing.call(this.table, component);\n        }\n\n        self.table.options.cellEditing.call(this.table, component);\n        params = typeof cell.column.modules.edit.params === \"function\" ? cell.column.modules.edit.params(component) : cell.column.modules.edit.params;\n        cellEditor = cell.column.modules.edit.editor.call(self, component, onRendered, success, cancel, params); //if editor returned, add to DOM, if false, abort edit\n\n        if (cellEditor !== false) {\n          if (cellEditor instanceof Node) {\n            element.classList.add(\"tabulator-editing\");\n            cell.row.getElement().classList.add(\"tabulator-row-editing\");\n\n            while (element.firstChild) {\n              element.removeChild(element.firstChild);\n            }\n\n            element.appendChild(cellEditor); //trigger onRendered Callback\n\n            rendered(); //prevent editing from triggering rowClick event\n\n            var children = element.children;\n\n            for (var i = 0; i < children.length; i++) {\n              children[i].addEventListener(\"click\", function (e) {\n                e.stopPropagation();\n              });\n            }\n          } else {\n            console.warn(\"Edit Error - Editor should return an instance of Node, the editor returned:\", cellEditor);\n            element.blur();\n            return false;\n          }\n        } else {\n          element.blur();\n          return false;\n        }\n\n        return true;\n      } else {\n        this.mouseClick = false;\n        element.blur();\n        return false;\n      }\n    } else {\n      this.mouseClick = false;\n      element.blur();\n      return false;\n    }\n  };\n\n  Edit.prototype.maskInput = function (el, options) {\n    var mask = options.mask,\n        maskLetter = typeof options.maskLetterChar !== \"undefined\" ? options.maskLetterChar : \"A\",\n        maskNumber = typeof options.maskNumberChar !== \"undefined\" ? options.maskNumberChar : \"9\",\n        maskWildcard = typeof options.maskWildcardChar !== \"undefined\" ? options.maskWildcardChar : \"*\",\n        success = false;\n\n    function fillSymbols(index) {\n      var symbol = mask[index];\n\n      if (typeof symbol !== \"undefined\" && symbol !== maskWildcard && symbol !== maskLetter && symbol !== maskNumber) {\n        el.value = el.value + \"\" + symbol;\n        fillSymbols(index + 1);\n      }\n    }\n\n    el.addEventListener(\"keydown\", function (e) {\n      var index = el.value.length,\n          char = e.key;\n\n      if (e.keyCode > 46) {\n        if (index >= mask.length) {\n          e.preventDefault();\n          e.stopPropagation();\n          success = false;\n          return false;\n        } else {\n          switch (mask[index]) {\n            case maskLetter:\n              if (char.toUpperCase() == char.toLowerCase()) {\n                e.preventDefault();\n                e.stopPropagation();\n                success = false;\n                return false;\n              }\n\n              break;\n\n            case maskNumber:\n              if (isNaN(char)) {\n                e.preventDefault();\n                e.stopPropagation();\n                success = false;\n                return false;\n              }\n\n              break;\n\n            case maskWildcard:\n              break;\n\n            default:\n              if (char !== mask[index]) {\n                e.preventDefault();\n                e.stopPropagation();\n                success = false;\n                return false;\n              }\n\n          }\n        }\n\n        success = true;\n      }\n\n      return;\n    });\n    el.addEventListener(\"keyup\", function (e) {\n      if (e.keyCode > 46) {\n        if (options.maskAutoFill) {\n          fillSymbols(el.value.length);\n        }\n      }\n    });\n\n    if (!el.placeholder) {\n      el.placeholder = mask;\n    }\n\n    if (options.maskAutoFill) {\n      fillSymbols(el.value.length);\n    }\n  };\n\n  Edit.prototype.getEditedCells = function () {\n    var output = [];\n    this.editedCells.forEach(function (cell) {\n      output.push(cell.getComponent());\n    });\n    return output;\n  };\n\n  Edit.prototype.clearEdited = function (cell) {\n    var editIndex;\n\n    if (cell.modules.validate && cell.modules.edit && cell.modules.edit.edited) {\n      cell.modules.validate.invalid = false;\n      editIndex = this.editedCells.indexOf(cell);\n\n      if (editIndex > -1) {\n        this.editedCells.splice(editIndex, 1);\n      }\n    }\n  }; //default data editors\n\n\n  Edit.prototype.editors = {\n    //input element\n    input: function input(cell, onRendered, success, cancel, editorParams) {\n      //create and style input\n      var cellValue = cell.getValue(),\n          input = document.createElement(\"input\");\n      input.setAttribute(\"type\", editorParams.search ? \"search\" : \"text\");\n      input.style.padding = \"4px\";\n      input.style.width = \"100%\";\n      input.style.boxSizing = \"border-box\";\n\n      if (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n        for (var key in editorParams.elementAttributes) {\n          if (key.charAt(0) == \"+\") {\n            key = key.slice(1);\n            input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n          } else {\n            input.setAttribute(key, editorParams.elementAttributes[key]);\n          }\n        }\n      }\n\n      input.value = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n      onRendered(function () {\n        input.focus({\n          preventScroll: true\n        });\n        input.style.height = \"100%\";\n      });\n\n      function onChange(e) {\n        if ((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\" || input.value !== cellValue) {\n          if (success(input.value)) {\n            cellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n          }\n        } else {\n          cancel();\n        }\n      } //submit new value on blur or change\n\n\n      input.addEventListener(\"change\", onChange);\n      input.addEventListener(\"blur\", onChange); //submit new value on enter\n\n      input.addEventListener(\"keydown\", function (e) {\n        switch (e.keyCode) {\n          // case 9:\n          case 13:\n            onChange(e);\n            break;\n\n          case 27:\n            cancel();\n            break;\n        }\n      });\n\n      if (editorParams.mask) {\n        this.table.modules.edit.maskInput(input, editorParams);\n      }\n\n      return input;\n    },\n    //resizable text area element\n    textarea: function textarea(cell, onRendered, success, cancel, editorParams) {\n      var self = this,\n          cellValue = cell.getValue(),\n          vertNav = editorParams.verticalNavigation || \"hybrid\",\n          value = String(cellValue !== null && typeof cellValue !== \"undefined\" ? cellValue : \"\"),\n          count = (value.match(/(?:\\r\\n|\\r|\\n)/g) || []).length + 1,\n          input = document.createElement(\"textarea\"),\n          scrollHeight = 0; //create and style input\n\n      input.style.display = \"block\";\n      input.style.padding = \"2px\";\n      input.style.height = \"100%\";\n      input.style.width = \"100%\";\n      input.style.boxSizing = \"border-box\";\n      input.style.whiteSpace = \"pre-wrap\";\n      input.style.resize = \"none\";\n\n      if (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n        for (var key in editorParams.elementAttributes) {\n          if (key.charAt(0) == \"+\") {\n            key = key.slice(1);\n            input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n          } else {\n            input.setAttribute(key, editorParams.elementAttributes[key]);\n          }\n        }\n      }\n\n      input.value = value;\n      onRendered(function () {\n        input.focus({\n          preventScroll: true\n        });\n        input.style.height = \"100%\";\n      });\n\n      function onChange(e) {\n        if ((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\" || input.value !== cellValue) {\n          if (success(input.value)) {\n            cellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n          }\n\n          setTimeout(function () {\n            cell.getRow().normalizeHeight();\n          }, 300);\n        } else {\n          cancel();\n        }\n      } //submit new value on blur or change\n\n\n      input.addEventListener(\"change\", onChange);\n      input.addEventListener(\"blur\", onChange);\n      input.addEventListener(\"keyup\", function () {\n        input.style.height = \"\";\n        var heightNow = input.scrollHeight;\n        input.style.height = heightNow + \"px\";\n\n        if (heightNow != scrollHeight) {\n          scrollHeight = heightNow;\n          cell.getRow().normalizeHeight();\n        }\n      });\n      input.addEventListener(\"keydown\", function (e) {\n        switch (e.keyCode) {\n          case 27:\n            cancel();\n            break;\n\n          case 38:\n            //up arrow\n            if (vertNav == \"editor\" || vertNav == \"hybrid\" && input.selectionStart) {\n              e.stopImmediatePropagation();\n              e.stopPropagation();\n            }\n\n            break;\n\n          case 40:\n            //down arrow\n            if (vertNav == \"editor\" || vertNav == \"hybrid\" && input.selectionStart !== input.value.length) {\n              e.stopImmediatePropagation();\n              e.stopPropagation();\n            }\n\n            break;\n        }\n      });\n\n      if (editorParams.mask) {\n        this.table.modules.edit.maskInput(input, editorParams);\n      }\n\n      return input;\n    },\n    //input element with type of number\n    number: function number(cell, onRendered, success, cancel, editorParams) {\n      var cellValue = cell.getValue(),\n          vertNav = editorParams.verticalNavigation || \"editor\",\n          input = document.createElement(\"input\");\n      input.setAttribute(\"type\", \"number\");\n\n      if (typeof editorParams.max != \"undefined\") {\n        input.setAttribute(\"max\", editorParams.max);\n      }\n\n      if (typeof editorParams.min != \"undefined\") {\n        input.setAttribute(\"min\", editorParams.min);\n      }\n\n      if (typeof editorParams.step != \"undefined\") {\n        input.setAttribute(\"step\", editorParams.step);\n      } //create and style input\n\n\n      input.style.padding = \"4px\";\n      input.style.width = \"100%\";\n      input.style.boxSizing = \"border-box\";\n\n      if (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n        for (var key in editorParams.elementAttributes) {\n          if (key.charAt(0) == \"+\") {\n            key = key.slice(1);\n            input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n          } else {\n            input.setAttribute(key, editorParams.elementAttributes[key]);\n          }\n        }\n      }\n\n      input.value = cellValue;\n\n      var blurFunc = function blurFunc(e) {\n        onChange();\n      };\n\n      onRendered(function () {\n        //submit new value on blur\n        input.removeEventListener(\"blur\", blurFunc);\n        input.focus({\n          preventScroll: true\n        });\n        input.style.height = \"100%\"; //submit new value on blur\n\n        input.addEventListener(\"blur\", blurFunc);\n      });\n\n      function onChange() {\n        var value = input.value;\n\n        if (!isNaN(value) && value !== \"\") {\n          value = Number(value);\n        }\n\n        if (value !== cellValue) {\n          if (success(value)) {\n            cellValue = value; //persist value if successfully validated incase editor is used as header filter\n          }\n        } else {\n          cancel();\n        }\n      } //submit new value on enter\n\n\n      input.addEventListener(\"keydown\", function (e) {\n        switch (e.keyCode) {\n          case 13:\n            // case 9:\n            onChange();\n            break;\n\n          case 27:\n            cancel();\n            break;\n\n          case 38: //up arrow\n\n          case 40:\n            //down arrow\n            if (vertNav == \"editor\") {\n              e.stopImmediatePropagation();\n              e.stopPropagation();\n            }\n\n            break;\n        }\n      });\n\n      if (editorParams.mask) {\n        this.table.modules.edit.maskInput(input, editorParams);\n      }\n\n      return input;\n    },\n    //input element with type of number\n    range: function range(cell, onRendered, success, cancel, editorParams) {\n      var cellValue = cell.getValue(),\n          input = document.createElement(\"input\");\n      input.setAttribute(\"type\", \"range\");\n\n      if (typeof editorParams.max != \"undefined\") {\n        input.setAttribute(\"max\", editorParams.max);\n      }\n\n      if (typeof editorParams.min != \"undefined\") {\n        input.setAttribute(\"min\", editorParams.min);\n      }\n\n      if (typeof editorParams.step != \"undefined\") {\n        input.setAttribute(\"step\", editorParams.step);\n      } //create and style input\n\n\n      input.style.padding = \"4px\";\n      input.style.width = \"100%\";\n      input.style.boxSizing = \"border-box\";\n\n      if (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n        for (var key in editorParams.elementAttributes) {\n          if (key.charAt(0) == \"+\") {\n            key = key.slice(1);\n            input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n          } else {\n            input.setAttribute(key, editorParams.elementAttributes[key]);\n          }\n        }\n      }\n\n      input.value = cellValue;\n      onRendered(function () {\n        input.focus({\n          preventScroll: true\n        });\n        input.style.height = \"100%\";\n      });\n\n      function onChange() {\n        var value = input.value;\n\n        if (!isNaN(value) && value !== \"\") {\n          value = Number(value);\n        }\n\n        if (value != cellValue) {\n          if (success(value)) {\n            cellValue = value; //persist value if successfully validated incase editor is used as header filter\n          }\n        } else {\n          cancel();\n        }\n      } //submit new value on blur\n\n\n      input.addEventListener(\"blur\", function (e) {\n        onChange();\n      }); //submit new value on enter\n\n      input.addEventListener(\"keydown\", function (e) {\n        switch (e.keyCode) {\n          case 13:\n            // case 9:\n            onChange();\n            break;\n\n          case 27:\n            cancel();\n            break;\n        }\n      });\n      return input;\n    },\n    //select\n    select: function select(cell, onRendered, success, cancel, editorParams) {\n      var _this45 = this;\n\n      var self = this,\n          cellEl = cell.getElement(),\n          initialValue = cell.getValue(),\n          vertNav = editorParams.verticalNavigation || \"editor\",\n          initialDisplayValue = typeof initialValue !== \"undefined\" || initialValue === null ? Array.isArray(initialValue) ? initialValue : [initialValue] : typeof editorParams.defaultValue !== \"undefined\" ? editorParams.defaultValue : [],\n          input = document.createElement(\"input\"),\n          listEl = document.createElement(\"div\"),\n          multiselect = editorParams.multiselect,\n          dataItems = [],\n          currentItem = {},\n          displayItems = [],\n          currentItems = [],\n          blurable = true,\n          blockListShow = false;\n\n      if (Array.isArray(editorParams) || !Array.isArray(editorParams) && (typeof editorParams === 'undefined' ? 'undefined' : _typeof(editorParams)) === \"object\" && !editorParams.values) {\n        console.warn(\"DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object\");\n        editorParams = {\n          values: editorParams\n        };\n      }\n\n      function getUniqueColumnValues(field) {\n        var output = {},\n            data = self.table.getData(),\n            column;\n\n        if (field) {\n          column = self.table.columnManager.getColumnByField(field);\n        } else {\n          column = cell.getColumn()._getSelf();\n        }\n\n        if (column) {\n          data.forEach(function (row) {\n            var val = column.getFieldValue(row);\n\n            if (val !== null && typeof val !== \"undefined\" && val !== \"\") {\n              output[val] = true;\n            }\n          });\n\n          if (editorParams.sortValuesList) {\n            if (editorParams.sortValuesList == \"asc\") {\n              output = Object.keys(output).sort();\n            } else {\n              output = Object.keys(output).sort().reverse();\n            }\n          } else {\n            output = Object.keys(output);\n          }\n        } else {\n          console.warn(\"unable to find matching column to create select lookup list:\", field);\n        }\n\n        return output;\n      }\n\n      function parseItems(inputValues, curentValues) {\n        var dataList = [];\n        var displayList = [];\n\n        function processComplexListItem(item) {\n          var item = {\n            label: item.label,\n            value: item.value,\n            itemParams: item.itemParams,\n            elementAttributes: item.elementAttributes,\n            element: false\n          }; // if(item.value === curentValue || (!isNaN(parseFloat(item.value)) && !isNaN(parseFloat(item.value)) && parseFloat(item.value) === parseFloat(curentValue))){\n          // \tsetCurrentItem(item);\n          // }\n\n          if (curentValues.indexOf(item.value) > -1) {\n            setItem(item);\n          }\n\n          dataList.push(item);\n          displayList.push(item);\n          return item;\n        }\n\n        if (typeof inputValues == \"function\") {\n          inputValues = inputValues(cell);\n        }\n\n        if (Array.isArray(inputValues)) {\n          inputValues.forEach(function (value) {\n            var item;\n\n            if ((typeof value === 'undefined' ? 'undefined' : _typeof(value)) === \"object\") {\n              if (value.options) {\n                item = {\n                  label: value.label,\n                  group: true,\n                  itemParams: value.itemParams,\n                  elementAttributes: value.elementAttributes,\n                  element: false\n                };\n                displayList.push(item);\n                value.options.forEach(function (item) {\n                  processComplexListItem(item);\n                });\n              } else {\n                processComplexListItem(value);\n              }\n            } else {\n              item = {\n                label: value,\n                value: value,\n                element: false\n              }; // if(item.value === curentValue || (!isNaN(parseFloat(item.value)) && !isNaN(parseFloat(item.value)) && parseFloat(item.value) === parseFloat(curentValue))){\n              // \tsetCurrentItem(item);\n              // }\n\n              if (curentValues.indexOf(item.value) > -1) {\n                setItem(item);\n              }\n\n              dataList.push(item);\n              displayList.push(item);\n            }\n          });\n        } else {\n          for (var key in inputValues) {\n            var item = {\n              label: inputValues[key],\n              value: key,\n              element: false\n            }; // if(item.value === curentValue || (!isNaN(parseFloat(item.value)) && !isNaN(parseFloat(item.value)) && parseFloat(item.value) === parseFloat(curentValue))){\n            // \tsetCurrentItem(item);\n            // }\n\n            if (curentValues.indexOf(item.value) > -1) {\n              setItem(item);\n            }\n\n            dataList.push(item);\n            displayList.push(item);\n          }\n        }\n\n        dataItems = dataList;\n        displayItems = displayList;\n        fillList();\n      }\n\n      function fillList() {\n        while (listEl.firstChild) {\n          listEl.removeChild(listEl.firstChild);\n        }\n\n        displayItems.forEach(function (item) {\n          var el = item.element;\n\n          if (!el) {\n            el = document.createElement(\"div\");\n            item.label = editorParams.listItemFormatter ? editorParams.listItemFormatter(item.value, item.label, cell, el, item.itemParams) : item.label;\n\n            if (item.group) {\n              el.classList.add(\"tabulator-edit-select-list-group\");\n              el.tabIndex = 0;\n              el.innerHTML = item.label === \"\" ? \"&nbsp;\" : item.label;\n            } else {\n              el.classList.add(\"tabulator-edit-select-list-item\");\n              el.tabIndex = 0;\n              el.innerHTML = item.label === \"\" ? \"&nbsp;\" : item.label;\n              el.addEventListener(\"click\", function () {\n                blockListShow = true;\n                setTimeout(function () {\n                  blockListShow = false;\n                }, 10); // setCurrentItem(item);\n                // chooseItem();\n\n                if (multiselect) {\n                  toggleItem(item);\n                  input.focus();\n                } else {\n                  chooseItem(item);\n                }\n              }); // if(item === currentItem){\n              // \tel.classList.add(\"active\");\n              // }\n\n              if (currentItems.indexOf(item) > -1) {\n                el.classList.add(\"active\");\n              }\n            }\n\n            if (item.elementAttributes && _typeof(item.elementAttributes) == \"object\") {\n              for (var key in item.elementAttributes) {\n                if (key.charAt(0) == \"+\") {\n                  key = key.slice(1);\n                  el.setAttribute(key, input.getAttribute(key) + item.elementAttributes[\"+\" + key]);\n                } else {\n                  el.setAttribute(key, item.elementAttributes[key]);\n                }\n              }\n            }\n\n            el.addEventListener(\"mousedown\", function () {\n              blurable = false;\n              setTimeout(function () {\n                blurable = true;\n              }, 10);\n            });\n            item.element = el;\n          }\n\n          listEl.appendChild(el);\n        });\n      }\n\n      function setCurrentItem(item, active) {\n        if (!multiselect && currentItem && currentItem.element) {\n          currentItem.element.classList.remove(\"active\");\n        }\n\n        if (currentItem && currentItem.element) {\n          currentItem.element.classList.remove(\"focused\");\n        }\n\n        currentItem = item;\n\n        if (item.element) {\n          item.element.classList.add(\"focused\");\n\n          if (active) {\n            item.element.classList.add(\"active\");\n          }\n        }\n      } // function chooseItem(){\n      // \thideList();\n      // \tif(initialValue !== currentItem.value){\n      // \t\tinitialValue = currentItem.value;\n      // \t\tsuccess(currentItem.value);\n      // \t}else{\n      // \t\tcancel();\n      // \t}\n      // }\n\n\n      function setItem(item) {\n        var index = currentItems.indexOf(item);\n\n        if (index == -1) {\n          currentItems.push(item);\n          setCurrentItem(item, true);\n        }\n\n        fillInput();\n      }\n\n      function unsetItem(index) {\n        var item = currentItems[index];\n\n        if (index > -1) {\n          currentItems.splice(index, 1);\n\n          if (item.element) {\n            item.element.classList.remove(\"active\");\n          }\n        }\n      }\n\n      function toggleItem(item) {\n        if (!item) {\n          item = currentItem;\n        }\n\n        var index = currentItems.indexOf(item);\n\n        if (index > -1) {\n          unsetItem(index);\n        } else {\n          if (multiselect !== true && currentItems.length >= multiselect) {\n            unsetItem(0);\n          }\n\n          setItem(item);\n        }\n\n        fillInput();\n      }\n\n      function chooseItem(item) {\n        hideList();\n\n        if (!item) {\n          item = currentItem;\n        }\n\n        if (item) {\n          input.value = item.label;\n          success(item.value);\n        }\n\n        initialDisplayValue = input.value;\n      }\n\n      function chooseItems(silent) {\n        if (!silent) {\n          hideList();\n        }\n\n        var output = [];\n        currentItems.forEach(function (item) {\n          output.push(item.value);\n        });\n        initialDisplayValue = input.value;\n        success(output);\n      }\n\n      function fillInput() {\n        var output = [];\n        currentItems.forEach(function (item) {\n          output.push(item.label);\n        });\n        input.value = output.join(\", \");\n\n        if (self.currentCell === false) {\n          chooseItems(true);\n        }\n      }\n\n      function unsetItems() {\n        var len = currentItems.length;\n\n        for (var _i6 = 0; _i6 < len; _i6++) {\n          unsetItem(0);\n        }\n      }\n\n      function cancelItem() {\n        hideList();\n        cancel();\n      }\n\n      function showList() {\n        currentItems = [];\n\n        if (!listEl.parentNode) {\n          if (editorParams.values === true) {\n            parseItems(getUniqueColumnValues(), initialDisplayValue);\n          } else if (typeof editorParams.values === \"string\") {\n            parseItems(getUniqueColumnValues(editorParams.values), initialDisplayValue);\n          } else {\n            parseItems(editorParams.values || [], initialDisplayValue);\n          }\n\n          var offset = Tabulator.prototype.helpers.elOffset(cellEl);\n          listEl.style.minWidth = cellEl.offsetWidth + \"px\";\n          listEl.style.top = offset.top + cellEl.offsetHeight + \"px\";\n          listEl.style.left = offset.left + \"px\";\n          listEl.addEventListener(\"mousedown\", function (e) {\n            blurable = false;\n            setTimeout(function () {\n              blurable = true;\n            }, 10);\n          });\n          document.body.appendChild(listEl);\n        }\n      }\n\n      function hideList() {\n        if (listEl.parentNode) {\n          listEl.parentNode.removeChild(listEl);\n        }\n\n        removeScrollListener();\n      }\n\n      function removeScrollListener() {\n        self.table.rowManager.element.removeEventListener(\"scroll\", cancelItem);\n      } //style input\n\n\n      input.setAttribute(\"type\", \"text\");\n      input.style.padding = \"4px\";\n      input.style.width = \"100%\";\n      input.style.boxSizing = \"border-box\";\n      input.style.cursor = \"default\";\n      input.readOnly = this.currentCell != false;\n\n      if (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n        for (var key in editorParams.elementAttributes) {\n          if (key.charAt(0) == \"+\") {\n            key = key.slice(1);\n            input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n          } else {\n            input.setAttribute(key, editorParams.elementAttributes[key]);\n          }\n        }\n      }\n\n      input.value = typeof initialValue !== \"undefined\" || initialValue === null ? initialValue : \"\"; // if(editorParams.values === true){\n      // \tparseItems(getUniqueColumnValues(), initialValue);\n      // }else if(typeof editorParams.values === \"string\"){\n      // \tparseItems(getUniqueColumnValues(editorParams.values), initialValue);\n      // }else{\n      // \tparseItems(editorParams.values || [], initialValue);\n      // }\n\n      input.addEventListener(\"search\", function (e) {\n        if (!input.value) {\n          unsetItems();\n          chooseItems();\n        }\n      }); //allow key based navigation\n\n      input.addEventListener(\"keydown\", function (e) {\n        var index;\n\n        switch (e.keyCode) {\n          case 38:\n            //up arrow\n            index = dataItems.indexOf(currentItem);\n\n            if (vertNav == \"editor\" || vertNav == \"hybrid\" && index) {\n              e.stopImmediatePropagation();\n              e.stopPropagation();\n              e.preventDefault();\n\n              if (index > 0) {\n                setCurrentItem(dataItems[index - 1], !multiselect);\n              }\n            }\n\n            break;\n\n          case 40:\n            //down arrow\n            index = dataItems.indexOf(currentItem);\n\n            if (vertNav == \"editor\" || vertNav == \"hybrid\" && index < dataItems.length - 1) {\n              e.stopImmediatePropagation();\n              e.stopPropagation();\n              e.preventDefault();\n\n              if (index < dataItems.length - 1) {\n                if (index == -1) {\n                  setCurrentItem(dataItems[0], !multiselect);\n                } else {\n                  setCurrentItem(dataItems[index + 1], !multiselect);\n                }\n              }\n            }\n\n            break;\n\n          case 37: //left arrow\n\n          case 39:\n            //right arrow\n            e.stopImmediatePropagation();\n            e.stopPropagation();\n            e.preventDefault();\n            break;\n\n          case 13:\n            //enter\n            // chooseItem();\n            if (multiselect) {\n              toggleItem();\n            } else {\n              chooseItem();\n            }\n\n            break;\n\n          case 27:\n            //escape\n            cancelItem();\n            break;\n\n          case 9:\n            //tab\n            break;\n\n          default:\n            if (self.currentCell === false) {\n              e.preventDefault();\n            }\n\n        }\n      });\n      input.addEventListener(\"blur\", function (e) {\n        if (blurable) {\n          if (multiselect) {\n            chooseItems();\n          } else {\n            cancelItem();\n          }\n        }\n      });\n      input.addEventListener(\"focus\", function (e) {\n        if (!blockListShow) {\n          showList();\n        }\n      }); //style list element\n\n      listEl = document.createElement(\"div\");\n      listEl.classList.add(\"tabulator-edit-select-list\");\n      onRendered(function () {\n        input.style.height = \"100%\";\n        input.focus({\n          preventScroll: true\n        });\n      });\n      setTimeout(function () {\n        _this45.table.rowManager.element.addEventListener(\"scroll\", cancelItem);\n      }, 10);\n      return input;\n    },\n    //autocomplete\n    autocomplete: function autocomplete(cell, onRendered, success, cancel, editorParams) {\n      var _this46 = this;\n\n      var self = this,\n          cellEl = cell.getElement(),\n          initialValue = cell.getValue(),\n          vertNav = editorParams.verticalNavigation || \"editor\",\n          initialDisplayValue = typeof initialValue !== \"undefined\" || initialValue === null ? initialValue : typeof editorParams.defaultValue !== \"undefined\" ? editorParams.defaultValue : \"\",\n          input = document.createElement(\"input\"),\n          listEl = document.createElement(\"div\"),\n          allItems = [],\n          displayItems = [],\n          values = [],\n          currentItem = false,\n          blurable = true,\n          uniqueColumnValues = false; //style input\n\n      input.setAttribute(\"type\", \"search\");\n      input.style.padding = \"4px\";\n      input.style.width = \"100%\";\n      input.style.boxSizing = \"border-box\";\n\n      if (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n        for (var key in editorParams.elementAttributes) {\n          if (key.charAt(0) == \"+\") {\n            key = key.slice(1);\n            input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n          } else {\n            input.setAttribute(key, editorParams.elementAttributes[key]);\n          }\n        }\n      } //style list element\n\n\n      listEl.classList.add(\"tabulator-edit-select-list\");\n      listEl.addEventListener(\"mousedown\", function (e) {\n        blurable = false;\n        setTimeout(function () {\n          blurable = true;\n        }, 10);\n      });\n\n      function genUniqueColumnValues() {\n        if (editorParams.values === true) {\n          uniqueColumnValues = getUniqueColumnValues();\n        } else if (typeof editorParams.values === \"string\") {\n          uniqueColumnValues = getUniqueColumnValues(editorParams.values);\n        }\n      }\n\n      function getUniqueColumnValues(field) {\n        var output = {},\n            data = self.table.getData(),\n            column;\n\n        if (field) {\n          column = self.table.columnManager.getColumnByField(field);\n        } else {\n          column = cell.getColumn()._getSelf();\n        }\n\n        if (column) {\n          data.forEach(function (row) {\n            var val = column.getFieldValue(row);\n\n            if (val !== null && typeof val !== \"undefined\" && val !== \"\") {\n              output[val] = true;\n            }\n          });\n\n          if (editorParams.sortValuesList) {\n            if (editorParams.sortValuesList == \"asc\") {\n              output = Object.keys(output).sort();\n            } else {\n              output = Object.keys(output).sort().reverse();\n            }\n          } else {\n            output = Object.keys(output);\n          }\n        } else {\n          console.warn(\"unable to find matching column to create autocomplete lookup list:\", field);\n        }\n\n        return output;\n      }\n\n      function filterList(term, intialLoad) {\n        var matches = [],\n            values,\n            items,\n            searchEl; //lookup base values list\n\n        if (uniqueColumnValues) {\n          values = uniqueColumnValues;\n        } else {\n          values = editorParams.values || [];\n        }\n\n        if (editorParams.searchFunc) {\n          matches = editorParams.searchFunc(term, values);\n\n          if (matches instanceof Promise) {\n            addNotice(typeof editorParams.searchingPlaceholder !== \"undefined\" ? editorParams.searchingPlaceholder : \"Searching...\");\n            matches.then(function (result) {\n              fillListIfNotEmpty(parseItems(result), intialLoad);\n            }).catch(function (err) {\n              console.err(\"error in autocomplete search promise:\", err);\n            });\n          } else {\n            fillListIfNotEmpty(parseItems(matches), intialLoad);\n          }\n        } else {\n          items = parseItems(values);\n\n          if (term === \"\") {\n            if (editorParams.showListOnEmpty) {\n              matches = items;\n            }\n          } else {\n            items.forEach(function (item) {\n              if (item.value !== null || typeof item.value !== \"undefined\") {\n                if (String(item.value).toLowerCase().indexOf(String(term).toLowerCase()) > -1 || String(item.title).toLowerCase().indexOf(String(term).toLowerCase()) > -1) {\n                  matches.push(item);\n                }\n              }\n            });\n          }\n\n          fillListIfNotEmpty(matches, intialLoad);\n        }\n      }\n\n      function addNotice(notice) {\n        var searchEl = document.createElement(\"div\");\n        clearList();\n\n        if (notice !== false) {\n          searchEl.classList.add(\"tabulator-edit-select-list-notice\");\n          searchEl.tabIndex = 0;\n\n          if (notice instanceof Node) {\n            searchEl.appendChild(notice);\n          } else {\n            searchEl.innerHTML = notice;\n          }\n\n          listEl.appendChild(searchEl);\n        }\n      }\n\n      function parseItems(inputValues) {\n        var itemList = [];\n\n        if (Array.isArray(inputValues)) {\n          inputValues.forEach(function (value) {\n            var item = {};\n\n            if ((typeof value === 'undefined' ? 'undefined' : _typeof(value)) === \"object\") {\n              item.title = editorParams.listItemFormatter ? editorParams.listItemFormatter(value.value, value.label) : value.label;\n              item.value = value.value;\n            } else {\n              item.title = editorParams.listItemFormatter ? editorParams.listItemFormatter(value, value) : value;\n              item.value = value;\n            }\n\n            itemList.push(item);\n          });\n        } else {\n          for (var key in inputValues) {\n            var item = {\n              title: editorParams.listItemFormatter ? editorParams.listItemFormatter(key, inputValues[key]) : inputValues[key],\n              value: key\n            };\n            itemList.push(item);\n          }\n        }\n\n        return itemList;\n      }\n\n      function clearList() {\n        while (listEl.firstChild) {\n          listEl.removeChild(listEl.firstChild);\n        }\n      }\n\n      function fillListIfNotEmpty(items, intialLoad) {\n        if (items.length) {\n          fillList(items, intialLoad);\n        } else {\n          if (editorParams.emptyPlaceholder) {\n            addNotice(editorParams.emptyPlaceholder);\n          }\n        }\n      }\n\n      function fillList(items, intialLoad) {\n        var current = false;\n        clearList();\n        displayItems = items;\n        displayItems.forEach(function (item) {\n          var el = item.element;\n\n          if (!el) {\n            el = document.createElement(\"div\");\n            el.classList.add(\"tabulator-edit-select-list-item\");\n            el.tabIndex = 0;\n            el.innerHTML = item.title;\n            el.addEventListener(\"click\", function (e) {\n              setCurrentItem(item);\n              chooseItem();\n            });\n            el.addEventListener(\"mousedown\", function (e) {\n              blurable = false;\n              setTimeout(function () {\n                blurable = true;\n              }, 10);\n            });\n            item.element = el;\n\n            if (intialLoad && item.value == initialValue) {\n              input.value = item.title;\n              item.element.classList.add(\"active\");\n              current = true;\n            }\n\n            if (item === currentItem) {\n              item.element.classList.add(\"active\");\n              current = true;\n            }\n          }\n\n          listEl.appendChild(el);\n        });\n\n        if (!current) {\n          setCurrentItem(false);\n        }\n      }\n\n      function chooseItem() {\n        hideList();\n\n        if (currentItem) {\n          if (initialValue !== currentItem.value) {\n            initialValue = currentItem.value;\n            input.value = currentItem.title;\n            success(currentItem.value);\n          } else {\n            cancel();\n          }\n        } else {\n          if (editorParams.freetext) {\n            initialValue = input.value;\n            success(input.value);\n          } else {\n            if (editorParams.allowEmpty && input.value === \"\") {\n              initialValue = input.value;\n              success(input.value);\n            } else {\n              cancel();\n            }\n          }\n        }\n      }\n\n      function showList() {\n        if (!listEl.parentNode) {\n          while (listEl.firstChild) {\n            listEl.removeChild(listEl.firstChild);\n          }\n\n          var offset = Tabulator.prototype.helpers.elOffset(cellEl);\n          listEl.style.minWidth = cellEl.offsetWidth + \"px\";\n          listEl.style.top = offset.top + cellEl.offsetHeight + \"px\";\n          listEl.style.left = offset.left + \"px\";\n          document.body.appendChild(listEl);\n        }\n      }\n\n      function setCurrentItem(item, showInputValue) {\n        if (currentItem && currentItem.element) {\n          currentItem.element.classList.remove(\"active\");\n        }\n\n        currentItem = item;\n\n        if (item && item.element) {\n          item.element.classList.add(\"active\");\n        }\n      }\n\n      function hideList() {\n        if (listEl.parentNode) {\n          listEl.parentNode.removeChild(listEl);\n        }\n\n        removeScrollListener();\n      }\n\n      function cancelItem() {\n        hideList();\n        cancel();\n      }\n\n      function removeScrollListener() {\n        self.table.rowManager.element.removeEventListener(\"scroll\", cancelItem);\n      } //allow key based navigation\n\n\n      input.addEventListener(\"keydown\", function (e) {\n        var index;\n\n        switch (e.keyCode) {\n          case 38:\n            //up arrow\n            index = displayItems.indexOf(currentItem);\n\n            if (vertNav == \"editor\" || vertNav == \"hybrid\" && index) {\n              e.stopImmediatePropagation();\n              e.stopPropagation();\n              e.preventDefault();\n\n              if (index > 0) {\n                setCurrentItem(displayItems[index - 1]);\n              } else {\n                setCurrentItem(false);\n              }\n            }\n\n            break;\n\n          case 40:\n            //down arrow\n            index = displayItems.indexOf(currentItem);\n\n            if (vertNav == \"editor\" || vertNav == \"hybrid\" && index < displayItems.length - 1) {\n              e.stopImmediatePropagation();\n              e.stopPropagation();\n              e.preventDefault();\n\n              if (index < displayItems.length - 1) {\n                if (index == -1) {\n                  setCurrentItem(displayItems[0]);\n                } else {\n                  setCurrentItem(displayItems[index + 1]);\n                }\n              }\n            }\n\n            break;\n\n          case 37: //left arrow\n\n          case 39:\n            //right arrow\n            e.stopImmediatePropagation();\n            e.stopPropagation(); // e.preventDefault();\n\n            break;\n\n          case 13:\n            //enter\n            chooseItem();\n            break;\n\n          case 27:\n            //escape\n            cancelItem();\n            break;\n\n          case 36: //home\n\n          case 35:\n            //end\n            //prevent table navigation while using input element\n            e.stopImmediatePropagation();\n            break;\n        }\n      });\n      input.addEventListener(\"keyup\", function (e) {\n        switch (e.keyCode) {\n          case 38: //up arrow\n\n          case 37: //left arrow\n\n          case 39: //up arrow\n\n          case 40: //right arrow\n\n          case 13: //enter\n\n          case 27:\n            //escape\n            break;\n\n          default:\n            filterList(input.value);\n        }\n      });\n      input.addEventListener(\"search\", function (e) {\n        filterList(input.value);\n      });\n      input.addEventListener(\"blur\", function (e) {\n        if (blurable) {\n          chooseItem();\n        }\n      });\n      input.addEventListener(\"focus\", function (e) {\n        var value = initialDisplayValue;\n        genUniqueColumnValues();\n        showList();\n        input.value = value;\n        filterList(value, true);\n      });\n      onRendered(function () {\n        input.style.height = \"100%\";\n        input.focus({\n          preventScroll: true\n        });\n      });\n\n      if (editorParams.mask) {\n        this.table.modules.edit.maskInput(input, editorParams);\n      }\n\n      setTimeout(function () {\n        _this46.table.rowManager.element.addEventListener(\"scroll\", cancelItem);\n      }, 10);\n      genUniqueColumnValues();\n      input.value = initialDisplayValue;\n      filterList(initialDisplayValue, true);\n      return input;\n    },\n    //star rating\n    star: function star(cell, onRendered, success, cancel, editorParams) {\n      var self = this,\n          element = cell.getElement(),\n          value = cell.getValue(),\n          maxStars = element.getElementsByTagName(\"svg\").length || 5,\n          size = element.getElementsByTagName(\"svg\")[0] ? element.getElementsByTagName(\"svg\")[0].getAttribute(\"width\") : 14,\n          stars = [],\n          starsHolder = document.createElement(\"div\"),\n          star = document.createElementNS('http://www.w3.org/2000/svg', \"svg\"); //change star type\n\n      function starChange(val) {\n        stars.forEach(function (star, i) {\n          if (i < val) {\n            if (self.table.browser == \"ie\") {\n              star.setAttribute(\"class\", \"tabulator-star-active\");\n            } else {\n              star.classList.replace(\"tabulator-star-inactive\", \"tabulator-star-active\");\n            }\n\n            star.innerHTML = '<polygon fill=\"#488CE9\" stroke=\"#014AAE\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n          } else {\n            if (self.table.browser == \"ie\") {\n              star.setAttribute(\"class\", \"tabulator-star-inactive\");\n            } else {\n              star.classList.replace(\"tabulator-star-active\", \"tabulator-star-inactive\");\n            }\n\n            star.innerHTML = '<polygon fill=\"#010155\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n          }\n        });\n      } //build stars\n\n\n      function buildStar(i) {\n        var starHolder = document.createElement(\"span\");\n        var nextStar = star.cloneNode(true);\n        stars.push(nextStar);\n        starHolder.addEventListener(\"mouseenter\", function (e) {\n          e.stopPropagation();\n          e.stopImmediatePropagation();\n          starChange(i);\n        });\n        starHolder.addEventListener(\"mousemove\", function (e) {\n          e.stopPropagation();\n          e.stopImmediatePropagation();\n        });\n        starHolder.addEventListener(\"click\", function (e) {\n          e.stopPropagation();\n          e.stopImmediatePropagation();\n          success(i);\n          element.blur();\n        });\n        starHolder.appendChild(nextStar);\n        starsHolder.appendChild(starHolder);\n      } //handle keyboard navigation value change\n\n\n      function changeValue(val) {\n        value = val;\n        starChange(val);\n      } //style cell\n\n\n      element.style.whiteSpace = \"nowrap\";\n      element.style.overflow = \"hidden\";\n      element.style.textOverflow = \"ellipsis\"; //style holding element\n\n      starsHolder.style.verticalAlign = \"middle\";\n      starsHolder.style.display = \"inline-block\";\n      starsHolder.style.padding = \"4px\"; //style star\n\n      star.setAttribute(\"width\", size);\n      star.setAttribute(\"height\", size);\n      star.setAttribute(\"viewBox\", \"0 0 512 512\");\n      star.setAttribute(\"xml:space\", \"preserve\");\n      star.style.padding = \"0 1px\";\n\n      if (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n        for (var key in editorParams.elementAttributes) {\n          if (key.charAt(0) == \"+\") {\n            key = key.slice(1);\n            starsHolder.setAttribute(key, starsHolder.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n          } else {\n            starsHolder.setAttribute(key, editorParams.elementAttributes[key]);\n          }\n        }\n      } //create correct number of stars\n\n\n      for (var i = 1; i <= maxStars; i++) {\n        buildStar(i);\n      } //ensure value does not exceed number of stars\n\n\n      value = Math.min(parseInt(value), maxStars); // set initial styling of stars\n\n      starChange(value);\n      starsHolder.addEventListener(\"mousemove\", function (e) {\n        starChange(0);\n      });\n      starsHolder.addEventListener(\"click\", function (e) {\n        success(0);\n      });\n      element.addEventListener(\"blur\", function (e) {\n        cancel();\n      }); //allow key based navigation\n\n      element.addEventListener(\"keydown\", function (e) {\n        switch (e.keyCode) {\n          case 39:\n            //right arrow\n            changeValue(value + 1);\n            break;\n\n          case 37:\n            //left arrow\n            changeValue(value - 1);\n            break;\n\n          case 13:\n            //enter\n            success(value);\n            break;\n\n          case 27:\n            //escape\n            cancel();\n            break;\n        }\n      });\n      return starsHolder;\n    },\n    //draggable progress bar\n    progress: function progress(cell, onRendered, success, cancel, editorParams) {\n      var element = cell.getElement(),\n          max = typeof editorParams.max === \"undefined\" ? element.getElementsByTagName(\"div\")[0].getAttribute(\"max\") || 100 : editorParams.max,\n          min = typeof editorParams.min === \"undefined\" ? element.getElementsByTagName(\"div\")[0].getAttribute(\"min\") || 0 : editorParams.min,\n          percent = (max - min) / 100,\n          value = cell.getValue() || 0,\n          handle = document.createElement(\"div\"),\n          bar = document.createElement(\"div\"),\n          mouseDrag,\n          mouseDragWidth; //set new value\n\n      function updateValue() {\n        var calcVal = percent * Math.round(bar.offsetWidth / (element.clientWidth / 100)) + min;\n        success(calcVal);\n        element.setAttribute(\"aria-valuenow\", calcVal);\n        element.setAttribute(\"aria-label\", value);\n      } //style handle\n\n\n      handle.style.position = \"absolute\";\n      handle.style.right = \"0\";\n      handle.style.top = \"0\";\n      handle.style.bottom = \"0\";\n      handle.style.width = \"5px\";\n      handle.classList.add(\"tabulator-progress-handle\"); //style bar\n\n      bar.style.display = \"inline-block\";\n      bar.style.position = \"relative\"; // bar.style.top = \"8px\";\n      // bar.style.bottom = \"8px\";\n      // bar.style.left = \"4px\";\n      // bar.style.marginRight = \"4px\";\n\n      bar.style.height = \"100%\";\n      bar.style.backgroundColor = \"#488CE9\";\n      bar.style.maxWidth = \"100%\";\n      bar.style.minWidth = \"0%\";\n\n      if (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n        for (var key in editorParams.elementAttributes) {\n          if (key.charAt(0) == \"+\") {\n            key = key.slice(1);\n            bar.setAttribute(key, bar.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n          } else {\n            bar.setAttribute(key, editorParams.elementAttributes[key]);\n          }\n        }\n      } //style cell\n\n\n      element.style.padding = \"4px 4px\"; //make sure value is in range\n\n      value = Math.min(parseFloat(value), max);\n      value = Math.max(parseFloat(value), min); //workout percentage\n\n      value = Math.round((value - min) / percent); // bar.style.right = value + \"%\";\n\n      bar.style.width = value + \"%\";\n      element.setAttribute(\"aria-valuemin\", min);\n      element.setAttribute(\"aria-valuemax\", max);\n      bar.appendChild(handle);\n      handle.addEventListener(\"mousedown\", function (e) {\n        mouseDrag = e.screenX;\n        mouseDragWidth = bar.offsetWidth;\n      });\n      handle.addEventListener(\"mouseover\", function () {\n        handle.style.cursor = \"ew-resize\";\n      });\n      element.addEventListener(\"mousemove\", function (e) {\n        if (mouseDrag) {\n          bar.style.width = mouseDragWidth + e.screenX - mouseDrag + \"px\";\n        }\n      });\n      element.addEventListener(\"mouseup\", function (e) {\n        if (mouseDrag) {\n          e.stopPropagation();\n          e.stopImmediatePropagation();\n          mouseDrag = false;\n          mouseDragWidth = false;\n          updateValue();\n        }\n      }); //allow key based navigation\n\n      element.addEventListener(\"keydown\", function (e) {\n        switch (e.keyCode) {\n          case 39:\n            //right arrow\n            e.preventDefault();\n            bar.style.width = bar.clientWidth + element.clientWidth / 100 + \"px\";\n            break;\n\n          case 37:\n            //left arrow\n            e.preventDefault();\n            bar.style.width = bar.clientWidth - element.clientWidth / 100 + \"px\";\n            break;\n\n          case 9: //tab\n\n          case 13:\n            //enter\n            updateValue();\n            break;\n\n          case 27:\n            //escape\n            cancel();\n            break;\n        }\n      });\n      element.addEventListener(\"blur\", function () {\n        cancel();\n      });\n      return bar;\n    },\n    //checkbox\n    tickCross: function tickCross(cell, onRendered, success, cancel, editorParams) {\n      var value = cell.getValue(),\n          input = document.createElement(\"input\"),\n          tristate = editorParams.tristate,\n          indetermValue = typeof editorParams.indeterminateValue === \"undefined\" ? null : editorParams.indeterminateValue,\n          indetermState = false;\n      input.setAttribute(\"type\", \"checkbox\");\n      input.style.marginTop = \"5px\";\n      input.style.boxSizing = \"border-box\";\n\n      if (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n        for (var key in editorParams.elementAttributes) {\n          if (key.charAt(0) == \"+\") {\n            key = key.slice(1);\n            input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n          } else {\n            input.setAttribute(key, editorParams.elementAttributes[key]);\n          }\n        }\n      }\n\n      input.value = value;\n\n      if (tristate && (typeof value === \"undefined\" || value === indetermValue || value === \"\")) {\n        indetermState = true;\n        input.indeterminate = true;\n      }\n\n      if (this.table.browser != \"firefox\") {\n        //prevent blur issue on mac firefox\n        onRendered(function () {\n          input.focus({\n            preventScroll: true\n          });\n        });\n      }\n\n      input.checked = value === true || value === \"true\" || value === \"True\" || value === 1;\n\n      function setValue(blur) {\n        if (tristate) {\n          if (!blur) {\n            if (input.checked && !indetermState) {\n              input.checked = false;\n              input.indeterminate = true;\n              indetermState = true;\n              return indetermValue;\n            } else {\n              indetermState = false;\n              return input.checked;\n            }\n          } else {\n            if (indetermState) {\n              return indetermValue;\n            } else {\n              return input.checked;\n            }\n          }\n        } else {\n          return input.checked;\n        }\n      } //submit new value on blur\n\n\n      input.addEventListener(\"change\", function (e) {\n        success(setValue());\n      });\n      input.addEventListener(\"blur\", function (e) {\n        success(setValue(true));\n      }); //submit new value on enter\n\n      input.addEventListener(\"keydown\", function (e) {\n        if (e.keyCode == 13) {\n          success(setValue());\n        }\n\n        if (e.keyCode == 27) {\n          cancel();\n        }\n      });\n      return input;\n    }\n  };\n  Tabulator.prototype.registerModule(\"edit\", Edit);\n\n  var ExportRow = function ExportRow(type, columns, component, indent) {\n    this.type = type;\n    this.columns = columns;\n    this.component = component || false;\n    this.indent = indent || 0;\n  };\n\n  var ExportColumn = function ExportColumn(value, component, width, height, depth) {\n    this.value = value;\n    this.component = component || false;\n    this.width = width;\n    this.height = height;\n    this.depth = depth;\n  };\n\n  var Export = function Export(table) {\n    this.table = table; //hold Tabulator object\n\n    this.config = {};\n    this.cloneTableStyle = true;\n    this.colVisProp = \"\";\n  };\n\n  Export.prototype.generateExportList = function (config, style, range, colVisProp) {\n    this.cloneTableStyle = style;\n    this.config = config || {};\n    this.colVisProp = colVisProp;\n    var headers = this.config.columnHeaders !== false ? this.headersToExportRows(this.generateColumnGroupHeaders()) : [];\n    var body = this.bodyToExportRows(this.rowLookup(range));\n    return headers.concat(body);\n  };\n\n  Export.prototype.genereateTable = function (config, style, range, colVisProp) {\n    var list = this.generateExportList(config, style, range, colVisProp);\n    return this.genereateTableElement(list);\n  };\n\n  Export.prototype.rowLookup = function (range) {\n    var _this47 = this;\n\n    var rows = [];\n\n    if (typeof range == \"function\") {\n      range.call(this.table).forEach(function (row) {\n        row = _this47.table.rowManager.findRow(row);\n\n        if (row) {\n          rows.push(row);\n        }\n      });\n    } else {\n      switch (range) {\n        case true:\n        case \"visible\":\n          rows = this.table.rowManager.getVisibleRows(true);\n          break;\n\n        case \"all\":\n          rows = this.table.rowManager.rows;\n          break;\n\n        case \"selected\":\n          rows = this.table.modules.selectRow.selectedRows;\n          break;\n\n        case \"active\":\n        default:\n          rows = this.table.rowManager.getDisplayRows();\n      }\n    }\n\n    return Object.assign([], rows);\n  };\n\n  Export.prototype.generateColumnGroupHeaders = function () {\n    var _this48 = this;\n\n    var output = [];\n    var columns = this.config.columnGroups !== false ? this.table.columnManager.columns : this.table.columnManager.columnsByIndex;\n    columns.forEach(function (column) {\n      var colData = _this48.processColumnGroup(column);\n\n      if (colData) {\n        output.push(colData);\n      }\n    });\n    return output;\n  };\n\n  Export.prototype.processColumnGroup = function (column) {\n    var _this49 = this;\n\n    var subGroups = column.columns,\n        maxDepth = 0,\n        title = column.definition[\"title\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))] || column.definition.title;\n    var groupData = {\n      title: title,\n      column: column,\n      depth: 1\n    };\n\n    if (subGroups.length) {\n      groupData.subGroups = [];\n      groupData.width = 0;\n      subGroups.forEach(function (subGroup) {\n        var subGroupData = _this49.processColumnGroup(subGroup);\n\n        if (subGroupData) {\n          groupData.width += subGroupData.width;\n          groupData.subGroups.push(subGroupData);\n\n          if (subGroupData.depth > maxDepth) {\n            maxDepth = subGroupData.depth;\n          }\n        }\n      });\n      groupData.depth += maxDepth;\n\n      if (!groupData.width) {\n        return false;\n      }\n    } else {\n      if (this.columnVisCheck(column)) {\n        groupData.width = 1;\n      } else {\n        return false;\n      }\n    }\n\n    return groupData;\n  };\n\n  Export.prototype.columnVisCheck = function (column) {\n    return column.definition[this.colVisProp] !== false && (column.visible || !column.visible && column.definition[this.colVisProp]);\n  };\n\n  Export.prototype.headersToExportRows = function (columns) {\n    var headers = [],\n        headerDepth = 0,\n        exportRows = [];\n\n    function parseColumnGroup(column, level) {\n      var depth = headerDepth - level;\n\n      if (typeof headers[level] === \"undefined\") {\n        headers[level] = [];\n      }\n\n      column.height = column.subGroups ? 1 : depth - column.depth + 1;\n      headers[level].push(column);\n\n      if (column.height > 1) {\n        for (var _i7 = 1; _i7 < column.height; _i7++) {\n          if (typeof headers[level + _i7] === \"undefined\") {\n            headers[level + _i7] = [];\n          }\n\n          headers[level + _i7].push(false);\n        }\n      }\n\n      if (column.width > 1) {\n        for (var _i8 = 1; _i8 < column.width; _i8++) {\n          headers[level].push(false);\n        }\n      }\n\n      if (column.subGroups) {\n        column.subGroups.forEach(function (subGroup) {\n          parseColumnGroup(subGroup, level + 1);\n        });\n      }\n    } //calculate maximum header debth\n\n\n    columns.forEach(function (column) {\n      if (column.depth > headerDepth) {\n        headerDepth = column.depth;\n      }\n    });\n    columns.forEach(function (column) {\n      parseColumnGroup(column, 0);\n    });\n    headers.forEach(function (header) {\n      var columns = [];\n      header.forEach(function (col) {\n        if (col) {\n          columns.push(new ExportColumn(col.title, col.column.getComponent(), col.width, col.height, col.depth));\n        } else {\n          columns.push(null);\n        }\n      });\n      exportRows.push(new ExportRow(\"header\", columns));\n    });\n    return exportRows;\n  };\n\n  Export.prototype.bodyToExportRows = function (rows) {\n    var _this50 = this;\n\n    var columns = [];\n    var exportRows = [];\n    this.table.columnManager.columnsByIndex.forEach(function (column) {\n      if (_this50.columnVisCheck(column)) {\n        columns.push(column.getComponent());\n      }\n    });\n\n    if (this.config.columnCalcs !== false && this.table.modExists(\"columnCalcs\")) {\n      if (this.table.modules.columnCalcs.topInitialized) {\n        rows.unshift(this.table.modules.columnCalcs.topRow);\n      }\n\n      if (this.table.modules.columnCalcs.botInitialized) {\n        rows.push(this.table.modules.columnCalcs.botRow);\n      }\n    }\n\n    rows = rows.filter(function (row) {\n      switch (row.type) {\n        case \"group\":\n          return _this50.config.rowGroups !== false;\n          break;\n\n        case \"calc\":\n          return _this50.config.columnCalcs !== false;\n          break;\n\n        case \"row\":\n          return !(_this50.table.options.dataTree && _this50.config.dataTree === false && row.modules.dataTree.parent);\n          break;\n      }\n\n      return true;\n    });\n    rows.forEach(function (row, i) {\n      var rowData = row.getData(_this50.colVisProp);\n      var exportCols = [];\n      var indent = 0;\n\n      switch (row.type) {\n        case \"group\":\n          indent = row.level;\n          exportCols.push(new ExportColumn(row.key, row.getComponent(), columns.length, 1));\n          break;\n\n        case \"calc\":\n        case \"row\":\n          columns.forEach(function (col) {\n            exportCols.push(new ExportColumn(col._column.getFieldValue(rowData), col, 1, 1));\n          });\n\n          if (_this50.table.options.dataTree && _this50.config.dataTree !== false) {\n            indent = row.modules.dataTree.index;\n          }\n\n          break;\n      }\n\n      exportRows.push(new ExportRow(row.type, exportCols, row.getComponent(), indent));\n    });\n    return exportRows;\n  };\n\n  Export.prototype.genereateTableElement = function (list) {\n    var _this51 = this;\n\n    var table = document.createElement(\"table\"),\n        headerEl = document.createElement(\"thead\"),\n        bodyEl = document.createElement(\"tbody\"),\n        styles = this.lookupTableStyles(),\n        rowFormatter = this.table.options[\"rowFormatter\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))],\n        setup = {};\n    setup.rowFormatter = rowFormatter !== null ? rowFormatter : this.table.options.rowFormatter;\n\n    if (this.table.options.dataTree && this.config.dataTree !== false && this.table.modExists(\"columnCalcs\")) {\n      setup.treeElementField = this.table.modules.dataTree.elementField;\n    } //assign group header formatter\n\n\n    setup.groupHeader = this.table.options[\"groupHeader\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))];\n\n    if (setup.groupHeader && !Array.isArray(setup.groupHeader)) {\n      setup.groupHeader = [setup.groupHeader];\n    }\n\n    table.classList.add(\"tabulator-print-table\");\n    this.mapElementStyles(this.table.columnManager.getHeadersElement(), headerEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\n    if (list.length > 1000) {\n      console.warn(\"It may take a long time to render an HTML table with more than 1000 rows\");\n    }\n\n    list.forEach(function (row, i) {\n      switch (row.type) {\n        case \"header\":\n          headerEl.appendChild(_this51.genereateHeaderElement(row, setup, styles));\n          break;\n\n        case \"group\":\n          bodyEl.appendChild(_this51.genereateGroupElement(row, setup, styles));\n          break;\n\n        case \"calc\":\n          bodyEl.appendChild(_this51.genereateCalcElement(row, setup, styles));\n          break;\n\n        case \"row\":\n          var rowEl = _this51.genereateRowElement(row, setup, styles);\n\n          _this51.mapElementStyles(i % 2 && styles.evenRow ? styles.evenRow : styles.oddRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\n          bodyEl.appendChild(rowEl);\n          break;\n      }\n    });\n\n    if (headerEl.innerHTML) {\n      table.appendChild(headerEl);\n    }\n\n    table.appendChild(bodyEl);\n    this.mapElementStyles(this.table.element, table, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\"]);\n    return table;\n  };\n\n  Export.prototype.lookupTableStyles = function () {\n    var styles = {}; //lookup row styles\n\n    if (this.cloneTableStyle && window.getComputedStyle) {\n      styles.oddRow = this.table.element.querySelector(\".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)\");\n      styles.evenRow = this.table.element.querySelector(\".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)\");\n      styles.calcRow = this.table.element.querySelector(\".tabulator-row.tabulator-calcs\");\n      styles.firstRow = this.table.element.querySelector(\".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)\");\n      styles.firstGroup = this.table.element.getElementsByClassName(\"tabulator-group\")[0];\n\n      if (styles.firstRow) {\n        styles.styleCells = styles.firstRow.getElementsByClassName(\"tabulator-cell\");\n        styles.firstCell = styles.styleCells[0];\n        styles.lastCell = styles.styleCells[styles.styleCells.length - 1];\n      }\n    }\n\n    return styles;\n  };\n\n  Export.prototype.genereateHeaderElement = function (row, setup, styles) {\n    var _this52 = this;\n\n    var rowEl = document.createElement(\"tr\");\n    row.columns.forEach(function (column) {\n      if (column) {\n        var cellEl = document.createElement(\"th\");\n        var classNames = column.component._column.definition.cssClass ? column.component._column.definition.cssClass.split(\" \") : [];\n        cellEl.colSpan = column.width;\n        cellEl.rowSpan = column.height;\n        cellEl.innerHTML = column.value;\n\n        if (_this52.cloneTableStyle) {\n          cellEl.style.boxSizing = \"border-box\";\n        }\n\n        classNames.forEach(function (className) {\n          cellEl.classList.add(className);\n        });\n\n        _this52.mapElementStyles(column.component.getElement(), cellEl, [\"text-align\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\n        _this52.mapElementStyles(column.component._column.contentElement, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n\n        if (column.component._column.visible) {\n          _this52.mapElementStyles(column.component.getElement(), cellEl, [\"width\"]);\n        } else {\n          if (column.component._column.definition.width) {\n            cellEl.style.width = column.component._column.definition.width + \"px\";\n          }\n        }\n\n        if (column.component._column.parent) {\n          _this52.mapElementStyles(column.component._column.parent.groupElement, cellEl, [\"border-top\"]);\n        }\n\n        rowEl.appendChild(cellEl);\n      }\n    });\n    return rowEl;\n  };\n\n  Export.prototype.genereateGroupElement = function (row, setup, styles) {\n    var rowEl = document.createElement(\"tr\"),\n        cellEl = document.createElement(\"td\"),\n        group = row.columns[0];\n    rowEl.classList.add(\"tabulator-print-table-row\");\n\n    if (setup.groupHeader && setup.groupHeader[row.indent]) {\n      group.value = setup.groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n    } else {\n      if (setup.groupHeader === false) {\n        group.value = group.value;\n      } else {\n        group.value = row.component._group.generator(group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n      }\n    }\n\n    cellEl.colSpan = group.width;\n    cellEl.innerHTML = group.value;\n    rowEl.classList.add(\"tabulator-print-table-group\");\n    rowEl.classList.add(\"tabulator-group-level-\" + row.indent);\n\n    if (group.component.getVisibility()) {\n      rowEl.classList.add(\"tabulator-group-visible\");\n    }\n\n    this.mapElementStyles(styles.firstGroup, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n    this.mapElementStyles(styles.firstGroup, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n    rowEl.appendChild(cellEl);\n    return rowEl;\n  };\n\n  Export.prototype.genereateCalcElement = function (row, setup, styles) {\n    var rowEl = this.genereateRowElement(row, setup, styles);\n    rowEl.classList.add(\"tabulator-print-table-calcs\");\n    this.mapElementStyles(styles.calcRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n    return rowEl;\n  };\n\n  Export.prototype.genereateRowElement = function (row, setup, styles) {\n    var _this53 = this;\n\n    var rowEl = document.createElement(\"tr\");\n    rowEl.classList.add(\"tabulator-print-table-row\");\n    row.columns.forEach(function (col) {\n      if (col) {\n        var cellEl = document.createElement(\"td\"),\n            column = col.component._column,\n            value = col.value;\n        var cellWrapper = {\n          modules: {},\n          getValue: function getValue() {\n            return value;\n          },\n          getField: function getField() {\n            return column.definition.field;\n          },\n          getElement: function getElement() {\n            return cellEl;\n          },\n          getColumn: function getColumn() {\n            return column.getComponent();\n          },\n          getData: function getData() {\n            return rowData;\n          },\n          getRow: function getRow() {\n            return row.getComponent();\n          },\n          getComponent: function getComponent() {\n            return cellWrapper;\n          },\n          column: column\n        };\n        var classNames = column.definition.cssClass ? column.definition.cssClass.split(\" \") : [];\n        classNames.forEach(function (className) {\n          cellEl.classList.add(className);\n        });\n\n        if (_this53.table.modExists(\"format\") && _this53.config.formatCells !== false) {\n          value = _this53.table.modules.format.formatExportValue(cellWrapper, _this53.colVisProp);\n        } else {\n          switch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n            case \"object\":\n              value = JSON.stringify(value);\n              break;\n\n            case \"undefined\":\n            case \"null\":\n              value = \"\";\n              break;\n\n            default:\n              value = value;\n          }\n        }\n\n        if (value instanceof Node) {\n          cellEl.appendChild(value);\n        } else {\n          cellEl.innerHTML = value;\n        }\n\n        if (styles.firstCell) {\n          _this53.mapElementStyles(styles.firstCell, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\n          if (column.definition.align) {\n            cellEl.style.textAlign = column.definition.align;\n          }\n        }\n\n        if (_this53.table.options.dataTree && _this53.config.dataTree !== false) {\n          if (setup.treeElementField && setup.treeElementField == column.field || !setup.treeElementField && i == 0) {\n            if (row.component._row.modules.dataTree.controlEl) {\n              cellEl.insertBefore(row.component._row.modules.dataTree.controlEl.cloneNode(true), cellEl.firstChild);\n            }\n\n            if (row.component._row.modules.dataTree.branchEl) {\n              cellEl.insertBefore(row.component._row.modules.dataTree.branchEl.cloneNode(true), cellEl.firstChild);\n            }\n          }\n        }\n\n        rowEl.appendChild(cellEl);\n\n        if (cellWrapper.modules.format && cellWrapper.modules.format.renderedCallback) {\n          cellWrapper.modules.format.renderedCallback();\n        }\n\n        if (setup.rowFormatter && _this53.config.formatCells !== false) {\n          var rowComponent = row.getComponent();\n\n          rowComponent.getElement = function () {\n            return rowEl;\n          };\n\n          setup.rowFormatter(rowComponent);\n        }\n      }\n    });\n    return rowEl;\n  };\n\n  Export.prototype.genereateHTMLTable = function (list) {\n    var holder = document.createElement(\"div\");\n    holder.appendChild(this.genereateTableElement(list));\n    return holder.innerHTML;\n  };\n\n  Export.prototype.getHtml = function (visible, style, config, colVisProp) {\n    var list = this.generateExportList(config || this.table.options.htmlOutputConfig, style, visible, colVisProp || \"htmlOutput\");\n    return this.genereateHTMLTable(list);\n  };\n\n  Export.prototype.mapElementStyles = function (from, to, props) {\n    if (this.cloneTableStyle && from && to) {\n      var lookup = {\n        \"background-color\": \"backgroundColor\",\n        \"color\": \"fontColor\",\n        \"width\": \"width\",\n        \"font-weight\": \"fontWeight\",\n        \"font-family\": \"fontFamily\",\n        \"font-size\": \"fontSize\",\n        \"text-align\": \"textAlign\",\n        \"border-top\": \"borderTop\",\n        \"border-left\": \"borderLeft\",\n        \"border-right\": \"borderRight\",\n        \"border-bottom\": \"borderBottom\",\n        \"padding-top\": \"paddingTop\",\n        \"padding-left\": \"paddingLeft\",\n        \"padding-right\": \"paddingRight\",\n        \"padding-bottom\": \"paddingBottom\"\n      };\n\n      if (window.getComputedStyle) {\n        var fromStyle = window.getComputedStyle(from);\n        props.forEach(function (prop) {\n          to.style[lookup[prop]] = fromStyle.getPropertyValue(prop);\n        });\n      }\n    }\n  };\n\n  Tabulator.prototype.registerModule(\"export\", Export);\n\n  var Filter = function Filter(table) {\n    this.table = table; //hold Tabulator object\n\n    this.filterList = []; //hold filter list\n\n    this.headerFilters = {}; //hold column filters\n\n    this.headerFilterColumns = []; //hold columns that use header filters\n\n    this.prevHeaderFilterChangeCheck = \"\";\n    this.prevHeaderFilterChangeCheck = \"{}\";\n    this.changed = false; //has filtering changed since last render\n  }; //initialize column header filter\n\n\n  Filter.prototype.initializeColumn = function (column, value) {\n    var self = this,\n        field = column.getField(),\n        params; //handle successfull value change\n\n    function success(value) {\n      var filterType = column.modules.filter.tagType == \"input\" && column.modules.filter.attrType == \"text\" || column.modules.filter.tagType == \"textarea\" ? \"partial\" : \"match\",\n          type = \"\",\n          filterChangeCheck = \"\",\n          filterFunc;\n\n      if (typeof column.modules.filter.prevSuccess === \"undefined\" || column.modules.filter.prevSuccess !== value) {\n        column.modules.filter.prevSuccess = value;\n\n        if (!column.modules.filter.emptyFunc(value)) {\n          column.modules.filter.value = value;\n\n          switch (_typeof(column.definition.headerFilterFunc)) {\n            case \"string\":\n              if (self.filters[column.definition.headerFilterFunc]) {\n                type = column.definition.headerFilterFunc;\n\n                filterFunc = function filterFunc(data) {\n                  var params = column.definition.headerFilterFuncParams || {};\n                  var fieldVal = column.getFieldValue(data);\n                  params = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n                  return self.filters[column.definition.headerFilterFunc](value, fieldVal, data, params);\n                };\n              } else {\n                console.warn(\"Header Filter Error - Matching filter function not found: \", column.definition.headerFilterFunc);\n              }\n\n              break;\n\n            case \"function\":\n              filterFunc = function filterFunc(data) {\n                var params = column.definition.headerFilterFuncParams || {};\n                var fieldVal = column.getFieldValue(data);\n                params = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n                return column.definition.headerFilterFunc(value, fieldVal, data, params);\n              };\n\n              type = filterFunc;\n              break;\n          }\n\n          if (!filterFunc) {\n            switch (filterType) {\n              case \"partial\":\n                filterFunc = function filterFunc(data) {\n                  var colVal = column.getFieldValue(data);\n\n                  if (typeof colVal !== 'undefined' && colVal !== null) {\n                    return String(colVal).toLowerCase().indexOf(String(value).toLowerCase()) > -1;\n                  } else {\n                    return false;\n                  }\n                };\n\n                type = \"like\";\n                break;\n\n              default:\n                filterFunc = function filterFunc(data) {\n                  return column.getFieldValue(data) == value;\n                };\n\n                type = \"=\";\n            }\n          }\n\n          self.headerFilters[field] = {\n            value: value,\n            func: filterFunc,\n            type: type,\n            params: params || {}\n          };\n        } else {\n          delete self.headerFilters[field];\n        }\n\n        filterChangeCheck = JSON.stringify(self.headerFilters);\n\n        if (self.prevHeaderFilterChangeCheck !== filterChangeCheck) {\n          self.prevHeaderFilterChangeCheck = filterChangeCheck;\n          self.changed = true;\n          self.table.rowManager.filterRefresh();\n        }\n      }\n\n      return true;\n    }\n\n    column.modules.filter = {\n      success: success,\n      attrType: false,\n      tagType: false,\n      emptyFunc: false\n    };\n    this.generateHeaderFilterElement(column);\n  };\n\n  Filter.prototype.generateHeaderFilterElement = function (column, initialValue, reinitialize) {\n    var _this54 = this;\n\n    var self = this,\n        success = column.modules.filter.success,\n        field = column.getField(),\n        filterElement,\n        editor,\n        editorElement,\n        cellWrapper,\n        typingTimer,\n        searchTrigger,\n        params; //handle aborted edit\n\n    function cancel() {}\n\n    if (column.modules.filter.headerElement && column.modules.filter.headerElement.parentNode) {\n      column.contentElement.removeChild(column.modules.filter.headerElement.parentNode);\n    }\n\n    if (field) {\n      //set empty value function\n      column.modules.filter.emptyFunc = column.definition.headerFilterEmptyCheck || function (value) {\n        return !value && value !== \"0\";\n      };\n\n      filterElement = document.createElement(\"div\");\n      filterElement.classList.add(\"tabulator-header-filter\"); //set column editor\n\n      switch (_typeof(column.definition.headerFilter)) {\n        case \"string\":\n          if (self.table.modules.edit.editors[column.definition.headerFilter]) {\n            editor = self.table.modules.edit.editors[column.definition.headerFilter];\n\n            if ((column.definition.headerFilter === \"tick\" || column.definition.headerFilter === \"tickCross\") && !column.definition.headerFilterEmptyCheck) {\n              column.modules.filter.emptyFunc = function (value) {\n                return value !== true && value !== false;\n              };\n            }\n          } else {\n            console.warn(\"Filter Error - Cannot build header filter, No such editor found: \", column.definition.editor);\n          }\n\n          break;\n\n        case \"function\":\n          editor = column.definition.headerFilter;\n          break;\n\n        case \"boolean\":\n          if (column.modules.edit && column.modules.edit.editor) {\n            editor = column.modules.edit.editor;\n          } else {\n            if (column.definition.formatter && self.table.modules.edit.editors[column.definition.formatter]) {\n              editor = self.table.modules.edit.editors[column.definition.formatter];\n\n              if ((column.definition.formatter === \"tick\" || column.definition.formatter === \"tickCross\") && !column.definition.headerFilterEmptyCheck) {\n                column.modules.filter.emptyFunc = function (value) {\n                  return value !== true && value !== false;\n                };\n              }\n            } else {\n              editor = self.table.modules.edit.editors[\"input\"];\n            }\n          }\n\n          break;\n      }\n\n      if (editor) {\n        cellWrapper = {\n          getValue: function getValue() {\n            return typeof initialValue !== \"undefined\" ? initialValue : \"\";\n          },\n          getField: function getField() {\n            return column.definition.field;\n          },\n          getElement: function getElement() {\n            return filterElement;\n          },\n          getColumn: function getColumn() {\n            return column.getComponent();\n          },\n          getRow: function getRow() {\n            return {\n              normalizeHeight: function normalizeHeight() {}\n            };\n          }\n        };\n        params = column.definition.headerFilterParams || {};\n        params = typeof params === \"function\" ? params.call(self.table) : params;\n        editorElement = editor.call(this.table.modules.edit, cellWrapper, function () {}, success, cancel, params);\n\n        if (!editorElement) {\n          console.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor returned a value of false\");\n          return;\n        }\n\n        if (!(editorElement instanceof Node)) {\n          console.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor should return an instance of Node, the editor returned:\", editorElement);\n          return;\n        } //set Placeholder Text\n\n\n        if (field) {\n          self.table.modules.localize.bind(\"headerFilters|columns|\" + column.definition.field, function (value) {\n            editorElement.setAttribute(\"placeholder\", typeof value !== \"undefined\" && value ? value : self.table.modules.localize.getText(\"headerFilters|default\"));\n          });\n        } else {\n          self.table.modules.localize.bind(\"headerFilters|default\", function (value) {\n            editorElement.setAttribute(\"placeholder\", typeof self.column.definition.headerFilterPlaceholder !== \"undefined\" && self.column.definition.headerFilterPlaceholder ? self.column.definition.headerFilterPlaceholder : value);\n          });\n        } //focus on element on click\n\n\n        editorElement.addEventListener(\"click\", function (e) {\n          e.stopPropagation();\n          editorElement.focus();\n        });\n        editorElement.addEventListener(\"focus\", function (e) {\n          var left = _this54.table.columnManager.element.scrollLeft;\n\n          if (left !== _this54.table.rowManager.element.scrollLeft) {\n            _this54.table.rowManager.scrollHorizontal(left);\n\n            _this54.table.columnManager.scrollHorizontal(left);\n          }\n        }); //live update filters as user types\n\n        typingTimer = false;\n\n        searchTrigger = function searchTrigger(e) {\n          if (typingTimer) {\n            clearTimeout(typingTimer);\n          }\n\n          typingTimer = setTimeout(function () {\n            success(editorElement.value);\n          }, self.table.options.headerFilterLiveFilterDelay);\n        };\n\n        column.modules.filter.headerElement = editorElement;\n        column.modules.filter.attrType = editorElement.hasAttribute(\"type\") ? editorElement.getAttribute(\"type\").toLowerCase() : \"\";\n        column.modules.filter.tagType = editorElement.tagName.toLowerCase();\n\n        if (column.definition.headerFilterLiveFilter !== false) {\n          if (!(column.definition.headerFilter === 'autocomplete' || column.definition.headerFilter === 'tickCross' || (column.definition.editor === 'autocomplete' || column.definition.editor === 'tickCross') && column.definition.headerFilter === true)) {\n            editorElement.addEventListener(\"keyup\", searchTrigger);\n            editorElement.addEventListener(\"search\", searchTrigger); //update number filtered columns on change\n\n            if (column.modules.filter.attrType == \"number\") {\n              editorElement.addEventListener(\"change\", function (e) {\n                success(editorElement.value);\n              });\n            } //change text inputs to search inputs to allow for clearing of field\n\n\n            if (column.modules.filter.attrType == \"text\" && this.table.browser !== \"ie\") {\n              editorElement.setAttribute(\"type\", \"search\"); // editorElement.off(\"change blur\"); //prevent blur from triggering filter and preventing selection click\n            }\n          } //prevent input and select elements from propegating click to column sorters etc\n\n\n          if (column.modules.filter.tagType == \"input\" || column.modules.filter.tagType == \"select\" || column.modules.filter.tagType == \"textarea\") {\n            editorElement.addEventListener(\"mousedown\", function (e) {\n              e.stopPropagation();\n            });\n          }\n        }\n\n        filterElement.appendChild(editorElement);\n        column.contentElement.appendChild(filterElement);\n\n        if (!reinitialize) {\n          self.headerFilterColumns.push(column);\n        }\n      }\n    } else {\n      console.warn(\"Filter Error - Cannot add header filter, column has no field set:\", column.definition.title);\n    }\n  }; //hide all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\n\n\n  Filter.prototype.hideHeaderFilterElements = function () {\n    this.headerFilterColumns.forEach(function (column) {\n      if (column.modules.filter && column.modules.filter.headerElement) {\n        column.modules.filter.headerElement.style.display = 'none';\n      }\n    });\n  }; //show all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\n\n\n  Filter.prototype.showHeaderFilterElements = function () {\n    this.headerFilterColumns.forEach(function (column) {\n      if (column.modules.filter && column.modules.filter.headerElement) {\n        column.modules.filter.headerElement.style.display = '';\n      }\n    });\n  }; //programatically set focus of header filter\n\n\n  Filter.prototype.setHeaderFilterFocus = function (column) {\n    if (column.modules.filter && column.modules.filter.headerElement) {\n      column.modules.filter.headerElement.focus();\n    } else {\n      console.warn(\"Column Filter Focus Error - No header filter set on column:\", column.getField());\n    }\n  }; //programmatically get value of header filter\n\n\n  Filter.prototype.getHeaderFilterValue = function (column) {\n    if (column.modules.filter && column.modules.filter.headerElement) {\n      return column.modules.filter.headerElement.value;\n    } else {\n      console.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n    }\n  }; //programatically set value of header filter\n\n\n  Filter.prototype.setHeaderFilterValue = function (column, value) {\n    if (column) {\n      if (column.modules.filter && column.modules.filter.headerElement) {\n        this.generateHeaderFilterElement(column, value, true);\n        column.modules.filter.success(value);\n      } else {\n        console.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n      }\n    }\n  };\n\n  Filter.prototype.reloadHeaderFilter = function (column) {\n    if (column) {\n      if (column.modules.filter && column.modules.filter.headerElement) {\n        this.generateHeaderFilterElement(column, column.modules.filter.value, true);\n      } else {\n        console.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n      }\n    }\n  }; //check if the filters has changed since last use\n\n\n  Filter.prototype.hasChanged = function () {\n    var changed = this.changed;\n    this.changed = false;\n    return changed;\n  }; //set standard filters\n\n\n  Filter.prototype.setFilter = function (field, type, value, params) {\n    var self = this;\n    self.filterList = [];\n\n    if (!Array.isArray(field)) {\n      field = [{\n        field: field,\n        type: type,\n        value: value,\n        params: params\n      }];\n    }\n\n    self.addFilter(field);\n  }; //add filter to array\n\n\n  Filter.prototype.addFilter = function (field, type, value, params) {\n    var self = this;\n\n    if (!Array.isArray(field)) {\n      field = [{\n        field: field,\n        type: type,\n        value: value,\n        params: params\n      }];\n    }\n\n    field.forEach(function (filter) {\n      filter = self.findFilter(filter);\n\n      if (filter) {\n        self.filterList.push(filter);\n        self.changed = true;\n      }\n    });\n\n    if (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.filter) {\n      this.table.modules.persistence.save(\"filter\");\n    }\n  };\n\n  Filter.prototype.findFilter = function (filter) {\n    var self = this,\n        column;\n\n    if (Array.isArray(filter)) {\n      return this.findSubFilters(filter);\n    }\n\n    var filterFunc = false;\n\n    if (typeof filter.field == \"function\") {\n      filterFunc = function filterFunc(data) {\n        return filter.field(data, filter.type || {}); // pass params to custom filter function\n      };\n    } else {\n      if (self.filters[filter.type]) {\n        column = self.table.columnManager.getColumnByField(filter.field);\n\n        if (column) {\n          filterFunc = function filterFunc(data) {\n            return self.filters[filter.type](filter.value, column.getFieldValue(data), data, filter.params || {});\n          };\n        } else {\n          filterFunc = function filterFunc(data) {\n            return self.filters[filter.type](filter.value, data[filter.field], data, filter.params || {});\n          };\n        }\n      } else {\n        console.warn(\"Filter Error - No such filter type found, ignoring: \", filter.type);\n      }\n    }\n\n    filter.func = filterFunc;\n    return filter.func ? filter : false;\n  };\n\n  Filter.prototype.findSubFilters = function (filters) {\n    var self = this,\n        output = [];\n    filters.forEach(function (filter) {\n      filter = self.findFilter(filter);\n\n      if (filter) {\n        output.push(filter);\n      }\n    });\n    return output.length ? output : false;\n  }; //get all filters\n\n\n  Filter.prototype.getFilters = function (all, ajax) {\n    var output = [];\n\n    if (all) {\n      output = this.getHeaderFilters();\n    }\n\n    if (ajax) {\n      output.forEach(function (item) {\n        if (typeof item.type == \"function\") {\n          item.type = \"function\";\n        }\n      });\n    }\n\n    output = output.concat(this.filtersToArray(this.filterList, ajax));\n    return output;\n  }; //filter to Object\n\n\n  Filter.prototype.filtersToArray = function (filterList, ajax) {\n    var _this55 = this;\n\n    var output = [];\n    filterList.forEach(function (filter) {\n      var item;\n\n      if (Array.isArray(filter)) {\n        output.push(_this55.filtersToArray(filter, ajax));\n      } else {\n        item = {\n          field: filter.field,\n          type: filter.type,\n          value: filter.value\n        };\n\n        if (ajax) {\n          if (typeof item.type == \"function\") {\n            item.type = \"function\";\n          }\n        }\n\n        output.push(item);\n      }\n    });\n    return output;\n  }; //get all filters\n\n\n  Filter.prototype.getHeaderFilters = function () {\n    var self = this,\n        output = [];\n\n    for (var key in this.headerFilters) {\n      output.push({\n        field: key,\n        type: this.headerFilters[key].type,\n        value: this.headerFilters[key].value\n      });\n    }\n\n    return output;\n  }; //remove filter from array\n\n\n  Filter.prototype.removeFilter = function (field, type, value) {\n    var self = this;\n\n    if (!Array.isArray(field)) {\n      field = [{\n        field: field,\n        type: type,\n        value: value\n      }];\n    }\n\n    field.forEach(function (filter) {\n      var index = -1;\n\n      if (_typeof(filter.field) == \"object\") {\n        index = self.filterList.findIndex(function (element) {\n          return filter === element;\n        });\n      } else {\n        index = self.filterList.findIndex(function (element) {\n          return filter.field === element.field && filter.type === element.type && filter.value === element.value;\n        });\n      }\n\n      if (index > -1) {\n        self.filterList.splice(index, 1);\n        self.changed = true;\n      } else {\n        console.warn(\"Filter Error - No matching filter type found, ignoring: \", filter.type);\n      }\n    });\n\n    if (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.filter) {\n      this.table.modules.persistence.save(\"filter\");\n    }\n  }; //clear filters\n\n\n  Filter.prototype.clearFilter = function (all) {\n    this.filterList = [];\n\n    if (all) {\n      this.clearHeaderFilter();\n    }\n\n    this.changed = true;\n\n    if (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.filter) {\n      this.table.modules.persistence.save(\"filter\");\n    }\n  }; //clear header filters\n\n\n  Filter.prototype.clearHeaderFilter = function () {\n    var self = this;\n    this.headerFilters = {};\n    self.prevHeaderFilterChangeCheck = \"{}\";\n    this.headerFilterColumns.forEach(function (column) {\n      column.modules.filter.value = null;\n      column.modules.filter.prevSuccess = undefined;\n      self.reloadHeaderFilter(column);\n    });\n    this.changed = true;\n  }; //search data and return matching rows\n\n\n  Filter.prototype.search = function (searchType, field, type, value) {\n    var self = this,\n        activeRows = [],\n        filterList = [];\n\n    if (!Array.isArray(field)) {\n      field = [{\n        field: field,\n        type: type,\n        value: value\n      }];\n    }\n\n    field.forEach(function (filter) {\n      filter = self.findFilter(filter);\n\n      if (filter) {\n        filterList.push(filter);\n      }\n    });\n    this.table.rowManager.rows.forEach(function (row) {\n      var match = true;\n      filterList.forEach(function (filter) {\n        if (!self.filterRecurse(filter, row.getData())) {\n          match = false;\n        }\n      });\n\n      if (match) {\n        activeRows.push(searchType === \"data\" ? row.getData(\"data\") : row.getComponent());\n      }\n    });\n    return activeRows;\n  }; //filter row array\n\n\n  Filter.prototype.filter = function (rowList, filters) {\n    var self = this,\n        activeRows = [],\n        activeRowComponents = [];\n\n    if (self.table.options.dataFiltering) {\n      self.table.options.dataFiltering.call(self.table, self.getFilters());\n    }\n\n    if (!self.table.options.ajaxFiltering && (self.filterList.length || Object.keys(self.headerFilters).length)) {\n      rowList.forEach(function (row) {\n        if (self.filterRow(row)) {\n          activeRows.push(row);\n        }\n      });\n    } else {\n      activeRows = rowList.slice(0);\n    }\n\n    if (self.table.options.dataFiltered) {\n      activeRows.forEach(function (row) {\n        activeRowComponents.push(row.getComponent());\n      });\n      self.table.options.dataFiltered.call(self.table, self.getFilters(), activeRowComponents);\n    }\n\n    return activeRows;\n  }; //filter individual row\n\n\n  Filter.prototype.filterRow = function (row, filters) {\n    var self = this,\n        match = true,\n        data = row.getData();\n    self.filterList.forEach(function (filter) {\n      if (!self.filterRecurse(filter, data)) {\n        match = false;\n      }\n    });\n\n    for (var field in self.headerFilters) {\n      if (!self.headerFilters[field].func(data)) {\n        match = false;\n      }\n    }\n\n    return match;\n  };\n\n  Filter.prototype.filterRecurse = function (filter, data) {\n    var self = this,\n        match = false;\n\n    if (Array.isArray(filter)) {\n      filter.forEach(function (subFilter) {\n        if (self.filterRecurse(subFilter, data)) {\n          match = true;\n        }\n      });\n    } else {\n      match = filter.func(data);\n    }\n\n    return match;\n  }; //list of available filters\n\n\n  Filter.prototype.filters = {\n    //equal to\n    \"=\": function _(filterVal, rowVal, rowData, filterParams) {\n      return rowVal == filterVal ? true : false;\n    },\n    //less than\n    \"<\": function _(filterVal, rowVal, rowData, filterParams) {\n      return rowVal < filterVal ? true : false;\n    },\n    //less than or equal to\n    \"<=\": function _(filterVal, rowVal, rowData, filterParams) {\n      return rowVal <= filterVal ? true : false;\n    },\n    //greater than\n    \">\": function _(filterVal, rowVal, rowData, filterParams) {\n      return rowVal > filterVal ? true : false;\n    },\n    //greater than or equal to\n    \">=\": function _(filterVal, rowVal, rowData, filterParams) {\n      return rowVal >= filterVal ? true : false;\n    },\n    //not equal to\n    \"!=\": function _(filterVal, rowVal, rowData, filterParams) {\n      return rowVal != filterVal ? true : false;\n    },\n    \"regex\": function regex(filterVal, rowVal, rowData, filterParams) {\n      if (typeof filterVal == \"string\") {\n        filterVal = new RegExp(filterVal);\n      }\n\n      return filterVal.test(rowVal);\n    },\n    //contains the string\n    \"like\": function like(filterVal, rowVal, rowData, filterParams) {\n      if (filterVal === null || typeof filterVal === \"undefined\") {\n        return rowVal === filterVal ? true : false;\n      } else {\n        if (typeof rowVal !== 'undefined' && rowVal !== null) {\n          return String(rowVal).toLowerCase().indexOf(filterVal.toLowerCase()) > -1;\n        } else {\n          return false;\n        }\n      }\n    },\n    //contains the keywords\n    \"keywords\": function keywords(filterVal, rowVal, rowData, filterParams) {\n      var keywords = filterVal.toLowerCase().split(typeof filterParams.separator === \"undefined\" ? \" \" : filterParams.separator),\n          value = String(rowVal === null || typeof rowVal === \"undefined\" ? \"\" : rowVal).toLowerCase(),\n          matches = [];\n      keywords.forEach(function (keyword) {\n        if (value.includes(keyword)) {\n          matches.push(true);\n        }\n      });\n      return filterParams.matchAll ? matches.length === keywords.length : !!matches.length;\n    },\n    //starts with the string\n    \"starts\": function starts(filterVal, rowVal, rowData, filterParams) {\n      if (filterVal === null || typeof filterVal === \"undefined\") {\n        return rowVal === filterVal ? true : false;\n      } else {\n        if (typeof rowVal !== 'undefined' && rowVal !== null) {\n          return String(rowVal).toLowerCase().startsWith(filterVal.toLowerCase());\n        } else {\n          return false;\n        }\n      }\n    },\n    //ends with the string\n    \"ends\": function ends(filterVal, rowVal, rowData, filterParams) {\n      if (filterVal === null || typeof filterVal === \"undefined\") {\n        return rowVal === filterVal ? true : false;\n      } else {\n        if (typeof rowVal !== 'undefined' && rowVal !== null) {\n          return String(rowVal).toLowerCase().endsWith(filterVal.toLowerCase());\n        } else {\n          return false;\n        }\n      }\n    },\n    //in array\n    \"in\": function _in(filterVal, rowVal, rowData, filterParams) {\n      if (Array.isArray(filterVal)) {\n        return filterVal.length ? filterVal.indexOf(rowVal) > -1 : true;\n      } else {\n        console.warn(\"Filter Error - filter value is not an array:\", filterVal);\n        return false;\n      }\n    }\n  };\n  Tabulator.prototype.registerModule(\"filter\", Filter);\n\n  var Format = function Format(table) {\n    this.table = table; //hold Tabulator object\n  }; //initialize column formatter\n\n\n  Format.prototype.initializeColumn = function (column) {\n    column.modules.format = this.lookupFormatter(column, \"\");\n\n    if (typeof column.definition.formatterPrint !== \"undefined\") {\n      column.modules.format.print = this.lookupFormatter(column, \"Print\");\n    }\n\n    if (typeof column.definition.formatterClipboard !== \"undefined\") {\n      column.modules.format.clipboard = this.lookupFormatter(column, \"Clipboard\");\n    }\n\n    if (typeof column.definition.formatterHtmlOutput !== \"undefined\") {\n      column.modules.format.htmlOutput = this.lookupFormatter(column, \"HtmlOutput\");\n    }\n  };\n\n  Format.prototype.lookupFormatter = function (column, type) {\n    var config = {\n      params: column.definition[\"formatter\" + type + \"Params\"] || {}\n    },\n        formatter = column.definition[\"formatter\" + type]; //set column formatter\n\n    switch (typeof formatter === 'undefined' ? 'undefined' : _typeof(formatter)) {\n      case \"string\":\n        if (formatter === \"tick\") {\n          formatter = \"tickCross\";\n\n          if (typeof config.params.crossElement == \"undefined\") {\n            config.params.crossElement = false;\n          }\n\n          console.warn(\"DEPRECATION WARNING - the tick formatter has been deprecated, please use the tickCross formatter with the crossElement param set to false\");\n        }\n\n        if (this.formatters[formatter]) {\n          config.formatter = this.formatters[formatter];\n        } else {\n          console.warn(\"Formatter Error - No such formatter found: \", formatter);\n          config.formatter = this.formatters.plaintext;\n        }\n\n        break;\n\n      case \"function\":\n        config.formatter = formatter;\n        break;\n\n      default:\n        config.formatter = this.formatters.plaintext;\n        break;\n    }\n\n    return config;\n  };\n\n  Format.prototype.cellRendered = function (cell) {\n    if (cell.modules.format && cell.modules.format.renderedCallback) {\n      cell.modules.format.renderedCallback();\n    }\n  }; //return a formatted value for a cell\n\n\n  Format.prototype.formatValue = function (cell) {\n    var component = cell.getComponent(),\n        params = typeof cell.column.modules.format.params === \"function\" ? cell.column.modules.format.params(component) : cell.column.modules.format.params;\n\n    function onRendered(callback) {\n      if (!cell.modules.format) {\n        cell.modules.format = {};\n      }\n\n      cell.modules.format.renderedCallback = callback;\n    }\n\n    return cell.column.modules.format.formatter.call(this, component, params, onRendered);\n  };\n\n  Format.prototype.formatExportValue = function (cell, type) {\n    var formatter = cell.column.modules.format[type],\n        params;\n\n    if (formatter) {\n      var onRendered = function onRendered(callback) {\n        if (!cell.modules.format) {\n          cell.modules.format = {};\n        }\n\n        cell.modules.format.renderedCallback = callback;\n      };\n\n      params = typeof formatter.params === \"function\" ? formatter.params(component) : formatter.params;\n      return formatter.formatter.call(this, cell.getComponent(), params, onRendered);\n    } else {\n      return this.formatValue(cell);\n    }\n  };\n\n  Format.prototype.sanitizeHTML = function (value) {\n    if (value) {\n      var entityMap = {\n        '&': '&amp;',\n        '<': '&lt;',\n        '>': '&gt;',\n        '\"': '&quot;',\n        \"'\": '&#39;',\n        '/': '&#x2F;',\n        '`': '&#x60;',\n        '=': '&#x3D;'\n      };\n      return String(value).replace(/[&<>\"'`=\\/]/g, function (s) {\n        return entityMap[s];\n      });\n    } else {\n      return value;\n    }\n  };\n\n  Format.prototype.emptyToSpace = function (value) {\n    return value === null || typeof value === \"undefined\" || value === \"\" ? \"&nbsp;\" : value;\n  }; //get formatter for cell\n\n\n  Format.prototype.getFormatter = function (formatter) {\n    var formatter;\n\n    switch (typeof formatter === 'undefined' ? 'undefined' : _typeof(formatter)) {\n      case \"string\":\n        if (this.formatters[formatter]) {\n          formatter = this.formatters[formatter];\n        } else {\n          console.warn(\"Formatter Error - No such formatter found: \", formatter);\n          formatter = this.formatters.plaintext;\n        }\n\n        break;\n\n      case \"function\":\n        formatter = formatter;\n        break;\n\n      default:\n        formatter = this.formatters.plaintext;\n        break;\n    }\n\n    return formatter;\n  }; //default data formatters\n\n\n  Format.prototype.formatters = {\n    //plain text value\n    plaintext: function plaintext(cell, formatterParams, onRendered) {\n      return this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n    },\n    //html text value\n    html: function html(cell, formatterParams, onRendered) {\n      return cell.getValue();\n    },\n    //multiline text area\n    textarea: function textarea(cell, formatterParams, onRendered) {\n      cell.getElement().style.whiteSpace = \"pre-wrap\";\n      return this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n    },\n    //currency formatting\n    money: function money(cell, formatterParams, onRendered) {\n      var floatVal = parseFloat(cell.getValue()),\n          number,\n          integer,\n          decimal,\n          rgx;\n      var decimalSym = formatterParams.decimal || \".\";\n      var thousandSym = formatterParams.thousand || \",\";\n      var symbol = formatterParams.symbol || \"\";\n      var after = !!formatterParams.symbolAfter;\n      var precision = typeof formatterParams.precision !== \"undefined\" ? formatterParams.precision : 2;\n\n      if (isNaN(floatVal)) {\n        return this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n      }\n\n      number = precision !== false ? floatVal.toFixed(precision) : floatVal;\n      number = String(number).split(\".\");\n      integer = number[0];\n      decimal = number.length > 1 ? decimalSym + number[1] : \"\";\n      rgx = /(\\d+)(\\d{3})/;\n\n      while (rgx.test(integer)) {\n        integer = integer.replace(rgx, \"$1\" + thousandSym + \"$2\");\n      }\n\n      return after ? integer + decimal + symbol : symbol + integer + decimal;\n    },\n    //clickable anchor tag\n    link: function link(cell, formatterParams, onRendered) {\n      var value = cell.getValue(),\n          urlPrefix = formatterParams.urlPrefix || \"\",\n          download = formatterParams.download,\n          label = value,\n          el = document.createElement(\"a\"),\n          data;\n\n      if (formatterParams.labelField) {\n        data = cell.getData();\n        label = data[formatterParams.labelField];\n      }\n\n      if (formatterParams.label) {\n        switch (_typeof(formatterParams.label)) {\n          case \"string\":\n            label = formatterParams.label;\n            break;\n\n          case \"function\":\n            label = formatterParams.label(cell);\n            break;\n        }\n      }\n\n      if (label) {\n        if (formatterParams.urlField) {\n          data = cell.getData();\n          value = data[formatterParams.urlField];\n        }\n\n        if (formatterParams.url) {\n          switch (_typeof(formatterParams.url)) {\n            case \"string\":\n              value = formatterParams.url;\n              break;\n\n            case \"function\":\n              value = formatterParams.url(cell);\n              break;\n          }\n        }\n\n        el.setAttribute(\"href\", urlPrefix + value);\n\n        if (formatterParams.target) {\n          el.setAttribute(\"target\", formatterParams.target);\n        }\n\n        if (formatterParams.download) {\n          if (typeof download == \"function\") {\n            download = download(cell);\n          } else {\n            download = download === true ? \"\" : download;\n          }\n\n          el.setAttribute(\"download\", download);\n        }\n\n        el.innerHTML = this.emptyToSpace(this.sanitizeHTML(label));\n        return el;\n      } else {\n        return \"&nbsp;\";\n      }\n    },\n    //image element\n    image: function image(cell, formatterParams, onRendered) {\n      var el = document.createElement(\"img\");\n      el.setAttribute(\"src\", cell.getValue());\n\n      switch (_typeof(formatterParams.height)) {\n        case \"number\":\n          el.style.height = formatterParams.height + \"px\";\n          break;\n\n        case \"string\":\n          el.style.height = formatterParams.height;\n          break;\n      }\n\n      switch (_typeof(formatterParams.width)) {\n        case \"number\":\n          el.style.width = formatterParams.width + \"px\";\n          break;\n\n        case \"string\":\n          el.style.width = formatterParams.width;\n          break;\n      }\n\n      el.addEventListener(\"load\", function () {\n        cell.getRow().normalizeHeight();\n      });\n      return el;\n    },\n    //tick or cross\n    tickCross: function tickCross(cell, formatterParams, onRendered) {\n      var value = cell.getValue(),\n          element = cell.getElement(),\n          empty = formatterParams.allowEmpty,\n          truthy = formatterParams.allowTruthy,\n          tick = typeof formatterParams.tickElement !== \"undefined\" ? formatterParams.tickElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>',\n          cross = typeof formatterParams.crossElement !== \"undefined\" ? formatterParams.crossElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\"  viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n\n      if (truthy && value || value === true || value === \"true\" || value === \"True\" || value === 1 || value === \"1\") {\n        element.setAttribute(\"aria-checked\", true);\n        return tick || \"\";\n      } else {\n        if (empty && (value === \"null\" || value === \"\" || value === null || typeof value === \"undefined\")) {\n          element.setAttribute(\"aria-checked\", \"mixed\");\n          return \"\";\n        } else {\n          element.setAttribute(\"aria-checked\", false);\n          return cross || \"\";\n        }\n      }\n    },\n    datetime: function datetime(cell, formatterParams, onRendered) {\n      var inputFormat = formatterParams.inputFormat || \"YYYY-MM-DD hh:mm:ss\";\n      var outputFormat = formatterParams.outputFormat || \"DD/MM/YYYY hh:mm:ss\";\n      var invalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n      var value = cell.getValue();\n      var newDatetime = moment(value, inputFormat);\n\n      if (newDatetime.isValid()) {\n        return formatterParams.timezone ? newDatetime.tz(formatterParams.timezone).format(outputFormat) : newDatetime.format(outputFormat);\n      } else {\n        if (invalid === true) {\n          return value;\n        } else if (typeof invalid === \"function\") {\n          return invalid(value);\n        } else {\n          return invalid;\n        }\n      }\n    },\n    datetimediff: function datetime(cell, formatterParams, onRendered) {\n      var inputFormat = formatterParams.inputFormat || \"YYYY-MM-DD hh:mm:ss\";\n      var invalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n      var suffix = typeof formatterParams.suffix !== \"undefined\" ? formatterParams.suffix : false;\n      var unit = typeof formatterParams.unit !== \"undefined\" ? formatterParams.unit : undefined;\n      var humanize = typeof formatterParams.humanize !== \"undefined\" ? formatterParams.humanize : false;\n      var date = typeof formatterParams.date !== \"undefined\" ? formatterParams.date : moment();\n      var value = cell.getValue();\n      var newDatetime = moment(value, inputFormat);\n\n      if (newDatetime.isValid()) {\n        if (humanize) {\n          return moment.duration(newDatetime.diff(date)).humanize(suffix);\n        } else {\n          return newDatetime.diff(date, unit) + (suffix ? \" \" + suffix : \"\");\n        }\n      } else {\n        if (invalid === true) {\n          return value;\n        } else if (typeof invalid === \"function\") {\n          return invalid(value);\n        } else {\n          return invalid;\n        }\n      }\n    },\n    //select\n    lookup: function lookup(cell, formatterParams, onRendered) {\n      var value = cell.getValue();\n\n      if (typeof formatterParams[value] === \"undefined\") {\n        console.warn('Missing display value for ' + value);\n        return value;\n      }\n\n      return formatterParams[value];\n    },\n    //star rating\n    star: function star(cell, formatterParams, onRendered) {\n      var value = cell.getValue(),\n          element = cell.getElement(),\n          maxStars = formatterParams && formatterParams.stars ? formatterParams.stars : 5,\n          stars = document.createElement(\"span\"),\n          star = document.createElementNS('http://www.w3.org/2000/svg', \"svg\"),\n          starActive = '<polygon fill=\"#FFEA00\" stroke=\"#C1AB60\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>',\n          starInactive = '<polygon fill=\"#D2D2D2\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>'; //style stars holder\n\n      stars.style.verticalAlign = \"middle\"; //style star\n\n      star.setAttribute(\"width\", \"14\");\n      star.setAttribute(\"height\", \"14\");\n      star.setAttribute(\"viewBox\", \"0 0 512 512\");\n      star.setAttribute(\"xml:space\", \"preserve\");\n      star.style.padding = \"0 1px\";\n      value = value && !isNaN(value) ? parseInt(value) : 0;\n      value = Math.max(0, Math.min(value, maxStars));\n\n      for (var i = 1; i <= maxStars; i++) {\n        var nextStar = star.cloneNode(true);\n        nextStar.innerHTML = i <= value ? starActive : starInactive;\n        stars.appendChild(nextStar);\n      }\n\n      element.style.whiteSpace = \"nowrap\";\n      element.style.overflow = \"hidden\";\n      element.style.textOverflow = \"ellipsis\";\n      element.setAttribute(\"aria-label\", value);\n      return stars;\n    },\n    traffic: function traffic(cell, formatterParams, onRendered) {\n      var value = this.sanitizeHTML(cell.getValue()) || 0,\n          el = document.createElement(\"span\"),\n          max = formatterParams && formatterParams.max ? formatterParams.max : 100,\n          min = formatterParams && formatterParams.min ? formatterParams.min : 0,\n          colors = formatterParams && typeof formatterParams.color !== \"undefined\" ? formatterParams.color : [\"red\", \"orange\", \"green\"],\n          color = \"#666666\",\n          percent,\n          percentValue;\n\n      if (isNaN(value) || typeof cell.getValue() === \"undefined\") {\n        return;\n      }\n\n      el.classList.add(\"tabulator-traffic-light\"); //make sure value is in range\n\n      percentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n      percentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min; //workout percentage\n\n      percent = (max - min) / 100;\n      percentValue = Math.round((percentValue - min) / percent); //set color\n\n      switch (typeof colors === 'undefined' ? 'undefined' : _typeof(colors)) {\n        case \"string\":\n          color = colors;\n          break;\n\n        case \"function\":\n          color = colors(value);\n          break;\n\n        case \"object\":\n          if (Array.isArray(colors)) {\n            var unit = 100 / colors.length;\n            var index = Math.floor(percentValue / unit);\n            index = Math.min(index, colors.length - 1);\n            index = Math.max(index, 0);\n            color = colors[index];\n            break;\n          }\n\n      }\n\n      el.style.backgroundColor = color;\n      return el;\n    },\n    //progress bar\n    progress: function progress(cell, formatterParams, onRendered) {\n      //progress bar\n      var value = this.sanitizeHTML(cell.getValue()) || 0,\n          element = cell.getElement(),\n          max = formatterParams && formatterParams.max ? formatterParams.max : 100,\n          min = formatterParams && formatterParams.min ? formatterParams.min : 0,\n          legendAlign = formatterParams && formatterParams.legendAlign ? formatterParams.legendAlign : \"center\",\n          percent,\n          percentValue,\n          color,\n          legend,\n          legendColor,\n          top,\n          left,\n          right,\n          bottom; //make sure value is in range\n\n      percentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n      percentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min; //workout percentage\n\n      percent = (max - min) / 100;\n      percentValue = Math.round((percentValue - min) / percent); //set bar color\n\n      switch (_typeof(formatterParams.color)) {\n        case \"string\":\n          color = formatterParams.color;\n          break;\n\n        case \"function\":\n          color = formatterParams.color(value);\n          break;\n\n        case \"object\":\n          if (Array.isArray(formatterParams.color)) {\n            var unit = 100 / formatterParams.color.length;\n            var index = Math.floor(percentValue / unit);\n            index = Math.min(index, formatterParams.color.length - 1);\n            index = Math.max(index, 0);\n            color = formatterParams.color[index];\n            break;\n          }\n\n        default:\n          color = \"#2DC214\";\n      } //generate legend\n\n\n      switch (_typeof(formatterParams.legend)) {\n        case \"string\":\n          legend = formatterParams.legend;\n          break;\n\n        case \"function\":\n          legend = formatterParams.legend(value);\n          break;\n\n        case \"boolean\":\n          legend = value;\n          break;\n\n        default:\n          legend = false;\n      } //set legend color\n\n\n      switch (_typeof(formatterParams.legendColor)) {\n        case \"string\":\n          legendColor = formatterParams.legendColor;\n          break;\n\n        case \"function\":\n          legendColor = formatterParams.legendColor(value);\n          break;\n\n        case \"object\":\n          if (Array.isArray(formatterParams.legendColor)) {\n            var unit = 100 / formatterParams.legendColor.length;\n            var index = Math.floor(percentValue / unit);\n            index = Math.min(index, formatterParams.legendColor.length - 1);\n            index = Math.max(index, 0);\n            legendColor = formatterParams.legendColor[index];\n          }\n\n          break;\n\n        default:\n          legendColor = \"#000\";\n      }\n\n      element.style.minWidth = \"30px\";\n      element.style.position = \"relative\";\n      element.setAttribute(\"aria-label\", percentValue);\n      var barEl = document.createElement(\"div\");\n      barEl.style.display = \"inline-block\";\n      barEl.style.position = \"relative\";\n      barEl.style.width = percentValue + \"%\";\n      barEl.style.backgroundColor = color;\n      barEl.style.height = \"100%\";\n      barEl.setAttribute('data-max', max);\n      barEl.setAttribute('data-min', min);\n\n      if (legend) {\n        var legendEl = document.createElement(\"div\");\n        legendEl.style.position = \"absolute\";\n        legendEl.style.top = \"4px\";\n        legendEl.style.left = 0;\n        legendEl.style.textAlign = legendAlign;\n        legendEl.style.width = \"100%\";\n        legendEl.style.color = legendColor;\n        legendEl.innerHTML = legend;\n      }\n\n      onRendered(function () {\n        //handle custom element needed if formatter is to be included in printed/downloaded output\n        if (!(cell instanceof CellComponent)) {\n          var holderEl = document.createElement(\"div\");\n          holderEl.style.position = \"absolute\";\n          holderEl.style.top = \"4px\";\n          holderEl.style.bottom = \"4px\";\n          holderEl.style.left = \"4px\";\n          holderEl.style.right = \"4px\";\n          element.appendChild(holderEl);\n          element = holderEl;\n        }\n\n        element.appendChild(barEl);\n\n        if (legend) {\n          element.appendChild(legendEl);\n        }\n      });\n      return \"\";\n    },\n    //background color\n    color: function color(cell, formatterParams, onRendered) {\n      cell.getElement().style.backgroundColor = this.sanitizeHTML(cell.getValue());\n      return \"\";\n    },\n    //tick icon\n    buttonTick: function buttonTick(cell, formatterParams, onRendered) {\n      return '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>';\n    },\n    //cross icon\n    buttonCross: function buttonCross(cell, formatterParams, onRendered) {\n      return '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n    },\n    //current row number\n    rownum: function rownum(cell, formatterParams, onRendered) {\n      return this.table.rowManager.activeRows.indexOf(cell.getRow()._getSelf()) + 1;\n    },\n    //row handle\n    handle: function handle(cell, formatterParams, onRendered) {\n      cell.getElement().classList.add(\"tabulator-row-handle\");\n      return \"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>\";\n    },\n    responsiveCollapse: function responsiveCollapse(cell, formatterParams, onRendered) {\n      var self = this,\n          open = false,\n          el = document.createElement(\"div\"),\n          config = cell.getRow()._row.modules.responsiveLayout;\n\n      el.classList.add(\"tabulator-responsive-collapse-toggle\");\n      el.innerHTML = \"<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>\";\n      cell.getElement().classList.add(\"tabulator-row-handle\");\n\n      function toggleList(isOpen) {\n        var collapseEl = config.element;\n        config.open = isOpen;\n\n        if (collapseEl) {\n          if (config.open) {\n            el.classList.add(\"open\");\n            collapseEl.style.display = '';\n          } else {\n            el.classList.remove(\"open\");\n            collapseEl.style.display = 'none';\n          }\n        }\n      }\n\n      el.addEventListener(\"click\", function (e) {\n        e.stopImmediatePropagation();\n        toggleList(!config.open);\n      });\n      toggleList(config.open);\n      return el;\n    },\n    rowSelection: function rowSelection(cell) {\n      var _this56 = this;\n\n      var checkbox = document.createElement(\"input\");\n      checkbox.type = 'checkbox';\n\n      if (this.table.modExists(\"selectRow\", true)) {\n        checkbox.addEventListener(\"click\", function (e) {\n          e.stopPropagation();\n        });\n\n        if (typeof cell.getRow == 'function') {\n          var row = cell.getRow();\n          checkbox.addEventListener(\"change\", function (e) {\n            row.toggleSelect();\n          });\n          checkbox.checked = row.isSelected();\n          this.table.modules.selectRow.registerRowSelectCheckbox(row, checkbox);\n        } else {\n          checkbox.addEventListener(\"change\", function (e) {\n            if (_this56.table.modules.selectRow.selectedRows.length) {\n              _this56.table.deselectRow();\n            } else {\n              _this56.table.selectRow();\n            }\n          });\n          this.table.modules.selectRow.registerHeaderSelectCheckbox(checkbox);\n        }\n      }\n\n      return checkbox;\n    }\n  };\n  Tabulator.prototype.registerModule(\"format\", Format);\n\n  var FrozenColumns = function FrozenColumns(table) {\n    this.table = table; //hold Tabulator object\n\n    this.leftColumns = [];\n    this.rightColumns = [];\n    this.leftMargin = 0;\n    this.rightMargin = 0;\n    this.rightPadding = 0;\n    this.initializationMode = \"left\";\n    this.active = false;\n    this.scrollEndTimer = false;\n  }; //reset initial state\n\n\n  FrozenColumns.prototype.reset = function () {\n    this.initializationMode = \"left\";\n    this.leftColumns = [];\n    this.rightColumns = [];\n    this.leftMargin = 0;\n    this.rightMargin = 0;\n    this.rightMargin = 0;\n    this.active = false;\n    this.table.columnManager.headersElement.style.marginLeft = 0;\n    this.table.columnManager.element.style.paddingRight = 0;\n  }; //initialize specific column\n\n\n  FrozenColumns.prototype.initializeColumn = function (column) {\n    var config = {\n      margin: 0,\n      edge: false\n    };\n\n    if (!column.isGroup) {\n      if (this.frozenCheck(column)) {\n        config.position = this.initializationMode;\n\n        if (this.initializationMode == \"left\") {\n          this.leftColumns.push(column);\n        } else {\n          this.rightColumns.unshift(column);\n        }\n\n        this.active = true;\n        column.modules.frozen = config;\n      } else {\n        this.initializationMode = \"right\";\n      }\n    }\n  };\n\n  FrozenColumns.prototype.frozenCheck = function (column) {\n    var frozen = false;\n\n    if (column.parent.isGroup && column.definition.frozen) {\n      console.warn(\"Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups\");\n    }\n\n    if (column.parent.isGroup) {\n      return this.frozenCheck(column.parent);\n    } else {\n      return column.definition.frozen;\n    }\n\n    return frozen;\n  }; //quick layout to smooth horizontal scrolling\n\n\n  FrozenColumns.prototype.scrollHorizontal = function () {\n    var _this57 = this;\n\n    var rows;\n\n    if (this.active) {\n      clearTimeout(this.scrollEndTimer); //layout all rows after scroll is complete\n\n      this.scrollEndTimer = setTimeout(function () {\n        _this57.layout();\n      }, 100);\n      rows = this.table.rowManager.getVisibleRows();\n      this.calcMargins();\n      this.layoutColumnPosition();\n      this.layoutCalcRows();\n      rows.forEach(function (row) {\n        if (row.type === \"row\") {\n          _this57.layoutRow(row);\n        }\n      });\n      this.table.rowManager.tableElement.style.marginRight = this.rightMargin;\n    }\n  }; //calculate margins for rows\n\n\n  FrozenColumns.prototype.calcMargins = function () {\n    this.leftMargin = this._calcSpace(this.leftColumns, this.leftColumns.length) + \"px\";\n    this.table.columnManager.headersElement.style.marginLeft = this.leftMargin;\n    this.rightMargin = this._calcSpace(this.rightColumns, this.rightColumns.length) + \"px\";\n    this.table.columnManager.element.style.paddingRight = this.rightMargin; //calculate right frozen columns\n\n    this.rightPadding = this.table.rowManager.element.clientWidth + this.table.columnManager.scrollLeft;\n  }; //layout calculation rows\n\n\n  FrozenColumns.prototype.layoutCalcRows = function () {\n    if (this.table.modExists(\"columnCalcs\")) {\n      if (this.table.modules.columnCalcs.topInitialized && this.table.modules.columnCalcs.topRow) {\n        this.layoutRow(this.table.modules.columnCalcs.topRow);\n      }\n\n      if (this.table.modules.columnCalcs.botInitialized && this.table.modules.columnCalcs.botRow) {\n        this.layoutRow(this.table.modules.columnCalcs.botRow);\n      }\n    }\n  }; //calculate column positions and layout headers\n\n\n  FrozenColumns.prototype.layoutColumnPosition = function (allCells) {\n    var _this58 = this;\n\n    var leftParents = [];\n    this.leftColumns.forEach(function (column, i) {\n      column.modules.frozen.margin = _this58._calcSpace(_this58.leftColumns, i) + _this58.table.columnManager.scrollLeft + \"px\";\n\n      if (i == _this58.leftColumns.length - 1) {\n        column.modules.frozen.edge = true;\n      } else {\n        column.modules.frozen.edge = false;\n      }\n\n      if (column.parent.isGroup) {\n        var parentEl = _this58.getColGroupParentElement(column);\n\n        if (!leftParents.includes(parentEl)) {\n          _this58.layoutElement(parentEl, column);\n\n          leftParents.push(parentEl);\n        }\n\n        if (column.modules.frozen.edge) {\n          parentEl.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\n        }\n      } else {\n        _this58.layoutElement(column.getElement(), column);\n      }\n\n      if (allCells) {\n        column.cells.forEach(function (cell) {\n          _this58.layoutElement(cell.getElement(), column);\n        });\n      }\n    });\n    this.rightColumns.forEach(function (column, i) {\n      column.modules.frozen.margin = _this58.rightPadding - _this58._calcSpace(_this58.rightColumns, i + 1) + \"px\";\n\n      if (i == _this58.rightColumns.length - 1) {\n        column.modules.frozen.edge = true;\n      } else {\n        column.modules.frozen.edge = false;\n      }\n\n      if (column.parent.isGroup) {\n        _this58.layoutElement(_this58.getColGroupParentElement(column), column);\n      } else {\n        _this58.layoutElement(column.getElement(), column);\n      }\n\n      if (allCells) {\n        column.cells.forEach(function (cell) {\n          _this58.layoutElement(cell.getElement(), column);\n        });\n      }\n    });\n  };\n\n  FrozenColumns.prototype.getColGroupParentElement = function (column) {\n    return column.parent.isGroup ? this.getColGroupParentElement(column.parent) : column.getElement();\n  }; //layout columns appropropriatly\n\n\n  FrozenColumns.prototype.layout = function () {\n    var self = this,\n        rightMargin = 0;\n\n    if (self.active) {\n      //calculate row padding\n      this.calcMargins(); // self.table.rowManager.activeRows.forEach(function(row){\n      // \tself.layoutRow(row);\n      // });\n      // if(self.table.options.dataTree){\n\n      self.table.rowManager.getDisplayRows().forEach(function (row) {\n        if (row.type === \"row\") {\n          self.layoutRow(row);\n        }\n      }); // }\n\n      this.layoutCalcRows(); //calculate left columns\n\n      this.layoutColumnPosition(true); // if(tableHolder.scrollHeight > tableHolder.clientHeight){\n      // \trightMargin -= tableHolder.offsetWidth - tableHolder.clientWidth;\n      // }\n\n      this.table.rowManager.tableElement.style.marginRight = this.rightMargin;\n    }\n  };\n\n  FrozenColumns.prototype.layoutRow = function (row) {\n    var _this59 = this;\n\n    var rowEl = row.getElement();\n    rowEl.style.paddingLeft = this.leftMargin; // rowEl.style.paddingRight = this.rightMargin + \"px\";\n\n    this.leftColumns.forEach(function (column) {\n      var cell = row.getCell(column);\n\n      if (cell) {\n        _this59.layoutElement(cell.getElement(), column);\n      }\n    });\n    this.rightColumns.forEach(function (column) {\n      var cell = row.getCell(column);\n\n      if (cell) {\n        _this59.layoutElement(cell.getElement(), column);\n      }\n    });\n  };\n\n  FrozenColumns.prototype.layoutElement = function (element, column) {\n    if (column.modules.frozen) {\n      element.style.position = \"absolute\";\n      element.style.left = column.modules.frozen.margin;\n      element.classList.add(\"tabulator-frozen\");\n\n      if (column.modules.frozen.edge) {\n        element.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\n      }\n    }\n  };\n\n  FrozenColumns.prototype._calcSpace = function (columns, index) {\n    var width = 0;\n\n    for (var _i9 = 0; _i9 < index; _i9++) {\n      if (columns[_i9].visible) {\n        width += columns[_i9].getWidth();\n      }\n    }\n\n    return width;\n  };\n\n  Tabulator.prototype.registerModule(\"frozenColumns\", FrozenColumns);\n\n  var FrozenRows = function FrozenRows(table) {\n    this.table = table; //hold Tabulator object\n\n    this.topElement = document.createElement(\"div\");\n    this.rows = [];\n    this.displayIndex = 0; //index in display pipeline\n  };\n\n  FrozenRows.prototype.initialize = function () {\n    this.rows = [];\n    this.topElement.classList.add(\"tabulator-frozen-rows-holder\"); // this.table.columnManager.element.append(this.topElement);\n\n    this.table.columnManager.getElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\n  };\n\n  FrozenRows.prototype.setDisplayIndex = function (index) {\n    this.displayIndex = index;\n  };\n\n  FrozenRows.prototype.getDisplayIndex = function () {\n    return this.displayIndex;\n  };\n\n  FrozenRows.prototype.isFrozen = function () {\n    return !!this.rows.length;\n  }; //filter frozen rows out of display data\n\n\n  FrozenRows.prototype.getRows = function (rows) {\n    var self = this,\n        frozen = [],\n        output = rows.slice(0);\n    this.rows.forEach(function (row) {\n      var index = output.indexOf(row);\n\n      if (index > -1) {\n        output.splice(index, 1);\n      }\n    });\n    return output;\n  };\n\n  FrozenRows.prototype.freezeRow = function (row) {\n    if (!row.modules.frozen) {\n      row.modules.frozen = true;\n      this.topElement.appendChild(row.getElement());\n      row.initialize();\n      row.normalizeHeight();\n      this.table.rowManager.adjustTableSize();\n      this.rows.push(row);\n      this.table.rowManager.refreshActiveData(\"display\");\n      this.styleRows();\n    } else {\n      console.warn(\"Freeze Error - Row is already frozen\");\n    }\n  };\n\n  FrozenRows.prototype.unfreezeRow = function (row) {\n    var index = this.rows.indexOf(row);\n\n    if (row.modules.frozen) {\n      row.modules.frozen = false;\n      this.detachRow(row);\n      this.table.rowManager.adjustTableSize();\n      this.table.rowManager.refreshActiveData(\"display\");\n\n      if (this.rows.length) {\n        this.styleRows();\n      }\n    } else {\n      console.warn(\"Freeze Error - Row is already unfrozen\");\n    }\n  };\n\n  FrozenRows.prototype.detachRow = function (row) {\n    var index = this.rows.indexOf(row);\n\n    if (index > -1) {\n      var rowEl = row.getElement();\n      rowEl.parentNode.removeChild(rowEl);\n      this.rows.splice(index, 1);\n    }\n  };\n\n  FrozenRows.prototype.styleRows = function (row) {\n    var self = this;\n    this.rows.forEach(function (row, i) {\n      self.table.rowManager.styleRow(row, i);\n    });\n  };\n\n  Tabulator.prototype.registerModule(\"frozenRows\", FrozenRows); //public group object\n\n  var GroupComponent = function GroupComponent(group) {\n    this._group = group;\n    this.type = \"GroupComponent\";\n  };\n\n  GroupComponent.prototype.getKey = function () {\n    return this._group.key;\n  };\n\n  GroupComponent.prototype.getField = function () {\n    return this._group.field;\n  };\n\n  GroupComponent.prototype.getElement = function () {\n    return this._group.element;\n  };\n\n  GroupComponent.prototype.getRows = function () {\n    return this._group.getRows(true);\n  };\n\n  GroupComponent.prototype.getSubGroups = function () {\n    return this._group.getSubGroups(true);\n  };\n\n  GroupComponent.prototype.getParentGroup = function () {\n    return this._group.parent ? this._group.parent.getComponent() : false;\n  };\n\n  GroupComponent.prototype.getVisibility = function () {\n    console.warn(\"getVisibility function is deprecated, you should now use the isVisible function\");\n    return this._group.visible;\n  };\n\n  GroupComponent.prototype.isVisible = function () {\n    return this._group.visible;\n  };\n\n  GroupComponent.prototype.show = function () {\n    this._group.show();\n  };\n\n  GroupComponent.prototype.hide = function () {\n    this._group.hide();\n  };\n\n  GroupComponent.prototype.toggle = function () {\n    this._group.toggleVisibility();\n  };\n\n  GroupComponent.prototype._getSelf = function () {\n    return this._group;\n  };\n\n  GroupComponent.prototype.getTable = function () {\n    return this._group.groupManager.table;\n  }; //////////////////////////////////////////////////\n  //////////////// Group Functions /////////////////\n  //////////////////////////////////////////////////\n\n\n  var Group = function Group(groupManager, parent, level, key, field, generator, oldGroup) {\n    this.groupManager = groupManager;\n    this.parent = parent;\n    this.key = key;\n    this.level = level;\n    this.field = field;\n    this.hasSubGroups = level < groupManager.groupIDLookups.length - 1;\n    this.addRow = this.hasSubGroups ? this._addRowToGroup : this._addRow;\n    this.type = \"group\"; //type of element\n\n    this.old = oldGroup;\n    this.rows = [];\n    this.groups = [];\n    this.groupList = [];\n    this.generator = generator;\n    this.elementContents = false;\n    this.height = 0;\n    this.outerHeight = 0;\n    this.initialized = false;\n    this.calcs = {};\n    this.initialized = false;\n    this.modules = {};\n    this.arrowElement = false;\n    this.visible = oldGroup ? oldGroup.visible : typeof groupManager.startOpen[level] !== \"undefined\" ? groupManager.startOpen[level] : groupManager.startOpen[0];\n    this.component = null;\n    this.createElements();\n    this.addBindings();\n    this.createValueGroups();\n  };\n\n  Group.prototype.wipe = function () {\n    if (this.groupList.length) {\n      this.groupList.forEach(function (group) {\n        group.wipe();\n      });\n    } else {\n      this.element = false;\n      this.arrowElement = false;\n      this.elementContents = false;\n    }\n  };\n\n  Group.prototype.createElements = function () {\n    var arrow = document.createElement(\"div\");\n    arrow.classList.add(\"tabulator-arrow\");\n    this.element = document.createElement(\"div\");\n    this.element.classList.add(\"tabulator-row\");\n    this.element.classList.add(\"tabulator-group\");\n    this.element.classList.add(\"tabulator-group-level-\" + this.level);\n    this.element.setAttribute(\"role\", \"rowgroup\");\n    this.arrowElement = document.createElement(\"div\");\n    this.arrowElement.classList.add(\"tabulator-group-toggle\");\n    this.arrowElement.appendChild(arrow); //setup movable rows\n\n    if (this.groupManager.table.options.movableRows !== false && this.groupManager.table.modExists(\"moveRow\")) {\n      this.groupManager.table.modules.moveRow.initializeGroupHeader(this);\n    }\n  };\n\n  Group.prototype.createValueGroups = function () {\n    var _this60 = this;\n\n    var level = this.level + 1;\n\n    if (this.groupManager.allowedValues && this.groupManager.allowedValues[level]) {\n      this.groupManager.allowedValues[level].forEach(function (value) {\n        _this60._createGroup(value, level);\n      });\n    }\n  };\n\n  Group.prototype.addBindings = function () {\n    var self = this,\n        dblTap,\n        tapHold,\n        tap,\n        toggleElement; //handle group click events\n\n    if (self.groupManager.table.options.groupClick) {\n      self.element.addEventListener(\"click\", function (e) {\n        self.groupManager.table.options.groupClick.call(self.groupManager.table, e, self.getComponent());\n      });\n    }\n\n    if (self.groupManager.table.options.groupDblClick) {\n      self.element.addEventListener(\"dblclick\", function (e) {\n        self.groupManager.table.options.groupDblClick.call(self.groupManager.table, e, self.getComponent());\n      });\n    }\n\n    if (self.groupManager.table.options.groupContext) {\n      self.element.addEventListener(\"contextmenu\", function (e) {\n        self.groupManager.table.options.groupContext.call(self.groupManager.table, e, self.getComponent());\n      });\n    }\n\n    if (self.groupManager.table.options.groupContextMenu && self.groupManager.table.modExists(\"menu\")) {\n      self.groupManager.table.modules.menu.initializeGroup.call(self.groupManager.table.modules.menu, self);\n    }\n\n    if (self.groupManager.table.options.groupTap) {\n      tap = false;\n      self.element.addEventListener(\"touchstart\", function (e) {\n        tap = true;\n      }, {\n        passive: true\n      });\n      self.element.addEventListener(\"touchend\", function (e) {\n        if (tap) {\n          self.groupManager.table.options.groupTap(e, self.getComponent());\n        }\n\n        tap = false;\n      });\n    }\n\n    if (self.groupManager.table.options.groupDblTap) {\n      dblTap = null;\n      self.element.addEventListener(\"touchend\", function (e) {\n        if (dblTap) {\n          clearTimeout(dblTap);\n          dblTap = null;\n          self.groupManager.table.options.groupDblTap(e, self.getComponent());\n        } else {\n          dblTap = setTimeout(function () {\n            clearTimeout(dblTap);\n            dblTap = null;\n          }, 300);\n        }\n      });\n    }\n\n    if (self.groupManager.table.options.groupTapHold) {\n      tapHold = null;\n      self.element.addEventListener(\"touchstart\", function (e) {\n        clearTimeout(tapHold);\n        tapHold = setTimeout(function () {\n          clearTimeout(tapHold);\n          tapHold = null;\n          tap = false;\n          self.groupManager.table.options.groupTapHold(e, self.getComponent());\n        }, 1000);\n      }, {\n        passive: true\n      });\n      self.element.addEventListener(\"touchend\", function (e) {\n        clearTimeout(tapHold);\n        tapHold = null;\n      });\n    }\n\n    if (self.groupManager.table.options.groupToggleElement) {\n      toggleElement = self.groupManager.table.options.groupToggleElement == \"arrow\" ? self.arrowElement : self.element;\n      toggleElement.addEventListener(\"click\", function (e) {\n        e.stopPropagation();\n        e.stopImmediatePropagation();\n        self.toggleVisibility();\n      });\n    }\n  };\n\n  Group.prototype._createGroup = function (groupID, level) {\n    var groupKey = level + \"_\" + groupID;\n    var group = new Group(this.groupManager, this, level, groupID, this.groupManager.groupIDLookups[level].field, this.groupManager.headerGenerator[level] || this.groupManager.headerGenerator[0], this.old ? this.old.groups[groupKey] : false);\n    this.groups[groupKey] = group;\n    this.groupList.push(group);\n  };\n\n  Group.prototype._addRowToGroup = function (row) {\n    var level = this.level + 1;\n\n    if (this.hasSubGroups) {\n      var groupID = this.groupManager.groupIDLookups[level].func(row.getData()),\n          groupKey = level + \"_\" + groupID;\n\n      if (this.groupManager.allowedValues && this.groupManager.allowedValues[level]) {\n        if (this.groups[groupKey]) {\n          this.groups[groupKey].addRow(row);\n        }\n      } else {\n        if (!this.groups[groupKey]) {\n          this._createGroup(groupID, level);\n        }\n\n        this.groups[groupKey].addRow(row);\n      }\n    }\n  };\n\n  Group.prototype._addRow = function (row) {\n    this.rows.push(row);\n    row.modules.group = this;\n  };\n\n  Group.prototype.insertRow = function (row, to, after) {\n    var data = this.conformRowData({});\n    row.updateData(data);\n    var toIndex = this.rows.indexOf(to);\n\n    if (toIndex > -1) {\n      if (after) {\n        this.rows.splice(toIndex + 1, 0, row);\n      } else {\n        this.rows.splice(toIndex, 0, row);\n      }\n    } else {\n      if (after) {\n        this.rows.push(row);\n      } else {\n        this.rows.unshift(row);\n      }\n    }\n\n    row.modules.group = this;\n    this.generateGroupHeaderContents();\n\n    if (this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\") {\n      this.groupManager.table.modules.columnCalcs.recalcGroup(this);\n    }\n\n    this.groupManager.updateGroupRows(true);\n  };\n\n  Group.prototype.scrollHeader = function (left) {\n    this.arrowElement.style.marginLeft = left;\n    this.groupList.forEach(function (child) {\n      child.scrollHeader(left);\n    });\n  };\n\n  Group.prototype.getRowIndex = function (row) {}; //update row data to match grouping contraints\n\n\n  Group.prototype.conformRowData = function (data) {\n    if (this.field) {\n      data[this.field] = this.key;\n    } else {\n      console.warn(\"Data Conforming Error - Cannot conform row data to match new group as groupBy is a function\");\n    }\n\n    if (this.parent) {\n      data = this.parent.conformRowData(data);\n    }\n\n    return data;\n  };\n\n  Group.prototype.removeRow = function (row) {\n    var index = this.rows.indexOf(row);\n    var el = row.getElement();\n\n    if (index > -1) {\n      this.rows.splice(index, 1);\n    }\n\n    if (!this.groupManager.table.options.groupValues && !this.rows.length) {\n      if (this.parent) {\n        this.parent.removeGroup(this);\n      } else {\n        this.groupManager.removeGroup(this);\n      }\n\n      this.groupManager.updateGroupRows(true);\n    } else {\n      if (el.parentNode) {\n        el.parentNode.removeChild(el);\n      }\n\n      this.generateGroupHeaderContents();\n\n      if (this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\") {\n        this.groupManager.table.modules.columnCalcs.recalcGroup(this);\n      }\n    }\n  };\n\n  Group.prototype.removeGroup = function (group) {\n    var groupKey = group.level + \"_\" + group.key,\n        index;\n\n    if (this.groups[groupKey]) {\n      delete this.groups[groupKey];\n      index = this.groupList.indexOf(group);\n\n      if (index > -1) {\n        this.groupList.splice(index, 1);\n      }\n\n      if (!this.groupList.length) {\n        if (this.parent) {\n          this.parent.removeGroup(this);\n        } else {\n          this.groupManager.removeGroup(this);\n        }\n      }\n    }\n  };\n\n  Group.prototype.getHeadersAndRows = function (noCalc) {\n    var output = [];\n    output.push(this);\n\n    this._visSet();\n\n    if (this.visible) {\n      if (this.groupList.length) {\n        this.groupList.forEach(function (group) {\n          output = output.concat(group.getHeadersAndRows(noCalc));\n        });\n      } else {\n        if (!noCalc && this.groupManager.table.options.columnCalcs != \"table\" && this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasTopCalcs()) {\n          if (this.calcs.top) {\n            this.calcs.top.detachElement();\n            this.calcs.top.deleteCells();\n          }\n\n          this.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n          output.push(this.calcs.top);\n        }\n\n        output = output.concat(this.rows);\n\n        if (!noCalc && this.groupManager.table.options.columnCalcs != \"table\" && this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasBottomCalcs()) {\n          if (this.calcs.bottom) {\n            this.calcs.bottom.detachElement();\n            this.calcs.bottom.deleteCells();\n          }\n\n          this.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n          output.push(this.calcs.bottom);\n        }\n      }\n    } else {\n      if (!this.groupList.length && this.groupManager.table.options.columnCalcs != \"table\") {\n        if (this.groupManager.table.modExists(\"columnCalcs\")) {\n          if (!noCalc && this.groupManager.table.modules.columnCalcs.hasTopCalcs()) {\n            if (this.calcs.top) {\n              this.calcs.top.detachElement();\n              this.calcs.top.deleteCells();\n            }\n\n            if (this.groupManager.table.options.groupClosedShowCalcs) {\n              this.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n              output.push(this.calcs.top);\n            }\n          }\n\n          if (!noCalc && this.groupManager.table.modules.columnCalcs.hasBottomCalcs()) {\n            if (this.calcs.bottom) {\n              this.calcs.bottom.detachElement();\n              this.calcs.bottom.deleteCells();\n            }\n\n            if (this.groupManager.table.options.groupClosedShowCalcs) {\n              this.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n              output.push(this.calcs.bottom);\n            }\n          }\n        }\n      }\n    }\n\n    return output;\n  };\n\n  Group.prototype.getData = function (visible, transform) {\n    var self = this,\n        output = [];\n\n    this._visSet();\n\n    if (!visible || visible && this.visible) {\n      this.rows.forEach(function (row) {\n        output.push(row.getData(transform || \"data\"));\n      });\n    }\n\n    return output;\n  }; // Group.prototype.getRows = function(){\n  // \tthis._visSet();\n  // \treturn this.visible ? this.rows : [];\n  // };\n\n\n  Group.prototype.getRowCount = function () {\n    var count = 0;\n\n    if (this.groupList.length) {\n      this.groupList.forEach(function (group) {\n        count += group.getRowCount();\n      });\n    } else {\n      count = this.rows.length;\n    }\n\n    return count;\n  };\n\n  Group.prototype.toggleVisibility = function () {\n    if (this.visible) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  };\n\n  Group.prototype.hide = function () {\n    this.visible = false;\n\n    if (this.groupManager.table.rowManager.getRenderMode() == \"classic\" && !this.groupManager.table.options.pagination) {\n      this.element.classList.remove(\"tabulator-group-visible\");\n\n      if (this.groupList.length) {\n        this.groupList.forEach(function (group) {\n          var rows = group.getHeadersAndRows();\n          rows.forEach(function (row) {\n            row.detachElement();\n          });\n        });\n      } else {\n        this.rows.forEach(function (row) {\n          var rowEl = row.getElement();\n          rowEl.parentNode.removeChild(rowEl);\n        });\n      }\n\n      this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(), this.groupManager.getDisplayIndex());\n      this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth();\n    } else {\n      this.groupManager.updateGroupRows(true);\n    }\n\n    this.groupManager.table.options.groupVisibilityChanged.call(this.table, this.getComponent(), false);\n  };\n\n  Group.prototype.show = function () {\n    var self = this;\n    self.visible = true;\n\n    if (this.groupManager.table.rowManager.getRenderMode() == \"classic\" && !this.groupManager.table.options.pagination) {\n      this.element.classList.add(\"tabulator-group-visible\");\n      var prev = self.getElement();\n\n      if (this.groupList.length) {\n        this.groupList.forEach(function (group) {\n          var rows = group.getHeadersAndRows();\n          rows.forEach(function (row) {\n            var rowEl = row.getElement();\n            prev.parentNode.insertBefore(rowEl, prev.nextSibling);\n            row.initialize();\n            prev = rowEl;\n          });\n        });\n      } else {\n        self.rows.forEach(function (row) {\n          var rowEl = row.getElement();\n          prev.parentNode.insertBefore(rowEl, prev.nextSibling);\n          row.initialize();\n          prev = rowEl;\n        });\n      }\n\n      this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(), this.groupManager.getDisplayIndex());\n      this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth();\n    } else {\n      this.groupManager.updateGroupRows(true);\n    }\n\n    this.groupManager.table.options.groupVisibilityChanged.call(this.table, this.getComponent(), true);\n  };\n\n  Group.prototype._visSet = function () {\n    var data = [];\n\n    if (typeof this.visible == \"function\") {\n      this.rows.forEach(function (row) {\n        data.push(row.getData());\n      });\n      this.visible = this.visible(this.key, this.getRowCount(), data, this.getComponent());\n    }\n  };\n\n  Group.prototype.getRowGroup = function (row) {\n    var match = false;\n\n    if (this.groupList.length) {\n      this.groupList.forEach(function (group) {\n        var result = group.getRowGroup(row);\n\n        if (result) {\n          match = result;\n        }\n      });\n    } else {\n      if (this.rows.find(function (item) {\n        return item === row;\n      })) {\n        match = this;\n      }\n    }\n\n    return match;\n  };\n\n  Group.prototype.getSubGroups = function (component) {\n    var output = [];\n    this.groupList.forEach(function (child) {\n      output.push(component ? child.getComponent() : child);\n    });\n    return output;\n  };\n\n  Group.prototype.getRows = function (compoment) {\n    var output = [];\n    this.rows.forEach(function (row) {\n      output.push(compoment ? row.getComponent() : row);\n    });\n    return output;\n  };\n\n  Group.prototype.generateGroupHeaderContents = function () {\n    var data = [];\n    this.rows.forEach(function (row) {\n      data.push(row.getData());\n    });\n    this.elementContents = this.generator(this.key, this.getRowCount(), data, this.getComponent());\n\n    while (this.element.firstChild) {\n      this.element.removeChild(this.element.firstChild);\n    }\n\n    if (typeof this.elementContents === \"string\") {\n      this.element.innerHTML = this.elementContents;\n    } else {\n      this.element.appendChild(this.elementContents);\n    }\n\n    this.element.insertBefore(this.arrowElement, this.element.firstChild);\n  }; ////////////// Standard Row Functions //////////////\n\n\n  Group.prototype.getElement = function () {\n    this.addBindingsd = false;\n\n    this._visSet();\n\n    if (this.visible) {\n      this.element.classList.add(\"tabulator-group-visible\");\n    } else {\n      this.element.classList.remove(\"tabulator-group-visible\");\n    }\n\n    for (var i = 0; i < this.element.childNodes.length; ++i) {\n      this.element.childNodes[i].parentNode.removeChild(this.element.childNodes[i]);\n    }\n\n    this.generateGroupHeaderContents(); // this.addBindings();\n\n    return this.element;\n  };\n\n  Group.prototype.detachElement = function () {\n    if (this.element && this.element.parentNode) {\n      this.element.parentNode.removeChild(this.element);\n    }\n  }; //normalize the height of elements in the row\n\n\n  Group.prototype.normalizeHeight = function () {\n    this.setHeight(this.element.clientHeight);\n  };\n\n  Group.prototype.initialize = function (force) {\n    if (!this.initialized || force) {\n      this.normalizeHeight();\n      this.initialized = true;\n    }\n  };\n\n  Group.prototype.reinitialize = function () {\n    this.initialized = false;\n    this.height = 0;\n\n    if (Tabulator.prototype.helpers.elVisible(this.element)) {\n      this.initialize(true);\n    }\n  };\n\n  Group.prototype.setHeight = function (height) {\n    if (this.height != height) {\n      this.height = height;\n      this.outerHeight = this.element.offsetHeight;\n    }\n  }; //return rows outer height\n\n\n  Group.prototype.getHeight = function () {\n    return this.outerHeight;\n  };\n\n  Group.prototype.getGroup = function () {\n    return this;\n  };\n\n  Group.prototype.reinitializeHeight = function () {};\n\n  Group.prototype.calcHeight = function () {};\n\n  Group.prototype.setCellHeight = function () {};\n\n  Group.prototype.clearCellHeight = function () {}; //////////////// Object Generation /////////////////\n\n\n  Group.prototype.getComponent = function () {\n    if (!this.component) {\n      this.component = new GroupComponent(this);\n    }\n\n    return this.component;\n  }; //////////////////////////////////////////////////\n  ////////////// Group Row Extension ///////////////\n  //////////////////////////////////////////////////\n\n\n  var GroupRows = function GroupRows(table) {\n    this.table = table; //hold Tabulator object\n\n    this.groupIDLookups = false; //enable table grouping and set field to group by\n\n    this.startOpen = [function () {\n      return false;\n    }]; //starting state of group\n\n    this.headerGenerator = [function () {\n      return \"\";\n    }];\n    this.groupList = []; //ordered list of groups\n\n    this.allowedValues = false;\n    this.groups = {}; //hold row groups\n\n    this.displayIndex = 0; //index in display pipeline\n  }; //initialize group configuration\n\n\n  GroupRows.prototype.initialize = function () {\n    var self = this,\n        groupBy = self.table.options.groupBy,\n        startOpen = self.table.options.groupStartOpen,\n        groupHeader = self.table.options.groupHeader;\n    this.allowedValues = self.table.options.groupValues;\n\n    if (Array.isArray(groupBy) && Array.isArray(groupHeader) && groupBy.length > groupHeader.length) {\n      console.warn(\"Error creating group headers, groupHeader array is shorter than groupBy array\");\n    }\n\n    self.headerGenerator = [function () {\n      return \"\";\n    }];\n    this.startOpen = [function () {\n      return false;\n    }]; //starting state of group\n\n    self.table.modules.localize.bind(\"groups|item\", function (langValue, lang) {\n      self.headerGenerator[0] = function (value, count, data) {\n        //header layout function\n        return (typeof value === \"undefined\" ? \"\" : value) + \"<span>(\" + count + \" \" + (count === 1 ? langValue : lang.groups.items) + \")</span>\";\n      };\n    });\n    this.groupIDLookups = [];\n\n    if (Array.isArray(groupBy) || groupBy) {\n      if (this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"table\" && this.table.options.columnCalcs != \"both\") {\n        this.table.modules.columnCalcs.removeCalcs();\n      }\n    } else {\n      if (this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"group\") {\n        var cols = this.table.columnManager.getRealColumns();\n        cols.forEach(function (col) {\n          if (col.definition.topCalc) {\n            self.table.modules.columnCalcs.initializeTopRow();\n          }\n\n          if (col.definition.bottomCalc) {\n            self.table.modules.columnCalcs.initializeBottomRow();\n          }\n        });\n      }\n    }\n\n    if (!Array.isArray(groupBy)) {\n      groupBy = [groupBy];\n    }\n\n    groupBy.forEach(function (group, i) {\n      var lookupFunc, column;\n\n      if (typeof group == \"function\") {\n        lookupFunc = group;\n      } else {\n        column = self.table.columnManager.getColumnByField(group);\n\n        if (column) {\n          lookupFunc = function lookupFunc(data) {\n            return column.getFieldValue(data);\n          };\n        } else {\n          lookupFunc = function lookupFunc(data) {\n            return data[group];\n          };\n        }\n      }\n\n      self.groupIDLookups.push({\n        field: typeof group === \"function\" ? false : group,\n        func: lookupFunc,\n        values: self.allowedValues ? self.allowedValues[i] : false\n      });\n    });\n\n    if (startOpen) {\n      if (!Array.isArray(startOpen)) {\n        startOpen = [startOpen];\n      }\n\n      startOpen.forEach(function (level) {\n        level = typeof level == \"function\" ? level : function () {\n          return true;\n        };\n      });\n      self.startOpen = startOpen;\n    }\n\n    if (groupHeader) {\n      self.headerGenerator = Array.isArray(groupHeader) ? groupHeader : [groupHeader];\n    }\n\n    this.initialized = true;\n  };\n\n  GroupRows.prototype.setDisplayIndex = function (index) {\n    this.displayIndex = index;\n  };\n\n  GroupRows.prototype.getDisplayIndex = function () {\n    return this.displayIndex;\n  }; //return appropriate rows with group headers\n\n\n  GroupRows.prototype.getRows = function (rows) {\n    if (this.groupIDLookups.length) {\n      this.table.options.dataGrouping.call(this.table);\n      this.generateGroups(rows);\n\n      if (this.table.options.dataGrouped) {\n        this.table.options.dataGrouped.call(this.table, this.getGroups(true));\n      }\n\n      return this.updateGroupRows();\n    } else {\n      return rows.slice(0);\n    }\n  };\n\n  GroupRows.prototype.getGroups = function (compoment) {\n    var groupComponents = [];\n    this.groupList.forEach(function (group) {\n      groupComponents.push(compoment ? group.getComponent() : group);\n    });\n    return groupComponents;\n  };\n\n  GroupRows.prototype.getChildGroups = function (group) {\n    var _this61 = this;\n\n    var groupComponents = [];\n\n    if (!group) {\n      group = this;\n    }\n\n    group.groupList.forEach(function (child) {\n      if (child.groupList.length) {\n        groupComponents = groupComponents.concat(_this61.getChildGroups(child));\n      } else {\n        groupComponents.push(child);\n      }\n    });\n    return groupComponents;\n  };\n\n  GroupRows.prototype.wipe = function () {\n    this.groupList.forEach(function (group) {\n      group.wipe();\n    });\n  };\n\n  GroupRows.prototype.pullGroupListData = function (groupList) {\n    var self = this;\n    var groupListData = [];\n    groupList.forEach(function (group) {\n      var groupHeader = {};\n      groupHeader.level = 0;\n      groupHeader.rowCount = 0;\n      groupHeader.headerContent = \"\";\n      var childData = [];\n\n      if (group.hasSubGroups) {\n        childData = self.pullGroupListData(group.groupList);\n        groupHeader.level = group.level;\n        groupHeader.rowCount = childData.length - group.groupList.length; // data length minus number of sub-headers\n\n        groupHeader.headerContent = group.generator(group.key, groupHeader.rowCount, group.rows, group);\n        groupListData.push(groupHeader);\n        groupListData = groupListData.concat(childData);\n      } else {\n        groupHeader.level = group.level;\n        groupHeader.headerContent = group.generator(group.key, group.rows.length, group.rows, group);\n        groupHeader.rowCount = group.getRows().length;\n        groupListData.push(groupHeader);\n        group.getRows().forEach(function (row) {\n          groupListData.push(row.getData(\"data\"));\n        });\n      }\n    });\n    return groupListData;\n  };\n\n  GroupRows.prototype.getGroupedData = function () {\n    return this.pullGroupListData(this.groupList);\n  };\n\n  GroupRows.prototype.getRowGroup = function (row) {\n    var match = false;\n    this.groupList.forEach(function (group) {\n      var result = group.getRowGroup(row);\n\n      if (result) {\n        match = result;\n      }\n    });\n    return match;\n  };\n\n  GroupRows.prototype.countGroups = function () {\n    return this.groupList.length;\n  };\n\n  GroupRows.prototype.generateGroups = function (rows) {\n    var self = this,\n        oldGroups = self.groups;\n    self.groups = {};\n    self.groupList = [];\n\n    if (this.allowedValues && this.allowedValues[0]) {\n      this.allowedValues[0].forEach(function (value) {\n        self.createGroup(value, 0, oldGroups);\n      });\n      rows.forEach(function (row) {\n        self.assignRowToExistingGroup(row, oldGroups);\n      });\n    } else {\n      rows.forEach(function (row) {\n        self.assignRowToGroup(row, oldGroups);\n      });\n    }\n  };\n\n  GroupRows.prototype.createGroup = function (groupID, level, oldGroups) {\n    var groupKey = level + \"_\" + groupID,\n        group;\n    oldGroups = oldGroups || [];\n    group = new Group(this, false, level, groupID, this.groupIDLookups[0].field, this.headerGenerator[0], oldGroups[groupKey]);\n    this.groups[groupKey] = group;\n    this.groupList.push(group);\n  }; // GroupRows.prototype.assignRowToGroup = function(row, oldGroups){\n  // \tvar groupID = this.groupIDLookups[0].func(row.getData()),\n  // \tgroupKey = \"0_\" + groupID;\n  // \tif(!this.groups[groupKey]){\n  // \t\tthis.createGroup(groupID, 0, oldGroups);\n  // \t}\n  // \tthis.groups[groupKey].addRow(row);\n  // };\n\n\n  GroupRows.prototype.assignRowToExistingGroup = function (row, oldGroups) {\n    var groupID = this.groupIDLookups[0].func(row.getData()),\n        groupKey = \"0_\" + groupID;\n\n    if (this.groups[groupKey]) {\n      this.groups[groupKey].addRow(row);\n    }\n  };\n\n  GroupRows.prototype.assignRowToGroup = function (row, oldGroups) {\n    var groupID = this.groupIDLookups[0].func(row.getData()),\n        newGroupNeeded = !this.groups[\"0_\" + groupID];\n\n    if (newGroupNeeded) {\n      this.createGroup(groupID, 0, oldGroups);\n    }\n\n    this.groups[\"0_\" + groupID].addRow(row);\n    return !newGroupNeeded;\n  };\n\n  GroupRows.prototype.updateGroupRows = function (force) {\n    var self = this,\n        output = [],\n        oldRowCount;\n    self.groupList.forEach(function (group) {\n      output = output.concat(group.getHeadersAndRows());\n    }); //force update of table display\n\n    if (force) {\n      var displayIndex = self.table.rowManager.setDisplayRows(output, this.getDisplayIndex());\n\n      if (displayIndex !== true) {\n        this.setDisplayIndex(displayIndex);\n      }\n\n      self.table.rowManager.refreshActiveData(\"group\", true, true);\n    }\n\n    return output;\n  };\n\n  GroupRows.prototype.scrollHeaders = function (left) {\n    left = left + \"px\";\n    this.groupList.forEach(function (group) {\n      group.scrollHeader(left);\n    });\n  };\n\n  GroupRows.prototype.removeGroup = function (group) {\n    var groupKey = group.level + \"_\" + group.key,\n        index;\n\n    if (this.groups[groupKey]) {\n      delete this.groups[groupKey];\n      index = this.groupList.indexOf(group);\n\n      if (index > -1) {\n        this.groupList.splice(index, 1);\n      }\n    }\n  };\n\n  Tabulator.prototype.registerModule(\"groupRows\", GroupRows);\n\n  var History = function History(table) {\n    this.table = table; //hold Tabulator object\n\n    this.history = [];\n    this.index = -1;\n  };\n\n  History.prototype.clear = function () {\n    this.history = [];\n    this.index = -1;\n  };\n\n  History.prototype.action = function (type, component, data) {\n    this.history = this.history.slice(0, this.index + 1);\n    this.history.push({\n      type: type,\n      component: component,\n      data: data\n    });\n    this.index++;\n  };\n\n  History.prototype.getHistoryUndoSize = function () {\n    return this.index + 1;\n  };\n\n  History.prototype.getHistoryRedoSize = function () {\n    return this.history.length - (this.index + 1);\n  };\n\n  History.prototype.undo = function () {\n    if (this.index > -1) {\n      var action = this.history[this.index];\n      this.undoers[action.type].call(this, action);\n      this.index--;\n      this.table.options.historyUndo.call(this.table, action.type, action.component.getComponent(), action.data);\n      return true;\n    } else {\n      console.warn(\"History Undo Error - No more history to undo\");\n      return false;\n    }\n  };\n\n  History.prototype.redo = function () {\n    if (this.history.length - 1 > this.index) {\n      this.index++;\n      var action = this.history[this.index];\n      this.redoers[action.type].call(this, action);\n      this.table.options.historyRedo.call(this.table, action.type, action.component.getComponent(), action.data);\n      return true;\n    } else {\n      console.warn(\"History Redo Error - No more history to redo\");\n      return false;\n    }\n  };\n\n  History.prototype.undoers = {\n    cellEdit: function cellEdit(action) {\n      action.component.setValueProcessData(action.data.oldValue);\n    },\n    rowAdd: function rowAdd(action) {\n      action.component.deleteActual();\n    },\n    rowDelete: function rowDelete(action) {\n      var newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n\n      if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n        this.table.modules.groupRows.updateGroupRows(true);\n      }\n\n      this._rebindRow(action.component, newRow);\n    },\n    rowMove: function rowMove(action) {\n      this.table.rowManager.moveRowActual(action.component, this.table.rowManager.rows[action.data.posFrom], !action.data.after);\n      this.table.rowManager.redraw();\n    }\n  };\n  History.prototype.redoers = {\n    cellEdit: function cellEdit(action) {\n      action.component.setValueProcessData(action.data.newValue);\n    },\n    rowAdd: function rowAdd(action) {\n      var newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n\n      if (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n        this.table.modules.groupRows.updateGroupRows(true);\n      }\n\n      this._rebindRow(action.component, newRow);\n    },\n    rowDelete: function rowDelete(action) {\n      action.component.deleteActual();\n    },\n    rowMove: function rowMove(action) {\n      this.table.rowManager.moveRowActual(action.component, this.table.rowManager.rows[action.data.posTo], action.data.after);\n      this.table.rowManager.redraw();\n    }\n  }; //rebind rows to new element after deletion\n\n  History.prototype._rebindRow = function (oldRow, newRow) {\n    this.history.forEach(function (action) {\n      if (action.component instanceof Row) {\n        if (action.component === oldRow) {\n          action.component = newRow;\n        }\n      } else if (action.component instanceof Cell) {\n        if (action.component.row === oldRow) {\n          var field = action.component.column.getField();\n\n          if (field) {\n            action.component = newRow.getCell(field);\n          }\n        }\n      }\n    });\n  };\n\n  Tabulator.prototype.registerModule(\"history\", History);\n\n  var HtmlTableImport = function HtmlTableImport(table) {\n    this.table = table; //hold Tabulator object\n\n    this.fieldIndex = [];\n    this.hasIndex = false;\n  };\n\n  HtmlTableImport.prototype.parseTable = function () {\n    var self = this,\n        element = self.table.element,\n        options = self.table.options,\n        columns = options.columns,\n        headers = element.getElementsByTagName(\"th\"),\n        rows = element.getElementsByTagName(\"tbody\")[0],\n        data = [],\n        newTable;\n    self.hasIndex = false;\n    self.table.options.htmlImporting.call(this.table);\n    rows = rows ? rows.getElementsByTagName(\"tr\") : []; //check for tablator inline options\n\n    self._extractOptions(element, options);\n\n    if (headers.length) {\n      self._extractHeaders(headers, rows);\n    } else {\n      self._generateBlankHeaders(headers, rows);\n    } //iterate through table rows and build data set\n\n\n    for (var index = 0; index < rows.length; index++) {\n      var row = rows[index],\n          cells = row.getElementsByTagName(\"td\"),\n          item = {}; //create index if the dont exist in table\n\n      if (!self.hasIndex) {\n        item[options.index] = index;\n      }\n\n      for (var i = 0; i < cells.length; i++) {\n        var cell = cells[i];\n\n        if (typeof this.fieldIndex[i] !== \"undefined\") {\n          item[this.fieldIndex[i]] = cell.innerHTML;\n        }\n      } //add row data to item\n\n\n      data.push(item);\n    } //create new element\n\n\n    var newElement = document.createElement(\"div\"); //transfer attributes to new element\n\n    var attributes = element.attributes; // loop through attributes and apply them on div\n\n    for (var i in attributes) {\n      if (_typeof(attributes[i]) == \"object\") {\n        newElement.setAttribute(attributes[i].name, attributes[i].value);\n      }\n    } // replace table with div element\n\n\n    element.parentNode.replaceChild(newElement, element);\n    options.data = data;\n    self.table.options.htmlImported.call(this.table); // // newElement.tabulator(options);\n\n    this.table.element = newElement;\n  }; //extract tabulator attribute options\n\n\n  HtmlTableImport.prototype._extractOptions = function (element, options, defaultOptions) {\n    var attributes = element.attributes;\n    var optionsArr = defaultOptions ? Object.assign([], defaultOptions) : Object.keys(options);\n    var optionsList = {};\n    optionsArr.forEach(function (item) {\n      optionsList[item.toLowerCase()] = item;\n    });\n\n    for (var index in attributes) {\n      var attrib = attributes[index];\n      var name;\n\n      if (attrib && (typeof attrib === 'undefined' ? 'undefined' : _typeof(attrib)) == \"object\" && attrib.name && attrib.name.indexOf(\"tabulator-\") === 0) {\n        name = attrib.name.replace(\"tabulator-\", \"\");\n\n        if (typeof optionsList[name] !== \"undefined\") {\n          options[optionsList[name]] = this._attribValue(attrib.value);\n        }\n      }\n    }\n  }; //get value of attribute\n\n\n  HtmlTableImport.prototype._attribValue = function (value) {\n    if (value === \"true\") {\n      return true;\n    }\n\n    if (value === \"false\") {\n      return false;\n    }\n\n    return value;\n  }; //find column if it has already been defined\n\n\n  HtmlTableImport.prototype._findCol = function (title) {\n    var match = this.table.options.columns.find(function (column) {\n      return column.title === title;\n    });\n    return match || false;\n  }; //extract column from headers\n\n\n  HtmlTableImport.prototype._extractHeaders = function (headers, rows) {\n    for (var index = 0; index < headers.length; index++) {\n      var header = headers[index],\n          exists = false,\n          col = this._findCol(header.textContent),\n          width,\n          attributes;\n\n      if (col) {\n        exists = true;\n      } else {\n        col = {\n          title: header.textContent.trim()\n        };\n      }\n\n      if (!col.field) {\n        col.field = header.textContent.trim().toLowerCase().replace(\" \", \"_\");\n      }\n\n      width = header.getAttribute(\"width\");\n\n      if (width && !col.width) {\n        col.width = width;\n      } //check for tablator inline options\n\n\n      attributes = header.attributes; // //check for tablator inline options\n\n      this._extractOptions(header, col, Column.prototype.defaultOptionList);\n\n      this.fieldIndex[index] = col.field;\n\n      if (col.field == this.table.options.index) {\n        this.hasIndex = true;\n      }\n\n      if (!exists) {\n        this.table.options.columns.push(col);\n      }\n    }\n  }; //generate blank headers\n\n\n  HtmlTableImport.prototype._generateBlankHeaders = function (headers, rows) {\n    for (var index = 0; index < headers.length; index++) {\n      var header = headers[index],\n          col = {\n        title: \"\",\n        field: \"col\" + index\n      };\n      this.fieldIndex[index] = col.field;\n      var width = header.getAttribute(\"width\");\n\n      if (width) {\n        col.width = width;\n      }\n\n      this.table.options.columns.push(col);\n    }\n  };\n\n  Tabulator.prototype.registerModule(\"htmlTableImport\", HtmlTableImport);\n\n  var Keybindings = function Keybindings(table) {\n    this.table = table; //hold Tabulator object\n\n    this.watchKeys = null;\n    this.pressedKeys = null;\n    this.keyupBinding = false;\n    this.keydownBinding = false;\n  };\n\n  Keybindings.prototype.initialize = function () {\n    var bindings = this.table.options.keybindings,\n        mergedBindings = {};\n    this.watchKeys = {};\n    this.pressedKeys = [];\n\n    if (bindings !== false) {\n      for (var key in this.bindings) {\n        mergedBindings[key] = this.bindings[key];\n      }\n\n      if (Object.keys(bindings).length) {\n        for (var _key in bindings) {\n          mergedBindings[_key] = bindings[_key];\n        }\n      }\n\n      this.mapBindings(mergedBindings);\n      this.bindEvents();\n    }\n  };\n\n  Keybindings.prototype.mapBindings = function (bindings) {\n    var _this62 = this;\n\n    var self = this;\n\n    var _loop2 = function _loop2(key) {\n      if (_this62.actions[key]) {\n        if (bindings[key]) {\n          if (_typeof(bindings[key]) !== \"object\") {\n            bindings[key] = [bindings[key]];\n          }\n\n          bindings[key].forEach(function (binding) {\n            self.mapBinding(key, binding);\n          });\n        }\n      } else {\n        console.warn(\"Key Binding Error - no such action:\", key);\n      }\n    };\n\n    for (var key in bindings) {\n      _loop2(key);\n    }\n  };\n\n  Keybindings.prototype.mapBinding = function (action, symbolsList) {\n    var self = this;\n    var binding = {\n      action: this.actions[action],\n      keys: [],\n      ctrl: false,\n      shift: false,\n      meta: false\n    };\n    var symbols = symbolsList.toString().toLowerCase().split(\" \").join(\"\").split(\"+\");\n    symbols.forEach(function (symbol) {\n      switch (symbol) {\n        case \"ctrl\":\n          binding.ctrl = true;\n          break;\n\n        case \"shift\":\n          binding.shift = true;\n          break;\n\n        case \"meta\":\n          binding.meta = true;\n          break;\n\n        default:\n          symbol = parseInt(symbol);\n          binding.keys.push(symbol);\n\n          if (!self.watchKeys[symbol]) {\n            self.watchKeys[symbol] = [];\n          }\n\n          self.watchKeys[symbol].push(binding);\n      }\n    });\n  };\n\n  Keybindings.prototype.bindEvents = function () {\n    var self = this;\n\n    this.keyupBinding = function (e) {\n      var code = e.keyCode;\n      var bindings = self.watchKeys[code];\n\n      if (bindings) {\n        self.pressedKeys.push(code);\n        bindings.forEach(function (binding) {\n          self.checkBinding(e, binding);\n        });\n      }\n    };\n\n    this.keydownBinding = function (e) {\n      var code = e.keyCode;\n      var bindings = self.watchKeys[code];\n\n      if (bindings) {\n        var index = self.pressedKeys.indexOf(code);\n\n        if (index > -1) {\n          self.pressedKeys.splice(index, 1);\n        }\n      }\n    };\n\n    this.table.element.addEventListener(\"keydown\", this.keyupBinding);\n    this.table.element.addEventListener(\"keyup\", this.keydownBinding);\n  };\n\n  Keybindings.prototype.clearBindings = function () {\n    if (this.keyupBinding) {\n      this.table.element.removeEventListener(\"keydown\", this.keyupBinding);\n    }\n\n    if (this.keydownBinding) {\n      this.table.element.removeEventListener(\"keyup\", this.keydownBinding);\n    }\n  };\n\n  Keybindings.prototype.checkBinding = function (e, binding) {\n    var self = this,\n        match = true;\n\n    if (e.ctrlKey == binding.ctrl && e.shiftKey == binding.shift && e.metaKey == binding.meta) {\n      binding.keys.forEach(function (key) {\n        var index = self.pressedKeys.indexOf(key);\n\n        if (index == -1) {\n          match = false;\n        }\n      });\n\n      if (match) {\n        binding.action.call(self, e);\n      }\n\n      return true;\n    }\n\n    return false;\n  }; //default bindings\n\n\n  Keybindings.prototype.bindings = {\n    navPrev: \"shift + 9\",\n    navNext: 9,\n    navUp: 38,\n    navDown: 40,\n    scrollPageUp: 33,\n    scrollPageDown: 34,\n    scrollToStart: 36,\n    scrollToEnd: 35,\n    undo: \"ctrl + 90\",\n    redo: \"ctrl + 89\",\n    copyToClipboard: \"ctrl + 67\"\n  }; //default actions\n\n  Keybindings.prototype.actions = {\n    keyBlock: function keyBlock(e) {\n      e.stopPropagation();\n      e.preventDefault();\n    },\n    scrollPageUp: function scrollPageUp(e) {\n      var rowManager = this.table.rowManager,\n          newPos = rowManager.scrollTop - rowManager.height,\n          scrollMax = rowManager.element.scrollHeight;\n      e.preventDefault();\n\n      if (rowManager.displayRowsCount) {\n        if (newPos >= 0) {\n          rowManager.element.scrollTop = newPos;\n        } else {\n          rowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n        }\n      }\n\n      this.table.element.focus();\n    },\n    scrollPageDown: function scrollPageDown(e) {\n      var rowManager = this.table.rowManager,\n          newPos = rowManager.scrollTop + rowManager.height,\n          scrollMax = rowManager.element.scrollHeight;\n      e.preventDefault();\n\n      if (rowManager.displayRowsCount) {\n        if (newPos <= scrollMax) {\n          rowManager.element.scrollTop = newPos;\n        } else {\n          rowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n        }\n      }\n\n      this.table.element.focus();\n    },\n    scrollToStart: function scrollToStart(e) {\n      var rowManager = this.table.rowManager;\n      e.preventDefault();\n\n      if (rowManager.displayRowsCount) {\n        rowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n      }\n\n      this.table.element.focus();\n    },\n    scrollToEnd: function scrollToEnd(e) {\n      var rowManager = this.table.rowManager;\n      e.preventDefault();\n\n      if (rowManager.displayRowsCount) {\n        rowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n      }\n\n      this.table.element.focus();\n    },\n    navPrev: function navPrev(e) {\n      var cell = false;\n\n      if (this.table.modExists(\"edit\")) {\n        cell = this.table.modules.edit.currentCell;\n\n        if (cell) {\n          e.preventDefault();\n          cell.nav().prev();\n        }\n      }\n    },\n    navNext: function navNext(e) {\n      var cell = false;\n      var newRow = this.table.options.tabEndNewRow;\n      var nav;\n\n      if (this.table.modExists(\"edit\")) {\n        cell = this.table.modules.edit.currentCell;\n\n        if (cell) {\n          e.preventDefault();\n          nav = cell.nav();\n\n          if (!nav.next()) {\n            if (newRow) {\n              cell.getElement().firstChild.blur();\n\n              if (newRow === true) {\n                newRow = this.table.addRow({});\n              } else {\n                if (typeof newRow == \"function\") {\n                  newRow = this.table.addRow(newRow(cell.row.getComponent()));\n                } else {\n                  newRow = this.table.addRow(Object.assign({}, newRow));\n                }\n              }\n\n              newRow.then(function () {\n                setTimeout(function () {\n                  nav.next();\n                });\n              });\n            }\n          }\n        }\n      }\n    },\n    navLeft: function navLeft(e) {\n      var cell = false;\n\n      if (this.table.modExists(\"edit\")) {\n        cell = this.table.modules.edit.currentCell;\n\n        if (cell) {\n          e.preventDefault();\n          cell.nav().left();\n        }\n      }\n    },\n    navRight: function navRight(e) {\n      var cell = false;\n\n      if (this.table.modExists(\"edit\")) {\n        cell = this.table.modules.edit.currentCell;\n\n        if (cell) {\n          e.preventDefault();\n          cell.nav().right();\n        }\n      }\n    },\n    navUp: function navUp(e) {\n      var cell = false;\n\n      if (this.table.modExists(\"edit\")) {\n        cell = this.table.modules.edit.currentCell;\n\n        if (cell) {\n          e.preventDefault();\n          cell.nav().up();\n        }\n      }\n    },\n    navDown: function navDown(e) {\n      var cell = false;\n\n      if (this.table.modExists(\"edit\")) {\n        cell = this.table.modules.edit.currentCell;\n\n        if (cell) {\n          e.preventDefault();\n          cell.nav().down();\n        }\n      }\n    },\n    undo: function undo(e) {\n      var cell = false;\n\n      if (this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")) {\n        cell = this.table.modules.edit.currentCell;\n\n        if (!cell) {\n          e.preventDefault();\n          this.table.modules.history.undo();\n        }\n      }\n    },\n    redo: function redo(e) {\n      var cell = false;\n\n      if (this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")) {\n        cell = this.table.modules.edit.currentCell;\n\n        if (!cell) {\n          e.preventDefault();\n          this.table.modules.history.redo();\n        }\n      }\n    },\n    copyToClipboard: function copyToClipboard(e) {\n      if (!this.table.modules.edit.currentCell) {\n        if (this.table.modExists(\"clipboard\", true)) {\n          this.table.modules.clipboard.copy(false, true);\n        }\n      }\n    }\n  };\n  Tabulator.prototype.registerModule(\"keybindings\", Keybindings);\n\n  var Menu = function Menu(table) {\n    this.table = table; //hold Tabulator object\n\n    this.menuEl = false;\n    this.blurEvent = this.hideMenu.bind(this);\n    this.escEvent = this.escMenu.bind(this);\n    this.nestedMenuBlock = false;\n  };\n\n  Menu.prototype.initializeColumnHeader = function (column) {\n    var _this63 = this;\n\n    var headerMenuEl;\n\n    if (column.definition.headerContextMenu) {\n      column.getElement().addEventListener(\"contextmenu\", function (e) {\n        var menu = typeof column.definition.headerContextMenu == \"function\" ? column.definition.headerContextMenu(column.getComponent()) : column.definition.headerContextMenu;\n        e.preventDefault();\n\n        _this63.loadMenu(e, column, menu);\n      });\n    }\n\n    if (column.definition.headerMenu) {\n      headerMenuEl = document.createElement(\"span\");\n      headerMenuEl.classList.add(\"tabulator-header-menu-button\");\n      headerMenuEl.innerHTML = \"&vellip;\";\n      headerMenuEl.addEventListener(\"click\", function (e) {\n        var menu = typeof column.definition.headerMenu == \"function\" ? column.definition.headerMenu(column.getComponent()) : column.definition.headerMenu;\n        e.stopPropagation();\n        e.preventDefault();\n\n        _this63.loadMenu(e, column, menu);\n      });\n      column.titleElement.insertBefore(headerMenuEl, column.titleElement.firstChild);\n    }\n  };\n\n  Menu.prototype.initializeCell = function (cell) {\n    var _this64 = this;\n\n    cell.getElement().addEventListener(\"contextmenu\", function (e) {\n      var menu = typeof cell.column.definition.contextMenu == \"function\" ? cell.column.definition.contextMenu(cell.getComponent()) : cell.column.definition.contextMenu;\n\n      if (menu) {\n        e.stopImmediatePropagation();\n      }\n\n      _this64.loadMenu(e, cell, menu);\n    });\n  };\n\n  Menu.prototype.initializeRow = function (row) {\n    var _this65 = this;\n\n    row.getElement().addEventListener(\"contextmenu\", function (e) {\n      var menu = typeof _this65.table.options.rowContextMenu == \"function\" ? _this65.table.options.rowContextMenu(row.getComponent()) : _this65.table.options.rowContextMenu;\n\n      _this65.loadMenu(e, row, menu);\n    });\n  };\n\n  Menu.prototype.initializeGroup = function (group) {\n    var _this66 = this;\n\n    group.getElement().addEventListener(\"contextmenu\", function (e) {\n      var menu = typeof _this66.table.options.groupContextMenu == \"function\" ? _this66.table.options.groupContextMenu(group.getComponent()) : _this66.table.options.groupContextMenu;\n\n      _this66.loadMenu(e, group, menu);\n    });\n  };\n\n  Menu.prototype.loadMenu = function (e, component, menu) {\n    var _this67 = this;\n\n    var docHeight = Math.max(document.body.offsetHeight, window.innerHeight);\n    e.preventDefault(); //abort if no menu set\n\n    if (!menu || !menu.length) {\n      return;\n    }\n\n    if (this.nestedMenuBlock) {\n      //abort if child menu already open\n      if (this.isOpen()) {\n        return;\n      }\n    } else {\n      this.nestedMenuBlock = setTimeout(function () {\n        _this67.nestedMenuBlock = false;\n      }, 100);\n    }\n\n    this.hideMenu();\n    this.menuEl = document.createElement(\"div\");\n    this.menuEl.classList.add(\"tabulator-menu\");\n    menu.forEach(function (item) {\n      var itemEl = document.createElement(\"div\");\n      var label = item.label;\n      var disabled = item.disabled;\n\n      if (item.separator) {\n        itemEl.classList.add(\"tabulator-menu-separator\");\n      } else {\n        itemEl.classList.add(\"tabulator-menu-item\");\n\n        if (typeof label == \"function\") {\n          label = label(component.getComponent());\n        }\n\n        if (label instanceof Node) {\n          itemEl.appendChild(label);\n        } else {\n          itemEl.innerHTML = label;\n        }\n\n        if (typeof disabled == \"function\") {\n          disabled = disabled(component.getComponent());\n        }\n\n        if (disabled) {\n          itemEl.classList.add(\"tabulator-menu-item-disabled\");\n          itemEl.addEventListener(\"click\", function (e) {\n            e.stopPropagation();\n          });\n        } else {\n          itemEl.addEventListener(\"click\", function (e) {\n            _this67.hideMenu();\n\n            item.action(e, component.getComponent());\n          });\n        }\n      }\n\n      _this67.menuEl.appendChild(itemEl);\n    });\n    this.menuEl.style.top = e.pageY + \"px\";\n    this.menuEl.style.left = e.pageX + \"px\";\n    document.body.addEventListener(\"click\", this.blurEvent);\n    this.table.rowManager.element.addEventListener(\"scroll\", this.blurEvent);\n    setTimeout(function () {\n      document.body.addEventListener(\"contextmenu\", _this67.blurEvent);\n    }, 100);\n    document.body.addEventListener(\"keydown\", this.escEvent);\n    document.body.appendChild(this.menuEl); //move menu to start on right edge if it is too close to the edge of the screen\n\n    if (e.pageX + this.menuEl.offsetWidth >= document.body.offsetWidth) {\n      this.menuEl.style.left = \"\";\n      this.menuEl.style.right = document.body.offsetWidth - e.pageX + \"px\";\n    } //move menu to start on bottom edge if it is too close to the edge of the screen\n\n\n    if (e.pageY + this.menuEl.offsetHeight >= docHeight) {\n      this.menuEl.style.top = \"\";\n      this.menuEl.style.bottom = docHeight - e.pageY + \"px\";\n    }\n  };\n\n  Menu.prototype.isOpen = function () {\n    return !!this.menuEl.parentNode;\n  };\n\n  Menu.prototype.escMenu = function (e) {\n    if (e.keyCode == 27) {\n      this.hideMenu();\n    }\n  };\n\n  Menu.prototype.hideMenu = function () {\n    if (this.menuEl.parentNode) {\n      this.menuEl.parentNode.removeChild(this.menuEl);\n    }\n\n    if (this.escEvent) {\n      document.body.removeEventListener(\"keydown\", this.escEvent);\n    }\n\n    if (this.blurEvent) {\n      document.body.removeEventListener(\"click\", this.blurEvent);\n      document.body.removeEventListener(\"contextmenu\", this.blurEvent);\n      this.table.rowManager.element.removeEventListener(\"scroll\", this.blurEvent);\n    }\n  }; //default accessors\n\n\n  Menu.prototype.menus = {};\n  Tabulator.prototype.registerModule(\"menu\", Menu);\n\n  var MoveColumns = function MoveColumns(table) {\n    this.table = table; //hold Tabulator object\n\n    this.placeholderElement = this.createPlaceholderElement();\n    this.hoverElement = false; //floating column header element\n\n    this.checkTimeout = false; //click check timeout holder\n\n    this.checkPeriod = 250; //period to wait on mousedown to consider this a move and not a click\n\n    this.moving = false; //currently moving column\n\n    this.toCol = false; //destination column\n\n    this.toColAfter = false; //position of moving column relative to the desitnation column\n\n    this.startX = 0; //starting position within header element\n\n    this.autoScrollMargin = 40; //auto scroll on edge when within margin\n\n    this.autoScrollStep = 5; //auto scroll distance in pixels\n\n    this.autoScrollTimeout = false; //auto scroll timeout\n\n    this.touchMove = false;\n    this.moveHover = this.moveHover.bind(this);\n    this.endMove = this.endMove.bind(this);\n  };\n\n  MoveColumns.prototype.createPlaceholderElement = function () {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-col\");\n    el.classList.add(\"tabulator-col-placeholder\");\n    return el;\n  };\n\n  MoveColumns.prototype.initializeColumn = function (column) {\n    var self = this,\n        config = {},\n        colEl;\n\n    if (!column.modules.frozen) {\n      colEl = column.getElement();\n\n      config.mousemove = function (e) {\n        if (column.parent === self.moving.parent) {\n          if ((self.touchMove ? e.touches[0].pageX : e.pageX) - Tabulator.prototype.helpers.elOffset(colEl).left + self.table.columnManager.element.scrollLeft > column.getWidth() / 2) {\n            if (self.toCol !== column || !self.toColAfter) {\n              colEl.parentNode.insertBefore(self.placeholderElement, colEl.nextSibling);\n              self.moveColumn(column, true);\n            }\n          } else {\n            if (self.toCol !== column || self.toColAfter) {\n              colEl.parentNode.insertBefore(self.placeholderElement, colEl);\n              self.moveColumn(column, false);\n            }\n          }\n        }\n      }.bind(self);\n\n      colEl.addEventListener(\"mousedown\", function (e) {\n        self.touchMove = false;\n\n        if (e.which === 1) {\n          self.checkTimeout = setTimeout(function () {\n            self.startMove(e, column);\n          }, self.checkPeriod);\n        }\n      });\n      colEl.addEventListener(\"mouseup\", function (e) {\n        if (e.which === 1) {\n          if (self.checkTimeout) {\n            clearTimeout(self.checkTimeout);\n          }\n        }\n      });\n      self.bindTouchEvents(column);\n    }\n\n    column.modules.moveColumn = config;\n  };\n\n  MoveColumns.prototype.bindTouchEvents = function (column) {\n    var self = this,\n        colEl = column.getElement(),\n        startXMove = false,\n        //shifting center position of the cell\n    dir = false,\n        currentCol,\n        nextCol,\n        prevCol,\n        nextColWidth,\n        prevColWidth,\n        nextColWidthLast,\n        prevColWidthLast;\n    colEl.addEventListener(\"touchstart\", function (e) {\n      self.checkTimeout = setTimeout(function () {\n        self.touchMove = true;\n        currentCol = column;\n        nextCol = column.nextColumn();\n        nextColWidth = nextCol ? nextCol.getWidth() / 2 : 0;\n        prevCol = column.prevColumn();\n        prevColWidth = prevCol ? prevCol.getWidth() / 2 : 0;\n        nextColWidthLast = 0;\n        prevColWidthLast = 0;\n        startXMove = false;\n        self.startMove(e, column);\n      }, self.checkPeriod);\n    }, {\n      passive: true\n    });\n    colEl.addEventListener(\"touchmove\", function (e) {\n      var halfCol, diff, moveToCol;\n\n      if (self.moving) {\n        self.moveHover(e);\n\n        if (!startXMove) {\n          startXMove = e.touches[0].pageX;\n        }\n\n        diff = e.touches[0].pageX - startXMove;\n\n        if (diff > 0) {\n          if (nextCol && diff - nextColWidthLast > nextColWidth) {\n            moveToCol = nextCol;\n\n            if (moveToCol !== column) {\n              startXMove = e.touches[0].pageX;\n              moveToCol.getElement().parentNode.insertBefore(self.placeholderElement, moveToCol.getElement().nextSibling);\n              self.moveColumn(moveToCol, true);\n            }\n          }\n        } else {\n          if (prevCol && -diff - prevColWidthLast > prevColWidth) {\n            moveToCol = prevCol;\n\n            if (moveToCol !== column) {\n              startXMove = e.touches[0].pageX;\n              moveToCol.getElement().parentNode.insertBefore(self.placeholderElement, moveToCol.getElement());\n              self.moveColumn(moveToCol, false);\n            }\n          }\n        }\n\n        if (moveToCol) {\n          currentCol = moveToCol;\n          nextCol = moveToCol.nextColumn();\n          nextColWidthLast = nextColWidth;\n          nextColWidth = nextCol ? nextCol.getWidth() / 2 : 0;\n          prevCol = moveToCol.prevColumn();\n          prevColWidthLast = prevColWidth;\n          prevColWidth = prevCol ? prevCol.getWidth() / 2 : 0;\n        }\n      }\n    }, {\n      passive: true\n    });\n    colEl.addEventListener(\"touchend\", function (e) {\n      if (self.checkTimeout) {\n        clearTimeout(self.checkTimeout);\n      }\n\n      if (self.moving) {\n        self.endMove(e);\n      }\n    });\n  };\n\n  MoveColumns.prototype.startMove = function (e, column) {\n    var element = column.getElement();\n    this.moving = column;\n    this.startX = (this.touchMove ? e.touches[0].pageX : e.pageX) - Tabulator.prototype.helpers.elOffset(element).left;\n    this.table.element.classList.add(\"tabulator-block-select\"); //create placeholder\n\n    this.placeholderElement.style.width = column.getWidth() + \"px\";\n    this.placeholderElement.style.height = column.getHeight() + \"px\";\n    element.parentNode.insertBefore(this.placeholderElement, element);\n    element.parentNode.removeChild(element); //create hover element\n\n    this.hoverElement = element.cloneNode(true);\n    this.hoverElement.classList.add(\"tabulator-moving\");\n    this.table.columnManager.getElement().appendChild(this.hoverElement);\n    this.hoverElement.style.left = \"0\";\n    this.hoverElement.style.bottom = \"0\";\n\n    if (!this.touchMove) {\n      this._bindMouseMove();\n\n      document.body.addEventListener(\"mousemove\", this.moveHover);\n      document.body.addEventListener(\"mouseup\", this.endMove);\n    }\n\n    this.moveHover(e);\n  };\n\n  MoveColumns.prototype._bindMouseMove = function () {\n    this.table.columnManager.columnsByIndex.forEach(function (column) {\n      if (column.modules.moveColumn.mousemove) {\n        column.getElement().addEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n      }\n    });\n  };\n\n  MoveColumns.prototype._unbindMouseMove = function () {\n    this.table.columnManager.columnsByIndex.forEach(function (column) {\n      if (column.modules.moveColumn.mousemove) {\n        column.getElement().removeEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n      }\n    });\n  };\n\n  MoveColumns.prototype.moveColumn = function (column, after) {\n    var movingCells = this.moving.getCells();\n    this.toCol = column;\n    this.toColAfter = after;\n\n    if (after) {\n      column.getCells().forEach(function (cell, i) {\n        var cellEl = cell.getElement();\n        cellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl.nextSibling);\n      });\n    } else {\n      column.getCells().forEach(function (cell, i) {\n        var cellEl = cell.getElement();\n        cellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl);\n      });\n    }\n  };\n\n  MoveColumns.prototype.endMove = function (e) {\n    if (e.which === 1 || this.touchMove) {\n      this._unbindMouseMove();\n\n      this.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n      this.placeholderElement.parentNode.removeChild(this.placeholderElement);\n      this.hoverElement.parentNode.removeChild(this.hoverElement);\n      this.table.element.classList.remove(\"tabulator-block-select\");\n\n      if (this.toCol) {\n        this.table.columnManager.moveColumnActual(this.moving, this.toCol, this.toColAfter);\n      }\n\n      this.moving = false;\n      this.toCol = false;\n      this.toColAfter = false;\n\n      if (!this.touchMove) {\n        document.body.removeEventListener(\"mousemove\", this.moveHover);\n        document.body.removeEventListener(\"mouseup\", this.endMove);\n      }\n    }\n  };\n\n  MoveColumns.prototype.moveHover = function (e) {\n    var self = this,\n        columnHolder = self.table.columnManager.getElement(),\n        scrollLeft = columnHolder.scrollLeft,\n        xPos = (self.touchMove ? e.touches[0].pageX : e.pageX) - Tabulator.prototype.helpers.elOffset(columnHolder).left + scrollLeft,\n        scrollPos;\n    self.hoverElement.style.left = xPos - self.startX + \"px\";\n\n    if (xPos - scrollLeft < self.autoScrollMargin) {\n      if (!self.autoScrollTimeout) {\n        self.autoScrollTimeout = setTimeout(function () {\n          scrollPos = Math.max(0, scrollLeft - 5);\n          self.table.rowManager.getElement().scrollLeft = scrollPos;\n          self.autoScrollTimeout = false;\n        }, 1);\n      }\n    }\n\n    if (scrollLeft + columnHolder.clientWidth - xPos < self.autoScrollMargin) {\n      if (!self.autoScrollTimeout) {\n        self.autoScrollTimeout = setTimeout(function () {\n          scrollPos = Math.min(columnHolder.clientWidth, scrollLeft + 5);\n          self.table.rowManager.getElement().scrollLeft = scrollPos;\n          self.autoScrollTimeout = false;\n        }, 1);\n      }\n    }\n  };\n\n  Tabulator.prototype.registerModule(\"moveColumn\", MoveColumns);\n\n  var MoveRows = function MoveRows(table) {\n    this.table = table; //hold Tabulator object\n\n    this.placeholderElement = this.createPlaceholderElement();\n    this.hoverElement = false; //floating row header element\n\n    this.checkTimeout = false; //click check timeout holder\n\n    this.checkPeriod = 150; //period to wait on mousedown to consider this a move and not a click\n\n    this.moving = false; //currently moving row\n\n    this.toRow = false; //destination row\n\n    this.toRowAfter = false; //position of moving row relative to the desitnation row\n\n    this.hasHandle = false; //row has handle instead of fully movable row\n\n    this.startY = 0; //starting Y position within header element\n\n    this.startX = 0; //starting X position within header element\n\n    this.moveHover = this.moveHover.bind(this);\n    this.endMove = this.endMove.bind(this);\n    this.tableRowDropEvent = false;\n    this.touchMove = false;\n    this.connection = false;\n    this.connectionSelectorsTables = false;\n    this.connectionSelectorsElements = false;\n    this.connectionElements = [];\n    this.connections = [];\n    this.connectedTable = false;\n    this.connectedRow = false;\n  };\n\n  MoveRows.prototype.createPlaceholderElement = function () {\n    var el = document.createElement(\"div\");\n    el.classList.add(\"tabulator-row\");\n    el.classList.add(\"tabulator-row-placeholder\");\n    return el;\n  };\n\n  MoveRows.prototype.initialize = function (handle) {\n    this.connectionSelectorsTables = this.table.options.movableRowsConnectedTables;\n    this.connectionSelectorsElements = this.table.options.movableRowsConnectedElements;\n    this.connection = this.connectionSelectorsTables || this.connectionSelectorsElements;\n  };\n\n  MoveRows.prototype.setHandle = function (handle) {\n    this.hasHandle = handle;\n  };\n\n  MoveRows.prototype.initializeGroupHeader = function (group) {\n    var self = this,\n        config = {},\n        rowEl; //inter table drag drop\n\n    config.mouseup = function (e) {\n      self.tableRowDrop(e, row);\n    }.bind(self); //same table drag drop\n\n\n    config.mousemove = function (e) {\n      if (e.pageY - Tabulator.prototype.helpers.elOffset(group.element).top + self.table.rowManager.element.scrollTop > group.getHeight() / 2) {\n        if (self.toRow !== group || !self.toRowAfter) {\n          var rowEl = group.getElement();\n          rowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n          self.moveRow(group, true);\n        }\n      } else {\n        if (self.toRow !== group || self.toRowAfter) {\n          var rowEl = group.getElement();\n\n          if (rowEl.previousSibling) {\n            rowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n            self.moveRow(group, false);\n          }\n        }\n      }\n    }.bind(self);\n\n    group.modules.moveRow = config;\n  };\n\n  MoveRows.prototype.initializeRow = function (row) {\n    var self = this,\n        config = {},\n        rowEl; //inter table drag drop\n\n    config.mouseup = function (e) {\n      self.tableRowDrop(e, row);\n    }.bind(self); //same table drag drop\n\n\n    config.mousemove = function (e) {\n      if (e.pageY - Tabulator.prototype.helpers.elOffset(row.element).top + self.table.rowManager.element.scrollTop > row.getHeight() / 2) {\n        if (self.toRow !== row || !self.toRowAfter) {\n          var rowEl = row.getElement();\n          rowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n          self.moveRow(row, true);\n        }\n      } else {\n        if (self.toRow !== row || self.toRowAfter) {\n          var rowEl = row.getElement();\n          rowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n          self.moveRow(row, false);\n        }\n      }\n    }.bind(self);\n\n    if (!this.hasHandle) {\n      rowEl = row.getElement();\n      rowEl.addEventListener(\"mousedown\", function (e) {\n        if (e.which === 1) {\n          self.checkTimeout = setTimeout(function () {\n            self.startMove(e, row);\n          }, self.checkPeriod);\n        }\n      });\n      rowEl.addEventListener(\"mouseup\", function (e) {\n        if (e.which === 1) {\n          if (self.checkTimeout) {\n            clearTimeout(self.checkTimeout);\n          }\n        }\n      });\n      this.bindTouchEvents(row, row.getElement());\n    }\n\n    row.modules.moveRow = config;\n  };\n\n  MoveRows.prototype.initializeCell = function (cell) {\n    var self = this,\n        cellEl = cell.getElement();\n    cellEl.addEventListener(\"mousedown\", function (e) {\n      if (e.which === 1) {\n        self.checkTimeout = setTimeout(function () {\n          self.startMove(e, cell.row);\n        }, self.checkPeriod);\n      }\n    });\n    cellEl.addEventListener(\"mouseup\", function (e) {\n      if (e.which === 1) {\n        if (self.checkTimeout) {\n          clearTimeout(self.checkTimeout);\n        }\n      }\n    });\n    this.bindTouchEvents(cell.row, cell.getElement());\n  };\n\n  MoveRows.prototype.bindTouchEvents = function (row, element) {\n    var self = this,\n        startYMove = false,\n        //shifting center position of the cell\n    dir = false,\n        currentRow,\n        nextRow,\n        prevRow,\n        nextRowHeight,\n        prevRowHeight,\n        nextRowHeightLast,\n        prevRowHeightLast;\n    element.addEventListener(\"touchstart\", function (e) {\n      self.checkTimeout = setTimeout(function () {\n        self.touchMove = true;\n        currentRow = row;\n        nextRow = row.nextRow();\n        nextRowHeight = nextRow ? nextRow.getHeight() / 2 : 0;\n        prevRow = row.prevRow();\n        prevRowHeight = prevRow ? prevRow.getHeight() / 2 : 0;\n        nextRowHeightLast = 0;\n        prevRowHeightLast = 0;\n        startYMove = false;\n        self.startMove(e, row);\n      }, self.checkPeriod);\n    }, {\n      passive: true\n    });\n    this.moving, this.toRow, this.toRowAfter;\n    element.addEventListener(\"touchmove\", function (e) {\n      var halfCol, diff, moveToRow;\n\n      if (self.moving) {\n        e.preventDefault();\n        self.moveHover(e);\n\n        if (!startYMove) {\n          startYMove = e.touches[0].pageY;\n        }\n\n        diff = e.touches[0].pageY - startYMove;\n\n        if (diff > 0) {\n          if (nextRow && diff - nextRowHeightLast > nextRowHeight) {\n            moveToRow = nextRow;\n\n            if (moveToRow !== row) {\n              startYMove = e.touches[0].pageY;\n              moveToRow.getElement().parentNode.insertBefore(self.placeholderElement, moveToRow.getElement().nextSibling);\n              self.moveRow(moveToRow, true);\n            }\n          }\n        } else {\n          if (prevRow && -diff - prevRowHeightLast > prevRowHeight) {\n            moveToRow = prevRow;\n\n            if (moveToRow !== row) {\n              startYMove = e.touches[0].pageY;\n              moveToRow.getElement().parentNode.insertBefore(self.placeholderElement, moveToRow.getElement());\n              self.moveRow(moveToRow, false);\n            }\n          }\n        }\n\n        if (moveToRow) {\n          currentRow = moveToRow;\n          nextRow = moveToRow.nextRow();\n          nextRowHeightLast = nextRowHeight;\n          nextRowHeight = nextRow ? nextRow.getHeight() / 2 : 0;\n          prevRow = moveToRow.prevRow();\n          prevRowHeightLast = prevRowHeight;\n          prevRowHeight = prevRow ? prevRow.getHeight() / 2 : 0;\n        }\n      }\n    });\n    element.addEventListener(\"touchend\", function (e) {\n      if (self.checkTimeout) {\n        clearTimeout(self.checkTimeout);\n      }\n\n      if (self.moving) {\n        self.endMove(e);\n        self.touchMove = false;\n      }\n    });\n  };\n\n  MoveRows.prototype._bindMouseMove = function () {\n    var self = this;\n    self.table.rowManager.getDisplayRows().forEach(function (row) {\n      if ((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow.mousemove) {\n        row.getElement().addEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n      }\n    });\n  };\n\n  MoveRows.prototype._unbindMouseMove = function () {\n    var self = this;\n    self.table.rowManager.getDisplayRows().forEach(function (row) {\n      if ((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow.mousemove) {\n        row.getElement().removeEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n      }\n    });\n  };\n\n  MoveRows.prototype.startMove = function (e, row) {\n    var element = row.getElement();\n    this.setStartPosition(e, row);\n    this.moving = row;\n    this.table.element.classList.add(\"tabulator-block-select\"); //create placeholder\n\n    this.placeholderElement.style.width = row.getWidth() + \"px\";\n    this.placeholderElement.style.height = row.getHeight() + \"px\";\n\n    if (!this.connection) {\n      element.parentNode.insertBefore(this.placeholderElement, element);\n      element.parentNode.removeChild(element);\n    } else {\n      this.table.element.classList.add(\"tabulator-movingrow-sending\");\n      this.connectToTables(row);\n    } //create hover element\n\n\n    this.hoverElement = element.cloneNode(true);\n    this.hoverElement.classList.add(\"tabulator-moving\");\n\n    if (this.connection) {\n      document.body.appendChild(this.hoverElement);\n      this.hoverElement.style.left = \"0\";\n      this.hoverElement.style.top = \"0\";\n      this.hoverElement.style.width = this.table.element.clientWidth + \"px\";\n      this.hoverElement.style.whiteSpace = \"nowrap\";\n      this.hoverElement.style.overflow = \"hidden\";\n      this.hoverElement.style.pointerEvents = \"none\";\n    } else {\n      this.table.rowManager.getTableElement().appendChild(this.hoverElement);\n      this.hoverElement.style.left = \"0\";\n      this.hoverElement.style.top = \"0\";\n\n      this._bindMouseMove();\n    }\n\n    document.body.addEventListener(\"mousemove\", this.moveHover);\n    document.body.addEventListener(\"mouseup\", this.endMove);\n    this.moveHover(e);\n  };\n\n  MoveRows.prototype.setStartPosition = function (e, row) {\n    var pageX = this.touchMove ? e.touches[0].pageX : e.pageX,\n        pageY = this.touchMove ? e.touches[0].pageY : e.pageY,\n        element,\n        position;\n    element = row.getElement();\n\n    if (this.connection) {\n      position = element.getBoundingClientRect();\n      this.startX = position.left - pageX + window.pageXOffset;\n      this.startY = position.top - pageY + window.pageYOffset;\n    } else {\n      this.startY = pageY - element.getBoundingClientRect().top;\n    }\n  };\n\n  MoveRows.prototype.endMove = function (e) {\n    if (!e || e.which === 1 || this.touchMove) {\n      this._unbindMouseMove();\n\n      if (!this.connection) {\n        this.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n        this.placeholderElement.parentNode.removeChild(this.placeholderElement);\n      }\n\n      this.hoverElement.parentNode.removeChild(this.hoverElement);\n      this.table.element.classList.remove(\"tabulator-block-select\");\n\n      if (this.toRow) {\n        this.table.rowManager.moveRow(this.moving, this.toRow, this.toRowAfter);\n      }\n\n      this.moving = false;\n      this.toRow = false;\n      this.toRowAfter = false;\n      document.body.removeEventListener(\"mousemove\", this.moveHover);\n      document.body.removeEventListener(\"mouseup\", this.endMove);\n\n      if (this.connection) {\n        this.table.element.classList.remove(\"tabulator-movingrow-sending\");\n        this.disconnectFromTables();\n      }\n    }\n  };\n\n  MoveRows.prototype.moveRow = function (row, after) {\n    this.toRow = row;\n    this.toRowAfter = after;\n  };\n\n  MoveRows.prototype.moveHover = function (e) {\n    if (this.connection) {\n      this.moveHoverConnections.call(this, e);\n    } else {\n      this.moveHoverTable.call(this, e);\n    }\n  };\n\n  MoveRows.prototype.moveHoverTable = function (e) {\n    var rowHolder = this.table.rowManager.getElement(),\n        scrollTop = rowHolder.scrollTop,\n        yPos = (this.touchMove ? e.touches[0].pageY : e.pageY) - rowHolder.getBoundingClientRect().top + scrollTop,\n        scrollPos;\n    this.hoverElement.style.top = yPos - this.startY + \"px\";\n  };\n\n  MoveRows.prototype.moveHoverConnections = function (e) {\n    this.hoverElement.style.left = this.startX + (this.touchMove ? e.touches[0].pageX : e.pageX) + \"px\";\n    this.hoverElement.style.top = this.startY + (this.touchMove ? e.touches[0].pageY : e.pageY) + \"px\";\n  };\n\n  MoveRows.prototype.elementRowDrop = function (e, element, row) {\n    if (this.table.options.movableRowsElementDrop) {\n      this.table.options.movableRowsElementDrop(e, element, row ? row.getComponent() : false);\n    }\n  }; //establish connection with other tables\n\n\n  MoveRows.prototype.connectToTables = function (row) {\n    var _this68 = this;\n\n    var connectionTables;\n\n    if (this.connectionSelectorsTables) {\n      connectionTables = this.table.modules.comms.getConnections(this.connectionSelectorsTables);\n      this.table.options.movableRowsSendingStart.call(this.table, connectionTables);\n      this.table.modules.comms.send(this.connectionSelectorsTables, \"moveRow\", \"connect\", {\n        row: row\n      });\n    }\n\n    if (this.connectionSelectorsElements) {\n      this.connectionElements = [];\n\n      if (!Array.isArray(this.connectionSelectorsElements)) {\n        this.connectionSelectorsElements = [this.connectionSelectorsElements];\n      }\n\n      this.connectionSelectorsElements.forEach(function (query) {\n        if (typeof query === \"string\") {\n          _this68.connectionElements = _this68.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(query)));\n        } else {\n          _this68.connectionElements.push(query);\n        }\n      });\n      this.connectionElements.forEach(function (element) {\n        var dropEvent = function dropEvent(e) {\n          _this68.elementRowDrop(e, element, _this68.moving);\n        };\n\n        element.addEventListener(\"mouseup\", dropEvent);\n        element.tabulatorElementDropEvent = dropEvent;\n        element.classList.add(\"tabulator-movingrow-receiving\");\n      });\n    }\n  }; //disconnect from other tables\n\n\n  MoveRows.prototype.disconnectFromTables = function () {\n    var connectionTables;\n\n    if (this.connectionSelectorsTables) {\n      connectionTables = this.table.modules.comms.getConnections(this.connectionSelectorsTables);\n      this.table.options.movableRowsSendingStop.call(this.table, connectionTables);\n      this.table.modules.comms.send(this.connectionSelectorsTables, \"moveRow\", \"disconnect\");\n    }\n\n    this.connectionElements.forEach(function (element) {\n      element.classList.remove(\"tabulator-movingrow-receiving\");\n      element.removeEventListener(\"mouseup\", element.tabulatorElementDropEvent);\n      delete element.tabulatorElementDropEvent;\n    });\n  }; //accept incomming connection\n\n\n  MoveRows.prototype.connect = function (table, row) {\n    var self = this;\n\n    if (!this.connectedTable) {\n      this.connectedTable = table;\n      this.connectedRow = row;\n      this.table.element.classList.add(\"tabulator-movingrow-receiving\");\n      self.table.rowManager.getDisplayRows().forEach(function (row) {\n        if (row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup) {\n          row.getElement().addEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n        }\n      });\n      self.tableRowDropEvent = self.tableRowDrop.bind(self);\n      self.table.element.addEventListener(\"mouseup\", self.tableRowDropEvent);\n      this.table.options.movableRowsReceivingStart.call(this.table, row, table);\n      return true;\n    } else {\n      console.warn(\"Move Row Error - Table cannot accept connection, already connected to table:\", this.connectedTable);\n      return false;\n    }\n  }; //close incomming connection\n\n\n  MoveRows.prototype.disconnect = function (table) {\n    var self = this;\n\n    if (table === this.connectedTable) {\n      this.connectedTable = false;\n      this.connectedRow = false;\n      this.table.element.classList.remove(\"tabulator-movingrow-receiving\");\n      self.table.rowManager.getDisplayRows().forEach(function (row) {\n        if (row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup) {\n          row.getElement().removeEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n        }\n      });\n      self.table.element.removeEventListener(\"mouseup\", self.tableRowDropEvent);\n      this.table.options.movableRowsReceivingStop.call(this.table, table);\n    } else {\n      console.warn(\"Move Row Error - trying to disconnect from non connected table\");\n    }\n  };\n\n  MoveRows.prototype.dropComplete = function (table, row, success) {\n    var sender = false;\n\n    if (success) {\n      switch (_typeof(this.table.options.movableRowsSender)) {\n        case \"string\":\n          sender = this.senders[this.table.options.movableRowsSender];\n          break;\n\n        case \"function\":\n          sender = this.table.options.movableRowsSender;\n          break;\n      }\n\n      if (sender) {\n        sender.call(this, this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n      } else {\n        if (this.table.options.movableRowsSender) {\n          console.warn(\"Mover Row Error - no matching sender found:\", this.table.options.movableRowsSender);\n        }\n      }\n\n      this.table.options.movableRowsSent.call(this.table, this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n    } else {\n      this.table.options.movableRowsSentFailed.call(this.table, this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n    }\n\n    this.endMove();\n  };\n\n  MoveRows.prototype.tableRowDrop = function (e, row) {\n    var receiver = false,\n        success = false;\n    console.trace(\"drop\");\n    e.stopImmediatePropagation();\n\n    switch (_typeof(this.table.options.movableRowsReceiver)) {\n      case \"string\":\n        receiver = this.receivers[this.table.options.movableRowsReceiver];\n        break;\n\n      case \"function\":\n        receiver = this.table.options.movableRowsReceiver;\n        break;\n    }\n\n    if (receiver) {\n      success = receiver.call(this, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n    } else {\n      console.warn(\"Mover Row Error - no matching receiver found:\", this.table.options.movableRowsReceiver);\n    }\n\n    if (success) {\n      this.table.options.movableRowsReceived.call(this.table, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n    } else {\n      this.table.options.movableRowsReceivedFailed.call(this.table, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n    }\n\n    this.table.modules.comms.send(this.connectedTable, \"moveRow\", \"dropcomplete\", {\n      row: row,\n      success: success\n    });\n  };\n\n  MoveRows.prototype.receivers = {\n    insert: function insert(fromRow, toRow, fromTable) {\n      this.table.addRow(fromRow.getData(), undefined, toRow);\n      return true;\n    },\n    add: function add(fromRow, toRow, fromTable) {\n      this.table.addRow(fromRow.getData());\n      return true;\n    },\n    update: function update(fromRow, toRow, fromTable) {\n      if (toRow) {\n        toRow.update(fromRow.getData());\n        return true;\n      }\n\n      return false;\n    },\n    replace: function replace(fromRow, toRow, fromTable) {\n      if (toRow) {\n        this.table.addRow(fromRow.getData(), undefined, toRow);\n        toRow.delete();\n        return true;\n      }\n\n      return false;\n    }\n  };\n  MoveRows.prototype.senders = {\n    delete: function _delete(fromRow, toRow, toTable) {\n      fromRow.delete();\n    }\n  };\n\n  MoveRows.prototype.commsReceived = function (table, action, data) {\n    switch (action) {\n      case \"connect\":\n        return this.connect(table, data.row);\n        break;\n\n      case \"disconnect\":\n        return this.disconnect(table);\n        break;\n\n      case \"dropcomplete\":\n        return this.dropComplete(table, data.row, data.success);\n        break;\n    }\n  };\n\n  Tabulator.prototype.registerModule(\"moveRow\", MoveRows);\n\n  var Mutator = function Mutator(table) {\n    this.table = table; //hold Tabulator object\n\n    this.allowedTypes = [\"\", \"data\", \"edit\", \"clipboard\"]; //list of muatation types\n\n    this.enabled = true;\n  }; //initialize column mutator\n\n\n  Mutator.prototype.initializeColumn = function (column) {\n    var self = this,\n        match = false,\n        config = {};\n    this.allowedTypes.forEach(function (type) {\n      var key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n          mutator;\n\n      if (column.definition[key]) {\n        mutator = self.lookupMutator(column.definition[key]);\n\n        if (mutator) {\n          match = true;\n          config[key] = {\n            mutator: mutator,\n            params: column.definition[key + \"Params\"] || {}\n          };\n        }\n      }\n    });\n\n    if (match) {\n      column.modules.mutate = config;\n    }\n  };\n\n  Mutator.prototype.lookupMutator = function (value) {\n    var mutator = false; //set column mutator\n\n    switch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n      case \"string\":\n        if (this.mutators[value]) {\n          mutator = this.mutators[value];\n        } else {\n          console.warn(\"Mutator Error - No such mutator found, ignoring: \", value);\n        }\n\n        break;\n\n      case \"function\":\n        mutator = value;\n        break;\n    }\n\n    return mutator;\n  }; //apply mutator to row\n\n\n  Mutator.prototype.transformRow = function (data, type, updatedData) {\n    var self = this,\n        key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n        value;\n\n    if (this.enabled) {\n      self.table.columnManager.traverse(function (column) {\n        var mutator, params, component;\n\n        if (column.modules.mutate) {\n          mutator = column.modules.mutate[key] || column.modules.mutate.mutator || false;\n\n          if (mutator) {\n            value = column.getFieldValue(typeof updatedData !== \"undefined\" ? updatedData : data);\n\n            if (type == \"data\" || typeof value !== \"undefined\") {\n              component = column.getComponent();\n              params = typeof mutator.params === \"function\" ? mutator.params(value, data, type, component) : mutator.params;\n              column.setFieldValue(data, mutator.mutator(value, data, type, params, component));\n            }\n          }\n        }\n      });\n    }\n\n    return data;\n  }; //apply mutator to new cell value\n\n\n  Mutator.prototype.transformCell = function (cell, value) {\n    var mutator = cell.column.modules.mutate.mutatorEdit || cell.column.modules.mutate.mutator || false,\n        tempData = {};\n\n    if (mutator) {\n      tempData = Object.assign(tempData, cell.row.getData());\n      cell.column.setFieldValue(tempData, value);\n      return mutator.mutator(value, tempData, \"edit\", mutator.params, cell.getComponent());\n    } else {\n      return value;\n    }\n  };\n\n  Mutator.prototype.enable = function () {\n    this.enabled = true;\n  };\n\n  Mutator.prototype.disable = function () {\n    this.enabled = false;\n  }; //default mutators\n\n\n  Mutator.prototype.mutators = {};\n  Tabulator.prototype.registerModule(\"mutator\", Mutator);\n\n  var Page = function Page(table) {\n    this.table = table; //hold Tabulator object\n\n    this.mode = \"local\";\n    this.progressiveLoad = false;\n    this.size = 0;\n    this.page = 1;\n    this.count = 5;\n    this.max = 1;\n    this.displayIndex = 0; //index in display pipeline\n\n    this.initialLoad = true;\n    this.pageSizes = [];\n    this.dataReceivedNames = {};\n    this.dataSentNames = {};\n    this.createElements();\n  };\n\n  Page.prototype.createElements = function () {\n    var button;\n    this.element = document.createElement(\"span\");\n    this.element.classList.add(\"tabulator-paginator\");\n    this.pagesElement = document.createElement(\"span\");\n    this.pagesElement.classList.add(\"tabulator-pages\");\n    button = document.createElement(\"button\");\n    button.classList.add(\"tabulator-page\");\n    button.setAttribute(\"type\", \"button\");\n    button.setAttribute(\"role\", \"button\");\n    button.setAttribute(\"aria-label\", \"\");\n    button.setAttribute(\"title\", \"\");\n    this.firstBut = button.cloneNode(true);\n    this.firstBut.setAttribute(\"data-page\", \"first\");\n    this.prevBut = button.cloneNode(true);\n    this.prevBut.setAttribute(\"data-page\", \"prev\");\n    this.nextBut = button.cloneNode(true);\n    this.nextBut.setAttribute(\"data-page\", \"next\");\n    this.lastBut = button.cloneNode(true);\n    this.lastBut.setAttribute(\"data-page\", \"last\");\n\n    if (this.table.options.paginationSizeSelector) {\n      this.pageSizeSelect = document.createElement(\"select\");\n      this.pageSizeSelect.classList.add(\"tabulator-page-size\");\n    }\n  };\n\n  Page.prototype.generatePageSizeSelectList = function () {\n    var _this69 = this;\n\n    var pageSizes = [];\n\n    if (this.pageSizeSelect) {\n      if (Array.isArray(this.table.options.paginationSizeSelector)) {\n        pageSizes = this.table.options.paginationSizeSelector;\n        this.pageSizes = pageSizes;\n\n        if (this.pageSizes.indexOf(this.size) == -1) {\n          pageSizes.unshift(this.size);\n        }\n      } else {\n        if (this.pageSizes.indexOf(this.size) == -1) {\n          pageSizes = [];\n\n          for (var _i10 = 1; _i10 < 5; _i10++) {\n            pageSizes.push(this.size * _i10);\n          }\n\n          this.pageSizes = pageSizes;\n        } else {\n          pageSizes = this.pageSizes;\n        }\n      }\n\n      while (this.pageSizeSelect.firstChild) {\n        this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);\n      }\n\n      pageSizes.forEach(function (item) {\n        var itemEl = document.createElement(\"option\");\n        itemEl.value = item;\n\n        if (item === true) {\n          _this69.table.modules.localize.bind(\"pagination|all\", function (value) {\n            itemEl.innerHTML = value;\n          });\n        } else {\n          itemEl.innerHTML = item;\n        }\n\n        _this69.pageSizeSelect.appendChild(itemEl);\n      });\n      this.pageSizeSelect.value = this.size;\n    }\n  }; //setup pageination\n\n\n  Page.prototype.initialize = function (hidden) {\n    var self = this,\n        pageSelectLabel,\n        testElRow,\n        testElCell; //update param names\n\n    this.dataSentNames = Object.assign({}, this.paginationDataSentNames);\n    this.dataSentNames = Object.assign(this.dataSentNames, this.table.options.paginationDataSent);\n    this.dataReceivedNames = Object.assign({}, this.paginationDataReceivedNames);\n    this.dataReceivedNames = Object.assign(this.dataReceivedNames, this.table.options.paginationDataReceived); //build pagination element\n    //bind localizations\n\n    self.table.modules.localize.bind(\"pagination|first\", function (value) {\n      self.firstBut.innerHTML = value;\n    });\n    self.table.modules.localize.bind(\"pagination|first_title\", function (value) {\n      self.firstBut.setAttribute(\"aria-label\", value);\n      self.firstBut.setAttribute(\"title\", value);\n    });\n    self.table.modules.localize.bind(\"pagination|prev\", function (value) {\n      self.prevBut.innerHTML = value;\n    });\n    self.table.modules.localize.bind(\"pagination|prev_title\", function (value) {\n      self.prevBut.setAttribute(\"aria-label\", value);\n      self.prevBut.setAttribute(\"title\", value);\n    });\n    self.table.modules.localize.bind(\"pagination|next\", function (value) {\n      self.nextBut.innerHTML = value;\n    });\n    self.table.modules.localize.bind(\"pagination|next_title\", function (value) {\n      self.nextBut.setAttribute(\"aria-label\", value);\n      self.nextBut.setAttribute(\"title\", value);\n    });\n    self.table.modules.localize.bind(\"pagination|last\", function (value) {\n      self.lastBut.innerHTML = value;\n    });\n    self.table.modules.localize.bind(\"pagination|last_title\", function (value) {\n      self.lastBut.setAttribute(\"aria-label\", value);\n      self.lastBut.setAttribute(\"title\", value);\n    }); //click bindings\n\n    self.firstBut.addEventListener(\"click\", function () {\n      self.setPage(1);\n    });\n    self.prevBut.addEventListener(\"click\", function () {\n      self.previousPage();\n    });\n    self.nextBut.addEventListener(\"click\", function () {\n      self.nextPage().then(function () {}).catch(function () {});\n    });\n    self.lastBut.addEventListener(\"click\", function () {\n      self.setPage(self.max);\n    });\n\n    if (self.table.options.paginationElement) {\n      self.element = self.table.options.paginationElement;\n    }\n\n    if (this.pageSizeSelect) {\n      pageSelectLabel = document.createElement(\"label\");\n      self.table.modules.localize.bind(\"pagination|page_size\", function (value) {\n        self.pageSizeSelect.setAttribute(\"aria-label\", value);\n        self.pageSizeSelect.setAttribute(\"title\", value);\n        pageSelectLabel.innerHTML = value;\n      });\n      self.element.appendChild(pageSelectLabel);\n      self.element.appendChild(self.pageSizeSelect);\n      self.pageSizeSelect.addEventListener(\"change\", function (e) {\n        self.setPageSize(self.pageSizeSelect.value == \"true\" ? true : self.pageSizeSelect.value);\n        self.setPage(1).then(function () {}).catch(function () {});\n      });\n    } //append to DOM\n\n\n    self.element.appendChild(self.firstBut);\n    self.element.appendChild(self.prevBut);\n    self.element.appendChild(self.pagesElement);\n    self.element.appendChild(self.nextBut);\n    self.element.appendChild(self.lastBut);\n\n    if (!self.table.options.paginationElement && !hidden) {\n      self.table.footerManager.append(self.element, self);\n    } //set default values\n\n\n    self.mode = self.table.options.pagination;\n\n    if (self.table.options.paginationSize) {\n      self.size = self.table.options.paginationSize;\n    } else {\n      testElRow = document.createElement(\"div\");\n      testElRow.classList.add(\"tabulator-row\");\n      testElRow.style.visibility = hidden;\n      testElCell = document.createElement(\"div\");\n      testElCell.classList.add(\"tabulator-cell\");\n      testElCell.innerHTML = \"Page Row Test\";\n      testElRow.appendChild(testElCell);\n      self.table.rowManager.getTableElement().appendChild(testElRow);\n      self.size = Math.floor(self.table.rowManager.getElement().clientHeight / testElRow.offsetHeight);\n      self.table.rowManager.getTableElement().removeChild(testElRow);\n    } // self.page = self.table.options.paginationInitialPage || 1;\n\n\n    self.count = self.table.options.paginationButtonCount;\n    self.generatePageSizeSelectList();\n  };\n\n  Page.prototype.initializeProgressive = function (mode) {\n    this.initialize(true);\n    this.mode = \"progressive_\" + mode;\n    this.progressiveLoad = true;\n  };\n\n  Page.prototype.setDisplayIndex = function (index) {\n    this.displayIndex = index;\n  };\n\n  Page.prototype.getDisplayIndex = function () {\n    return this.displayIndex;\n  }; //calculate maximum page from number of rows\n\n\n  Page.prototype.setMaxRows = function (rowCount) {\n    if (!rowCount) {\n      this.max = 1;\n    } else {\n      this.max = this.size === true ? 1 : Math.ceil(rowCount / this.size);\n    }\n\n    if (this.page > this.max) {\n      this.page = this.max;\n    }\n  }; //reset to first page without triggering action\n\n\n  Page.prototype.reset = function (force, columnsChanged) {\n    if (this.mode == \"local\" || force) {\n      this.page = 1;\n    }\n\n    if (columnsChanged) {\n      this.initialLoad = true;\n    }\n\n    return true;\n  }; //set the maxmum page\n\n\n  Page.prototype.setMaxPage = function (max) {\n    max = parseInt(max);\n    this.max = max || 1;\n\n    if (this.page > this.max) {\n      this.page = this.max;\n      this.trigger();\n    }\n  }; //set current page number\n\n\n  Page.prototype.setPage = function (page) {\n    var _this70 = this;\n\n    var self = this;\n\n    switch (page) {\n      case \"first\":\n        return this.setPage(1);\n        break;\n\n      case \"prev\":\n        return this.previousPage();\n        break;\n\n      case \"next\":\n        return this.nextPage();\n        break;\n\n      case \"last\":\n        return this.setPage(this.max);\n        break;\n    }\n\n    return new Promise(function (resolve, reject) {\n      page = parseInt(page);\n\n      if (page > 0 && page <= _this70.max) {\n        _this70.page = page;\n\n        _this70.trigger().then(function () {\n          resolve();\n        }).catch(function () {\n          reject();\n        });\n\n        if (self.table.options.persistence && self.table.modExists(\"persistence\", true) && self.table.modules.persistence.config.page) {\n          self.table.modules.persistence.save(\"page\");\n        }\n      } else {\n        console.warn(\"Pagination Error - Requested page is out of range of 1 - \" + _this70.max + \":\", page);\n        reject();\n      }\n    });\n  };\n\n  Page.prototype.setPageToRow = function (row) {\n    var _this71 = this;\n\n    return new Promise(function (resolve, reject) {\n      var rows = _this71.table.rowManager.getDisplayRows(_this71.displayIndex - 1);\n\n      var index = rows.indexOf(row);\n\n      if (index > -1) {\n        var page = _this71.size === true ? 1 : Math.ceil((index + 1) / _this71.size);\n\n        _this71.setPage(page).then(function () {\n          resolve();\n        }).catch(function () {\n          reject();\n        });\n      } else {\n        console.warn(\"Pagination Error - Requested row is not visible\");\n        reject();\n      }\n    });\n  };\n\n  Page.prototype.setPageSize = function (size) {\n    if (size !== true) {\n      size = parseInt(size);\n    }\n\n    if (size > 0) {\n      this.size = size;\n    }\n\n    if (this.pageSizeSelect) {\n      // this.pageSizeSelect.value = size;\n      this.generatePageSizeSelectList();\n    }\n\n    if (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.page) {\n      this.table.modules.persistence.save(\"page\");\n    }\n  }; //setup the pagination buttons\n\n\n  Page.prototype._setPageButtons = function () {\n    var self = this;\n    var leftSize = Math.floor((this.count - 1) / 2);\n    var rightSize = Math.ceil((this.count - 1) / 2);\n    var min = this.max - this.page + leftSize + 1 < this.count ? this.max - this.count + 1 : Math.max(this.page - leftSize, 1);\n    var max = this.page <= rightSize ? Math.min(this.count, this.max) : Math.min(this.page + rightSize, this.max);\n\n    while (self.pagesElement.firstChild) {\n      self.pagesElement.removeChild(self.pagesElement.firstChild);\n    }\n\n    if (self.page == 1) {\n      self.firstBut.disabled = true;\n      self.prevBut.disabled = true;\n    } else {\n      self.firstBut.disabled = false;\n      self.prevBut.disabled = false;\n    }\n\n    if (self.page == self.max) {\n      self.lastBut.disabled = true;\n      self.nextBut.disabled = true;\n    } else {\n      self.lastBut.disabled = false;\n      self.nextBut.disabled = false;\n    }\n\n    for (var _i11 = min; _i11 <= max; _i11++) {\n      if (_i11 > 0 && _i11 <= self.max) {\n        self.pagesElement.appendChild(self._generatePageButton(_i11));\n      }\n    }\n\n    this.footerRedraw();\n  };\n\n  Page.prototype._generatePageButton = function (page) {\n    var self = this,\n        button = document.createElement(\"button\");\n    button.classList.add(\"tabulator-page\");\n\n    if (page == self.page) {\n      button.classList.add(\"active\");\n    }\n\n    button.setAttribute(\"type\", \"button\");\n    button.setAttribute(\"role\", \"button\");\n    self.table.modules.localize.bind(\"pagination|page_title\", function (value) {\n      button.setAttribute(\"aria-label\", value + \" \" + page);\n      button.setAttribute(\"title\", value + \" \" + page);\n    });\n    button.setAttribute(\"data-page\", page);\n    button.textContent = page;\n    button.addEventListener(\"click\", function (e) {\n      self.setPage(page);\n    });\n    return button;\n  }; //previous page\n\n\n  Page.prototype.previousPage = function () {\n    var _this72 = this;\n\n    return new Promise(function (resolve, reject) {\n      if (_this72.page > 1) {\n        _this72.page--;\n\n        _this72.trigger().then(function () {\n          resolve();\n        }).catch(function () {\n          reject();\n        });\n\n        if (_this72.table.options.persistence && _this72.table.modExists(\"persistence\", true) && _this72.table.modules.persistence.config.page) {\n          _this72.table.modules.persistence.save(\"page\");\n        }\n      } else {\n        console.warn(\"Pagination Error - Previous page would be less than page 1:\", 0);\n        reject();\n      }\n    });\n  }; //next page\n\n\n  Page.prototype.nextPage = function () {\n    var _this73 = this;\n\n    return new Promise(function (resolve, reject) {\n      if (_this73.page < _this73.max) {\n        _this73.page++;\n\n        _this73.trigger().then(function () {\n          resolve();\n        }).catch(function () {\n          reject();\n        });\n\n        if (_this73.table.options.persistence && _this73.table.modExists(\"persistence\", true) && _this73.table.modules.persistence.config.page) {\n          _this73.table.modules.persistence.save(\"page\");\n        }\n      } else {\n        if (!_this73.progressiveLoad) {\n          console.warn(\"Pagination Error - Next page would be greater than maximum page of \" + _this73.max + \":\", _this73.max + 1);\n        }\n\n        reject();\n      }\n    });\n  }; //return current page number\n\n\n  Page.prototype.getPage = function () {\n    return this.page;\n  }; //return max page number\n\n\n  Page.prototype.getPageMax = function () {\n    return this.max;\n  };\n\n  Page.prototype.getPageSize = function (size) {\n    return this.size;\n  };\n\n  Page.prototype.getMode = function () {\n    return this.mode;\n  }; //return appropriate rows for current page\n\n\n  Page.prototype.getRows = function (data) {\n    var output, start, end;\n\n    if (this.mode == \"local\") {\n      output = [];\n\n      if (this.size === true) {\n        start = 0;\n        end = data.length - 1;\n      } else {\n        start = this.size * (this.page - 1);\n        end = start + parseInt(this.size);\n      }\n\n      this._setPageButtons();\n\n      for (var _i12 = start; _i12 < end; _i12++) {\n        if (data[_i12]) {\n          output.push(data[_i12]);\n        }\n      }\n\n      return output;\n    } else {\n      this._setPageButtons();\n\n      return data.slice(0);\n    }\n  };\n\n  Page.prototype.trigger = function () {\n    var _this74 = this;\n\n    var left;\n    return new Promise(function (resolve, reject) {\n      switch (_this74.mode) {\n        case \"local\":\n          left = _this74.table.rowManager.scrollLeft;\n\n          _this74.table.rowManager.refreshActiveData(\"page\");\n\n          _this74.table.rowManager.scrollHorizontal(left);\n\n          _this74.table.options.pageLoaded.call(_this74.table, _this74.getPage());\n\n          resolve();\n          break;\n\n        case \"remote\":\n        case \"progressive_load\":\n        case \"progressive_scroll\":\n          _this74.table.modules.ajax.blockActiveRequest();\n\n          _this74._getRemotePage().then(function () {\n            resolve();\n          }).catch(function () {\n            reject();\n          });\n\n          break;\n\n        default:\n          console.warn(\"Pagination Error - no such pagination mode:\", _this74.mode);\n          reject();\n      }\n    });\n  };\n\n  Page.prototype._getRemotePage = function () {\n    var _this75 = this;\n\n    var self = this,\n        oldParams,\n        pageParams;\n    return new Promise(function (resolve, reject) {\n      if (!self.table.modExists(\"ajax\", true)) {\n        reject();\n      } //record old params and restore after request has been made\n\n\n      oldParams = Tabulator.prototype.helpers.deepClone(self.table.modules.ajax.getParams() || {});\n      pageParams = self.table.modules.ajax.getParams(); //configure request params\n\n      pageParams[_this75.dataSentNames.page] = self.page; //set page size if defined\n\n      if (_this75.size) {\n        pageParams[_this75.dataSentNames.size] = _this75.size;\n      } //set sort data if defined\n\n\n      if (_this75.table.options.ajaxSorting && _this75.table.modExists(\"sort\")) {\n        var sorters = self.table.modules.sort.getSort();\n        sorters.forEach(function (item) {\n          delete item.column;\n        });\n        pageParams[_this75.dataSentNames.sorters] = sorters;\n      } //set filter data if defined\n\n\n      if (_this75.table.options.ajaxFiltering && _this75.table.modExists(\"filter\")) {\n        var filters = self.table.modules.filter.getFilters(true, true);\n        pageParams[_this75.dataSentNames.filters] = filters;\n      }\n\n      self.table.modules.ajax.setParams(pageParams);\n      self.table.modules.ajax.sendRequest(_this75.progressiveLoad).then(function (data) {\n        self._parseRemoteData(data);\n\n        resolve();\n      }).catch(function (e) {\n        reject();\n      });\n      self.table.modules.ajax.setParams(oldParams);\n    });\n  };\n\n  Page.prototype._parseRemoteData = function (data) {\n    var self = this,\n        left,\n        data,\n        margin;\n\n    if (typeof data[this.dataReceivedNames.last_page] === \"undefined\") {\n      console.warn(\"Remote Pagination Error - Server response missing '\" + this.dataReceivedNames.last_page + \"' property\");\n    }\n\n    if (data[this.dataReceivedNames.data]) {\n      this.max = parseInt(data[this.dataReceivedNames.last_page]) || 1;\n\n      if (this.progressiveLoad) {\n        switch (this.mode) {\n          case \"progressive_load\":\n            if (this.page == 1) {\n              this.table.rowManager.setData(data[this.dataReceivedNames.data], false, this.initialLoad && this.page == 1);\n            } else {\n              this.table.rowManager.addRows(data[this.dataReceivedNames.data]);\n            }\n\n            if (this.page < this.max) {\n              setTimeout(function () {\n                self.nextPage().then(function () {}).catch(function () {});\n              }, self.table.options.ajaxProgressiveLoadDelay);\n            }\n\n            break;\n\n          case \"progressive_scroll\":\n            data = this.table.rowManager.getData().concat(data[this.dataReceivedNames.data]);\n            this.table.rowManager.setData(data, true, this.initialLoad && this.page == 1);\n            margin = this.table.options.ajaxProgressiveLoadScrollMargin || this.table.rowManager.element.clientHeight * 2;\n\n            if (self.table.rowManager.element.scrollHeight <= self.table.rowManager.element.clientHeight + margin) {\n              self.nextPage().then(function () {}).catch(function () {});\n            }\n\n            break;\n        }\n      } else {\n        left = this.table.rowManager.scrollLeft;\n        this.table.rowManager.setData(data[this.dataReceivedNames.data], false, this.initialLoad && this.page == 1);\n        this.table.rowManager.scrollHorizontal(left);\n        this.table.columnManager.scrollHorizontal(left);\n        this.table.options.pageLoaded.call(this.table, this.getPage());\n      }\n\n      this.initialLoad = false;\n    } else {\n      console.warn(\"Remote Pagination Error - Server response missing '\" + this.dataReceivedNames.data + \"' property\");\n    }\n  }; //handle the footer element being redrawn\n\n\n  Page.prototype.footerRedraw = function () {\n    var footer = this.table.footerManager.element;\n\n    if (Math.ceil(footer.clientWidth) - footer.scrollWidth < 0) {\n      this.pagesElement.style.display = 'none';\n    } else {\n      this.pagesElement.style.display = '';\n\n      if (Math.ceil(footer.clientWidth) - footer.scrollWidth < 0) {\n        this.pagesElement.style.display = 'none';\n      }\n    }\n  }; //set the paramter names for pagination requests\n\n\n  Page.prototype.paginationDataSentNames = {\n    \"page\": \"page\",\n    \"size\": \"size\",\n    \"sorters\": \"sorters\",\n    // \"sort_dir\":\"sort_dir\",\n    \"filters\": \"filters\" // \"filter_value\":\"filter_value\",\n    // \"filter_type\":\"filter_type\",\n\n  }; //set the property names for pagination responses\n\n  Page.prototype.paginationDataReceivedNames = {\n    \"current_page\": \"current_page\",\n    \"last_page\": \"last_page\",\n    \"data\": \"data\"\n  };\n  Tabulator.prototype.registerModule(\"page\", Page);\n\n  var Persistence = function Persistence(table) {\n    this.table = table; //hold Tabulator object\n\n    this.mode = \"\";\n    this.id = \"\"; // this.persistProps = [\"field\", \"width\", \"visible\"];\n\n    this.defWatcherBlock = false;\n    this.config = {};\n    this.readFunc = false;\n    this.writeFunc = false;\n  }; // Test for whether localStorage is available for use.\n\n\n  Persistence.prototype.localStorageTest = function () {\n    var testKey = \"_tabulator_test\";\n\n    try {\n      window.localStorage.setItem(testKey, testKey);\n      window.localStorage.removeItem(testKey);\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }; //setup parameters\n\n\n  Persistence.prototype.initialize = function () {\n    //determine persistent layout storage type\n    var mode = this.table.options.persistenceMode,\n        id = this.table.options.persistenceID,\n        retreivedData;\n    this.mode = mode !== true ? mode : this.localStorageTest() ? \"local\" : \"cookie\";\n\n    if (this.table.options.persistenceReaderFunc) {\n      if (typeof this.table.options.persistenceReaderFunc === \"function\") {\n        this.readFunc = this.table.options.persistenceReaderFunc;\n      } else {\n        if (this.readers[this.table.options.persistenceReaderFunc]) {\n          this.readFunc = this.readers[this.table.options.persistenceReaderFunc];\n        } else {\n          console.warn(\"Persistence Read Error - invalid reader set\", this.table.options.persistenceReaderFunc);\n        }\n      }\n    } else {\n      if (this.readers[this.mode]) {\n        this.readFunc = this.readers[this.mode];\n      } else {\n        console.warn(\"Persistence Read Error - invalid reader set\", this.mode);\n      }\n    }\n\n    if (this.table.options.persistenceWriterFunc) {\n      if (typeof this.table.options.persistenceWriterFunc === \"function\") {\n        this.writeFunc = this.table.options.persistenceWriterFunc;\n      } else {\n        if (this.readers[this.table.options.persistenceWriterFunc]) {\n          this.writeFunc = this.readers[this.table.options.persistenceWriterFunc];\n        } else {\n          console.warn(\"Persistence Write Error - invalid reader set\", this.table.options.persistenceWriterFunc);\n        }\n      }\n    } else {\n      if (this.writers[this.mode]) {\n        this.writeFunc = this.writers[this.mode];\n      } else {\n        console.warn(\"Persistence Write Error - invalid writer set\", this.mode);\n      }\n    } //set storage tag\n\n\n    this.id = \"tabulator-\" + (id || this.table.element.getAttribute(\"id\") || \"\");\n    this.config = {\n      sort: this.table.options.persistence === true || this.table.options.persistence.sort,\n      filter: this.table.options.persistence === true || this.table.options.persistence.filter,\n      group: this.table.options.persistence === true || this.table.options.persistence.group,\n      page: this.table.options.persistence === true || this.table.options.persistence.page,\n      columns: this.table.options.persistence === true ? [\"title\", \"width\", \"visible\"] : this.table.options.persistence.columns\n    }; //load pagination data if needed\n\n    if (this.config.page) {\n      retreivedData = this.retreiveData(\"page\");\n\n      if (retreivedData) {\n        if (typeof retreivedData.paginationSize !== \"undefined\" && (this.config.page === true || this.config.page.size)) {\n          this.table.options.paginationSize = retreivedData.paginationSize;\n        }\n\n        if (typeof retreivedData.paginationInitialPage !== \"undefined\" && (this.config.page === true || this.config.page.page)) {\n          this.table.options.paginationInitialPage = retreivedData.paginationInitialPage;\n        }\n      }\n    } //load group data if needed\n\n\n    if (this.config.group) {\n      retreivedData = this.retreiveData(\"group\");\n\n      if (retreivedData) {\n        if (typeof retreivedData.groupBy !== \"undefined\" && (this.config.group === true || this.config.group.groupBy)) {\n          this.table.options.groupBy = retreivedData.groupBy;\n        }\n\n        if (typeof retreivedData.groupStartOpen !== \"undefined\" && (this.config.group === true || this.config.group.groupStartOpen)) {\n          this.table.options.groupStartOpen = retreivedData.groupStartOpen;\n        }\n\n        if (typeof retreivedData.groupHeader !== \"undefined\" && (this.config.group === true || this.config.group.groupHeader)) {\n          this.table.options.groupHeader = retreivedData.groupHeader;\n        }\n      }\n    }\n  };\n\n  Persistence.prototype.initializeColumn = function (column) {\n    var self = this,\n        def,\n        keys;\n\n    if (this.config.columns) {\n      this.defWatcherBlock = true;\n      def = column.getDefinition();\n      keys = this.config.columns === true ? Object.keys(def) : this.config.columns;\n      keys.forEach(function (key) {\n        var props = Object.getOwnPropertyDescriptor(def, key);\n        var value = def[key];\n\n        if (props) {\n          Object.defineProperty(def, key, {\n            set: function set(newValue) {\n              value = newValue;\n\n              if (!self.defWatcherBlock) {\n                self.save(\"columns\");\n              }\n\n              if (props.set) {\n                props.set(newValue);\n              }\n            },\n            get: function get() {\n              if (props.get) {\n                props.get();\n              }\n\n              return value;\n            }\n          });\n        }\n      });\n      this.defWatcherBlock = false;\n    }\n  }; //load saved definitions\n\n\n  Persistence.prototype.load = function (type, current) {\n    var data = this.retreiveData(type);\n\n    if (current) {\n      data = data ? this.mergeDefinition(current, data) : current;\n    }\n\n    return data;\n  }; //retreive data from memory\n\n\n  Persistence.prototype.retreiveData = function (type) {\n    return this.readFunc ? this.readFunc(this.id, type) : false;\n  }; //merge old and new column definitions\n\n\n  Persistence.prototype.mergeDefinition = function (oldCols, newCols) {\n    var self = this,\n        output = []; // oldCols = oldCols || [];\n\n    newCols = newCols || [];\n    newCols.forEach(function (column, to) {\n      var from = self._findColumn(oldCols, column),\n          keys;\n\n      if (from) {\n        if (self.config.columns === true || self.config.columns == undefined) {\n          keys = Object.keys(from);\n          keys.push(\"width\");\n        } else {\n          keys = self.config.columns;\n        }\n\n        keys.forEach(function (key) {\n          if (typeof column[key] !== \"undefined\") {\n            from[key] = column[key];\n          }\n        });\n\n        if (from.columns) {\n          from.columns = self.mergeDefinition(from.columns, column.columns);\n        }\n\n        output.push(from);\n      }\n    });\n    oldCols.forEach(function (column, i) {\n      var from = self._findColumn(newCols, column);\n\n      if (!from) {\n        if (output.length > i) {\n          output.splice(i, 0, column);\n        } else {\n          output.push(column);\n        }\n      }\n    });\n    return output;\n  }; //find matching columns\n\n\n  Persistence.prototype._findColumn = function (columns, subject) {\n    var type = subject.columns ? \"group\" : subject.field ? \"field\" : \"object\";\n    return columns.find(function (col) {\n      switch (type) {\n        case \"group\":\n          return col.title === subject.title && col.columns.length === subject.columns.length;\n          break;\n\n        case \"field\":\n          return col.field === subject.field;\n          break;\n\n        case \"object\":\n          return col === subject;\n          break;\n      }\n    });\n  }; //save data\n\n\n  Persistence.prototype.save = function (type) {\n    var data = {};\n\n    switch (type) {\n      case \"columns\":\n        data = this.parseColumns(this.table.columnManager.getColumns());\n        break;\n\n      case \"filter\":\n        data = this.table.modules.filter.getFilters();\n        break;\n\n      case \"sort\":\n        data = this.validateSorters(this.table.modules.sort.getSort());\n        break;\n\n      case \"group\":\n        data = this.getGroupConfig();\n        break;\n\n      case \"page\":\n        data = this.getPageConfig();\n        break;\n    }\n\n    if (this.writeFunc) {\n      this.writeFunc(this.id, type, data);\n    }\n  }; //ensure sorters contain no function data\n\n\n  Persistence.prototype.validateSorters = function (data) {\n    data.forEach(function (item) {\n      item.column = item.field;\n      delete item.field;\n    });\n    return data;\n  };\n\n  Persistence.prototype.getGroupConfig = function () {\n    if (this.config.group) {\n      if (this.config.group === true || this.config.group.groupBy) {\n        data.groupBy = this.table.options.groupBy;\n      }\n\n      if (this.config.group === true || this.config.group.groupStartOpen) {\n        data.groupStartOpen = this.table.options.groupStartOpen;\n      }\n\n      if (this.config.group === true || this.config.group.groupHeader) {\n        data.groupHeader = this.table.options.groupHeader;\n      }\n    }\n\n    return data;\n  };\n\n  Persistence.prototype.getPageConfig = function () {\n    var data = {};\n\n    if (this.config.page) {\n      if (this.config.page === true || this.config.page.size) {\n        data.paginationSize = this.table.modules.page.getPageSize();\n      }\n\n      if (this.config.page === true || this.config.page.page) {\n        data.paginationInitialPage = this.table.modules.page.getPage();\n      }\n    }\n\n    return data;\n  }; //parse columns for data to store\n\n\n  Persistence.prototype.parseColumns = function (columns) {\n    var self = this,\n        definitions = [];\n    columns.forEach(function (column) {\n      var defStore = {},\n          colDef = column.getDefinition(),\n          keys;\n\n      if (column.isGroup) {\n        defStore.title = colDef.title;\n        defStore.columns = self.parseColumns(column.getColumns());\n      } else {\n        defStore.field = column.getField();\n\n        if (self.config.columns === true || self.config.columns == undefined) {\n          keys = Object.keys(colDef);\n          keys.push(\"width\");\n        } else {\n          keys = self.config.columns;\n        }\n\n        keys.forEach(function (key) {\n          switch (key) {\n            case \"width\":\n              defStore.width = column.getWidth();\n              break;\n\n            case \"visible\":\n              defStore.visible = column.visible;\n              break;\n\n            default:\n              defStore[key] = colDef[key];\n          }\n        });\n      }\n\n      definitions.push(defStore);\n    });\n    return definitions;\n  }; // read peristence information from storage\n\n\n  Persistence.prototype.readers = {\n    local: function local(id, type) {\n      var data = localStorage.getItem(id + \"-\" + type);\n      return data ? JSON.parse(data) : false;\n    },\n    cookie: function cookie(id, type) {\n      var cookie = document.cookie,\n          key = id + \"-\" + type,\n          cookiePos = cookie.indexOf(key + \"=\"),\n          end,\n          data; //if cookie exists, decode and load column data into tabulator\n\n      if (cookiePos > -1) {\n        cookie = cookie.substr(cookiePos);\n        end = cookie.indexOf(\";\");\n\n        if (end > -1) {\n          cookie = cookie.substr(0, end);\n        }\n\n        data = cookie.replace(key + \"=\", \"\");\n      }\n\n      return data ? JSON.parse(data) : false;\n    }\n  }; //write persistence information to storage\n\n  Persistence.prototype.writers = {\n    local: function local(id, type, data) {\n      localStorage.setItem(id + \"-\" + type, JSON.stringify(data));\n    },\n    cookie: function cookie(id, type, data) {\n      var expireDate = new Date();\n      expireDate.setDate(expireDate.getDate() + 10000);\n      document.cookie = id + \"-\" + type + \"=\" + JSON.stringify(data) + \"; expires=\" + expireDate.toUTCString();\n    }\n  };\n  Tabulator.prototype.registerModule(\"persistence\", Persistence);\n\n  var Print = function Print(table) {\n    this.table = table; //hold Tabulator object\n\n    this.element = false;\n    this.manualBlock = false;\n  };\n\n  Print.prototype.initialize = function () {\n    window.addEventListener(\"beforeprint\", this.replaceTable.bind(this));\n    window.addEventListener(\"afterprint\", this.cleanup.bind(this));\n  };\n\n  Print.prototype.replaceTable = function () {\n    if (!this.manualBlock) {\n      this.element = document.createElement(\"div\");\n      this.element.classList.add(\"tabulator-print-table\");\n      this.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig, this.table.options.printStyled, this.table.options.printRowRange, \"print\"));\n      this.table.element.style.display = \"none\";\n      this.table.element.parentNode.insertBefore(this.element, this.table.element);\n    }\n  };\n\n  Print.prototype.cleanup = function () {\n    document.body.classList.remove(\"tabulator-print-fullscreen-hide\");\n\n    if (this.element && this.element.parentNode) {\n      this.element.parentNode.removeChild(this.element);\n      this.table.element.style.display = \"\";\n    }\n  };\n\n  Print.prototype.printFullscreen = function (visible, style, config) {\n    var scrollX = window.scrollX,\n        scrollY = window.scrollY,\n        headerEl = document.createElement(\"div\"),\n        footerEl = document.createElement(\"div\"),\n        tableEl = this.table.modules.export.genereateTable(typeof config != \"undefined\" ? config : this.table.options.printConfig, typeof style != \"undefined\" ? style : this.table.options.printStyled, visible, \"print\"),\n        headerContent,\n        footerContent;\n    this.manualBlock = true;\n    this.element = document.createElement(\"div\");\n    this.element.classList.add(\"tabulator-print-fullscreen\");\n\n    if (this.table.options.printHeader) {\n      headerEl.classList.add(\"tabulator-print-header\");\n      headerContent = typeof this.table.options.printHeader == \"function\" ? this.table.options.printHeader.call(this.table) : this.table.options.printHeader;\n\n      if (typeof headerContent == \"string\") {\n        headerEl.innerHTML = headerContent;\n      } else {\n        headerEl.appendChild(headerContent);\n      }\n\n      this.element.appendChild(headerEl);\n    }\n\n    this.element.appendChild(tableEl);\n\n    if (this.table.options.printFooter) {\n      footerEl.classList.add(\"tabulator-print-footer\");\n      footerContent = typeof this.table.options.printFooter == \"function\" ? this.table.options.printFooter.call(this.table) : this.table.options.printFooter;\n\n      if (typeof footerContent == \"string\") {\n        footerEl.innerHTML = footerContent;\n      } else {\n        footerEl.appendChild(footerContent);\n      }\n\n      this.element.appendChild(footerEl);\n    }\n\n    document.body.classList.add(\"tabulator-print-fullscreen-hide\");\n    document.body.appendChild(this.element);\n\n    if (this.table.options.printFormatter) {\n      this.table.options.printFormatter(this.element, tableEl);\n    }\n\n    window.print();\n    this.cleanup();\n    window.scrollTo(scrollX, scrollY);\n    this.manualBlock = false;\n  };\n\n  Tabulator.prototype.registerModule(\"print\", Print);\n\n  var ReactiveData = function ReactiveData(table) {\n    this.table = table; //hold Tabulator object\n\n    this.data = false;\n    this.blocked = false; //block reactivity while performing update\n\n    this.origFuncs = {}; // hold original data array functions to allow replacement after data is done with\n\n    this.currentVersion = 0;\n  };\n\n  ReactiveData.prototype.watchData = function (data) {\n    var self = this,\n        pushFunc,\n        version;\n    this.currentVersion++;\n    version = this.currentVersion;\n    self.unwatchData();\n    self.data = data; //override array push function\n\n    self.origFuncs.push = data.push;\n    Object.defineProperty(self.data, \"push\", {\n      enumerable: false,\n      configurable: true,\n      value: function value() {\n        var args = Array.from(arguments);\n\n        if (!self.blocked && version === self.currentVersion) {\n          args.forEach(function (arg) {\n            self.table.rowManager.addRowActual(arg, false);\n          });\n        }\n\n        return self.origFuncs.push.apply(data, arguments);\n      }\n    }); //override array unshift function\n\n    self.origFuncs.unshift = data.unshift;\n    Object.defineProperty(self.data, \"unshift\", {\n      enumerable: false,\n      configurable: true,\n      value: function value() {\n        var args = Array.from(arguments);\n\n        if (!self.blocked && version === self.currentVersion) {\n          args.forEach(function (arg) {\n            self.table.rowManager.addRowActual(arg, true);\n          });\n        }\n\n        return self.origFuncs.unshift.apply(data, arguments);\n      }\n    }); //override array shift function\n\n    self.origFuncs.shift = data.shift;\n    Object.defineProperty(self.data, \"shift\", {\n      enumerable: false,\n      configurable: true,\n      value: function value() {\n        var row;\n\n        if (!self.blocked && version === self.currentVersion) {\n          if (self.data.length) {\n            row = self.table.rowManager.getRowFromDataObject(self.data[0]);\n\n            if (row) {\n              row.deleteActual();\n            }\n          }\n        }\n\n        return self.origFuncs.shift.call(data);\n      }\n    }); //override array pop function\n\n    self.origFuncs.pop = data.pop;\n    Object.defineProperty(self.data, \"pop\", {\n      enumerable: false,\n      configurable: true,\n      value: function value() {\n        var row;\n\n        if (!self.blocked && version === self.currentVersion) {\n          if (self.data.length) {\n            row = self.table.rowManager.getRowFromDataObject(self.data[self.data.length - 1]);\n\n            if (row) {\n              row.deleteActual();\n            }\n          }\n        }\n\n        return self.origFuncs.pop.call(data);\n      }\n    }); //override array splice function\n\n    self.origFuncs.splice = data.splice;\n    Object.defineProperty(self.data, \"splice\", {\n      enumerable: false,\n      configurable: true,\n      value: function value() {\n        var args = Array.from(arguments),\n            start = args[0] < 0 ? data.length + args[0] : args[0],\n            end = args[1],\n            newRows = args[2] ? args.slice(2) : false,\n            startRow;\n\n        if (!self.blocked && version === self.currentVersion) {\n          //add new rows\n          if (newRows) {\n            startRow = data[start] ? self.table.rowManager.getRowFromDataObject(data[start]) : false;\n\n            if (startRow) {\n              newRows.forEach(function (rowData) {\n                self.table.rowManager.addRowActual(rowData, true, startRow, true);\n              });\n            } else {\n              newRows = newRows.slice().reverse();\n              newRows.forEach(function (rowData) {\n                self.table.rowManager.addRowActual(rowData, true, false, true);\n              });\n            }\n          } //delete removed rows\n\n\n          if (end !== 0) {\n            var oldRows = data.slice(start, typeof args[1] === \"undefined\" ? args[1] : start + end);\n            oldRows.forEach(function (rowData, i) {\n              var row = self.table.rowManager.getRowFromDataObject(rowData);\n\n              if (row) {\n                row.deleteActual(i !== oldRows.length - 1);\n              }\n            });\n          }\n\n          if (newRows || end !== 0) {\n            self.table.rowManager.reRenderInPosition();\n          }\n        }\n\n        return self.origFuncs.splice.apply(data, arguments);\n      }\n    });\n  };\n\n  ReactiveData.prototype.unwatchData = function () {\n    if (this.data !== false) {\n      for (var key in this.origFuncs) {\n        Object.defineProperty(this.data, key, {\n          enumerable: true,\n          configurable: true,\n          writable: true,\n          value: this.origFuncs.key\n        });\n      }\n    }\n  };\n\n  ReactiveData.prototype.watchRow = function (row) {\n    var self = this,\n        data = row.getData();\n    this.blocked = true;\n\n    for (var key in data) {\n      this.watchKey(row, data, key);\n    }\n\n    this.blocked = false;\n  };\n\n  ReactiveData.prototype.watchKey = function (row, data, key) {\n    var self = this,\n        props = Object.getOwnPropertyDescriptor(data, key),\n        value = data[key],\n        version = this.currentVersion;\n    Object.defineProperty(data, key, {\n      set: function set(newValue) {\n        value = newValue;\n\n        if (!self.blocked && version === self.currentVersion) {\n          var update = {};\n          update[key] = newValue;\n          row.updateData(update);\n        }\n\n        if (props.set) {\n          props.set(newValue);\n        }\n      },\n      get: function get() {\n        if (props.get) {\n          props.get();\n        }\n\n        return value;\n      }\n    });\n  };\n\n  ReactiveData.prototype.unwatchRow = function (row) {\n    var data = row.getData();\n\n    for (var key in data) {\n      Object.defineProperty(data, key, {\n        value: data[key]\n      });\n    }\n  };\n\n  ReactiveData.prototype.block = function () {\n    this.blocked = true;\n  };\n\n  ReactiveData.prototype.unblock = function () {\n    this.blocked = false;\n  };\n\n  Tabulator.prototype.registerModule(\"reactiveData\", ReactiveData);\n\n  var ResizeColumns = function ResizeColumns(table) {\n    this.table = table; //hold Tabulator object\n\n    this.startColumn = false;\n    this.startX = false;\n    this.startWidth = false;\n    this.handle = null;\n    this.prevHandle = null;\n  };\n\n  ResizeColumns.prototype.initializeColumn = function (type, column, element) {\n    var self = this,\n        variableHeight = false,\n        mode = this.table.options.resizableColumns; //set column resize mode\n\n    if (type === \"header\") {\n      variableHeight = column.definition.formatter == \"textarea\" || column.definition.variableHeight;\n      column.modules.resize = {\n        variableHeight: variableHeight\n      };\n    }\n\n    if (mode === true || mode == type) {\n      var handle = document.createElement('div');\n      handle.className = \"tabulator-col-resize-handle\";\n      var prevHandle = document.createElement('div');\n      prevHandle.className = \"tabulator-col-resize-handle prev\";\n      handle.addEventListener(\"click\", function (e) {\n        e.stopPropagation();\n      });\n\n      var handleDown = function handleDown(e) {\n        var nearestColumn = column.getLastColumn();\n\n        if (nearestColumn && self._checkResizability(nearestColumn)) {\n          self.startColumn = column;\n\n          self._mouseDown(e, nearestColumn, handle);\n        }\n      };\n\n      handle.addEventListener(\"mousedown\", handleDown);\n      handle.addEventListener(\"touchstart\", handleDown, {\n        passive: true\n      }); //reszie column on  double click\n\n      handle.addEventListener(\"dblclick\", function (e) {\n        var col = column.getLastColumn();\n\n        if (col && self._checkResizability(col)) {\n          e.stopPropagation();\n          col.reinitializeWidth(true);\n        }\n      });\n      prevHandle.addEventListener(\"click\", function (e) {\n        e.stopPropagation();\n      });\n\n      var prevHandleDown = function prevHandleDown(e) {\n        var nearestColumn, colIndex, prevColumn;\n        nearestColumn = column.getFirstColumn();\n\n        if (nearestColumn) {\n          colIndex = self.table.columnManager.findColumnIndex(nearestColumn);\n          prevColumn = colIndex > 0 ? self.table.columnManager.getColumnByIndex(colIndex - 1) : false;\n\n          if (prevColumn && self._checkResizability(prevColumn)) {\n            self.startColumn = column;\n\n            self._mouseDown(e, prevColumn, prevHandle);\n          }\n        }\n      };\n\n      prevHandle.addEventListener(\"mousedown\", prevHandleDown);\n      prevHandle.addEventListener(\"touchstart\", prevHandleDown, {\n        passive: true\n      }); //resize column on double click\n\n      prevHandle.addEventListener(\"dblclick\", function (e) {\n        var nearestColumn, colIndex, prevColumn;\n        nearestColumn = column.getFirstColumn();\n\n        if (nearestColumn) {\n          colIndex = self.table.columnManager.findColumnIndex(nearestColumn);\n          prevColumn = colIndex > 0 ? self.table.columnManager.getColumnByIndex(colIndex - 1) : false;\n\n          if (prevColumn && self._checkResizability(prevColumn)) {\n            e.stopPropagation();\n            prevColumn.reinitializeWidth(true);\n          }\n        }\n      });\n      element.appendChild(handle);\n      element.appendChild(prevHandle);\n    }\n  };\n\n  ResizeColumns.prototype._checkResizability = function (column) {\n    return typeof column.definition.resizable != \"undefined\" ? column.definition.resizable : this.table.options.resizableColumns;\n  };\n\n  ResizeColumns.prototype._mouseDown = function (e, column, handle) {\n    var self = this;\n    self.table.element.classList.add(\"tabulator-block-select\");\n\n    function mouseMove(e) {\n      // self.table.columnManager.tempScrollBlock();\n      column.setWidth(self.startWidth + ((typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX) - self.startX));\n\n      if (!self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight) {\n        column.checkCellHeights();\n      }\n    }\n\n    function mouseUp(e) {\n      //block editor from taking action while resizing is taking place\n      if (self.startColumn.modules.edit) {\n        self.startColumn.modules.edit.blocked = false;\n      }\n\n      if (self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight) {\n        column.checkCellHeights();\n      }\n\n      document.body.removeEventListener(\"mouseup\", mouseUp);\n      document.body.removeEventListener(\"mousemove\", mouseMove);\n      handle.removeEventListener(\"touchmove\", mouseMove);\n      handle.removeEventListener(\"touchend\", mouseUp);\n      self.table.element.classList.remove(\"tabulator-block-select\");\n\n      if (self.table.options.persistence && self.table.modExists(\"persistence\", true) && self.table.modules.persistence.config.columns) {\n        self.table.modules.persistence.save(\"columns\");\n      }\n\n      self.table.options.columnResized.call(self.table, column.getComponent());\n    }\n\n    e.stopPropagation(); //prevent resize from interfereing with movable columns\n    //block editor from taking action while resizing is taking place\n\n    if (self.startColumn.modules.edit) {\n      self.startColumn.modules.edit.blocked = true;\n    }\n\n    self.startX = typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX;\n    self.startWidth = column.getWidth();\n    document.body.addEventListener(\"mousemove\", mouseMove);\n    document.body.addEventListener(\"mouseup\", mouseUp);\n    handle.addEventListener(\"touchmove\", mouseMove, {\n      passive: true\n    });\n    handle.addEventListener(\"touchend\", mouseUp);\n  };\n\n  Tabulator.prototype.registerModule(\"resizeColumns\", ResizeColumns);\n\n  var ResizeRows = function ResizeRows(table) {\n    this.table = table; //hold Tabulator object\n\n    this.startColumn = false;\n    this.startY = false;\n    this.startHeight = false;\n    this.handle = null;\n    this.prevHandle = null;\n  };\n\n  ResizeRows.prototype.initializeRow = function (row) {\n    var self = this,\n        rowEl = row.getElement();\n    var handle = document.createElement('div');\n    handle.className = \"tabulator-row-resize-handle\";\n    var prevHandle = document.createElement('div');\n    prevHandle.className = \"tabulator-row-resize-handle prev\";\n    handle.addEventListener(\"click\", function (e) {\n      e.stopPropagation();\n    });\n\n    var handleDown = function handleDown(e) {\n      self.startRow = row;\n\n      self._mouseDown(e, row, handle);\n    };\n\n    handle.addEventListener(\"mousedown\", handleDown);\n    handle.addEventListener(\"touchstart\", handleDown, {\n      passive: true\n    });\n    prevHandle.addEventListener(\"click\", function (e) {\n      e.stopPropagation();\n    });\n\n    var prevHandleDown = function prevHandleDown(e) {\n      var prevRow = self.table.rowManager.prevDisplayRow(row);\n\n      if (prevRow) {\n        self.startRow = prevRow;\n\n        self._mouseDown(e, prevRow, prevHandle);\n      }\n    };\n\n    prevHandle.addEventListener(\"mousedown\", prevHandleDown);\n    prevHandle.addEventListener(\"touchstart\", prevHandleDown, {\n      passive: true\n    });\n    rowEl.appendChild(handle);\n    rowEl.appendChild(prevHandle);\n  };\n\n  ResizeRows.prototype._mouseDown = function (e, row, handle) {\n    var self = this;\n    self.table.element.classList.add(\"tabulator-block-select\");\n\n    function mouseMove(e) {\n      row.setHeight(self.startHeight + ((typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY) - self.startY));\n    }\n\n    function mouseUp(e) {\n      // //block editor from taking action while resizing is taking place\n      // if(self.startColumn.modules.edit){\n      // \tself.startColumn.modules.edit.blocked = false;\n      // }\n      document.body.removeEventListener(\"mouseup\", mouseMove);\n      document.body.removeEventListener(\"mousemove\", mouseMove);\n      handle.removeEventListener(\"touchmove\", mouseMove);\n      handle.removeEventListener(\"touchend\", mouseUp);\n      self.table.element.classList.remove(\"tabulator-block-select\");\n      self.table.options.rowResized.call(this.table, row.getComponent());\n    }\n\n    e.stopPropagation(); //prevent resize from interfereing with movable columns\n    //block editor from taking action while resizing is taking place\n    // if(self.startColumn.modules.edit){\n    // \tself.startColumn.modules.edit.blocked = true;\n    // }\n\n    self.startY = typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY;\n    self.startHeight = row.getHeight();\n    document.body.addEventListener(\"mousemove\", mouseMove);\n    document.body.addEventListener(\"mouseup\", mouseUp);\n    handle.addEventListener(\"touchmove\", mouseMove, {\n      passive: true\n    });\n    handle.addEventListener(\"touchend\", mouseUp);\n  };\n\n  Tabulator.prototype.registerModule(\"resizeRows\", ResizeRows);\n\n  var ResizeTable = function ResizeTable(table) {\n    this.table = table; //hold Tabulator object\n\n    this.binding = false;\n    this.observer = false;\n    this.containerObserver = false;\n    this.tableHeight = 0;\n    this.tableWidth = 0;\n    this.containerHeight = 0;\n    this.containerWidth = 0;\n    this.autoResize = false;\n  };\n\n  ResizeTable.prototype.initialize = function (row) {\n    var _this76 = this;\n\n    var table = this.table,\n        tableStyle;\n    this.tableHeight = table.element.clientHeight;\n    this.tableWidth = table.element.clientWidth;\n\n    if (table.element.parentNode) {\n      this.containerHeight = table.element.parentNode.clientHeight;\n      this.containerWidth = table.element.parentNode.clientWidth;\n    }\n\n    if (typeof ResizeObserver !== \"undefined\" && table.rowManager.getRenderMode() === \"virtual\") {\n      this.autoResize = true;\n      this.observer = new ResizeObserver(function (entry) {\n        if (!table.browserMobile || table.browserMobile && !table.modules.edit.currentCell) {\n          var nodeHeight = Math.floor(entry[0].contentRect.height);\n          var nodeWidth = Math.floor(entry[0].contentRect.width);\n\n          if (_this76.tableHeight != nodeHeight || _this76.tableWidth != nodeWidth) {\n            _this76.tableHeight = nodeHeight;\n            _this76.tableWidth = nodeWidth;\n\n            if (table.element.parentNode) {\n              _this76.containerHeight = table.element.parentNode.clientHeight;\n              _this76.containerWidth = table.element.parentNode.clientWidth;\n            }\n\n            table.redraw();\n          }\n        }\n      });\n      this.observer.observe(table.element);\n      tableStyle = window.getComputedStyle(table.element);\n\n      if (this.table.element.parentNode && !this.table.rowManager.fixedHeight && (tableStyle.getPropertyValue(\"max-height\") || tableStyle.getPropertyValue(\"min-height\"))) {\n        this.containerObserver = new ResizeObserver(function (entry) {\n          if (!table.browserMobile || table.browserMobile && !table.modules.edit.currentCell) {\n            var nodeHeight = Math.floor(entry[0].contentRect.height);\n            var nodeWidth = Math.floor(entry[0].contentRect.width);\n\n            if (_this76.containerHeight != nodeHeight || _this76.containerWidth != nodeWidth) {\n              _this76.containerHeight = nodeHeight;\n              _this76.containerWidth = nodeWidth;\n              _this76.tableHeight = table.element.clientHeight;\n              _this76.tableWidth = table.element.clientWidth;\n              table.redraw();\n            }\n\n            table.redraw();\n          }\n        });\n        this.containerObserver.observe(this.table.element.parentNode);\n      }\n    } else {\n      this.binding = function () {\n        if (!table.browserMobile || table.browserMobile && !table.modules.edit.currentCell) {\n          table.redraw();\n        }\n      };\n\n      window.addEventListener(\"resize\", this.binding);\n    }\n  };\n\n  ResizeTable.prototype.clearBindings = function (row) {\n    if (this.binding) {\n      window.removeEventListener(\"resize\", this.binding);\n    }\n\n    if (this.observer) {\n      this.observer.unobserve(this.table.element);\n    }\n\n    if (this.containerObserver) {\n      this.containerObserver.unobserve(this.table.element.parentNode);\n    }\n  };\n\n  Tabulator.prototype.registerModule(\"resizeTable\", ResizeTable);\n\n  var ResponsiveLayout = function ResponsiveLayout(table) {\n    this.table = table; //hold Tabulator object\n\n    this.columns = [];\n    this.hiddenColumns = [];\n    this.mode = \"\";\n    this.index = 0;\n    this.collapseFormatter = [];\n    this.collapseStartOpen = true;\n    this.collapseHandleColumn = false;\n  }; //generate resposive columns list\n\n\n  ResponsiveLayout.prototype.initialize = function () {\n    var self = this,\n        columns = [];\n    this.mode = this.table.options.responsiveLayout;\n    this.collapseFormatter = this.table.options.responsiveLayoutCollapseFormatter || this.formatCollapsedData;\n    this.collapseStartOpen = this.table.options.responsiveLayoutCollapseStartOpen;\n    this.hiddenColumns = []; //detemine level of responsivity for each column\n\n    this.table.columnManager.columnsByIndex.forEach(function (column, i) {\n      if (column.modules.responsive) {\n        if (column.modules.responsive.order && column.modules.responsive.visible) {\n          column.modules.responsive.index = i;\n          columns.push(column);\n\n          if (!column.visible && self.mode === \"collapse\") {\n            self.hiddenColumns.push(column);\n          }\n        }\n      }\n    }); //sort list by responsivity\n\n    columns = columns.reverse();\n    columns = columns.sort(function (a, b) {\n      var diff = b.modules.responsive.order - a.modules.responsive.order;\n      return diff || b.modules.responsive.index - a.modules.responsive.index;\n    });\n    this.columns = columns;\n\n    if (this.mode === \"collapse\") {\n      this.generateCollapsedContent();\n    } //assign collapse column\n\n\n    for (var _iterator = this.table.columnManager.columnsByIndex, _isArray = Array.isArray(_iterator), _i13 = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i13 >= _iterator.length) break;\n        _ref = _iterator[_i13++];\n      } else {\n        _i13 = _iterator.next();\n        if (_i13.done) break;\n        _ref = _i13.value;\n      }\n\n      var col = _ref;\n\n      if (col.definition.formatter == \"responsiveCollapse\") {\n        this.collapseHandleColumn = col;\n        break;\n      }\n    }\n\n    if (this.collapseHandleColumn) {\n      if (this.hiddenColumns.length) {\n        this.collapseHandleColumn.show();\n      } else {\n        this.collapseHandleColumn.hide();\n      }\n    }\n  }; //define layout information\n\n\n  ResponsiveLayout.prototype.initializeColumn = function (column) {\n    var def = column.getDefinition();\n    column.modules.responsive = {\n      order: typeof def.responsive === \"undefined\" ? 1 : def.responsive,\n      visible: def.visible === false ? false : true\n    };\n  };\n\n  ResponsiveLayout.prototype.initializeRow = function (row) {\n    var el;\n\n    if (row.type !== \"calc\") {\n      el = document.createElement(\"div\");\n      el.classList.add(\"tabulator-responsive-collapse\");\n      row.modules.responsiveLayout = {\n        element: el,\n        open: this.collapseStartOpen\n      };\n\n      if (!this.collapseStartOpen) {\n        el.style.display = 'none';\n      }\n    }\n  };\n\n  ResponsiveLayout.prototype.layoutRow = function (row) {\n    var rowEl = row.getElement();\n\n    if (row.modules.responsiveLayout) {\n      rowEl.appendChild(row.modules.responsiveLayout.element);\n      this.generateCollapsedRowContent(row);\n    }\n  }; //update column visibility\n\n\n  ResponsiveLayout.prototype.updateColumnVisibility = function (column, visible) {\n    var index;\n\n    if (column.modules.responsive) {\n      column.modules.responsive.visible = visible;\n      this.initialize();\n    }\n  };\n\n  ResponsiveLayout.prototype.hideColumn = function (column) {\n    var colCount = this.hiddenColumns.length;\n    column.hide(false, true);\n\n    if (this.mode === \"collapse\") {\n      this.hiddenColumns.unshift(column);\n      this.generateCollapsedContent();\n\n      if (this.collapseHandleColumn && !colCount) {\n        this.collapseHandleColumn.show();\n      }\n    }\n  };\n\n  ResponsiveLayout.prototype.showColumn = function (column) {\n    var index;\n    column.show(false, true); //set column width to prevent calculation loops on uninitialized columns\n\n    column.setWidth(column.getWidth());\n\n    if (this.mode === \"collapse\") {\n      index = this.hiddenColumns.indexOf(column);\n\n      if (index > -1) {\n        this.hiddenColumns.splice(index, 1);\n      }\n\n      this.generateCollapsedContent();\n\n      if (this.collapseHandleColumn && !this.hiddenColumns.length) {\n        this.collapseHandleColumn.hide();\n      }\n    }\n  }; //redraw columns to fit space\n\n\n  ResponsiveLayout.prototype.update = function () {\n    var self = this,\n        working = true;\n\n    while (working) {\n      var width = self.table.modules.layout.getMode() == \"fitColumns\" ? self.table.columnManager.getFlexBaseWidth() : self.table.columnManager.getWidth();\n      var diff = (self.table.options.headerVisible ? self.table.columnManager.element.clientWidth : self.table.element.clientWidth) - width;\n\n      if (diff < 0) {\n        //table is too wide\n        var column = self.columns[self.index];\n\n        if (column) {\n          self.hideColumn(column);\n          self.index++;\n        } else {\n          working = false;\n        }\n      } else {\n        //table has spare space\n        var _column = self.columns[self.index - 1];\n\n        if (_column) {\n          if (diff > 0) {\n            if (diff >= _column.getWidth()) {\n              self.showColumn(_column);\n              self.index--;\n            } else {\n              working = false;\n            }\n          } else {\n            working = false;\n          }\n        } else {\n          working = false;\n        }\n      }\n\n      if (!self.table.rowManager.activeRowsCount) {\n        self.table.rowManager.renderEmptyScroll();\n      }\n    }\n  };\n\n  ResponsiveLayout.prototype.generateCollapsedContent = function () {\n    var self = this,\n        rows = this.table.rowManager.getDisplayRows();\n    rows.forEach(function (row) {\n      self.generateCollapsedRowContent(row);\n    });\n  };\n\n  ResponsiveLayout.prototype.generateCollapsedRowContent = function (row) {\n    var el, contents;\n\n    if (row.modules.responsiveLayout) {\n      el = row.modules.responsiveLayout.element;\n\n      while (el.firstChild) {\n        el.removeChild(el.firstChild);\n      }\n\n      contents = this.collapseFormatter(this.generateCollapsedRowData(row));\n\n      if (contents) {\n        el.appendChild(contents);\n      }\n    }\n  };\n\n  ResponsiveLayout.prototype.generateCollapsedRowData = function (row) {\n    var self = this,\n        data = row.getData(),\n        output = [],\n        mockCellComponent;\n    this.hiddenColumns.forEach(function (column) {\n      var value = column.getFieldValue(data);\n\n      if (column.definition.title && column.field) {\n        if (column.modules.format && self.table.options.responsiveLayoutCollapseUseFormatters) {\n          mockCellComponent = {\n            value: false,\n            data: {},\n            getValue: function getValue() {\n              return value;\n            },\n            getData: function getData() {\n              return data;\n            },\n            getElement: function getElement() {\n              return document.createElement(\"div\");\n            },\n            getRow: function getRow() {\n              return row.getComponent();\n            },\n            getColumn: function getColumn() {\n              return column.getComponent();\n            }\n          };\n          output.push({\n            title: column.definition.title,\n            value: column.modules.format.formatter.call(self.table.modules.format, mockCellComponent, column.modules.format.params)\n          });\n        } else {\n          output.push({\n            title: column.definition.title,\n            value: value\n          });\n        }\n      }\n    });\n    return output;\n  };\n\n  ResponsiveLayout.prototype.formatCollapsedData = function (data) {\n    var list = document.createElement(\"table\"),\n        listContents = \"\";\n    data.forEach(function (item) {\n      var div = document.createElement(\"div\");\n\n      if (item.value instanceof Node) {\n        div.appendChild(item.value);\n        item.value = div.innerHTML;\n      }\n\n      listContents += \"<tr><td><strong>\" + item.title + \"</strong></td><td>\" + item.value + \"</td></tr>\";\n    });\n    list.innerHTML = listContents;\n    return Object.keys(data).length ? list : \"\";\n  };\n\n  Tabulator.prototype.registerModule(\"responsiveLayout\", ResponsiveLayout);\n\n  var SelectRow = function SelectRow(table) {\n    this.table = table; //hold Tabulator object\n\n    this.selecting = false; //flag selecting in progress\n\n    this.lastClickedRow = false; //last clicked row\n\n    this.selectPrev = []; //hold previously selected element for drag drop selection\n\n    this.selectedRows = []; //hold selected rows\n\n    this.headerCheckboxElement = null; // hold header select element\n  };\n\n  SelectRow.prototype.clearSelectionData = function (silent) {\n    this.selecting = false;\n    this.lastClickedRow = false;\n    this.selectPrev = [];\n    this.selectedRows = [];\n\n    if (!silent) {\n      this._rowSelectionChanged();\n    }\n  };\n\n  SelectRow.prototype.initializeRow = function (row) {\n    var self = this,\n        element = row.getElement(); // trigger end of row selection\n\n    var endSelect = function endSelect() {\n      setTimeout(function () {\n        self.selecting = false;\n      }, 50);\n      document.body.removeEventListener(\"mouseup\", endSelect);\n    };\n\n    row.modules.select = {\n      selected: false\n    }; //set row selection class\n\n    if (self.table.options.selectableCheck.call(this.table, row.getComponent())) {\n      element.classList.add(\"tabulator-selectable\");\n      element.classList.remove(\"tabulator-unselectable\");\n\n      if (self.table.options.selectable && self.table.options.selectable != \"highlight\") {\n        if (self.table.options.selectableRangeMode === \"click\") {\n          element.addEventListener(\"click\", function (e) {\n            if (e.shiftKey) {\n              self.table._clearSelection();\n\n              self.lastClickedRow = self.lastClickedRow || row;\n              var lastClickedRowIdx = self.table.rowManager.getDisplayRowIndex(self.lastClickedRow);\n              var rowIdx = self.table.rowManager.getDisplayRowIndex(row);\n              var fromRowIdx = lastClickedRowIdx <= rowIdx ? lastClickedRowIdx : rowIdx;\n              var toRowIdx = lastClickedRowIdx >= rowIdx ? lastClickedRowIdx : rowIdx;\n              var rows = self.table.rowManager.getDisplayRows().slice(0);\n              var toggledRows = rows.splice(fromRowIdx, toRowIdx - fromRowIdx + 1);\n\n              if (e.ctrlKey || e.metaKey) {\n                toggledRows.forEach(function (toggledRow) {\n                  if (toggledRow !== self.lastClickedRow) {\n                    if (self.table.options.selectable !== true && !self.isRowSelected(row)) {\n                      if (self.selectedRows.length < self.table.options.selectable) {\n                        self.toggleRow(toggledRow);\n                      }\n                    } else {\n                      self.toggleRow(toggledRow);\n                    }\n                  }\n                });\n                self.lastClickedRow = row;\n              } else {\n                self.deselectRows(undefined, true);\n\n                if (self.table.options.selectable !== true) {\n                  if (toggledRows.length > self.table.options.selectable) {\n                    toggledRows = toggledRows.slice(0, self.table.options.selectable);\n                  }\n                }\n\n                self.selectRows(toggledRows);\n              }\n\n              self.table._clearSelection();\n            } else if (e.ctrlKey || e.metaKey) {\n              self.toggleRow(row);\n              self.lastClickedRow = row;\n            } else {\n              self.deselectRows(undefined, true);\n              self.selectRows(row);\n              self.lastClickedRow = row;\n            }\n          });\n        } else {\n          element.addEventListener(\"click\", function (e) {\n            if (!self.table.modExists(\"edit\") || !self.table.modules.edit.getCurrentCell()) {\n              self.table._clearSelection();\n            }\n\n            if (!self.selecting) {\n              self.toggleRow(row);\n            }\n          });\n          element.addEventListener(\"mousedown\", function (e) {\n            if (e.shiftKey) {\n              self.table._clearSelection();\n\n              self.selecting = true;\n              self.selectPrev = [];\n              document.body.addEventListener(\"mouseup\", endSelect);\n              document.body.addEventListener(\"keyup\", endSelect);\n              self.toggleRow(row);\n              return false;\n            }\n          });\n          element.addEventListener(\"mouseenter\", function (e) {\n            if (self.selecting) {\n              self.table._clearSelection();\n\n              self.toggleRow(row);\n\n              if (self.selectPrev[1] == row) {\n                self.toggleRow(self.selectPrev[0]);\n              }\n            }\n          });\n          element.addEventListener(\"mouseout\", function (e) {\n            if (self.selecting) {\n              self.table._clearSelection();\n\n              self.selectPrev.unshift(row);\n            }\n          });\n        }\n      }\n    } else {\n      element.classList.add(\"tabulator-unselectable\");\n      element.classList.remove(\"tabulator-selectable\");\n    }\n  }; //toggle row selection\n\n\n  SelectRow.prototype.toggleRow = function (row) {\n    if (this.table.options.selectableCheck.call(this.table, row.getComponent())) {\n      if (row.modules.select && row.modules.select.selected) {\n        this._deselectRow(row);\n      } else {\n        this._selectRow(row);\n      }\n    }\n  }; //select a number of rows\n\n\n  SelectRow.prototype.selectRows = function (rows) {\n    var _this77 = this;\n\n    var rowMatch;\n\n    switch (typeof rows === 'undefined' ? 'undefined' : _typeof(rows)) {\n      case \"undefined\":\n        this.table.rowManager.rows.forEach(function (row) {\n          _this77._selectRow(row, true, true);\n        });\n\n        this._rowSelectionChanged();\n\n        break;\n\n      case \"string\":\n        rowMatch = this.table.rowManager.findRow(rows);\n\n        if (rowMatch) {\n          this._selectRow(rowMatch, true, true);\n        } else {\n          this.table.rowManager.getRows(rows).forEach(function (row) {\n            _this77._selectRow(row, true, true);\n          });\n        }\n\n        this._rowSelectionChanged();\n\n        break;\n\n      default:\n        if (Array.isArray(rows)) {\n          rows.forEach(function (row) {\n            _this77._selectRow(row, true, true);\n          });\n\n          this._rowSelectionChanged();\n        } else {\n          this._selectRow(rows, false, true);\n        }\n\n        break;\n    }\n  }; //select an individual row\n\n\n  SelectRow.prototype._selectRow = function (rowInfo, silent, force) {\n    var index; //handle max row count\n\n    if (!isNaN(this.table.options.selectable) && this.table.options.selectable !== true && !force) {\n      if (this.selectedRows.length >= this.table.options.selectable) {\n        if (this.table.options.selectableRollingSelection) {\n          this._deselectRow(this.selectedRows[0]);\n        } else {\n          return false;\n        }\n      }\n    }\n\n    var row = this.table.rowManager.findRow(rowInfo);\n\n    if (row) {\n      if (this.selectedRows.indexOf(row) == -1) {\n        if (!row.modules.select) {\n          row.modules.select = {};\n        }\n\n        row.modules.select.selected = true;\n\n        if (row.modules.select.checkboxEl) {\n          row.modules.select.checkboxEl.checked = true;\n        }\n\n        row.getElement().classList.add(\"tabulator-selected\");\n        this.selectedRows.push(row);\n\n        if (this.table.options.dataTreeSelectPropagate) {\n          this.childRowSelection(row, true);\n        }\n\n        if (!silent) {\n          this.table.options.rowSelected.call(this.table, row.getComponent());\n        }\n\n        this._rowSelectionChanged(silent);\n      }\n    } else {\n      if (!silent) {\n        console.warn(\"Selection Error - No such row found, ignoring selection:\" + rowInfo);\n      }\n    }\n  };\n\n  SelectRow.prototype.isRowSelected = function (row) {\n    return this.selectedRows.indexOf(row) !== -1;\n  }; //deselect a number of rows\n\n\n  SelectRow.prototype.deselectRows = function (rows, silent) {\n    var self = this,\n        rowCount;\n\n    if (typeof rows == \"undefined\") {\n      rowCount = self.selectedRows.length;\n\n      for (var _i14 = 0; _i14 < rowCount; _i14++) {\n        self._deselectRow(self.selectedRows[0], true);\n      }\n\n      self._rowSelectionChanged(silent);\n    } else {\n      if (Array.isArray(rows)) {\n        rows.forEach(function (row) {\n          self._deselectRow(row, true);\n        });\n\n        self._rowSelectionChanged(silent);\n      } else {\n        self._deselectRow(rows, silent);\n      }\n    }\n  }; //deselect an individual row\n\n\n  SelectRow.prototype._deselectRow = function (rowInfo, silent) {\n    var self = this,\n        row = self.table.rowManager.findRow(rowInfo),\n        index;\n\n    if (row) {\n      index = self.selectedRows.findIndex(function (selectedRow) {\n        return selectedRow == row;\n      });\n\n      if (index > -1) {\n        if (!row.modules.select) {\n          row.modules.select = {};\n        }\n\n        row.modules.select.selected = false;\n\n        if (row.modules.select.checkboxEl) {\n          row.modules.select.checkboxEl.checked = false;\n        }\n\n        row.getElement().classList.remove(\"tabulator-selected\");\n        self.selectedRows.splice(index, 1);\n\n        if (this.table.options.dataTreeSelectPropagate) {\n          this.childRowSelection(row, false);\n        }\n\n        if (!silent) {\n          self.table.options.rowDeselected.call(this.table, row.getComponent());\n        }\n\n        self._rowSelectionChanged(silent);\n      }\n    } else {\n      if (!silent) {\n        console.warn(\"Deselection Error - No such row found, ignoring selection:\" + rowInfo);\n      }\n    }\n  };\n\n  SelectRow.prototype.getSelectedData = function () {\n    var data = [];\n    this.selectedRows.forEach(function (row) {\n      data.push(row.getData());\n    });\n    return data;\n  };\n\n  SelectRow.prototype.getSelectedRows = function () {\n    var rows = [];\n    this.selectedRows.forEach(function (row) {\n      rows.push(row.getComponent());\n    });\n    return rows;\n  };\n\n  SelectRow.prototype._rowSelectionChanged = function (silent) {\n    if (this.headerCheckboxElement) {\n      if (this.selectedRows.length === 0) {\n        this.headerCheckboxElement.checked = false;\n        this.headerCheckboxElement.indeterminate = false;\n      } else if (this.table.rowManager.rows.length === this.selectedRows.length) {\n        this.headerCheckboxElement.checked = true;\n        this.headerCheckboxElement.indeterminate = false;\n      } else {\n        this.headerCheckboxElement.indeterminate = true;\n        this.headerCheckboxElement.checked = false;\n      }\n    }\n\n    if (!silent) {\n      this.table.options.rowSelectionChanged.call(this.table, this.getSelectedData(), this.getSelectedRows());\n    }\n  };\n\n  SelectRow.prototype.registerRowSelectCheckbox = function (row, element) {\n    if (!row._row.modules.select) {\n      row._row.modules.select = {};\n    }\n\n    row._row.modules.select.checkboxEl = element;\n  };\n\n  SelectRow.prototype.registerHeaderSelectCheckbox = function (element) {\n    this.headerCheckboxElement = element;\n  };\n\n  SelectRow.prototype.childRowSelection = function (row, select) {\n    var children = this.table.modules.dataTree.getChildren(row);\n\n    if (select) {\n      for (var _iterator2 = children, _isArray2 = Array.isArray(_iterator2), _i15 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n        var _ref2;\n\n        if (_isArray2) {\n          if (_i15 >= _iterator2.length) break;\n          _ref2 = _iterator2[_i15++];\n        } else {\n          _i15 = _iterator2.next();\n          if (_i15.done) break;\n          _ref2 = _i15.value;\n        }\n\n        var child = _ref2;\n\n        this._selectRow(child, true);\n      }\n    } else {\n      for (var _iterator3 = children, _isArray3 = Array.isArray(_iterator3), _i16 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {\n        var _ref3;\n\n        if (_isArray3) {\n          if (_i16 >= _iterator3.length) break;\n          _ref3 = _iterator3[_i16++];\n        } else {\n          _i16 = _iterator3.next();\n          if (_i16.done) break;\n          _ref3 = _i16.value;\n        }\n\n        var _child = _ref3;\n\n        this._deselectRow(_child, true);\n      }\n    }\n  };\n\n  Tabulator.prototype.registerModule(\"selectRow\", SelectRow);\n\n  var Sort = function Sort(table) {\n    this.table = table; //hold Tabulator object\n\n    this.sortList = []; //holder current sort\n\n    this.changed = false; //has the sort changed since last render\n  }; //initialize column header for sorting\n\n\n  Sort.prototype.initializeColumn = function (column, content) {\n    var self = this,\n        sorter = false,\n        colEl,\n        arrowEl;\n\n    switch (_typeof(column.definition.sorter)) {\n      case \"string\":\n        if (self.sorters[column.definition.sorter]) {\n          sorter = self.sorters[column.definition.sorter];\n        } else {\n          console.warn(\"Sort Error - No such sorter found: \", column.definition.sorter);\n        }\n\n        break;\n\n      case \"function\":\n        sorter = column.definition.sorter;\n        break;\n    }\n\n    column.modules.sort = {\n      sorter: sorter,\n      dir: \"none\",\n      params: column.definition.sorterParams || {},\n      startingDir: column.definition.headerSortStartingDir || \"asc\",\n      tristate: typeof column.definition.headerSortTristate !== \"undefined\" ? column.definition.headerSortTristate : this.table.options.headerSortTristate\n    };\n\n    if (typeof column.definition.headerSort === \"undefined\" ? this.table.options.headerSort !== false : column.definition.headerSort !== false) {\n      colEl = column.getElement();\n      colEl.classList.add(\"tabulator-sortable\");\n      arrowEl = document.createElement(\"div\");\n      arrowEl.classList.add(\"tabulator-arrow\"); //create sorter arrow\n\n      content.appendChild(arrowEl); //sort on click\n\n      colEl.addEventListener(\"click\", function (e) {\n        var dir = \"\",\n            sorters = [],\n            match = false;\n\n        if (column.modules.sort) {\n          if (column.modules.sort.tristate) {\n            if (column.modules.sort.dir == \"none\") {\n              dir = column.modules.sort.startingDir;\n            } else {\n              if (column.modules.sort.dir == column.modules.sort.startingDir) {\n                dir = column.modules.sort.dir == \"asc\" ? \"desc\" : \"asc\";\n              } else {\n                dir = \"none\";\n              }\n            }\n          } else {\n            switch (column.modules.sort.dir) {\n              case \"asc\":\n                dir = \"desc\";\n                break;\n\n              case \"desc\":\n                dir = \"asc\";\n                break;\n\n              default:\n                dir = column.modules.sort.startingDir;\n            }\n          }\n\n          if (self.table.options.columnHeaderSortMulti && (e.shiftKey || e.ctrlKey)) {\n            sorters = self.getSort();\n            match = sorters.findIndex(function (sorter) {\n              return sorter.field === column.getField();\n            });\n\n            if (match > -1) {\n              sorters[match].dir = dir;\n\n              if (match != sorters.length - 1) {\n                match = sorters.splice(match, 1)[0];\n\n                if (dir != \"none\") {\n                  sorters.push(match);\n                }\n              }\n            } else {\n              if (dir != \"none\") {\n                sorters.push({\n                  column: column,\n                  dir: dir\n                });\n              }\n            } //add to existing sort\n\n\n            self.setSort(sorters);\n          } else {\n            if (dir == \"none\") {\n              self.clear();\n            } else {\n              //sort by column only\n              self.setSort(column, dir);\n            }\n          }\n\n          self.table.rowManager.sorterRefresh(!self.sortList.length);\n        }\n      });\n    }\n  }; //check if the sorters have changed since last use\n\n\n  Sort.prototype.hasChanged = function () {\n    var changed = this.changed;\n    this.changed = false;\n    return changed;\n  }; //return current sorters\n\n\n  Sort.prototype.getSort = function () {\n    var self = this,\n        sorters = [];\n    self.sortList.forEach(function (item) {\n      if (item.column) {\n        sorters.push({\n          column: item.column.getComponent(),\n          field: item.column.getField(),\n          dir: item.dir\n        });\n      }\n    });\n    return sorters;\n  }; //change sort list and trigger sort\n\n\n  Sort.prototype.setSort = function (sortList, dir) {\n    var self = this,\n        newSortList = [];\n\n    if (!Array.isArray(sortList)) {\n      sortList = [{\n        column: sortList,\n        dir: dir\n      }];\n    }\n\n    sortList.forEach(function (item) {\n      var column;\n      column = self.table.columnManager.findColumn(item.column);\n\n      if (column) {\n        item.column = column;\n        newSortList.push(item);\n        self.changed = true;\n      } else {\n        console.warn(\"Sort Warning - Sort field does not exist and is being ignored: \", item.column);\n      }\n    });\n    self.sortList = newSortList;\n\n    if (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.sort) {\n      this.table.modules.persistence.save(\"sort\");\n    }\n  }; //clear sorters\n\n\n  Sort.prototype.clear = function () {\n    this.setSort([]);\n  }; //find appropriate sorter for column\n\n\n  Sort.prototype.findSorter = function (column) {\n    var row = this.table.rowManager.activeRows[0],\n        sorter = \"string\",\n        field,\n        value;\n\n    if (row) {\n      row = row.getData();\n      field = column.getField();\n\n      if (field) {\n        value = column.getFieldValue(row);\n\n        switch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n          case \"undefined\":\n            sorter = \"string\";\n            break;\n\n          case \"boolean\":\n            sorter = \"boolean\";\n            break;\n\n          default:\n            if (!isNaN(value) && value !== \"\") {\n              sorter = \"number\";\n            } else {\n              if (value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)) {\n                sorter = \"alphanum\";\n              }\n            }\n\n            break;\n        }\n      }\n    }\n\n    return this.sorters[sorter];\n  }; //work through sort list sorting data\n\n\n  Sort.prototype.sort = function (data) {\n    var self = this,\n        sortList = this.table.options.sortOrderReverse ? self.sortList.slice().reverse() : self.sortList,\n        sortListActual = [],\n        rowComponents = [],\n        lastSort;\n\n    if (self.table.options.dataSorting) {\n      self.table.options.dataSorting.call(self.table, self.getSort());\n    }\n\n    self.clearColumnHeaders();\n\n    if (!self.table.options.ajaxSorting) {\n      //build list of valid sorters and trigger column specific callbacks before sort begins\n      sortList.forEach(function (item, i) {\n        var sortObj = item.column.modules.sort;\n\n        if (item.column && sortObj) {\n          //if no sorter has been defined, take a guess\n          if (!sortObj.sorter) {\n            sortObj.sorter = self.findSorter(item.column);\n          }\n\n          item.params = typeof sortObj.params === \"function\" ? sortObj.params(item.column.getComponent(), item.dir) : sortObj.params;\n          sortListActual.push(item);\n        }\n\n        self.setColumnHeader(item.column, item.dir);\n      }); //sort data\n\n      if (sortListActual.length) {\n        self._sortItems(data, sortListActual);\n      }\n    } else {\n      sortList.forEach(function (item, i) {\n        self.setColumnHeader(item.column, item.dir);\n      });\n    }\n\n    if (self.table.options.dataSorted) {\n      data.forEach(function (row) {\n        rowComponents.push(row.getComponent());\n      });\n      self.table.options.dataSorted.call(self.table, self.getSort(), rowComponents);\n    }\n  }; //clear sort arrows on columns\n\n\n  Sort.prototype.clearColumnHeaders = function () {\n    this.table.columnManager.getRealColumns().forEach(function (column) {\n      if (column.modules.sort) {\n        column.modules.sort.dir = \"none\";\n        column.getElement().setAttribute(\"aria-sort\", \"none\");\n      }\n    });\n  }; //set the column header sort direction\n\n\n  Sort.prototype.setColumnHeader = function (column, dir) {\n    column.modules.sort.dir = dir;\n    column.getElement().setAttribute(\"aria-sort\", dir);\n  }; //sort each item in sort list\n\n\n  Sort.prototype._sortItems = function (data, sortList) {\n    var _this78 = this;\n\n    var sorterCount = sortList.length - 1;\n    data.sort(function (a, b) {\n      var result;\n\n      for (var i = sorterCount; i >= 0; i--) {\n        var sortItem = sortList[i];\n        result = _this78._sortRow(a, b, sortItem.column, sortItem.dir, sortItem.params);\n\n        if (result !== 0) {\n          break;\n        }\n      }\n\n      return result;\n    });\n  }; //process individual rows for a sort function on active data\n\n\n  Sort.prototype._sortRow = function (a, b, column, dir, params) {\n    var el1Comp, el2Comp, colComp; //switch elements depending on search direction\n\n    var el1 = dir == \"asc\" ? a : b;\n    var el2 = dir == \"asc\" ? b : a;\n    a = column.getFieldValue(el1.getData());\n    b = column.getFieldValue(el2.getData());\n    a = typeof a !== \"undefined\" ? a : \"\";\n    b = typeof b !== \"undefined\" ? b : \"\";\n    el1Comp = el1.getComponent();\n    el2Comp = el2.getComponent();\n    return column.modules.sort.sorter.call(this, a, b, el1Comp, el2Comp, column.getComponent(), dir, params);\n  }; //default data sorters\n\n\n  Sort.prototype.sorters = {\n    //sort numbers\n    number: function number(a, b, aRow, bRow, column, dir, params) {\n      var alignEmptyValues = params.alignEmptyValues;\n      var decimal = params.decimalSeparator || \".\";\n      var thousand = params.thousandSeparator || \",\";\n      var emptyAlign = 0;\n      a = parseFloat(String(a).split(thousand).join(\"\").split(decimal).join(\".\"));\n      b = parseFloat(String(b).split(thousand).join(\"\").split(decimal).join(\".\")); //handle non numeric values\n\n      if (isNaN(a)) {\n        emptyAlign = isNaN(b) ? 0 : -1;\n      } else if (isNaN(b)) {\n        emptyAlign = 1;\n      } else {\n        //compare valid values\n        return a - b;\n      } //fix empty values in position\n\n\n      if (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n        emptyAlign *= -1;\n      }\n\n      return emptyAlign;\n    },\n    //sort strings\n    string: function string(a, b, aRow, bRow, column, dir, params) {\n      var alignEmptyValues = params.alignEmptyValues;\n      var emptyAlign = 0;\n      var locale; //handle empty values\n\n      if (!a) {\n        emptyAlign = !b ? 0 : -1;\n      } else if (!b) {\n        emptyAlign = 1;\n      } else {\n        //compare valid values\n        switch (_typeof(params.locale)) {\n          case \"boolean\":\n            if (params.locale) {\n              locale = this.table.modules.localize.getLocale();\n            }\n\n            break;\n\n          case \"string\":\n            locale = params.locale;\n            break;\n        }\n\n        return String(a).toLowerCase().localeCompare(String(b).toLowerCase(), locale);\n      } //fix empty values in position\n\n\n      if (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n        emptyAlign *= -1;\n      }\n\n      return emptyAlign;\n    },\n    //sort date\n    date: function date(a, b, aRow, bRow, column, dir, params) {\n      if (!params.format) {\n        params.format = \"DD/MM/YYYY\";\n      }\n\n      return this.sorters.datetime.call(this, a, b, aRow, bRow, column, dir, params);\n    },\n    //sort HH:mm formatted times\n    time: function time(a, b, aRow, bRow, column, dir, params) {\n      if (!params.format) {\n        params.format = \"HH:mm\";\n      }\n\n      return this.sorters.datetime.call(this, a, b, aRow, bRow, column, dir, params);\n    },\n    //sort datetime\n    datetime: function datetime(a, b, aRow, bRow, column, dir, params) {\n      var format = params.format || \"DD/MM/YYYY HH:mm:ss\",\n          alignEmptyValues = params.alignEmptyValues,\n          emptyAlign = 0;\n\n      if (typeof moment != \"undefined\") {\n        a = moment(a, format);\n        b = moment(b, format);\n\n        if (!a.isValid()) {\n          emptyAlign = !b.isValid() ? 0 : -1;\n        } else if (!b.isValid()) {\n          emptyAlign = 1;\n        } else {\n          //compare valid values\n          return a - b;\n        } //fix empty values in position\n\n\n        if (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n          emptyAlign *= -1;\n        }\n\n        return emptyAlign;\n      } else {\n        console.error(\"Sort Error - 'datetime' sorter is dependant on moment.js\");\n      }\n    },\n    //sort booleans\n    boolean: function boolean(a, b, aRow, bRow, column, dir, params) {\n      var el1 = a === true || a === \"true\" || a === \"True\" || a === 1 ? 1 : 0;\n      var el2 = b === true || b === \"true\" || b === \"True\" || b === 1 ? 1 : 0;\n      return el1 - el2;\n    },\n    //sort if element contains any data\n    array: function array(a, b, aRow, bRow, column, dir, params) {\n      var el1 = 0;\n      var el2 = 0;\n      var type = params.type || \"length\";\n      var alignEmptyValues = params.alignEmptyValues;\n      var emptyAlign = 0;\n\n      function calc(value) {\n        switch (type) {\n          case \"length\":\n            return value.length;\n            break;\n\n          case \"sum\":\n            return value.reduce(function (c, d) {\n              return c + d;\n            });\n            break;\n\n          case \"max\":\n            return Math.max.apply(null, value);\n            break;\n\n          case \"min\":\n            return Math.min.apply(null, value);\n            break;\n\n          case \"avg\":\n            return value.reduce(function (c, d) {\n              return c + d;\n            }) / value.length;\n            break;\n        }\n      } //handle non array values\n\n\n      if (!Array.isArray(a)) {\n        alignEmptyValues = !Array.isArray(b) ? 0 : -1;\n      } else if (!Array.isArray(b)) {\n        alignEmptyValues = 1;\n      } else {\n        //compare valid values\n        el1 = a ? calc(a) : 0;\n        el2 = b ? calc(b) : 0;\n        return el1 - el2;\n      } //fix empty values in position\n\n\n      if (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n        emptyAlign *= -1;\n      }\n\n      return emptyAlign;\n    },\n    //sort if element contains any data\n    exists: function exists(a, b, aRow, bRow, column, dir, params) {\n      var el1 = typeof a == \"undefined\" ? 0 : 1;\n      var el2 = typeof b == \"undefined\" ? 0 : 1;\n      return el1 - el2;\n    },\n    //sort alpha numeric strings\n    alphanum: function alphanum(as, bs, aRow, bRow, column, dir, params) {\n      var a,\n          b,\n          a1,\n          b1,\n          i = 0,\n          L,\n          rx = /(\\d+)|(\\D+)/g,\n          rd = /\\d/;\n      var alignEmptyValues = params.alignEmptyValues;\n      var emptyAlign = 0; //handle empty values\n\n      if (!as && as !== 0) {\n        emptyAlign = !bs && bs !== 0 ? 0 : -1;\n      } else if (!bs && bs !== 0) {\n        emptyAlign = 1;\n      } else {\n        if (isFinite(as) && isFinite(bs)) return as - bs;\n        a = String(as).toLowerCase();\n        b = String(bs).toLowerCase();\n        if (a === b) return 0;\n        if (!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1;\n        a = a.match(rx);\n        b = b.match(rx);\n        L = a.length > b.length ? b.length : a.length;\n\n        while (i < L) {\n          a1 = a[i];\n          b1 = b[i++];\n\n          if (a1 !== b1) {\n            if (isFinite(a1) && isFinite(b1)) {\n              if (a1.charAt(0) === \"0\") a1 = \".\" + a1;\n              if (b1.charAt(0) === \"0\") b1 = \".\" + b1;\n              return a1 - b1;\n            } else return a1 > b1 ? 1 : -1;\n          }\n        }\n\n        return a.length > b.length;\n      } //fix empty values in position\n\n\n      if (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n        emptyAlign *= -1;\n      }\n\n      return emptyAlign;\n    }\n  };\n  Tabulator.prototype.registerModule(\"sort\", Sort);\n\n  var Validate = function Validate(table) {\n    this.table = table;\n    this.invalidCells = [];\n  }; //validate\n\n\n  Validate.prototype.initializeColumn = function (column) {\n    var self = this,\n        config = [],\n        validator;\n\n    if (column.definition.validator) {\n      if (Array.isArray(column.definition.validator)) {\n        column.definition.validator.forEach(function (item) {\n          validator = self._extractValidator(item);\n\n          if (validator) {\n            config.push(validator);\n          }\n        });\n      } else {\n        validator = this._extractValidator(column.definition.validator);\n\n        if (validator) {\n          config.push(validator);\n        }\n      }\n\n      column.modules.validate = config.length ? config : false;\n    }\n  };\n\n  Validate.prototype._extractValidator = function (value) {\n    var type, params, pos;\n\n    switch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n      case \"string\":\n        pos = value.indexOf(':');\n\n        if (pos > -1) {\n          type = value.substring(0, pos);\n          params = value.substring(pos + 1);\n        } else {\n          type = value;\n        }\n\n        return this._buildValidator(type, params);\n        break;\n\n      case \"function\":\n        return this._buildValidator(value);\n        break;\n\n      case \"object\":\n        return this._buildValidator(value.type, value.parameters);\n        break;\n    }\n  };\n\n  Validate.prototype._buildValidator = function (type, params) {\n    var func = typeof type == \"function\" ? type : this.validators[type];\n\n    if (!func) {\n      console.warn(\"Validator Setup Error - No matching validator found:\", type);\n      return false;\n    } else {\n      return {\n        type: typeof type == \"function\" ? \"function\" : type,\n        func: func,\n        params: params\n      };\n    }\n  };\n\n  Validate.prototype.validate = function (validators, cell, value) {\n    var self = this,\n        valid = [],\n        invalidIndex = this.invalidCells.indexOf(cell);\n\n    if (validators) {\n      validators.forEach(function (item) {\n        if (!item.func.call(self, cell.getComponent(), value, item.params)) {\n          valid.push({\n            type: item.type,\n            parameters: item.params\n          });\n        }\n      });\n    }\n\n    valid = valid.length ? valid : true;\n\n    if (!cell.modules.validate) {\n      cell.modules.validate = {};\n    }\n\n    if (valid === true) {\n      cell.modules.validate.invalid = false;\n      cell.getElement().classList.remove(\"tabulator-validation-fail\");\n\n      if (invalidIndex > -1) {\n        this.invalidCells.splice(invalidIndex, 1);\n      }\n    } else {\n      cell.modules.validate.invalid = true;\n\n      if (this.table.options.validationMode !== \"manual\") {\n        cell.getElement().classList.add(\"tabulator-validation-fail\");\n      }\n\n      if (invalidIndex == -1) {\n        this.invalidCells.push(cell);\n      }\n    }\n\n    return valid;\n  };\n\n  Validate.prototype.getInvalidCells = function () {\n    var output = [];\n    this.invalidCells.forEach(function (cell) {\n      output.push(cell.getComponent());\n    });\n    return output;\n  };\n\n  Validate.prototype.clearValidation = function (cell) {\n    var invalidIndex;\n\n    if (cell.modules.validate && cell.modules.validate.invalid) {\n      cell.element.classList.remove(\"tabulator-validation-fail\");\n      cell.modules.validate.invalid = false;\n      invalidIndex = this.invalidCells.indexOf(cell);\n\n      if (invalidIndex > -1) {\n        this.invalidCells.splice(invalidIndex, 1);\n      }\n    }\n  };\n\n  Validate.prototype.validators = {\n    //is integer\n    integer: function integer(cell, value, parameters) {\n      if (value === \"\" || value === null || typeof value === \"undefined\") {\n        return true;\n      }\n\n      value = Number(value);\n      return typeof value === 'number' && isFinite(value) && Math.floor(value) === value;\n    },\n    //is float\n    float: function float(cell, value, parameters) {\n      if (value === \"\" || value === null || typeof value === \"undefined\") {\n        return true;\n      }\n\n      value = Number(value);\n      return typeof value === 'number' && isFinite(value) && value % 1 !== 0;\n    },\n    //must be a number\n    numeric: function numeric(cell, value, parameters) {\n      if (value === \"\" || value === null || typeof value === \"undefined\") {\n        return true;\n      }\n\n      return !isNaN(value);\n    },\n    //must be a string\n    string: function string(cell, value, parameters) {\n      if (value === \"\" || value === null || typeof value === \"undefined\") {\n        return true;\n      }\n\n      return isNaN(value);\n    },\n    //maximum value\n    max: function max(cell, value, parameters) {\n      if (value === \"\" || value === null || typeof value === \"undefined\") {\n        return true;\n      }\n\n      return parseFloat(value) <= parameters;\n    },\n    //minimum value\n    min: function min(cell, value, parameters) {\n      if (value === \"\" || value === null || typeof value === \"undefined\") {\n        return true;\n      }\n\n      return parseFloat(value) >= parameters;\n    },\n    //starts with  value\n    starts: function starts(cell, value, parameters) {\n      if (value === \"\" || value === null || typeof value === \"undefined\") {\n        return true;\n      }\n\n      return String(value).toLowerCase().startsWith(String(parameters).toLowerCase());\n    },\n    //ends with  value\n    ends: function ends(cell, value, parameters) {\n      if (value === \"\" || value === null || typeof value === \"undefined\") {\n        return true;\n      }\n\n      return String(value).toLowerCase().endsWith(String(parameters).toLowerCase());\n    },\n    //minimum string length\n    minLength: function minLength(cell, value, parameters) {\n      if (value === \"\" || value === null || typeof value === \"undefined\") {\n        return true;\n      }\n\n      return String(value).length >= parameters;\n    },\n    //maximum string length\n    maxLength: function maxLength(cell, value, parameters) {\n      if (value === \"\" || value === null || typeof value === \"undefined\") {\n        return true;\n      }\n\n      return String(value).length <= parameters;\n    },\n    //in provided value list\n    in: function _in(cell, value, parameters) {\n      if (value === \"\" || value === null || typeof value === \"undefined\") {\n        return true;\n      }\n\n      if (typeof parameters == \"string\") {\n        parameters = parameters.split(\"|\");\n      }\n\n      return value === \"\" || parameters.indexOf(value) > -1;\n    },\n    //must match provided regex\n    regex: function regex(cell, value, parameters) {\n      if (value === \"\" || value === null || typeof value === \"undefined\") {\n        return true;\n      }\n\n      var reg = new RegExp(parameters);\n      return reg.test(value);\n    },\n    //value must be unique in this column\n    unique: function unique(cell, value, parameters) {\n      if (value === \"\" || value === null || typeof value === \"undefined\") {\n        return true;\n      }\n\n      var unique = true;\n      var cellData = cell.getData();\n\n      var column = cell.getColumn()._getSelf();\n\n      this.table.rowManager.rows.forEach(function (row) {\n        var data = row.getData();\n\n        if (data !== cellData) {\n          if (value == column.getFieldValue(data)) {\n            unique = false;\n          }\n        }\n      });\n      return unique;\n    },\n    //must have a value\n    required: function required(cell, value, parameters) {\n      return value !== \"\" && value !== null && typeof value !== \"undefined\";\n    }\n  };\n  Tabulator.prototype.registerModule(\"validate\", Validate);\n  return Tabulator;\n});","map":{"version":3,"sources":["C:/Users/Ljubica/Desktop/ISA-projekat-2019-2020/klinicki-centar-frontend/node_modules/tabulator-tables/dist/js/tabulator.js"],"names":["_typeof","Symbol","iterator","obj","constructor","prototype","global","factory","exports","module","define","amd","Tabulator","Array","findIndex","Object","defineProperty","value","predicate","TypeError","o","len","length","thisArg","arguments","k","kValue","call","find","undefined","String","includes","search","start","RegExp","indexOf","searchElement","fromIndex","n","Math","max","abs","sameValueZero","x","y","isNaN","assign","target","varArgs","to","index","nextSource","nextKey","hasOwnProperty","writable","configurable","ColumnManager","table","blockHozScrollEvent","headersElement","createHeadersElement","element","createHeaderElement","rowManager","columns","columnsByIndex","columnsByField","scrollLeft","insertBefore","firstChild","el","document","createElement","classList","add","options","headerVisible","initialize","self","setRowManager","manager","getElement","getHeadersElement","scrollHorizontal","left","hozAdjust","scrollWidth","clientWidth","style","marginLeft","modExists","modules","frozenColumns","generateColumnsFromRowData","data","cols","row","sorter","key","col","field","title","isArray","match","push","setColumns","removeChild","reset","forEach","def","i","_addColumn","_reIndexColumns","responsiveLayout","redraw","definition","before","nextToColumn","column","Column","colEl","findColumnIndex","parentIndex","getTopColumn","nextEl","splice","parentNode","nextSibling","unshift","appendChild","columnRendered","registerColumnField","registerColumnPosition","reRegisterPosition","_verticalAlignHeaders","minHeight","height","clearVerticalAlign","getHeight","verticalAlign","columnHeaderVertAlign","adjustTableSize","findColumn","subject","ColumnComponent","_getSelf","HTMLElement","getColumnByField","getColumnsByFieldRoot","root","_this","matches","keys","fieldRoot","split","getColumnByIndex","getFirstVisibileColumn","visible","getColumns","getRealColumns","traverse","callback","getDefinitions","active","output","getDefinition","getDefinitionTree","getComponents","structured","getComponent","getWidth","width","moveColumn","from","after","moveColumnActual","columnCalcs","recalc","activeRows","reinitialize","parent","isGroup","_moveColumnInArray","columnMoved","columnManager","persistence","config","save","updateRows","toIndex","rows","cells","cell","scrollToColumn","position","ifVisible","_this2","offset","adjust","Promise","resolve","reject","scrollToColumnPosition","scrollToColumnIfVisible","offsetLeft","offsetWidth","min","console","warn","generateCells","generateCell","getFlexBaseWidth","totalWidth","fixedWidth","scrollHeight","clientHeight","minWidth","colWidth","columnMinWidth","parseInt","addColumn","_this3","layout","getMode","reinitializeWidth","deregisterColumn","getField","force","helpers","elVisible","resetScroll","update","footerManager","_column","type","getCells","getVisibility","isVisible","show","hide","toggle","delete","getSubColumns","getParentColumn","scrollTo","getTable","headerFilterFocus","filter","setHeaderFilterFocus","reloadHeaderFilter","getHeaderFilterValue","setHeaderFilterValue","move","toColumn","getNextColumn","nextCol","nextColumn","getPrevColumn","prevCol","prevColumn","updateDefinition","updates","setWidth","validate","contentElement","titleElement","groupElement","createGroupElement","tooltip","hozAlign","vertAlign","fieldStructure","getFieldValue","setFieldValue","titleFormatterRendered","setField","invalidOptionWarnings","checkDefinition","cellEvents","cellClick","cellDblClick","cellContext","cellTap","cellDblTap","cellTapHold","cellMouseEnter","cellMouseLeave","cellMouseOver","cellMouseOut","cellMouseMove","widthStyled","minWidthStyled","widthFixed","component","_mapDepricatedFunctionality","newCol","attachColumn","checkColumnVisibility","rowHandle","movableRows","moveRow","setHandle","_buildHeader","bindModuleColumns","setAttribute","_this4","defaultOptionList","nestedFieldSeparator","_getNestedData","_getFlatData","_setNestedData","_setFlatData","hideInHtml","htmlOutput","align","downloadTitle","titleDownload","setTooltip","headerTooltip","tooltipsHeader","localize","bind","headerVertical","_bindEvents","_buildColumnHeaderContent","_buildGroupHeader","_buildColumnHeader","resizableColumns","resizeColumns","initializeColumn","headerFilter","headerFilterPlaceholder","setHeaderFilterColumnPlaceholder","movableColumns","topCalc","bottomCalc","addEventListener","e","dblTap","tapHold","tap","headerClick","headerDblClick","headerContext","headerTap","passive","headerDblTap","clearTimeout","setTimeout","headerTapHold","cellEdited","cellEditing","cellEditCancelled","sortable","sort","headerContextMenu","headerMenu","menu","initializeColumnHeader","format","editor","edit","validator","mutator","accessor","cssClass","classeNames","className","setMinWidth","tooltips","cellHozAlign","cellVertAlign","_buildColumnHeaderTitle","titleHolderElement","editableTitle","stopPropagation","focus","columnTitleChanged","text","_formatColumnHeaderTitle","_this5","formatter","contents","params","mockCell","onRendered","titleFormatter","getFormatter","getValue","titleFormatterParams","Node","innerHTML","_this6","dataObj","structure","_i","_i2","alignment","parentHeight","getGroupElement","offsetHeight","paddingTop","rowNumColumn","getFirstColumn","getLastColumn","updateBranches","colDefs","columnVisibilityChanged","silent","responsiveToggle","display","updateColumnVisibility","matchChildWidths","childWidth","maxWidth","setWidthActual","floor","checkCellHeights","heightInitialized","offsetParent","clearCellHeight","calcHeight","setCellHeight","_this7","currentCell","cancelEdit","cellCount","_i3","invalid","Cell","_nextVisibleColumn","_prevVisibleColumn","hideHeaderFilterElements","fitToData","showHeaderFilterElements","clearWidth","_this8","then","catch","err","deleteCell","RowManager","createHolderElement","tableElement","createTableElement","heightFixer","firstRender","renderMode","fixedHeight","activeRowsCount","displayRows","displayRowsCount","scrollTop","vDomRowHeight","vDomTop","vDomBottom","vDomScrollPosTop","vDomScrollPosBottom","vDomTopPad","vDomBottomPad","vDomMaxRenderChain","vDomWindowBuffer","vDomWindowMinTotalRows","vDomWindowMinMarginRows","vDomTopNewRows","vDomBottomNewRows","redrawBlock","redrawBlockRestoreConfig","redrawBlockRederInPosition","getTableElement","getRowPosition","setColumnManager","setRenderMode","groupBy","groupRows","scrollHeaders","top","dir","scrollVertical","ajaxProgressiveLoad","ajax","nextPage","findRow","Row","RowComponent","_match","getRowFromDataObject","getRowFromPosition","scrollToRow","_this9","rowIndex","getDisplayRows","rowEl","rowTop","scrollToRowPosition","scrollToRowIfVisible","elOffset","_virtualRenderFill","offsetTop","setData","renderInPosition","columnsChanged","_this10","pagination","_setDataActual","reRenderInPosition","autoColumns","dataLoading","_wipeElements","history","clear","selectRow","clearSelectionData","reactiveData","watchData","refreshActiveData","dataLoaded","error","wipe","deleteRow","blockRedraw","allIndex","activeIndex","setActiveRows","displayRowIterator","displayIndex","regenerateRowNumbers","rowDeleted","dataEdited","getData","updateGroupRows","addRow","pos","addRowActual","action","addRows","_this11","findAddRowPos","reverse","item","addRowPos","dispRows","paginationAddRow","page","getPageSize","assignRowToGroup","getGroup","_moveRowInArray","rowAdded","posFrom","posTo","moveRowActual","rowMoved","_this12","Group","prevDisplayRow","toGroup","fromGroup","removeRow","insertRow","end","_i4","styleRow","clearData","getRowIndex","findRowIndex","getDisplayRowIndex","nextDisplayRow","rowOnly","nextRow","prevRow","list","transform","getRows","getDataCount","_genRemoteRequest","_this13","ajaxSorting","sorters","getSort","paginationDataSentNames","ajaxFiltering","filters","getFilters","setParams","sendRequest","filterRefresh","setPage","loadData","sorterRefresh","loadOrignalData","progressiveLoad","stage","skipStage","cascadeOrder","selectable","selectablePersistence","deselectRows","slice","resetDisplayRows","frozenRows","isFrozen","getDisplayIndex","setDisplayIndex","getNextDisplayIndex","setDisplayRows","dataTree","setMaxRows","renderTable","layoutColumnsOnNewData","_this14","getCell","_generateContents","getVisibleRows","viewable","topEdge","bottomEdge","topFound","topRow","bottomRow","getRenderMode","topOffset","diff","virtualDom","renderStarted","_simpleRender","renderEmptyScroll","placeholder","renderComplete","_clearVirtualDom","checkClassicModeGroupHeaderWidth","onlyGroupHeaders","visibility","paddingBottom","remove","forceMove","holder","topPad","rowsHeight","topPadHeight","heightOccupied","ceil","rowHeight","initialized","normalizeHeight","vDomScrollHeight","countGroups","topDiff","bottomDiff","margin","_addTopRow","_removeBottomRow","_removeTopRow","_addBottomRow","topRowHeight","_quickNormalizeRowHeight","bottomRowHeight","initialHeight","otherHeight","external","maxHeight","virtualDomBuffer","resizeTable","autoResize","restoreRedraw","tableWidth","browser","event","createEvent","initEvent","dispatchEvent","Event","_row","getIndex","getPosition","pageTo","setPageToRow","moveToRow","updateData","select","selectRows","deselect","toggleSelect","toggleRow","isSelected","isRowSelected","freeze","freezeRow","unfreeze","unfreezeRow","treeCollapse","collapseRow","treeExpand","expandRow","treeToggle","getTreeParent","getTreeChildren","addTreeChild","addTreeChildRow","reformat","getNextRow","getPrevRow","heightStyled","manualHeight","outerHeight","generateElement","detachElement","initializeRow","rowContextMenu","rowClick","rowDblClick","rowContext","rowMouseEnter","rowMouseLeave","rowMouseOver","rowMouseOut","rowMouseMove","rowTap","rowDblTap","rowTapHold","deleteCells","layoutRow","cellRendered","rowFormatter","resizableRows","resizeRows","reinitializeHeight","setHeight","clearHeight","transformRow","watchRow","updatedData","_this15","tempData","newRowData","JSON","parse","block","attrname","unblock","setValueProcessData","redrawNeeded","rowUpdated","getCellIndex","findCell","findNextEditableCell","nextCell","allowEdit","check","findPrevEditableCell","prevCell","toRow","_this16","deleteActual","detatchModules","group","rowDelete","recalcRowGroup","_deselectRow","detachRow","_i5","CellComponent","_cell","getOldValue","getRow","getColumn","setValue","mutate","restoreOldValue","setValueActual","isEdited","edited","clearEdited","isValid","clearValidation","nav","checkHeight","oldValue","build","_configureCell","vertAligns","bottom","middle","hozAligns","right","center","textAlign","alignItems","justifyContent","classNames","tooltipGenerationMode","_generateTooltip","_bindClickEvents","_bindTouchEvents","_bindMouseEvents","bindEditor","initializeCell","preventDefault","selection","range","body","createTextRange","moveToElementText","window","getSelection","createRange","selectNode","removeAllRanges","addRange","val","formatValue","changed","newValue","transformCell","contextMenu","layoutElement","editCell","editing","getCurrentCell","valid","calcs","next","prev","up","down","FooterManager","links","_initialize","footerElement","querySelector","append","activate","prepend","deactivate","link","footerRedraw","browserSlow","browserMobile","initializeElement","initializeOptions","_create","comms","register","defaultOptions","columnVertAlign","initialSort","initialFilter","initialHeaderFilter","columnHeaderSortMulti","sortOrderReverse","headerSort","headerSortTristate","keybindings","tabEndNewRow","clipboard","clipboardCopyStyled","clipboardCopyConfig","clipboardCopyFormatter","clipboardCopyRowRange","clipboardPasteParser","clipboardPasteAction","clipboardCopied","clipboardPasted","clipboardPasteError","downloadDataFormatter","downloadReady","blob","downloadComplete","downloadConfig","downloadRowRange","dataTreeElementColumn","dataTreeBranchElement","dataTreeChildIndent","dataTreeChildField","dataTreeCollapseElement","dataTreeExpandElement","dataTreeStartExpanded","dataTreeRowExpanded","dataTreeRowCollapsed","dataTreeChildColumnCalcs","dataTreeSelectPropagate","printAsHtml","printFormatter","printHeader","printFooter","printCopyStyle","printStyled","printVisibleRows","printRowRange","printConfig","selectableRangeMode","selectableRollingSelection","selectableCheck","headerFilterLiveFilterDelay","locale","langs","persistentLayout","persistentSort","persistentFilter","persistenceID","persistenceMode","persistenceReaderFunc","persistenceWriterFunc","responsiveLayoutCollapseStartOpen","responsiveLayoutCollapseUseFormatters","responsiveLayoutCollapseFormatter","paginationSize","paginationInitialPage","paginationButtonCount","paginationSizeSelector","paginationElement","paginationDataSent","paginationDataReceived","ajaxURL","ajaxURLGenerator","ajaxParams","ajaxConfig","ajaxContentType","ajaxRequestFunc","ajaxLoader","ajaxLoaderLoading","ajaxLoaderError","ajaxProgressiveLoadDelay","ajaxProgressiveLoadScrollMargin","groupStartOpen","groupValues","groupHeader","groupHeaderPrint","groupHeaderClipboard","groupHeaderHtmlOutput","groupHeaderDownload","htmlOutputConfig","movableRowsConnectedTables","movableRowsConnectedElements","movableRowsSender","movableRowsReceiver","movableRowsSendingStart","movableRowsSent","movableRowsSentFailed","movableRowsSendingStop","movableRowsReceivingStart","movableRowsReceived","movableRowsReceivedFailed","movableRowsReceivingStop","movableRowsElementDrop","rowFormatterPrint","rowFormatterClipboard","rowFormatterHtmlOutput","tableBuilding","tableBuilt","rowSelectionChanged","rowSelected","rowDeselected","rowResized","columnResized","htmlImporting","htmlImported","ajaxRequesting","ajaxResponse","ajaxError","dataFiltering","dataFiltered","dataSorting","dataSorted","groupToggleElement","groupClosedShowCalcs","dataGrouping","dataGrouped","groupVisibilityChanged","groupClick","groupDblClick","groupContext","groupContextMenu","groupTap","groupDblTap","groupTapHold","pageLoaded","localized","validationMode","validationFailed","historyUndo","historyRedo","clipboardCopyHeader","columnHeaders","_clearSelection","empty","_clearObjectPointers","bindModules","tagName","htmlTableImport","parseTable","_buildElement","_loadInitialData","_this17","mod","_detectBrowser","setHeaderFilterPlaceholder","installLang","setLocale","span","load","setSort","setFilter","print","destroy","deregister","unwatchData","clearBindings","ua","navigator","userAgent","vendor","opera","test","substr","setDataFromLocalFile","extensions","_this18","input","accept","file","files","reader","FileReader","readAsText","onload","result","onerror","click","blockActiveRequest","_setData","inPosition","setConfig","setUrl","getUrl","searchRows","searchData","getHtml","export","printFullscreen","getAjaxUrl","replaceData","_this19","responses","addData","_this20","updateOrAddData","_this21","newRows","_this22","count","successCount","foundRows","doneCheck","a","b","_this23","updateOrAddRow","_this24","updateRow","_this25","_this26","fromRow","copyToClipboard","selector","copy","getColumnDefinitions","getColumnLayout","parseColumns","setColumnLayout","mergeDefinition","showColumn","hideColumn","toggleColumn","_this27","deleteColumn","_this28","updateColumnDefinition","_this29","fromColumn","_this30","getLocale","getLang","sortList","getSorters","clearSort","addFilter","all","getHeaderFilters","removeFilter","clearFilter","clearHeaderFilter","deselectRow","toggleSelectRow","getSelectedRows","getSelectedData","getInvalidCells","clearCellValidation","_this31","concat","setMaxPage","_this32","setPageSize","size","previousPage","getPage","getPageMax","setGroupBy","groups","setGroupStartOpen","values","setGroupHeader","getGroups","getGroupedData","getEditedCells","clearCellEdited","_this33","getCalcResults","getResults","recalcAll","navigatePrev","navigateNext","navigateLeft","navigateRight","navigateUp","navigateDown","undo","redo","getHistoryUndoSize","getHistoryRedoSize","download","filename","downloadToTab","tableComms","receive","moduleBindings","extendModule","name","property","source","registerModule","plugin","required","box","getBoundingClientRect","pageYOffset","documentElement","clientTop","pageXOffset","clientLeft","deepClone","clone","Date","tables","lookupTable","query","results","querySelectorAll","matchElement","findTable","Layout","mode","modes","fitData","fitDataFill","fitDataTable","fitDataStretch","_this34","colsWidth","gap","lastCol","responsive","fitColumns","flexWidth","flexGrowUnits","flexColWidth","flexColumns","fixedShrinkColumns","flexShrinkUnits","overflowWidth","gapFill","calcWidth","scaleColumns","freeSpace","shrinkCols","oversizeCols","oversizeSpace","remainingSpace","nextColWidth","changeUnits","undersizeCols","calcGrow","widthGrow","calcShrink","widthShrink","Localize","lang","bindings","default","headerFilters","_setLangProp","desiredLocale","traverseLang","trans","path","prop","language","toLowerCase","prefix","_executeBindings","getText","pathArray","_getLangElement","level","rootPath","_loop","binding","Comms","getConnections","selectors","connections","connection","con","send","commsReceived","Accessor","allowedTypes","charAt","toUpperCase","lookupAccessor","accessors","dataIn","Ajax","url","urlGenerator","loaderElement","createLoaderElement","msgElement","createMsgElement","loadingElement","errorElement","loaderPromise","loading","requestOrder","template","trim","content","defaultLoaderPromise","defaultURLGenerator","initializeProgressive","getParams","_loadDefaultConfig","method","defaultConfig","_loadDataProgressive","_loadDataStandard","_this35","generateParamsList","serializeParams","encoded","encodeURIComponent","join","_this36","requestNo","esc","showLoader","hideLoader","showError","shouldLoad","contentType","contentTypeFormatters","headers","Accept","location","origin","credentials","fetch","response","ok","json","status","statusText","stringify","form","FormData","ColumnCalcs","topCalcs","botCalcs","genColumn","topElement","botElement","botRow","topInitialized","botInitialized","topCalcParams","botCalcParams","bottomCalcParams","calculations","initializeTopRow","botCalc","initializeBottomRow","removeCalcs","rowsToData","generateRow","recalcGroup","getRowGroup","_this37","getChildGroups","rowData","generateRowData","generateTopRow","generateBottomRow","_this38","open","children","getFilteredTreeChildren","disable","enable","paramKey","hasTopCalcs","hasBottomCalcs","getKey","getGroupResults","groupObj","subGroups","getSubGroups","subGroupResults","subgroup","avg","calcParams","precision","reduce","sum","Number","toFixed","parseFloat","toString","Clipboard","pasteParser","pasteAction","customSelection","rowRange","blocked","_this39","plain","html","generateExportList","genereateHTMLTable","generatePlainContent","clipboardData","originalEvent","paste","setPasteParser","setPasteAction","originalSelectionText","internal","sel","textRange","selectNodeContents","execCommand","pasteActions","parser","pasteParsers","checkPaseOrigin","getPasteData","mutateData","success","headerFindSuccess","columnMap","shift","replace","insert","DataTree","indent","collapseEl","expandEl","branchEl","elementField","startOpen","dummyEl","firstCol","tabIndex","childArray","controlEl","generateControlElement","cloneNode","marginRight","paddingLeft","getComputedStyle","getPropertyValue","_this40","oldControl","replaceChild","_this41","getChildren","child","_this42","generateChildren","subChildren","sub","_this43","childData","childRow","childIndex","findChildIndex","_this44","checkForRestyle","getChildField","Download","interceptCallback","downloadFunc","buildLink","mime","triggerDownload","downloaders","_group","getRowCount","newTab","Blob","URL","createObjectURL","msSaveOrOpenBlob","intercept","csv","setFileContents","delimiter","fileContents","depth","bom","pdf","header","autoTableParams","rowGroupStyles","fontStyle","fontSize","cellPadding","fillColor","rowCalcStyles","jsPDFParams","jsPDF","orientation","unit","parseRow","styles","colSpan","rowSpan","doc","autoTable","addPageContent","head","documentProcessing","xlsx","sheetName","workbook","XLSX","utils","book_new","SheetNames","Sheets","generateSheet","merges","worksheet","s","c","r","j","sheet_add_aoa","encode_range","sheetOnly","sheets","sheet","s2ab","buf","ArrayBuffer","view","Uint8Array","charCodeAt","write","bookType","bookSST","Edit","mouseClick","recursionBlock","invalidEdit","editedCells","editable","editorParams","editors","clearEditor","cancel","cellEl","contains","preventScroll","focusCellNoEvent","forceEdit","focusScrollAdjust","leftEdge","rightEdge","leftMargin","rightMargin","rendered","cellEditor","blur","maskInput","mask","maskLetter","maskLetterChar","maskNumber","maskNumberChar","maskWildcard","maskWildcardChar","fillSymbols","symbol","char","keyCode","maskAutoFill","editIndex","cellValue","padding","boxSizing","elementAttributes","getAttribute","onChange","textarea","vertNav","verticalNavigation","whiteSpace","resize","heightNow","selectionStart","stopImmediatePropagation","number","step","blurFunc","removeEventListener","_this45","initialValue","initialDisplayValue","defaultValue","listEl","multiselect","dataItems","currentItem","displayItems","currentItems","blurable","blockListShow","getUniqueColumnValues","sortValuesList","parseItems","inputValues","curentValues","dataList","displayList","processComplexListItem","label","itemParams","setItem","fillList","listItemFormatter","toggleItem","chooseItem","setCurrentItem","fillInput","unsetItem","hideList","chooseItems","unsetItems","_i6","cancelItem","showList","removeScrollListener","cursor","readOnly","autocomplete","_this46","allItems","uniqueColumnValues","genUniqueColumnValues","filterList","term","intialLoad","items","searchEl","searchFunc","addNotice","searchingPlaceholder","fillListIfNotEmpty","showListOnEmpty","notice","clearList","itemList","emptyPlaceholder","current","freetext","allowEmpty","showInputValue","star","maxStars","getElementsByTagName","stars","starsHolder","createElementNS","starChange","buildStar","starHolder","nextStar","changeValue","overflow","textOverflow","progress","percent","handle","bar","mouseDrag","mouseDragWidth","updateValue","calcVal","round","backgroundColor","screenX","tickCross","tristate","indetermValue","indeterminateValue","indetermState","marginTop","indeterminate","checked","ExportRow","ExportColumn","Export","cloneTableStyle","colVisProp","headersToExportRows","generateColumnGroupHeaders","bodyToExportRows","rowLookup","genereateTable","genereateTableElement","_this47","selectedRows","_this48","columnGroups","colData","processColumnGroup","_this49","maxDepth","groupData","subGroup","subGroupData","columnVisCheck","headerDepth","exportRows","parseColumnGroup","_i7","_i8","_this50","rowGroups","exportCols","_this51","headerEl","bodyEl","lookupTableStyles","setup","treeElementField","mapElementStyles","genereateHeaderElement","genereateGroupElement","genereateCalcElement","genereateRowElement","evenRow","oddRow","calcRow","firstRow","firstGroup","getElementsByClassName","styleCells","firstCell","lastCell","_this52","generator","_this53","cellWrapper","formatCells","formatExportValue","renderedCallback","rowComponent","props","lookup","fromStyle","Filter","headerFilterColumns","prevHeaderFilterChangeCheck","filterType","tagType","attrType","filterChangeCheck","filterFunc","prevSuccess","emptyFunc","headerFilterFunc","headerFilterFuncParams","fieldVal","colVal","func","generateHeaderFilterElement","_this54","filterElement","editorElement","typingTimer","searchTrigger","headerElement","headerFilterEmptyCheck","headerFilterParams","hasAttribute","headerFilterLiveFilter","hasChanged","findFilter","findSubFilters","filtersToArray","_this55","searchType","filterRecurse","rowList","activeRowComponents","filterRow","subFilter","_","filterVal","rowVal","filterParams","regex","like","keywords","separator","keyword","matchAll","starts","startsWith","ends","endsWith","_in","Format","lookupFormatter","formatterPrint","formatterClipboard","formatterHtmlOutput","crossElement","formatters","plaintext","sanitizeHTML","entityMap","emptyToSpace","formatterParams","money","floatVal","integer","decimal","rgx","decimalSym","thousandSym","thousand","symbolAfter","urlPrefix","labelField","urlField","image","truthy","allowTruthy","tick","tickElement","cross","datetime","inputFormat","outputFormat","invalidPlaceholder","newDatetime","moment","timezone","tz","datetimediff","suffix","humanize","date","duration","starActive","starInactive","traffic","colors","color","percentValue","legendAlign","legend","legendColor","barEl","legendEl","holderEl","buttonTick","buttonCross","rownum","responsiveCollapse","toggleList","isOpen","rowSelection","_this56","checkbox","registerRowSelectCheckbox","registerHeaderSelectCheckbox","FrozenColumns","leftColumns","rightColumns","rightPadding","initializationMode","scrollEndTimer","paddingRight","edge","frozenCheck","frozen","_this57","calcMargins","layoutColumnPosition","layoutCalcRows","_calcSpace","allCells","_this58","leftParents","parentEl","getColGroupParentElement","_this59","_i9","FrozenRows","styleRows","GroupComponent","getParentGroup","toggleVisibility","groupManager","oldGroup","hasSubGroups","groupIDLookups","_addRowToGroup","_addRow","old","groupList","elementContents","arrowElement","createElements","addBindings","createValueGroups","arrow","initializeGroupHeader","_this60","allowedValues","_createGroup","toggleElement","initializeGroup","groupID","groupKey","headerGenerator","conformRowData","generateGroupHeaderContents","scrollHeader","removeGroup","getHeadersAndRows","noCalc","_visSet","compoment","addBindingsd","childNodes","GroupRows","langValue","lookupFunc","generateGroups","groupComponents","_this61","pullGroupListData","groupListData","rowCount","headerContent","oldGroups","createGroup","assignRowToExistingGroup","newGroupNeeded","oldRowCount","History","undoers","redoers","cellEdit","rowAdd","newRow","_rebindRow","rowMove","oldRow","HtmlTableImport","fieldIndex","hasIndex","newTable","_extractOptions","_extractHeaders","_generateBlankHeaders","newElement","attributes","optionsArr","optionsList","attrib","_attribValue","_findCol","exists","textContent","Keybindings","watchKeys","pressedKeys","keyupBinding","keydownBinding","mergedBindings","_key","mapBindings","bindEvents","_this62","_loop2","actions","mapBinding","symbolsList","ctrl","meta","symbols","code","checkBinding","ctrlKey","shiftKey","metaKey","navPrev","navNext","navUp","navDown","scrollPageUp","scrollPageDown","scrollToStart","scrollToEnd","keyBlock","newPos","scrollMax","navLeft","navRight","Menu","menuEl","blurEvent","hideMenu","escEvent","escMenu","nestedMenuBlock","_this63","headerMenuEl","loadMenu","_this64","_this65","_this66","_this67","docHeight","innerHeight","itemEl","disabled","pageY","pageX","menus","MoveColumns","placeholderElement","createPlaceholderElement","hoverElement","checkTimeout","checkPeriod","moving","toCol","toColAfter","startX","autoScrollMargin","autoScrollStep","autoScrollTimeout","touchMove","moveHover","endMove","mousemove","touches","which","startMove","bindTouchEvents","startXMove","currentCol","prevColWidth","nextColWidthLast","prevColWidthLast","halfCol","moveToCol","_bindMouseMove","_unbindMouseMove","movingCells","columnHolder","xPos","scrollPos","MoveRows","toRowAfter","hasHandle","startY","tableRowDropEvent","connectionSelectorsTables","connectionSelectorsElements","connectionElements","connectedTable","connectedRow","mouseup","tableRowDrop","previousSibling","startYMove","currentRow","nextRowHeight","prevRowHeight","nextRowHeightLast","prevRowHeightLast","setStartPosition","connectToTables","pointerEvents","disconnectFromTables","moveHoverConnections","moveHoverTable","rowHolder","yPos","elementRowDrop","_this68","connectionTables","dropEvent","tabulatorElementDropEvent","connect","disconnect","dropComplete","sender","senders","receiver","trace","receivers","fromTable","_delete","toTable","Mutator","enabled","lookupMutator","mutators","mutatorEdit","Page","initialLoad","pageSizes","dataReceivedNames","dataSentNames","button","pagesElement","firstBut","prevBut","nextBut","lastBut","pageSizeSelect","generatePageSizeSelectList","_this69","_i10","hidden","pageSelectLabel","testElRow","testElCell","paginationDataReceivedNames","trigger","_this70","_this71","_setPageButtons","leftSize","rightSize","_i11","_generatePageButton","_this72","_this73","_i12","_this74","_getRemotePage","_this75","oldParams","pageParams","_parseRemoteData","last_page","footer","Persistence","id","defWatcherBlock","readFunc","writeFunc","localStorageTest","testKey","localStorage","removeItem","retreivedData","readers","writers","retreiveData","getOwnPropertyDescriptor","set","get","oldCols","newCols","_findColumn","validateSorters","getGroupConfig","getPageConfig","definitions","defStore","colDef","local","getItem","cookie","cookiePos","expireDate","setDate","getDate","toUTCString","Print","manualBlock","replaceTable","cleanup","scrollX","scrollY","footerEl","tableEl","footerContent","ReactiveData","origFuncs","currentVersion","pushFunc","version","enumerable","args","arg","apply","pop","startRow","oldRows","watchKey","unwatchRow","ResizeColumns","startColumn","startWidth","prevHandle","variableHeight","handleDown","nearestColumn","_checkResizability","_mouseDown","prevHandleDown","colIndex","resizable","mouseMove","mouseUp","ResizeRows","startHeight","screenY","ResizeTable","observer","containerObserver","tableHeight","containerHeight","containerWidth","_this76","tableStyle","ResizeObserver","entry","nodeHeight","contentRect","nodeWidth","observe","unobserve","ResponsiveLayout","hiddenColumns","collapseFormatter","collapseStartOpen","collapseHandleColumn","formatCollapsedData","order","generateCollapsedContent","_iterator","_isArray","_i13","_ref","done","generateCollapsedRowContent","colCount","working","generateCollapsedRowData","mockCellComponent","listContents","div","SelectRow","selecting","lastClickedRow","selectPrev","headerCheckboxElement","_rowSelectionChanged","endSelect","selected","lastClickedRowIdx","rowIdx","fromRowIdx","toRowIdx","toggledRows","toggledRow","_selectRow","_this77","rowMatch","rowInfo","checkboxEl","childRowSelection","_i14","selectedRow","_iterator2","_isArray2","_i15","_ref2","_iterator3","_isArray3","_i16","_ref3","_child","Sort","arrowEl","sorterParams","startingDir","headerSortStartingDir","newSortList","findSorter","sortListActual","rowComponents","lastSort","clearColumnHeaders","sortObj","setColumnHeader","_sortItems","_this78","sorterCount","sortItem","_sortRow","el1Comp","el2Comp","colComp","el1","el2","aRow","bRow","alignEmptyValues","decimalSeparator","thousandSeparator","emptyAlign","string","localeCompare","time","boolean","array","calc","d","alphanum","as","bs","a1","b1","L","rx","rd","isFinite","Validate","invalidCells","_extractValidator","substring","_buildValidator","parameters","validators","invalidIndex","float","numeric","minLength","maxLength","in","reg","unique","cellData"],"mappings":"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","sourcesContent":["var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/* Tabulator v4.7.2 (c) Oliver Folkerd */\n\n;(function (global, factory) {\n\tif ((typeof exports === 'undefined' ? 'undefined' : _typeof(exports)) === 'object' && typeof module !== 'undefined') {\n\t\tmodule.exports = factory();\n\t} else if (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t} else {\n\t\tglobal.Tabulator = factory();\n\t}\n})(this, function () {\n\n\t'use strict';\n\n\t// https://tc39.github.io/ecma262/#sec-array.prototype.findIndex\n\n\n\tif (!Array.prototype.findIndex) {\n\n\t\tObject.defineProperty(Array.prototype, 'findIndex', {\n\n\t\t\tvalue: function value(predicate) {\n\n\t\t\t\t// 1. Let O be ? ToObject(this value).\n\n\n\t\t\t\tif (this == null) {\n\n\t\t\t\t\tthrow new TypeError('\"this\" is null or not defined');\n\t\t\t\t}\n\n\t\t\t\tvar o = Object(this);\n\n\t\t\t\t// 2. Let len be ? ToLength(? Get(O, \"length\")).\n\n\n\t\t\t\tvar len = o.length >>> 0;\n\n\t\t\t\t// 3. If IsCallable(predicate) is false, throw a TypeError exception.\n\n\n\t\t\t\tif (typeof predicate !== 'function') {\n\n\t\t\t\t\tthrow new TypeError('predicate must be a function');\n\t\t\t\t}\n\n\t\t\t\t// 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\n\n\n\t\t\t\tvar thisArg = arguments[1];\n\n\t\t\t\t// 5. Let k be 0.\n\n\n\t\t\t\tvar k = 0;\n\n\t\t\t\t// 6. Repeat, while k < len\n\n\n\t\t\t\twhile (k < len) {\n\n\t\t\t\t\t// a. Let Pk be ! ToString(k).\n\n\n\t\t\t\t\t// b. Let kValue be ? Get(O, Pk).\n\n\n\t\t\t\t\t// c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\n\n\n\t\t\t\t\t// d. If testResult is true, return k.\n\n\n\t\t\t\t\tvar kValue = o[k];\n\n\t\t\t\t\tif (predicate.call(thisArg, kValue, k, o)) {\n\n\t\t\t\t\t\treturn k;\n\t\t\t\t\t}\n\n\t\t\t\t\t// e. Increase k by 1.\n\n\n\t\t\t\t\tk++;\n\t\t\t\t}\n\n\t\t\t\t// 7. Return -1.\n\n\n\t\t\t\treturn -1;\n\t\t\t}\n\n\t\t});\n\t}\n\n\t// https://tc39.github.io/ecma262/#sec-array.prototype.find\n\n\n\tif (!Array.prototype.find) {\n\n\t\tObject.defineProperty(Array.prototype, 'find', {\n\n\t\t\tvalue: function value(predicate) {\n\n\t\t\t\t// 1. Let O be ? ToObject(this value).\n\n\n\t\t\t\tif (this == null) {\n\n\t\t\t\t\tthrow new TypeError('\"this\" is null or not defined');\n\t\t\t\t}\n\n\t\t\t\tvar o = Object(this);\n\n\t\t\t\t// 2. Let len be ? ToLength(? Get(O, \"length\")).\n\n\n\t\t\t\tvar len = o.length >>> 0;\n\n\t\t\t\t// 3. If IsCallable(predicate) is false, throw a TypeError exception.\n\n\n\t\t\t\tif (typeof predicate !== 'function') {\n\n\t\t\t\t\tthrow new TypeError('predicate must be a function');\n\t\t\t\t}\n\n\t\t\t\t// 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\n\n\n\t\t\t\tvar thisArg = arguments[1];\n\n\t\t\t\t// 5. Let k be 0.\n\n\n\t\t\t\tvar k = 0;\n\n\t\t\t\t// 6. Repeat, while k < len\n\n\n\t\t\t\twhile (k < len) {\n\n\t\t\t\t\t// a. Let Pk be ! ToString(k).\n\n\n\t\t\t\t\t// b. Let kValue be ? Get(O, Pk).\n\n\n\t\t\t\t\t// c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\n\n\n\t\t\t\t\t// d. If testResult is true, return kValue.\n\n\n\t\t\t\t\tvar kValue = o[k];\n\n\t\t\t\t\tif (predicate.call(thisArg, kValue, k, o)) {\n\n\t\t\t\t\t\treturn kValue;\n\t\t\t\t\t}\n\n\t\t\t\t\t// e. Increase k by 1.\n\n\n\t\t\t\t\tk++;\n\t\t\t\t}\n\n\t\t\t\t// 7. Return undefined.\n\n\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t});\n\t}\n\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes#Polyfill\n\n\n\tif (!String.prototype.includes) {\n\n\t\tString.prototype.includes = function (search, start) {\n\n\t\t\t'use strict';\n\n\t\t\tif (search instanceof RegExp) {\n\n\t\t\t\tthrow TypeError('first argument must not be a RegExp');\n\t\t\t}\n\n\t\t\tif (start === undefined) {\n\t\t\t\tstart = 0;\n\t\t\t}\n\n\t\t\treturn this.indexOf(search, start) !== -1;\n\t\t};\n\t}\n\n\t// https://tc39.github.io/ecma262/#sec-array.prototype.includes\n\n\n\tif (!Array.prototype.includes) {\n\n\t\tObject.defineProperty(Array.prototype, 'includes', {\n\n\t\t\tvalue: function value(searchElement, fromIndex) {\n\n\t\t\t\tif (this == null) {\n\n\t\t\t\t\tthrow new TypeError('\"this\" is null or not defined');\n\t\t\t\t}\n\n\t\t\t\t// 1. Let O be ? ToObject(this value).\n\n\n\t\t\t\tvar o = Object(this);\n\n\t\t\t\t// 2. Let len be ? ToLength(? Get(O, \"length\")).\n\n\n\t\t\t\tvar len = o.length >>> 0;\n\n\t\t\t\t// 3. If len is 0, return false.\n\n\n\t\t\t\tif (len === 0) {\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// 4. Let n be ? ToInteger(fromIndex).\n\n\n\t\t\t\t//    (If fromIndex is undefined, this step produces the value 0.)\n\n\n\t\t\t\tvar n = fromIndex | 0;\n\n\t\t\t\t// 5. If n ≥ 0, then\n\n\n\t\t\t\t//  a. Let k be n.\n\n\n\t\t\t\t// 6. Else n < 0,\n\n\n\t\t\t\t//  a. Let k be len + n.\n\n\n\t\t\t\t//  b. If k < 0, let k be 0.\n\n\n\t\t\t\tvar k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);\n\n\t\t\t\tfunction sameValueZero(x, y) {\n\n\t\t\t\t\treturn x === y || typeof x === 'number' && typeof y === 'number' && isNaN(x) && isNaN(y);\n\t\t\t\t}\n\n\t\t\t\t// 7. Repeat, while k < len\n\n\n\t\t\t\twhile (k < len) {\n\n\t\t\t\t\t// a. Let elementK be the result of ? Get(O, ! ToString(k)).\n\n\n\t\t\t\t\t// b. If SameValueZero(searchElement, elementK) is true, return true.\n\n\n\t\t\t\t\tif (sameValueZero(o[k], searchElement)) {\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\t// c. Increase k by 1.\n\n\n\t\t\t\t\tk++;\n\t\t\t\t}\n\n\t\t\t\t// 8. Return false\n\n\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t});\n\t}\n\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Polyfill\n\n\n\tif (typeof Object.assign !== 'function') {\n\n\t\t// Must be writable: true, enumerable: false, configurable: true\n\n\n\t\tObject.defineProperty(Object, \"assign\", {\n\n\t\t\tvalue: function assign(target, varArgs) {\n\t\t\t\t// .length of function is 2\n\n\n\t\t\t\t'use strict';\n\n\t\t\t\tif (target === null || target === undefined) {\n\n\t\t\t\t\tthrow new TypeError('Cannot convert undefined or null to object');\n\t\t\t\t}\n\n\t\t\t\tvar to = Object(target);\n\n\t\t\t\tfor (var index = 1; index < arguments.length; index++) {\n\n\t\t\t\t\tvar nextSource = arguments[index];\n\n\t\t\t\t\tif (nextSource !== null && nextSource !== undefined) {\n\n\t\t\t\t\t\tfor (var nextKey in nextSource) {\n\n\t\t\t\t\t\t\t// Avoid bugs when hasOwnProperty is shadowed\n\n\n\t\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n\n\t\t\t\t\t\t\t\tto[nextKey] = nextSource[nextKey];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn to;\n\t\t\t},\n\n\t\t\twritable: true,\n\n\t\t\tconfigurable: true\n\n\t\t});\n\t}\n\n\tvar ColumnManager = function ColumnManager(table) {\n\n\t\tthis.table = table; //hold parent table\n\n\n\t\tthis.blockHozScrollEvent = false;\n\n\t\tthis.headersElement = this.createHeadersElement();\n\n\t\tthis.element = this.createHeaderElement(); //containing element\n\n\n\t\tthis.rowManager = null; //hold row manager object\n\n\n\t\tthis.columns = []; // column definition object\n\n\n\t\tthis.columnsByIndex = []; //columns by index\n\n\n\t\tthis.columnsByField = {}; //columns by field\n\n\n\t\tthis.scrollLeft = 0;\n\n\t\tthis.element.insertBefore(this.headersElement, this.element.firstChild);\n\t};\n\n\t////////////// Setup Functions /////////////////\n\n\n\tColumnManager.prototype.createHeadersElement = function () {\n\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-headers\");\n\n\t\treturn el;\n\t};\n\n\tColumnManager.prototype.createHeaderElement = function () {\n\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-header\");\n\n\t\tif (!this.table.options.headerVisible) {\n\n\t\t\tel.classList.add(\"tabulator-header-hidden\");\n\t\t}\n\n\t\treturn el;\n\t};\n\n\tColumnManager.prototype.initialize = function () {\n\n\t\tvar self = this;\n\n\t\t//scroll body along with header\n\n\n\t\t// self.element.addEventListener(\"scroll\", function(e){\n\n\n\t\t// \tif(!self.blockHozScrollEvent){\n\n\n\t\t// \t\tself.table.rowManager.scrollHorizontal(self.element.scrollLeft);\n\n\n\t\t// \t}\n\n\n\t\t// });\n\n\t};\n\n\t//link to row manager\n\n\n\tColumnManager.prototype.setRowManager = function (manager) {\n\n\t\tthis.rowManager = manager;\n\t};\n\n\t//return containing element\n\n\n\tColumnManager.prototype.getElement = function () {\n\n\t\treturn this.element;\n\t};\n\n\t//return header containing element\n\n\n\tColumnManager.prototype.getHeadersElement = function () {\n\n\t\treturn this.headersElement;\n\t};\n\n\t// ColumnManager.prototype.tempScrollBlock = function(){\n\n\n\t// \tclearTimeout(this.blockHozScrollEvent);\n\n\n\t// \tthis.blockHozScrollEvent = setTimeout(() => {this.blockHozScrollEvent = false;}, 50);\n\n\n\t// }\n\n\n\t//scroll horizontally to match table body\n\n\n\tColumnManager.prototype.scrollHorizontal = function (left) {\n\n\t\tvar hozAdjust = 0,\n\t\t    scrollWidth = this.element.scrollWidth - this.table.element.clientWidth;\n\n\t\t// this.tempScrollBlock();\n\n\n\t\tthis.element.scrollLeft = left;\n\n\t\t//adjust for vertical scrollbar moving table when present\n\n\n\t\tif (left > scrollWidth) {\n\n\t\t\thozAdjust = left - scrollWidth;\n\n\t\t\tthis.element.style.marginLeft = -hozAdjust + \"px\";\n\t\t} else {\n\n\t\t\tthis.element.style.marginLeft = 0;\n\t\t}\n\n\t\t//keep frozen columns fixed in position\n\n\n\t\t//this._calcFrozenColumnsPos(hozAdjust + 3);\n\n\n\t\tthis.scrollLeft = left;\n\n\t\tif (this.table.modExists(\"frozenColumns\")) {\n\n\t\t\tthis.table.modules.frozenColumns.scrollHorizontal();\n\t\t}\n\t};\n\n\t///////////// Column Setup Functions /////////////\n\n\n\tColumnManager.prototype.generateColumnsFromRowData = function (data) {\n\n\t\tvar cols = [],\n\t\t    row,\n\t\t    sorter;\n\n\t\tif (data && data.length) {\n\n\t\t\trow = data[0];\n\n\t\t\tfor (var key in row) {\n\n\t\t\t\tvar col = {\n\n\t\t\t\t\tfield: key,\n\n\t\t\t\t\ttitle: key\n\n\t\t\t\t};\n\n\t\t\t\tvar value = row[key];\n\n\t\t\t\tswitch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n\n\t\t\t\t\tcase \"undefined\":\n\n\t\t\t\t\t\tsorter = \"string\";\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"boolean\":\n\n\t\t\t\t\t\tsorter = \"boolean\";\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"object\":\n\n\t\t\t\t\t\tif (Array.isArray(value)) {\n\n\t\t\t\t\t\t\tsorter = \"array\";\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif (!isNaN(value) && value !== \"\") {\n\n\t\t\t\t\t\t\tsorter = \"number\";\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif (value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)) {\n\n\t\t\t\t\t\t\t\tsorter = \"alphanum\";\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tcol.sorter = sorter;\n\n\t\t\t\tcols.push(col);\n\t\t\t}\n\n\t\t\tthis.table.options.columns = cols;\n\n\t\t\tthis.setColumns(this.table.options.columns);\n\t\t}\n\t};\n\n\tColumnManager.prototype.setColumns = function (cols, row) {\n\n\t\tvar self = this;\n\n\t\twhile (self.headersElement.firstChild) {\n\t\t\tself.headersElement.removeChild(self.headersElement.firstChild);\n\t\t}self.columns = [];\n\n\t\tself.columnsByIndex = [];\n\n\t\tself.columnsByField = {};\n\n\t\t//reset frozen columns\n\n\n\t\tif (self.table.modExists(\"frozenColumns\")) {\n\n\t\t\tself.table.modules.frozenColumns.reset();\n\t\t}\n\n\t\tcols.forEach(function (def, i) {\n\n\t\t\tself._addColumn(def);\n\t\t});\n\n\t\tself._reIndexColumns();\n\n\t\tif (self.table.options.responsiveLayout && self.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\tself.table.modules.responsiveLayout.initialize();\n\t\t}\n\n\t\tself.redraw(true);\n\t};\n\n\tColumnManager.prototype._addColumn = function (definition, before, nextToColumn) {\n\n\t\tvar column = new Column(definition, this),\n\t\t    colEl = column.getElement(),\n\t\t    index = nextToColumn ? this.findColumnIndex(nextToColumn) : nextToColumn;\n\n\t\tif (nextToColumn && index > -1) {\n\n\t\t\tvar parentIndex = this.columns.indexOf(nextToColumn.getTopColumn());\n\n\t\t\tvar nextEl = nextToColumn.getElement();\n\n\t\t\tif (before) {\n\n\t\t\t\tthis.columns.splice(parentIndex, 0, column);\n\n\t\t\t\tnextEl.parentNode.insertBefore(colEl, nextEl);\n\t\t\t} else {\n\n\t\t\t\tthis.columns.splice(parentIndex + 1, 0, column);\n\n\t\t\t\tnextEl.parentNode.insertBefore(colEl, nextEl.nextSibling);\n\t\t\t}\n\t\t} else {\n\n\t\t\tif (before) {\n\n\t\t\t\tthis.columns.unshift(column);\n\n\t\t\t\tthis.headersElement.insertBefore(column.getElement(), this.headersElement.firstChild);\n\t\t\t} else {\n\n\t\t\t\tthis.columns.push(column);\n\n\t\t\t\tthis.headersElement.appendChild(column.getElement());\n\t\t\t}\n\n\t\t\tcolumn.columnRendered();\n\t\t}\n\n\t\treturn column;\n\t};\n\n\tColumnManager.prototype.registerColumnField = function (col) {\n\n\t\tif (col.definition.field) {\n\n\t\t\tthis.columnsByField[col.definition.field] = col;\n\t\t}\n\t};\n\n\tColumnManager.prototype.registerColumnPosition = function (col) {\n\n\t\tthis.columnsByIndex.push(col);\n\t};\n\n\tColumnManager.prototype._reIndexColumns = function () {\n\n\t\tthis.columnsByIndex = [];\n\n\t\tthis.columns.forEach(function (column) {\n\n\t\t\tcolumn.reRegisterPosition();\n\t\t});\n\t};\n\n\t//ensure column headers take up the correct amount of space in column groups\n\n\n\tColumnManager.prototype._verticalAlignHeaders = function () {\n\n\t\tvar self = this,\n\t\t    minHeight = 0;\n\n\t\tself.columns.forEach(function (column) {\n\n\t\t\tvar height;\n\n\t\t\tcolumn.clearVerticalAlign();\n\n\t\t\theight = column.getHeight();\n\n\t\t\tif (height > minHeight) {\n\n\t\t\t\tminHeight = height;\n\t\t\t}\n\t\t});\n\n\t\tself.columns.forEach(function (column) {\n\n\t\t\tcolumn.verticalAlign(self.table.options.columnHeaderVertAlign, minHeight);\n\t\t});\n\n\t\tself.rowManager.adjustTableSize();\n\t};\n\n\t//////////////// Column Details /////////////////\n\n\n\tColumnManager.prototype.findColumn = function (subject) {\n\n\t\tvar self = this;\n\n\t\tif ((typeof subject === 'undefined' ? 'undefined' : _typeof(subject)) == \"object\") {\n\n\t\t\tif (subject instanceof Column) {\n\n\t\t\t\t//subject is column element\n\n\n\t\t\t\treturn subject;\n\t\t\t} else if (subject instanceof ColumnComponent) {\n\n\t\t\t\t//subject is public column component\n\n\n\t\t\t\treturn subject._getSelf() || false;\n\t\t\t} else if (typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement) {\n\n\t\t\t\t//subject is a HTML element of the column header\n\n\n\t\t\t\tvar match = self.columns.find(function (column) {\n\n\t\t\t\t\treturn column.element === subject;\n\t\t\t\t});\n\n\t\t\t\treturn match || false;\n\t\t\t}\n\t\t} else {\n\n\t\t\t//subject should be treated as the field name of the column\n\n\n\t\t\treturn this.columnsByField[subject] || false;\n\t\t}\n\n\t\t//catch all for any other type of input\n\n\n\t\treturn false;\n\t};\n\n\tColumnManager.prototype.getColumnByField = function (field) {\n\n\t\treturn this.columnsByField[field];\n\t};\n\n\tColumnManager.prototype.getColumnsByFieldRoot = function (root) {\n\t\tvar _this = this;\n\n\t\tvar matches = [];\n\n\t\tObject.keys(this.columnsByField).forEach(function (field) {\n\n\t\t\tvar fieldRoot = field.split(\".\")[0];\n\n\t\t\tif (fieldRoot === root) {\n\n\t\t\t\tmatches.push(_this.columnsByField[field]);\n\t\t\t}\n\t\t});\n\n\t\treturn matches;\n\t};\n\n\tColumnManager.prototype.getColumnByIndex = function (index) {\n\n\t\treturn this.columnsByIndex[index];\n\t};\n\n\tColumnManager.prototype.getFirstVisibileColumn = function (index) {\n\n\t\tvar index = this.columnsByIndex.findIndex(function (col) {\n\n\t\t\treturn col.visible;\n\t\t});\n\n\t\treturn index > -1 ? this.columnsByIndex[index] : false;\n\t};\n\n\tColumnManager.prototype.getColumns = function () {\n\n\t\treturn this.columns;\n\t};\n\n\tColumnManager.prototype.findColumnIndex = function (column) {\n\n\t\treturn this.columnsByIndex.findIndex(function (col) {\n\n\t\t\treturn column === col;\n\t\t});\n\t};\n\n\t//return all columns that are not groups\n\n\n\tColumnManager.prototype.getRealColumns = function () {\n\n\t\treturn this.columnsByIndex;\n\t};\n\n\t//travers across columns and call action\n\n\n\tColumnManager.prototype.traverse = function (callback) {\n\n\t\tvar self = this;\n\n\t\tself.columnsByIndex.forEach(function (column, i) {\n\n\t\t\tcallback(column, i);\n\t\t});\n\t};\n\n\t//get defintions of actual columns\n\n\n\tColumnManager.prototype.getDefinitions = function (active) {\n\n\t\tvar self = this,\n\t\t    output = [];\n\n\t\tself.columnsByIndex.forEach(function (column) {\n\n\t\t\tif (!active || active && column.visible) {\n\n\t\t\t\toutput.push(column.getDefinition());\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t};\n\n\t//get full nested definition tree\n\n\n\tColumnManager.prototype.getDefinitionTree = function () {\n\n\t\tvar self = this,\n\t\t    output = [];\n\n\t\tself.columns.forEach(function (column) {\n\n\t\t\toutput.push(column.getDefinition(true));\n\t\t});\n\n\t\treturn output;\n\t};\n\n\tColumnManager.prototype.getComponents = function (structured) {\n\n\t\tvar self = this,\n\t\t    output = [],\n\t\t    columns = structured ? self.columns : self.columnsByIndex;\n\n\t\tcolumns.forEach(function (column) {\n\n\t\t\toutput.push(column.getComponent());\n\t\t});\n\n\t\treturn output;\n\t};\n\n\tColumnManager.prototype.getWidth = function () {\n\n\t\tvar width = 0;\n\n\t\tthis.columnsByIndex.forEach(function (column) {\n\n\t\t\tif (column.visible) {\n\n\t\t\t\twidth += column.getWidth();\n\t\t\t}\n\t\t});\n\n\t\treturn width;\n\t};\n\n\tColumnManager.prototype.moveColumn = function (from, to, after) {\n\n\t\tthis.moveColumnActual(from, to, after);\n\n\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\tthis.table.modules.responsiveLayout.initialize();\n\t\t}\n\n\t\tif (this.table.modExists(\"columnCalcs\")) {\n\n\t\t\tthis.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\n\t\t}\n\n\t\tto.element.parentNode.insertBefore(from.element, to.element);\n\n\t\tif (after) {\n\n\t\t\tto.element.parentNode.insertBefore(to.element, from.element);\n\t\t}\n\n\t\tthis._verticalAlignHeaders();\n\n\t\tthis.table.rowManager.reinitialize();\n\t};\n\n\tColumnManager.prototype.moveColumnActual = function (from, to, after) {\n\n\t\tif (from.parent.isGroup) {\n\n\t\t\tthis._moveColumnInArray(from.parent.columns, from, to, after);\n\t\t} else {\n\n\t\t\tthis._moveColumnInArray(this.columns, from, to, after);\n\t\t}\n\n\t\tthis._moveColumnInArray(this.columnsByIndex, from, to, after, true);\n\n\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\tthis.table.modules.responsiveLayout.initialize();\n\t\t}\n\n\t\tif (this.table.options.columnMoved) {\n\n\t\t\tthis.table.options.columnMoved.call(this.table, from.getComponent(), this.table.columnManager.getComponents());\n\t\t}\n\n\t\tif (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns) {\n\n\t\t\tthis.table.modules.persistence.save(\"columns\");\n\t\t}\n\t};\n\n\tColumnManager.prototype._moveColumnInArray = function (columns, from, to, after, updateRows) {\n\n\t\tvar fromIndex = columns.indexOf(from),\n\t\t    toIndex;\n\n\t\tif (fromIndex > -1) {\n\n\t\t\tcolumns.splice(fromIndex, 1);\n\n\t\t\ttoIndex = columns.indexOf(to);\n\n\t\t\tif (toIndex > -1) {\n\n\t\t\t\tif (after) {\n\n\t\t\t\t\ttoIndex = toIndex + 1;\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\ttoIndex = fromIndex;\n\t\t\t}\n\n\t\t\tcolumns.splice(toIndex, 0, from);\n\n\t\t\tif (updateRows) {\n\n\t\t\t\tthis.table.rowManager.rows.forEach(function (row) {\n\n\t\t\t\t\tif (row.cells.length) {\n\n\t\t\t\t\t\tvar cell = row.cells.splice(fromIndex, 1)[0];\n\n\t\t\t\t\t\trow.cells.splice(toIndex, 0, cell);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\tColumnManager.prototype.scrollToColumn = function (column, position, ifVisible) {\n\t\tvar _this2 = this;\n\n\t\tvar left = 0,\n\t\t    offset = 0,\n\t\t    adjust = 0,\n\t\t    colEl = column.getElement();\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tif (typeof position === \"undefined\") {\n\n\t\t\t\tposition = _this2.table.options.scrollToColumnPosition;\n\t\t\t}\n\n\t\t\tif (typeof ifVisible === \"undefined\") {\n\n\t\t\t\tifVisible = _this2.table.options.scrollToColumnIfVisible;\n\t\t\t}\n\n\t\t\tif (column.visible) {\n\n\t\t\t\t//align to correct position\n\n\n\t\t\t\tswitch (position) {\n\n\t\t\t\t\tcase \"middle\":\n\n\t\t\t\t\tcase \"center\":\n\n\t\t\t\t\t\tadjust = -_this2.element.clientWidth / 2;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"right\":\n\n\t\t\t\t\t\tadjust = colEl.clientWidth - _this2.headersElement.clientWidth;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\t//check column visibility\n\n\n\t\t\t\tif (!ifVisible) {\n\n\t\t\t\t\toffset = colEl.offsetLeft;\n\n\t\t\t\t\tif (offset > 0 && offset + colEl.offsetWidth < _this2.element.clientWidth) {\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//calculate scroll position\n\n\n\t\t\t\tleft = colEl.offsetLeft + _this2.element.scrollLeft + adjust;\n\n\t\t\t\tleft = Math.max(Math.min(left, _this2.table.rowManager.element.scrollWidth - _this2.table.rowManager.element.clientWidth), 0);\n\n\t\t\t\t_this2.table.rowManager.scrollHorizontal(left);\n\n\t\t\t\t_this2.scrollHorizontal(left);\n\n\t\t\t\tresolve();\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Scroll Error - Column not visible\");\n\n\t\t\t\treject(\"Scroll Error - Column not visible\");\n\t\t\t}\n\t\t});\n\t};\n\n\t//////////////// Cell Management /////////////////\n\n\n\tColumnManager.prototype.generateCells = function (row) {\n\n\t\tvar self = this;\n\n\t\tvar cells = [];\n\n\t\tself.columnsByIndex.forEach(function (column) {\n\n\t\t\tcells.push(column.generateCell(row));\n\t\t});\n\n\t\treturn cells;\n\t};\n\n\t//////////////// Column Management /////////////////\n\n\n\tColumnManager.prototype.getFlexBaseWidth = function () {\n\n\t\tvar self = this,\n\t\t    totalWidth = self.table.element.clientWidth,\n\t\t    //table element width\n\n\n\t\tfixedWidth = 0;\n\n\t\t//adjust for vertical scrollbar if present\n\n\n\t\tif (self.rowManager.element.scrollHeight > self.rowManager.element.clientHeight) {\n\n\t\t\ttotalWidth -= self.rowManager.element.offsetWidth - self.rowManager.element.clientWidth;\n\t\t}\n\n\t\tthis.columnsByIndex.forEach(function (column) {\n\n\t\t\tvar width, minWidth, colWidth;\n\n\t\t\tif (column.visible) {\n\n\t\t\t\twidth = column.definition.width || 0;\n\n\t\t\t\tminWidth = typeof column.minWidth == \"undefined\" ? self.table.options.columnMinWidth : parseInt(column.minWidth);\n\n\t\t\t\tif (typeof width == \"string\") {\n\n\t\t\t\t\tif (width.indexOf(\"%\") > -1) {\n\n\t\t\t\t\t\tcolWidth = totalWidth / 100 * parseInt(width);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tcolWidth = parseInt(width);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\tcolWidth = width;\n\t\t\t\t}\n\n\t\t\t\tfixedWidth += colWidth > minWidth ? colWidth : minWidth;\n\t\t\t}\n\t\t});\n\n\t\treturn fixedWidth;\n\t};\n\n\tColumnManager.prototype.addColumn = function (definition, before, nextToColumn) {\n\t\tvar _this3 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tvar column = _this3._addColumn(definition, before, nextToColumn);\n\n\t\t\t_this3._reIndexColumns();\n\n\t\t\tif (_this3.table.options.responsiveLayout && _this3.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\t\t_this3.table.modules.responsiveLayout.initialize();\n\t\t\t}\n\n\t\t\tif (_this3.table.modExists(\"columnCalcs\")) {\n\n\t\t\t\t_this3.table.modules.columnCalcs.recalc(_this3.table.rowManager.activeRows);\n\t\t\t}\n\n\t\t\t_this3.redraw();\n\n\t\t\tif (_this3.table.modules.layout.getMode() != \"fitColumns\") {\n\n\t\t\t\tcolumn.reinitializeWidth();\n\t\t\t}\n\n\t\t\t_this3._verticalAlignHeaders();\n\n\t\t\t_this3.table.rowManager.reinitialize();\n\n\t\t\tresolve(column);\n\t\t});\n\t};\n\n\t//remove column from system\n\n\n\tColumnManager.prototype.deregisterColumn = function (column) {\n\n\t\tvar field = column.getField(),\n\t\t    index;\n\n\t\t//remove from field list\n\n\n\t\tif (field) {\n\n\t\t\tdelete this.columnsByField[field];\n\t\t}\n\n\t\t//remove from index list\n\n\n\t\tindex = this.columnsByIndex.indexOf(column);\n\n\t\tif (index > -1) {\n\n\t\t\tthis.columnsByIndex.splice(index, 1);\n\t\t}\n\n\t\t//remove from column list\n\n\n\t\tindex = this.columns.indexOf(column);\n\n\t\tif (index > -1) {\n\n\t\t\tthis.columns.splice(index, 1);\n\t\t}\n\n\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\tthis.table.modules.responsiveLayout.initialize();\n\t\t}\n\n\t\tthis.redraw();\n\t};\n\n\t//redraw columns\n\n\n\tColumnManager.prototype.redraw = function (force) {\n\n\t\tif (force) {\n\n\t\t\tif (Tabulator.prototype.helpers.elVisible(this.element)) {\n\n\t\t\t\tthis._verticalAlignHeaders();\n\t\t\t}\n\n\t\t\tthis.table.rowManager.resetScroll();\n\n\t\t\tthis.table.rowManager.reinitialize();\n\t\t}\n\n\t\tif ([\"fitColumns\", \"fitDataStretch\"].indexOf(this.table.modules.layout.getMode()) > -1) {\n\n\t\t\tthis.table.modules.layout.layout();\n\t\t} else {\n\n\t\t\tif (force) {\n\n\t\t\t\tthis.table.modules.layout.layout();\n\t\t\t} else {\n\n\t\t\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.table.modExists(\"frozenColumns\")) {\n\n\t\t\tthis.table.modules.frozenColumns.layout();\n\t\t}\n\n\t\tif (this.table.modExists(\"columnCalcs\")) {\n\n\t\t\tthis.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\n\t\t}\n\n\t\tif (force) {\n\n\t\t\tif (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns) {\n\n\t\t\t\tthis.table.modules.persistence.save(\"columns\");\n\t\t\t}\n\n\t\t\tif (this.table.modExists(\"columnCalcs\")) {\n\n\t\t\t\tthis.table.modules.columnCalcs.redraw();\n\t\t\t}\n\t\t}\n\n\t\tthis.table.footerManager.redraw();\n\t};\n\n\t//public column object\n\n\tvar ColumnComponent = function ColumnComponent(column) {\n\n\t\tthis._column = column;\n\n\t\tthis.type = \"ColumnComponent\";\n\t};\n\n\tColumnComponent.prototype.getElement = function () {\n\n\t\treturn this._column.getElement();\n\t};\n\n\tColumnComponent.prototype.getDefinition = function () {\n\n\t\treturn this._column.getDefinition();\n\t};\n\n\tColumnComponent.prototype.getField = function () {\n\n\t\treturn this._column.getField();\n\t};\n\n\tColumnComponent.prototype.getCells = function () {\n\n\t\tvar cells = [];\n\n\t\tthis._column.cells.forEach(function (cell) {\n\n\t\t\tcells.push(cell.getComponent());\n\t\t});\n\n\t\treturn cells;\n\t};\n\n\tColumnComponent.prototype.getVisibility = function () {\n\n\t\tconsole.warn(\"getVisibility function is deprecated, you should now use the isVisible function\");\n\n\t\treturn this._column.visible;\n\t};\n\n\tColumnComponent.prototype.isVisible = function () {\n\n\t\treturn this._column.visible;\n\t};\n\n\tColumnComponent.prototype.show = function () {\n\n\t\tif (this._column.isGroup) {\n\n\t\t\tthis._column.columns.forEach(function (column) {\n\n\t\t\t\tcolumn.show();\n\t\t\t});\n\t\t} else {\n\n\t\t\tthis._column.show();\n\t\t}\n\t};\n\n\tColumnComponent.prototype.hide = function () {\n\n\t\tif (this._column.isGroup) {\n\n\t\t\tthis._column.columns.forEach(function (column) {\n\n\t\t\t\tcolumn.hide();\n\t\t\t});\n\t\t} else {\n\n\t\t\tthis._column.hide();\n\t\t}\n\t};\n\n\tColumnComponent.prototype.toggle = function () {\n\n\t\tif (this._column.visible) {\n\n\t\t\tthis.hide();\n\t\t} else {\n\n\t\t\tthis.show();\n\t\t}\n\t};\n\n\tColumnComponent.prototype.delete = function () {\n\n\t\treturn this._column.delete();\n\t};\n\n\tColumnComponent.prototype.getSubColumns = function () {\n\n\t\tvar output = [];\n\n\t\tif (this._column.columns.length) {\n\n\t\t\tthis._column.columns.forEach(function (column) {\n\n\t\t\t\toutput.push(column.getComponent());\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tColumnComponent.prototype.getParentColumn = function () {\n\n\t\treturn this._column.parent instanceof Column ? this._column.parent.getComponent() : false;\n\t};\n\n\tColumnComponent.prototype._getSelf = function () {\n\n\t\treturn this._column;\n\t};\n\n\tColumnComponent.prototype.scrollTo = function () {\n\n\t\treturn this._column.table.columnManager.scrollToColumn(this._column);\n\t};\n\n\tColumnComponent.prototype.getTable = function () {\n\n\t\treturn this._column.table;\n\t};\n\n\tColumnComponent.prototype.headerFilterFocus = function () {\n\n\t\tif (this._column.table.modExists(\"filter\", true)) {\n\n\t\t\tthis._column.table.modules.filter.setHeaderFilterFocus(this._column);\n\t\t}\n\t};\n\n\tColumnComponent.prototype.reloadHeaderFilter = function () {\n\n\t\tif (this._column.table.modExists(\"filter\", true)) {\n\n\t\t\tthis._column.table.modules.filter.reloadHeaderFilter(this._column);\n\t\t}\n\t};\n\n\tColumnComponent.prototype.getHeaderFilterValue = function () {\n\n\t\tif (this._column.table.modExists(\"filter\", true)) {\n\n\t\t\treturn this._column.table.modules.filter.getHeaderFilterValue(this._column);\n\t\t}\n\t};\n\n\tColumnComponent.prototype.setHeaderFilterValue = function (value) {\n\n\t\tif (this._column.table.modExists(\"filter\", true)) {\n\n\t\t\tthis._column.table.modules.filter.setHeaderFilterValue(this._column, value);\n\t\t}\n\t};\n\n\tColumnComponent.prototype.move = function (to, after) {\n\n\t\tvar toColumn = this._column.table.columnManager.findColumn(to);\n\n\t\tif (toColumn) {\n\n\t\t\tthis._column.table.columnManager.moveColumn(this._column, toColumn, after);\n\t\t} else {\n\n\t\t\tconsole.warn(\"Move Error - No matching column found:\", toColumn);\n\t\t}\n\t};\n\n\tColumnComponent.prototype.getNextColumn = function () {\n\n\t\tvar nextCol = this._column.nextColumn();\n\n\t\treturn nextCol ? nextCol.getComponent() : false;\n\t};\n\n\tColumnComponent.prototype.getPrevColumn = function () {\n\n\t\tvar prevCol = this._column.prevColumn();\n\n\t\treturn prevCol ? prevCol.getComponent() : false;\n\t};\n\n\tColumnComponent.prototype.updateDefinition = function (updates) {\n\n\t\treturn this._column.updateDefinition(updates);\n\t};\n\n\tColumnComponent.prototype.getWidth = function () {\n\n\t\treturn this._column.getWidth();\n\t};\n\n\tColumnComponent.prototype.setWidth = function (width) {\n\n\t\tif (width === true) {\n\n\t\t\treturn this._column.reinitializeWidth(true);\n\t\t} else {\n\n\t\t\treturn this._column.setWidth(width);\n\t\t}\n\t};\n\n\tColumnComponent.prototype.validate = function () {\n\n\t\treturn this._column.validate();\n\t};\n\n\tvar Column = function Column(def, parent) {\n\n\t\tvar self = this;\n\n\t\tthis.table = parent.table;\n\n\t\tthis.definition = def; //column definition\n\n\t\tthis.parent = parent; //hold parent object\n\n\t\tthis.type = \"column\"; //type of element\n\n\t\tthis.columns = []; //child columns\n\n\t\tthis.cells = []; //cells bound to this column\n\n\t\tthis.element = this.createElement(); //column header element\n\n\t\tthis.contentElement = false;\n\n\t\tthis.titleElement = false;\n\n\t\tthis.groupElement = this.createGroupElement(); //column group holder element\n\n\t\tthis.isGroup = false;\n\n\t\tthis.tooltip = false; //hold column tooltip\n\n\t\tthis.hozAlign = \"\"; //horizontal text alignment\n\n\t\tthis.vertAlign = \"\"; //vert text alignment\n\n\n\t\t//multi dimensional filed handling\n\n\t\tthis.field = \"\";\n\n\t\tthis.fieldStructure = \"\";\n\n\t\tthis.getFieldValue = \"\";\n\n\t\tthis.setFieldValue = \"\";\n\n\t\tthis.titleFormatterRendered = false;\n\n\t\tthis.setField(this.definition.field);\n\n\t\tif (this.table.options.invalidOptionWarnings) {\n\n\t\t\tthis.checkDefinition();\n\t\t}\n\n\t\tthis.modules = {}; //hold module variables;\n\n\n\t\tthis.cellEvents = {\n\n\t\t\tcellClick: false,\n\n\t\t\tcellDblClick: false,\n\n\t\t\tcellContext: false,\n\n\t\t\tcellTap: false,\n\n\t\t\tcellDblTap: false,\n\n\t\t\tcellTapHold: false,\n\n\t\t\tcellMouseEnter: false,\n\n\t\t\tcellMouseLeave: false,\n\n\t\t\tcellMouseOver: false,\n\n\t\t\tcellMouseOut: false,\n\n\t\t\tcellMouseMove: false\n\n\t\t};\n\n\t\tthis.width = null; //column width\n\n\t\tthis.widthStyled = \"\"; //column width prestyled to improve render efficiency\n\n\t\tthis.minWidth = null; //column minimum width\n\n\t\tthis.minWidthStyled = \"\"; //column minimum prestyled to improve render efficiency\n\n\t\tthis.widthFixed = false; //user has specified a width for this column\n\n\n\t\tthis.visible = true; //default visible state\n\n\n\t\tthis.component = null;\n\n\t\tthis._mapDepricatedFunctionality();\n\n\t\t//initialize column\n\n\t\tif (def.columns) {\n\n\t\t\tthis.isGroup = true;\n\n\t\t\tdef.columns.forEach(function (def, i) {\n\n\t\t\t\tvar newCol = new Column(def, self);\n\n\t\t\t\tself.attachColumn(newCol);\n\t\t\t});\n\n\t\t\tself.checkColumnVisibility();\n\t\t} else {\n\n\t\t\tparent.registerColumnField(this);\n\t\t}\n\n\t\tif (def.rowHandle && this.table.options.movableRows !== false && this.table.modExists(\"moveRow\")) {\n\n\t\t\tthis.table.modules.moveRow.setHandle(true);\n\t\t}\n\n\t\tthis._buildHeader();\n\n\t\tthis.bindModuleColumns();\n\t};\n\n\tColumn.prototype.createElement = function () {\n\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-col\");\n\n\t\tel.setAttribute(\"role\", \"columnheader\");\n\n\t\tel.setAttribute(\"aria-sort\", \"none\");\n\n\t\treturn el;\n\t};\n\n\tColumn.prototype.createGroupElement = function () {\n\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-col-group-cols\");\n\n\t\treturn el;\n\t};\n\n\tColumn.prototype.checkDefinition = function () {\n\t\tvar _this4 = this;\n\n\t\tObject.keys(this.definition).forEach(function (key) {\n\n\t\t\tif (_this4.defaultOptionList.indexOf(key) === -1) {\n\n\t\t\t\tconsole.warn(\"Invalid column definition option in '\" + (_this4.field || _this4.definition.title) + \"' column:\", key);\n\t\t\t}\n\t\t});\n\t};\n\n\tColumn.prototype.setField = function (field) {\n\n\t\tthis.field = field;\n\n\t\tthis.fieldStructure = field ? this.table.options.nestedFieldSeparator ? field.split(this.table.options.nestedFieldSeparator) : [field] : [];\n\n\t\tthis.getFieldValue = this.fieldStructure.length > 1 ? this._getNestedData : this._getFlatData;\n\n\t\tthis.setFieldValue = this.fieldStructure.length > 1 ? this._setNestedData : this._setFlatData;\n\t};\n\n\t//register column position with column manager\n\n\tColumn.prototype.registerColumnPosition = function (column) {\n\n\t\tthis.parent.registerColumnPosition(column);\n\t};\n\n\t//register column position with column manager\n\n\tColumn.prototype.registerColumnField = function (column) {\n\n\t\tthis.parent.registerColumnField(column);\n\t};\n\n\t//trigger position registration\n\n\tColumn.prototype.reRegisterPosition = function () {\n\n\t\tif (this.isGroup) {\n\n\t\t\tthis.columns.forEach(function (column) {\n\n\t\t\t\tcolumn.reRegisterPosition();\n\t\t\t});\n\t\t} else {\n\n\t\t\tthis.registerColumnPosition(this);\n\t\t}\n\t};\n\n\tColumn.prototype._mapDepricatedFunctionality = function () {\n\n\t\tif (typeof this.definition.hideInHtml !== \"undefined\") {\n\n\t\t\tthis.definition.htmlOutput = !this.definition.hideInHtml;\n\n\t\t\tconsole.warn(\"hideInHtml column definition property is deprecated, you should now use htmlOutput\");\n\t\t}\n\n\t\tif (typeof this.definition.align !== \"undefined\") {\n\n\t\t\tthis.definition.hozAlign = this.definition.align;\n\n\t\t\tconsole.warn(\"align column definition property is deprecated, you should now use hozAlign\");\n\t\t}\n\n\t\tif (typeof this.definition.downloadTitle !== \"undefined\") {\n\n\t\t\tthis.definition.titleDownload = this.definition.downloadTitle;\n\n\t\t\tconsole.warn(\"downloadTitle definition property is deprecated, you should now use titleDownload\");\n\t\t}\n\t};\n\n\tColumn.prototype.setTooltip = function () {\n\n\t\tvar self = this,\n\t\t    def = self.definition;\n\n\t\t//set header tooltips\n\n\t\tvar tooltip = def.headerTooltip || def.tooltip === false ? def.headerTooltip : self.table.options.tooltipsHeader;\n\n\t\tif (tooltip) {\n\n\t\t\tif (tooltip === true) {\n\n\t\t\t\tif (def.field) {\n\n\t\t\t\t\tself.table.modules.localize.bind(\"columns|\" + def.field, function (value) {\n\n\t\t\t\t\t\tself.element.setAttribute(\"title\", value || def.title);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\n\t\t\t\t\tself.element.setAttribute(\"title\", def.title);\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tif (typeof tooltip == \"function\") {\n\n\t\t\t\t\ttooltip = tooltip(self.getComponent());\n\n\t\t\t\t\tif (tooltip === false) {\n\n\t\t\t\t\t\ttooltip = \"\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tself.element.setAttribute(\"title\", tooltip);\n\t\t\t}\n\t\t} else {\n\n\t\t\tself.element.setAttribute(\"title\", \"\");\n\t\t}\n\t};\n\n\t//build header element\n\n\tColumn.prototype._buildHeader = function () {\n\n\t\tvar self = this,\n\t\t    def = self.definition;\n\n\t\twhile (self.element.firstChild) {\n\t\t\tself.element.removeChild(self.element.firstChild);\n\t\t}if (def.headerVertical) {\n\n\t\t\tself.element.classList.add(\"tabulator-col-vertical\");\n\n\t\t\tif (def.headerVertical === \"flip\") {\n\n\t\t\t\tself.element.classList.add(\"tabulator-col-vertical-flip\");\n\t\t\t}\n\t\t}\n\n\t\tself.contentElement = self._bindEvents();\n\n\t\tself.contentElement = self._buildColumnHeaderContent();\n\n\t\tself.element.appendChild(self.contentElement);\n\n\t\tif (self.isGroup) {\n\n\t\t\tself._buildGroupHeader();\n\t\t} else {\n\n\t\t\tself._buildColumnHeader();\n\t\t}\n\n\t\tself.setTooltip();\n\n\t\t//set resizable handles\n\n\t\tif (self.table.options.resizableColumns && self.table.modExists(\"resizeColumns\")) {\n\n\t\t\tself.table.modules.resizeColumns.initializeColumn(\"header\", self, self.element);\n\t\t}\n\n\t\t//set resizable handles\n\n\t\tif (def.headerFilter && self.table.modExists(\"filter\") && self.table.modExists(\"edit\")) {\n\n\t\t\tif (typeof def.headerFilterPlaceholder !== \"undefined\" && def.field) {\n\n\t\t\t\tself.table.modules.localize.setHeaderFilterColumnPlaceholder(def.field, def.headerFilterPlaceholder);\n\t\t\t}\n\n\t\t\tself.table.modules.filter.initializeColumn(self);\n\t\t}\n\n\t\t//set resizable handles\n\n\t\tif (self.table.modExists(\"frozenColumns\")) {\n\n\t\t\tself.table.modules.frozenColumns.initializeColumn(self);\n\t\t}\n\n\t\t//set movable column\n\n\t\tif (self.table.options.movableColumns && !self.isGroup && self.table.modExists(\"moveColumn\")) {\n\n\t\t\tself.table.modules.moveColumn.initializeColumn(self);\n\t\t}\n\n\t\t//set calcs column\n\n\t\tif ((def.topCalc || def.bottomCalc) && self.table.modExists(\"columnCalcs\")) {\n\n\t\t\tself.table.modules.columnCalcs.initializeColumn(self);\n\t\t}\n\n\t\t//handle persistence\n\n\t\tif (self.table.modExists(\"persistence\") && self.table.modules.persistence.config.columns) {\n\n\t\t\tself.table.modules.persistence.initializeColumn(self);\n\t\t}\n\n\t\t//update header tooltip on mouse enter\n\n\t\tself.element.addEventListener(\"mouseenter\", function (e) {\n\n\t\t\tself.setTooltip();\n\t\t});\n\t};\n\n\tColumn.prototype._bindEvents = function () {\n\n\t\tvar self = this,\n\t\t    def = self.definition,\n\t\t    dblTap,\n\t\t    tapHold,\n\t\t    tap;\n\n\t\t//setup header click event bindings\n\n\t\tif (typeof def.headerClick == \"function\") {\n\n\t\t\tself.element.addEventListener(\"click\", function (e) {\n\t\t\t\tdef.headerClick(e, self.getComponent());\n\t\t\t});\n\t\t}\n\n\t\tif (typeof def.headerDblClick == \"function\") {\n\n\t\t\tself.element.addEventListener(\"dblclick\", function (e) {\n\t\t\t\tdef.headerDblClick(e, self.getComponent());\n\t\t\t});\n\t\t}\n\n\t\tif (typeof def.headerContext == \"function\") {\n\n\t\t\tself.element.addEventListener(\"contextmenu\", function (e) {\n\t\t\t\tdef.headerContext(e, self.getComponent());\n\t\t\t});\n\t\t}\n\n\t\t//setup header tap event bindings\n\n\t\tif (typeof def.headerTap == \"function\") {\n\n\t\t\ttap = false;\n\n\t\t\tself.element.addEventListener(\"touchstart\", function (e) {\n\n\t\t\t\ttap = true;\n\t\t\t}, { passive: true });\n\n\t\t\tself.element.addEventListener(\"touchend\", function (e) {\n\n\t\t\t\tif (tap) {\n\n\t\t\t\t\tdef.headerTap(e, self.getComponent());\n\t\t\t\t}\n\n\t\t\t\ttap = false;\n\t\t\t});\n\t\t}\n\n\t\tif (typeof def.headerDblTap == \"function\") {\n\n\t\t\tdblTap = null;\n\n\t\t\tself.element.addEventListener(\"touchend\", function (e) {\n\n\t\t\t\tif (dblTap) {\n\n\t\t\t\t\tclearTimeout(dblTap);\n\n\t\t\t\t\tdblTap = null;\n\n\t\t\t\t\tdef.headerDblTap(e, self.getComponent());\n\t\t\t\t} else {\n\n\t\t\t\t\tdblTap = setTimeout(function () {\n\n\t\t\t\t\t\tclearTimeout(dblTap);\n\n\t\t\t\t\t\tdblTap = null;\n\t\t\t\t\t}, 300);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (typeof def.headerTapHold == \"function\") {\n\n\t\t\ttapHold = null;\n\n\t\t\tself.element.addEventListener(\"touchstart\", function (e) {\n\n\t\t\t\tclearTimeout(tapHold);\n\n\t\t\t\ttapHold = setTimeout(function () {\n\n\t\t\t\t\tclearTimeout(tapHold);\n\n\t\t\t\t\ttapHold = null;\n\n\t\t\t\t\ttap = false;\n\n\t\t\t\t\tdef.headerTapHold(e, self.getComponent());\n\t\t\t\t}, 1000);\n\t\t\t}, { passive: true });\n\n\t\t\tself.element.addEventListener(\"touchend\", function (e) {\n\n\t\t\t\tclearTimeout(tapHold);\n\n\t\t\t\ttapHold = null;\n\t\t\t});\n\t\t}\n\n\t\t//store column cell click event bindings\n\n\t\tif (typeof def.cellClick == \"function\") {\n\n\t\t\tself.cellEvents.cellClick = def.cellClick;\n\t\t}\n\n\t\tif (typeof def.cellDblClick == \"function\") {\n\n\t\t\tself.cellEvents.cellDblClick = def.cellDblClick;\n\t\t}\n\n\t\tif (typeof def.cellContext == \"function\") {\n\n\t\t\tself.cellEvents.cellContext = def.cellContext;\n\t\t}\n\n\t\t//store column mouse event bindings\n\n\t\tif (typeof def.cellMouseEnter == \"function\") {\n\n\t\t\tself.cellEvents.cellMouseEnter = def.cellMouseEnter;\n\t\t}\n\n\t\tif (typeof def.cellMouseLeave == \"function\") {\n\n\t\t\tself.cellEvents.cellMouseLeave = def.cellMouseLeave;\n\t\t}\n\n\t\tif (typeof def.cellMouseOver == \"function\") {\n\n\t\t\tself.cellEvents.cellMouseOver = def.cellMouseOver;\n\t\t}\n\n\t\tif (typeof def.cellMouseOut == \"function\") {\n\n\t\t\tself.cellEvents.cellMouseOut = def.cellMouseOut;\n\t\t}\n\n\t\tif (typeof def.cellMouseMove == \"function\") {\n\n\t\t\tself.cellEvents.cellMouseMove = def.cellMouseMove;\n\t\t}\n\n\t\t//setup column cell tap event bindings\n\n\t\tif (typeof def.cellTap == \"function\") {\n\n\t\t\tself.cellEvents.cellTap = def.cellTap;\n\t\t}\n\n\t\tif (typeof def.cellDblTap == \"function\") {\n\n\t\t\tself.cellEvents.cellDblTap = def.cellDblTap;\n\t\t}\n\n\t\tif (typeof def.cellTapHold == \"function\") {\n\n\t\t\tself.cellEvents.cellTapHold = def.cellTapHold;\n\t\t}\n\n\t\t//setup column cell edit callbacks\n\n\t\tif (typeof def.cellEdited == \"function\") {\n\n\t\t\tself.cellEvents.cellEdited = def.cellEdited;\n\t\t}\n\n\t\tif (typeof def.cellEditing == \"function\") {\n\n\t\t\tself.cellEvents.cellEditing = def.cellEditing;\n\t\t}\n\n\t\tif (typeof def.cellEditCancelled == \"function\") {\n\n\t\t\tself.cellEvents.cellEditCancelled = def.cellEditCancelled;\n\t\t}\n\t};\n\n\t//build header element for header\n\n\tColumn.prototype._buildColumnHeader = function () {\n\n\t\tvar self = this,\n\t\t    def = self.definition,\n\t\t    table = self.table,\n\t\t    sortable;\n\n\t\t//set column sorter\n\n\t\tif (table.modExists(\"sort\")) {\n\n\t\t\ttable.modules.sort.initializeColumn(self, self.contentElement);\n\t\t}\n\n\t\t//set column header context menu\n\n\t\tif ((def.headerContextMenu || def.headerMenu) && table.modExists(\"menu\")) {\n\n\t\t\ttable.modules.menu.initializeColumnHeader(self);\n\t\t}\n\n\t\t//set column formatter\n\n\t\tif (table.modExists(\"format\")) {\n\n\t\t\ttable.modules.format.initializeColumn(self);\n\t\t}\n\n\t\t//set column editor\n\n\t\tif (typeof def.editor != \"undefined\" && table.modExists(\"edit\")) {\n\n\t\t\ttable.modules.edit.initializeColumn(self);\n\t\t}\n\n\t\t//set colum validator\n\n\t\tif (typeof def.validator != \"undefined\" && table.modExists(\"validate\")) {\n\n\t\t\ttable.modules.validate.initializeColumn(self);\n\t\t}\n\n\t\t//set column mutator\n\n\t\tif (table.modExists(\"mutator\")) {\n\n\t\t\ttable.modules.mutator.initializeColumn(self);\n\t\t}\n\n\t\t//set column accessor\n\n\t\tif (table.modExists(\"accessor\")) {\n\n\t\t\ttable.modules.accessor.initializeColumn(self);\n\t\t}\n\n\t\t//set respoviveLayout\n\n\t\tif (_typeof(table.options.responsiveLayout) && table.modExists(\"responsiveLayout\")) {\n\n\t\t\ttable.modules.responsiveLayout.initializeColumn(self);\n\t\t}\n\n\t\t//set column visibility\n\n\t\tif (typeof def.visible != \"undefined\") {\n\n\t\t\tif (def.visible) {\n\n\t\t\t\tself.show(true);\n\t\t\t} else {\n\n\t\t\t\tself.hide(true);\n\t\t\t}\n\t\t}\n\n\t\t//asign additional css classes to column header\n\n\t\tif (def.cssClass) {\n\n\t\t\tvar classeNames = def.cssClass.split(\" \");\n\n\t\t\tclasseNames.forEach(function (className) {\n\n\t\t\t\tself.element.classList.add(className);\n\t\t\t});\n\t\t}\n\n\t\tif (def.field) {\n\n\t\t\tthis.element.setAttribute(\"tabulator-field\", def.field);\n\t\t}\n\n\t\t//set min width if present\n\n\t\tself.setMinWidth(typeof def.minWidth == \"undefined\" ? self.table.options.columnMinWidth : parseInt(def.minWidth));\n\n\t\tself.reinitializeWidth();\n\n\t\t//set tooltip if present\n\n\t\tself.tooltip = self.definition.tooltip || self.definition.tooltip === false ? self.definition.tooltip : self.table.options.tooltips;\n\n\t\t//set orizontal text alignment\n\n\t\tself.hozAlign = typeof self.definition.hozAlign == \"undefined\" ? self.table.options.cellHozAlign : self.definition.hozAlign;\n\n\t\tself.vertAlign = typeof self.definition.vertAlign == \"undefined\" ? self.table.options.cellVertAlign : self.definition.vertAlign;\n\t};\n\n\tColumn.prototype._buildColumnHeaderContent = function () {\n\n\t\tvar def = this.definition,\n\t\t    table = this.table;\n\n\t\tvar contentElement = document.createElement(\"div\");\n\n\t\tcontentElement.classList.add(\"tabulator-col-content\");\n\n\t\tthis.titleElement = this._buildColumnHeaderTitle();\n\n\t\tcontentElement.appendChild(this.titleElement);\n\n\t\treturn contentElement;\n\t};\n\n\t//build title element of column\n\n\tColumn.prototype._buildColumnHeaderTitle = function () {\n\n\t\tvar self = this,\n\t\t    def = self.definition,\n\t\t    table = self.table,\n\t\t    title;\n\n\t\tvar titleHolderElement = document.createElement(\"div\");\n\n\t\ttitleHolderElement.classList.add(\"tabulator-col-title\");\n\n\t\tif (def.editableTitle) {\n\n\t\t\tvar titleElement = document.createElement(\"input\");\n\n\t\t\ttitleElement.classList.add(\"tabulator-title-editor\");\n\n\t\t\ttitleElement.addEventListener(\"click\", function (e) {\n\n\t\t\t\te.stopPropagation();\n\n\t\t\t\ttitleElement.focus();\n\t\t\t});\n\n\t\t\ttitleElement.addEventListener(\"change\", function () {\n\n\t\t\t\tdef.title = titleElement.value;\n\n\t\t\t\ttable.options.columnTitleChanged.call(self.table, self.getComponent());\n\t\t\t});\n\n\t\t\ttitleHolderElement.appendChild(titleElement);\n\n\t\t\tif (def.field) {\n\n\t\t\t\ttable.modules.localize.bind(\"columns|\" + def.field, function (text) {\n\n\t\t\t\t\ttitleElement.value = text || def.title || \"&nbsp;\";\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\ttitleElement.value = def.title || \"&nbsp;\";\n\t\t\t}\n\t\t} else {\n\n\t\t\tif (def.field) {\n\n\t\t\t\ttable.modules.localize.bind(\"columns|\" + def.field, function (text) {\n\n\t\t\t\t\tself._formatColumnHeaderTitle(titleHolderElement, text || def.title || \"&nbsp;\");\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\tself._formatColumnHeaderTitle(titleHolderElement, def.title || \"&nbsp;\");\n\t\t\t}\n\t\t}\n\n\t\treturn titleHolderElement;\n\t};\n\n\tColumn.prototype._formatColumnHeaderTitle = function (el, title) {\n\t\tvar _this5 = this;\n\n\t\tvar formatter, contents, params, mockCell, onRendered;\n\n\t\tif (this.definition.titleFormatter && this.table.modExists(\"format\")) {\n\n\t\t\tformatter = this.table.modules.format.getFormatter(this.definition.titleFormatter);\n\n\t\t\tonRendered = function onRendered(callback) {\n\n\t\t\t\t_this5.titleFormatterRendered = callback;\n\t\t\t};\n\n\t\t\tmockCell = {\n\n\t\t\t\tgetValue: function getValue() {\n\n\t\t\t\t\treturn title;\n\t\t\t\t},\n\n\t\t\t\tgetElement: function getElement() {\n\n\t\t\t\t\treturn el;\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\tparams = this.definition.titleFormatterParams || {};\n\n\t\t\tparams = typeof params === \"function\" ? params() : params;\n\n\t\t\tcontents = formatter.call(this.table.modules.format, mockCell, params, onRendered);\n\n\t\t\tswitch (typeof contents === 'undefined' ? 'undefined' : _typeof(contents)) {\n\n\t\t\t\tcase \"object\":\n\n\t\t\t\t\tif (contents instanceof Node) {\n\n\t\t\t\t\t\tel.appendChild(contents);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tel.innerHTML = \"\";\n\n\t\t\t\t\t\tconsole.warn(\"Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", contents);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"undefined\":\n\n\t\t\t\tcase \"null\":\n\n\t\t\t\t\tel.innerHTML = \"\";\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tel.innerHTML = contents;\n\n\t\t\t}\n\t\t} else {\n\n\t\t\tel.innerHTML = title;\n\t\t}\n\t};\n\n\t//build header element for column group\n\n\tColumn.prototype._buildGroupHeader = function () {\n\t\tvar _this6 = this;\n\n\t\tthis.element.classList.add(\"tabulator-col-group\");\n\n\t\tthis.element.setAttribute(\"role\", \"columngroup\");\n\n\t\tthis.element.setAttribute(\"aria-title\", this.definition.title);\n\n\t\t//asign additional css classes to column header\n\n\t\tif (this.definition.cssClass) {\n\n\t\t\tvar classeNames = this.definition.cssClass.split(\" \");\n\n\t\t\tclasseNames.forEach(function (className) {\n\n\t\t\t\t_this6.element.classList.add(className);\n\t\t\t});\n\t\t}\n\n\t\t//set column header context menu\n\n\t\tif ((this.definition.headerContextMenu || this.definition.headerMenu) && this.table.modExists(\"menu\")) {\n\n\t\t\tthis.table.modules.menu.initializeColumnHeader(this);\n\t\t}\n\n\t\tthis.element.appendChild(this.groupElement);\n\t};\n\n\t//flat field lookup\n\n\tColumn.prototype._getFlatData = function (data) {\n\n\t\treturn data[this.field];\n\t};\n\n\t//nested field lookup\n\n\tColumn.prototype._getNestedData = function (data) {\n\n\t\tvar dataObj = data,\n\t\t    structure = this.fieldStructure,\n\t\t    length = structure.length,\n\t\t    output;\n\n\t\tfor (var _i = 0; _i < length; _i++) {\n\n\t\t\tdataObj = dataObj[structure[_i]];\n\n\t\t\toutput = dataObj;\n\n\t\t\tif (!dataObj) {\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn output;\n\t};\n\n\t//flat field set\n\n\tColumn.prototype._setFlatData = function (data, value) {\n\n\t\tif (this.field) {\n\n\t\t\tdata[this.field] = value;\n\t\t}\n\t};\n\n\t//nested field set\n\n\tColumn.prototype._setNestedData = function (data, value) {\n\n\t\tvar dataObj = data,\n\t\t    structure = this.fieldStructure,\n\t\t    length = structure.length;\n\n\t\tfor (var _i2 = 0; _i2 < length; _i2++) {\n\n\t\t\tif (_i2 == length - 1) {\n\n\t\t\t\tdataObj[structure[_i2]] = value;\n\t\t\t} else {\n\n\t\t\t\tif (!dataObj[structure[_i2]]) {\n\n\t\t\t\t\tif (typeof value !== \"undefined\") {\n\n\t\t\t\t\t\tdataObj[structure[_i2]] = {};\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tdataObj = dataObj[structure[_i2]];\n\t\t\t}\n\t\t}\n\t};\n\n\t//attach column to this group\n\n\tColumn.prototype.attachColumn = function (column) {\n\n\t\tvar self = this;\n\n\t\tif (self.groupElement) {\n\n\t\t\tself.columns.push(column);\n\n\t\t\tself.groupElement.appendChild(column.getElement());\n\t\t} else {\n\n\t\t\tconsole.warn(\"Column Warning - Column being attached to another column instead of column group\");\n\t\t}\n\t};\n\n\t//vertically align header in column\n\n\tColumn.prototype.verticalAlign = function (alignment, height) {\n\n\t\t//calculate height of column header and group holder element\n\n\t\tvar parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : height || this.parent.getHeadersElement().clientHeight;\n\n\t\t// var parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : this.parent.getHeadersElement().clientHeight;\n\n\n\t\tthis.element.style.height = parentHeight + \"px\";\n\n\t\tif (this.isGroup) {\n\n\t\t\tthis.groupElement.style.minHeight = parentHeight - this.contentElement.offsetHeight + \"px\";\n\t\t}\n\n\t\t//vertically align cell contents\n\n\t\tif (!this.isGroup && alignment !== \"top\") {\n\n\t\t\tif (alignment === \"bottom\") {\n\n\t\t\t\tthis.element.style.paddingTop = this.element.clientHeight - this.contentElement.offsetHeight + \"px\";\n\t\t\t} else {\n\n\t\t\t\tthis.element.style.paddingTop = (this.element.clientHeight - this.contentElement.offsetHeight) / 2 + \"px\";\n\t\t\t}\n\t\t}\n\n\t\tthis.columns.forEach(function (column) {\n\n\t\t\tcolumn.verticalAlign(alignment);\n\t\t});\n\t};\n\n\t//clear vertical alignmenet\n\n\tColumn.prototype.clearVerticalAlign = function () {\n\n\t\tthis.element.style.paddingTop = \"\";\n\n\t\tthis.element.style.height = \"\";\n\n\t\tthis.element.style.minHeight = \"\";\n\n\t\tthis.groupElement.style.minHeight = \"\";\n\n\t\tthis.columns.forEach(function (column) {\n\n\t\t\tcolumn.clearVerticalAlign();\n\t\t});\n\t};\n\n\tColumn.prototype.bindModuleColumns = function () {\n\n\t\t//check if rownum formatter is being used on a column\n\n\t\tif (this.definition.formatter == \"rownum\") {\n\n\t\t\tthis.table.rowManager.rowNumColumn = this;\n\t\t}\n\t};\n\n\t//// Retreive Column Information ////\n\n\n\t//return column header element\n\n\tColumn.prototype.getElement = function () {\n\n\t\treturn this.element;\n\t};\n\n\t//return colunm group element\n\n\tColumn.prototype.getGroupElement = function () {\n\n\t\treturn this.groupElement;\n\t};\n\n\t//return field name\n\n\tColumn.prototype.getField = function () {\n\n\t\treturn this.field;\n\t};\n\n\t//return the first column in a group\n\n\tColumn.prototype.getFirstColumn = function () {\n\n\t\tif (!this.isGroup) {\n\n\t\t\treturn this;\n\t\t} else {\n\n\t\t\tif (this.columns.length) {\n\n\t\t\t\treturn this.columns[0].getFirstColumn();\n\t\t\t} else {\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t};\n\n\t//return the last column in a group\n\n\tColumn.prototype.getLastColumn = function () {\n\n\t\tif (!this.isGroup) {\n\n\t\t\treturn this;\n\t\t} else {\n\n\t\t\tif (this.columns.length) {\n\n\t\t\t\treturn this.columns[this.columns.length - 1].getLastColumn();\n\t\t\t} else {\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t};\n\n\t//return all columns in a group\n\n\tColumn.prototype.getColumns = function () {\n\n\t\treturn this.columns;\n\t};\n\n\t//return all columns in a group\n\n\tColumn.prototype.getCells = function () {\n\n\t\treturn this.cells;\n\t};\n\n\t//retreive the top column in a group of columns\n\n\tColumn.prototype.getTopColumn = function () {\n\n\t\tif (this.parent.isGroup) {\n\n\t\t\treturn this.parent.getTopColumn();\n\t\t} else {\n\n\t\t\treturn this;\n\t\t}\n\t};\n\n\t//return column definition object\n\n\tColumn.prototype.getDefinition = function (updateBranches) {\n\n\t\tvar colDefs = [];\n\n\t\tif (this.isGroup && updateBranches) {\n\n\t\t\tthis.columns.forEach(function (column) {\n\n\t\t\t\tcolDefs.push(column.getDefinition(true));\n\t\t\t});\n\n\t\t\tthis.definition.columns = colDefs;\n\t\t}\n\n\t\treturn this.definition;\n\t};\n\n\t//////////////////// Actions ////////////////////\n\n\n\tColumn.prototype.checkColumnVisibility = function () {\n\n\t\tvar visible = false;\n\n\t\tthis.columns.forEach(function (column) {\n\n\t\t\tif (column.visible) {\n\n\t\t\t\tvisible = true;\n\t\t\t}\n\t\t});\n\n\t\tif (visible) {\n\n\t\t\tthis.show();\n\n\t\t\tthis.parent.table.options.columnVisibilityChanged.call(this.table, this.getComponent(), false);\n\t\t} else {\n\n\t\t\tthis.hide();\n\t\t}\n\t};\n\n\t//show column\n\n\tColumn.prototype.show = function (silent, responsiveToggle) {\n\n\t\tif (!this.visible) {\n\n\t\t\tthis.visible = true;\n\n\t\t\tthis.element.style.display = \"\";\n\n\t\t\tif (this.parent.isGroup) {\n\n\t\t\t\tthis.parent.checkColumnVisibility();\n\t\t\t}\n\n\t\t\tthis.cells.forEach(function (cell) {\n\n\t\t\t\tcell.show();\n\t\t\t});\n\n\t\t\tif (!this.isGroup && this.width === null) {\n\n\t\t\t\tthis.reinitializeWidth();\n\t\t\t}\n\n\t\t\tthis.table.columnManager._verticalAlignHeaders();\n\n\t\t\tif (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns) {\n\n\t\t\t\tthis.table.modules.persistence.save(\"columns\");\n\t\t\t}\n\n\t\t\tif (!responsiveToggle && this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\t\tthis.table.modules.responsiveLayout.updateColumnVisibility(this, this.visible);\n\t\t\t}\n\n\t\t\tif (!silent) {\n\n\t\t\t\tthis.table.options.columnVisibilityChanged.call(this.table, this.getComponent(), true);\n\t\t\t}\n\n\t\t\tif (this.parent.isGroup) {\n\n\t\t\t\tthis.parent.matchChildWidths();\n\t\t\t}\n\t\t}\n\t};\n\n\t//hide column\n\n\tColumn.prototype.hide = function (silent, responsiveToggle) {\n\n\t\tif (this.visible) {\n\n\t\t\tthis.visible = false;\n\n\t\t\tthis.element.style.display = \"none\";\n\n\t\t\tthis.table.columnManager._verticalAlignHeaders();\n\n\t\t\tif (this.parent.isGroup) {\n\n\t\t\t\tthis.parent.checkColumnVisibility();\n\t\t\t}\n\n\t\t\tthis.cells.forEach(function (cell) {\n\n\t\t\t\tcell.hide();\n\t\t\t});\n\n\t\t\tif (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.columns) {\n\n\t\t\t\tthis.table.modules.persistence.save(\"columns\");\n\t\t\t}\n\n\t\t\tif (!responsiveToggle && this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\t\tthis.table.modules.responsiveLayout.updateColumnVisibility(this, this.visible);\n\t\t\t}\n\n\t\t\tif (!silent) {\n\n\t\t\t\tthis.table.options.columnVisibilityChanged.call(this.table, this.getComponent(), false);\n\t\t\t}\n\n\t\t\tif (this.parent.isGroup) {\n\n\t\t\t\tthis.parent.matchChildWidths();\n\t\t\t}\n\t\t}\n\t};\n\n\tColumn.prototype.matchChildWidths = function () {\n\n\t\tvar childWidth = 0;\n\n\t\tif (this.contentElement && this.columns.length) {\n\n\t\t\tthis.columns.forEach(function (column) {\n\n\t\t\t\tif (column.visible) {\n\n\t\t\t\t\tchildWidth += column.getWidth();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.contentElement.style.maxWidth = childWidth - 1 + \"px\";\n\n\t\t\tif (this.parent.isGroup) {\n\n\t\t\t\tthis.parent.matchChildWidths();\n\t\t\t}\n\t\t}\n\t};\n\n\tColumn.prototype.setWidth = function (width) {\n\n\t\tthis.widthFixed = true;\n\n\t\tthis.setWidthActual(width);\n\t};\n\n\tColumn.prototype.setWidthActual = function (width) {\n\n\t\tif (isNaN(width)) {\n\n\t\t\twidth = Math.floor(this.table.element.clientWidth / 100 * parseInt(width));\n\t\t}\n\n\t\twidth = Math.max(this.minWidth, width);\n\n\t\tthis.width = width;\n\n\t\tthis.widthStyled = width ? width + \"px\" : \"\";\n\n\t\tthis.element.style.width = this.widthStyled;\n\n\t\tif (!this.isGroup) {\n\n\t\t\tthis.cells.forEach(function (cell) {\n\n\t\t\t\tcell.setWidth();\n\t\t\t});\n\t\t}\n\n\t\tif (this.parent.isGroup) {\n\n\t\t\tthis.parent.matchChildWidths();\n\t\t}\n\n\t\t//set resizable handles\n\n\t\tif (this.table.modExists(\"frozenColumns\")) {\n\n\t\t\tthis.table.modules.frozenColumns.layout();\n\t\t}\n\t};\n\n\tColumn.prototype.checkCellHeights = function () {\n\n\t\tvar rows = [];\n\n\t\tthis.cells.forEach(function (cell) {\n\n\t\t\tif (cell.row.heightInitialized) {\n\n\t\t\t\tif (cell.row.getElement().offsetParent !== null) {\n\n\t\t\t\t\trows.push(cell.row);\n\n\t\t\t\t\tcell.row.clearCellHeight();\n\t\t\t\t} else {\n\n\t\t\t\t\tcell.row.heightInitialized = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\trows.forEach(function (row) {\n\n\t\t\trow.calcHeight();\n\t\t});\n\n\t\trows.forEach(function (row) {\n\n\t\t\trow.setCellHeight();\n\t\t});\n\t};\n\n\tColumn.prototype.getWidth = function () {\n\n\t\tvar width = 0;\n\n\t\tif (this.isGroup) {\n\n\t\t\tthis.columns.forEach(function (column) {\n\n\t\t\t\tif (column.visible) {\n\n\t\t\t\t\twidth += column.getWidth();\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\n\t\t\twidth = this.width;\n\t\t}\n\n\t\treturn width;\n\t};\n\n\tColumn.prototype.getHeight = function () {\n\n\t\treturn this.element.offsetHeight;\n\t};\n\n\tColumn.prototype.setMinWidth = function (minWidth) {\n\n\t\tthis.minWidth = minWidth;\n\n\t\tthis.minWidthStyled = minWidth ? minWidth + \"px\" : \"\";\n\n\t\tthis.element.style.minWidth = this.minWidthStyled;\n\n\t\tthis.cells.forEach(function (cell) {\n\n\t\t\tcell.setMinWidth();\n\t\t});\n\t};\n\n\tColumn.prototype.delete = function () {\n\t\tvar _this7 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tif (_this7.isGroup) {\n\n\t\t\t\t_this7.columns.forEach(function (column) {\n\n\t\t\t\t\tcolumn.delete();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t//cancel edit if column is currently being edited\n\n\t\t\tif (_this7.table.modExists(\"edit\")) {\n\n\t\t\t\tif (_this7.table.modules.edit.currentCell.column === _this7) {\n\n\t\t\t\t\t_this7.table.modules.edit.cancelEdit();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar cellCount = _this7.cells.length;\n\n\t\t\tfor (var _i3 = 0; _i3 < cellCount; _i3++) {\n\n\t\t\t\t_this7.cells[0].delete();\n\t\t\t}\n\n\t\t\t_this7.element.parentNode.removeChild(_this7.element);\n\n\t\t\t_this7.table.columnManager.deregisterColumn(_this7);\n\n\t\t\tresolve();\n\t\t});\n\t};\n\n\tColumn.prototype.columnRendered = function () {\n\n\t\tif (this.titleFormatterRendered) {\n\n\t\t\tthis.titleFormatterRendered();\n\t\t}\n\t};\n\n\tColumn.prototype.validate = function () {\n\n\t\tvar invalid = [];\n\n\t\tthis.cells.forEach(function (cell) {\n\n\t\t\tif (!cell.validate()) {\n\n\t\t\t\tinvalid.push(cell.getComponent());\n\t\t\t}\n\t\t});\n\n\t\treturn invalid.length ? invalid : true;\n\t};\n\n\t//////////////// Cell Management /////////////////\n\n\n\t//generate cell for this column\n\n\tColumn.prototype.generateCell = function (row) {\n\n\t\tvar self = this;\n\n\t\tvar cell = new Cell(self, row);\n\n\t\tthis.cells.push(cell);\n\n\t\treturn cell;\n\t};\n\n\tColumn.prototype.nextColumn = function () {\n\n\t\tvar index = this.table.columnManager.findColumnIndex(this);\n\n\t\treturn index > -1 ? this._nextVisibleColumn(index + 1) : false;\n\t};\n\n\tColumn.prototype._nextVisibleColumn = function (index) {\n\n\t\tvar column = this.table.columnManager.getColumnByIndex(index);\n\n\t\treturn !column || column.visible ? column : this._nextVisibleColumn(index + 1);\n\t};\n\n\tColumn.prototype.prevColumn = function () {\n\n\t\tvar index = this.table.columnManager.findColumnIndex(this);\n\n\t\treturn index > -1 ? this._prevVisibleColumn(index - 1) : false;\n\t};\n\n\tColumn.prototype._prevVisibleColumn = function (index) {\n\n\t\tvar column = this.table.columnManager.getColumnByIndex(index);\n\n\t\treturn !column || column.visible ? column : this._prevVisibleColumn(index - 1);\n\t};\n\n\tColumn.prototype.reinitializeWidth = function (force) {\n\n\t\tthis.widthFixed = false;\n\n\t\t//set width if present\n\n\t\tif (typeof this.definition.width !== \"undefined\" && !force) {\n\n\t\t\tthis.setWidth(this.definition.width);\n\t\t}\n\n\t\t//hide header filters to prevent them altering column width\n\n\t\tif (this.table.modExists(\"filter\")) {\n\n\t\t\tthis.table.modules.filter.hideHeaderFilterElements();\n\t\t}\n\n\t\tthis.fitToData();\n\n\t\t//show header filters again after layout is complete\n\n\t\tif (this.table.modExists(\"filter\")) {\n\n\t\t\tthis.table.modules.filter.showHeaderFilterElements();\n\t\t}\n\t};\n\n\t//set column width to maximum cell width\n\n\tColumn.prototype.fitToData = function () {\n\n\t\tvar self = this;\n\n\t\tif (!this.widthFixed) {\n\n\t\t\tthis.element.style.width = \"\";\n\n\t\t\tself.cells.forEach(function (cell) {\n\n\t\t\t\tcell.clearWidth();\n\t\t\t});\n\t\t}\n\n\t\tvar maxWidth = this.element.offsetWidth;\n\n\t\tif (!self.width || !this.widthFixed) {\n\n\t\t\tself.cells.forEach(function (cell) {\n\n\t\t\t\tvar width = cell.getWidth();\n\n\t\t\t\tif (width > maxWidth) {\n\n\t\t\t\t\tmaxWidth = width;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (maxWidth) {\n\n\t\t\t\tself.setWidthActual(maxWidth + 1);\n\t\t\t}\n\t\t}\n\t};\n\n\tColumn.prototype.updateDefinition = function (updates) {\n\t\tvar _this8 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tvar definition;\n\n\t\t\tif (!_this8.isGroup) {\n\n\t\t\t\tdefinition = Object.assign({}, _this8.getDefinition());\n\n\t\t\t\tdefinition = Object.assign(definition, updates);\n\n\t\t\t\t_this8.table.columnManager.addColumn(definition, false, _this8).then(function (column) {\n\n\t\t\t\t\tif (definition.field == _this8.field) {\n\n\t\t\t\t\t\t_this8.field = false; //cleair field name to prevent deletion of duplicate column from arrays\n\t\t\t\t\t}\n\n\t\t\t\t\t_this8.delete().then(function () {\n\n\t\t\t\t\t\tresolve(column.getComponent());\n\t\t\t\t\t}).catch(function (err) {\n\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t});\n\t\t\t\t}).catch(function (err) {\n\n\t\t\t\t\treject(err);\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Column Update Error - The updateDefintion function is only available on columns, not column groups\");\n\n\t\t\t\treject(\"Column Update Error - The updateDefintion function is only available on columns, not column groups\");\n\t\t\t}\n\t\t});\n\t};\n\n\tColumn.prototype.deleteCell = function (cell) {\n\n\t\tvar index = this.cells.indexOf(cell);\n\n\t\tif (index > -1) {\n\n\t\t\tthis.cells.splice(index, 1);\n\t\t}\n\t};\n\n\tColumn.prototype.defaultOptionList = [\"title\", \"field\", \"columns\", \"visible\", \"align\", \"hozAlign\", \"vertAlign\", \"width\", \"minWidth\", \"widthGrow\", \"widthShrink\", \"resizable\", \"frozen\", \"responsive\", \"tooltip\", \"cssClass\", \"rowHandle\", \"hideInHtml\", \"print\", \"htmlOutput\", \"sorter\", \"sorterParams\", \"formatter\", \"formatterParams\", \"variableHeight\", \"editable\", \"editor\", \"editorParams\", \"validator\", \"mutator\", \"mutatorParams\", \"mutatorData\", \"mutatorDataParams\", \"mutatorEdit\", \"mutatorEditParams\", \"mutatorClipboard\", \"mutatorClipboardParams\", \"accessor\", \"accessorParams\", \"accessorData\", \"accessorDataParams\", \"accessorDownload\", \"accessorDownloadParams\", \"accessorClipboard\", \"accessorClipboardParams\", \"accessorPrint\", \"accessorPrintParams\", \"accessorHtmlOutput\", \"accessorHtmlOutputParams\", \"clipboard\", \"download\", \"downloadTitle\", \"topCalc\", \"topCalcParams\", \"topCalcFormatter\", \"topCalcFormatterParams\", \"bottomCalc\", \"bottomCalcParams\", \"bottomCalcFormatter\", \"bottomCalcFormatterParams\", \"cellClick\", \"cellDblClick\", \"cellContext\", \"cellTap\", \"cellDblTap\", \"cellTapHold\", \"cellMouseEnter\", \"cellMouseLeave\", \"cellMouseOver\", \"cellMouseOut\", \"cellMouseMove\", \"cellEditing\", \"cellEdited\", \"cellEditCancelled\", \"headerSort\", \"headerSortStartingDir\", \"headerSortTristate\", \"headerClick\", \"headerDblClick\", \"headerContext\", \"headerTap\", \"headerDblTap\", \"headerTapHold\", \"headerTooltip\", \"headerVertical\", \"editableTitle\", \"titleFormatter\", \"titleFormatterParams\", \"headerFilter\", \"headerFilterPlaceholder\", \"headerFilterParams\", \"headerFilterEmptyCheck\", \"headerFilterFunc\", \"headerFilterFuncParams\", \"headerFilterLiveFilter\", \"print\", \"headerContextMenu\", \"headerMenu\", \"contextMenu\", \"formatterPrint\", \"formatterPrintParams\", \"formatterClipboard\", \"formatterClipboardParams\", \"formatterHtmlOutput\", \"formatterHtmlOutputParams\", \"titlePrint\", \"titleClipboard\", \"titleHtmlOutput\", \"titleDownload\"];\n\n\t//////////////// Event Bindings /////////////////\n\n\n\t//////////////// Object Generation /////////////////\n\n\tColumn.prototype.getComponent = function () {\n\n\t\tif (!this.component) {\n\n\t\t\tthis.component = new ColumnComponent(this);\n\t\t}\n\n\t\treturn this.component;\n\t};\n\n\tvar RowManager = function RowManager(table) {\n\n\t\tthis.table = table;\n\n\t\tthis.element = this.createHolderElement(); //containing element\n\n\t\tthis.tableElement = this.createTableElement(); //table element\n\n\t\tthis.heightFixer = this.createTableElement(); //table element\n\n\t\tthis.columnManager = null; //hold column manager object\n\n\t\tthis.height = 0; //hold height of table element\n\n\n\t\tthis.firstRender = false; //handle first render\n\n\t\tthis.renderMode = \"virtual\"; //current rendering mode\n\n\t\tthis.fixedHeight = false; //current rendering mode\n\n\n\t\tthis.rows = []; //hold row data objects\n\n\t\tthis.activeRows = []; //rows currently available to on display in the table\n\n\t\tthis.activeRowsCount = 0; //count of active rows\n\n\n\t\tthis.displayRows = []; //rows currently on display in the table\n\n\t\tthis.displayRowsCount = 0; //count of display rows\n\n\n\t\tthis.scrollTop = 0;\n\n\t\tthis.scrollLeft = 0;\n\n\t\tthis.vDomRowHeight = 20; //approximation of row heights for padding\n\n\n\t\tthis.vDomTop = 0; //hold position for first rendered row in the virtual DOM\n\n\t\tthis.vDomBottom = 0; //hold possition for last rendered row in the virtual DOM\n\n\n\t\tthis.vDomScrollPosTop = 0; //last scroll position of the vDom top;\n\n\t\tthis.vDomScrollPosBottom = 0; //last scroll position of the vDom bottom;\n\n\n\t\tthis.vDomTopPad = 0; //hold value of padding for top of virtual DOM\n\n\t\tthis.vDomBottomPad = 0; //hold value of padding for bottom of virtual DOM\n\n\n\t\tthis.vDomMaxRenderChain = 90; //the maximum number of dom elements that can be rendered in 1 go\n\n\n\t\tthis.vDomWindowBuffer = 0; //window row buffer before removing elements, to smooth scrolling\n\n\n\t\tthis.vDomWindowMinTotalRows = 20; //minimum number of rows to be generated in virtual dom (prevent buffering issues on tables with tall rows)\n\n\t\tthis.vDomWindowMinMarginRows = 5; //minimum number of rows to be generated in virtual dom margin\n\n\n\t\tthis.vDomTopNewRows = []; //rows to normalize after appending to optimize render speed\n\n\t\tthis.vDomBottomNewRows = []; //rows to normalize after appending to optimize render speed\n\n\n\t\tthis.rowNumColumn = false; //hold column component for row number column\n\n\n\t\tthis.redrawBlock = false; //prevent redraws to allow multiple data manipulations becore continuing\n\n\t\tthis.redrawBlockRestoreConfig = false; //store latest redraw function calls for when redraw is needed\n\n\t\tthis.redrawBlockRederInPosition = false; //store latest redraw function calls for when redraw is needed\n\t};\n\n\t//////////////// Setup Functions /////////////////\n\n\n\tRowManager.prototype.createHolderElement = function () {\n\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-tableHolder\");\n\n\t\tel.setAttribute(\"tabindex\", 0);\n\n\t\treturn el;\n\t};\n\n\tRowManager.prototype.createTableElement = function () {\n\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-table\");\n\n\t\treturn el;\n\t};\n\n\t//return containing element\n\n\tRowManager.prototype.getElement = function () {\n\n\t\treturn this.element;\n\t};\n\n\t//return table element\n\n\tRowManager.prototype.getTableElement = function () {\n\n\t\treturn this.tableElement;\n\t};\n\n\t//return position of row in table\n\n\tRowManager.prototype.getRowPosition = function (row, active) {\n\n\t\tif (active) {\n\n\t\t\treturn this.activeRows.indexOf(row);\n\t\t} else {\n\n\t\t\treturn this.rows.indexOf(row);\n\t\t}\n\t};\n\n\t//link to column manager\n\n\tRowManager.prototype.setColumnManager = function (manager) {\n\n\t\tthis.columnManager = manager;\n\t};\n\n\tRowManager.prototype.initialize = function () {\n\n\t\tvar self = this;\n\n\t\tself.setRenderMode();\n\n\t\t//initialize manager\n\n\t\tself.element.appendChild(self.tableElement);\n\n\t\tself.firstRender = true;\n\n\t\t//scroll header along with table body\n\n\t\tself.element.addEventListener(\"scroll\", function () {\n\n\t\t\tvar left = self.element.scrollLeft;\n\n\t\t\t//handle horizontal scrolling\n\n\t\t\tif (self.scrollLeft != left) {\n\n\t\t\t\tself.columnManager.scrollHorizontal(left);\n\n\t\t\t\tif (self.table.options.groupBy) {\n\n\t\t\t\t\tself.table.modules.groupRows.scrollHeaders(left);\n\t\t\t\t}\n\n\t\t\t\tif (self.table.modExists(\"columnCalcs\")) {\n\n\t\t\t\t\tself.table.modules.columnCalcs.scrollHorizontal(left);\n\t\t\t\t}\n\n\t\t\t\tself.table.options.scrollHorizontal(left);\n\t\t\t}\n\n\t\t\tself.scrollLeft = left;\n\t\t});\n\n\t\t//handle virtual dom scrolling\n\n\t\tif (this.renderMode === \"virtual\") {\n\n\t\t\tself.element.addEventListener(\"scroll\", function () {\n\n\t\t\t\tvar top = self.element.scrollTop;\n\n\t\t\t\tvar dir = self.scrollTop > top;\n\n\t\t\t\t//handle verical scrolling\n\n\t\t\t\tif (self.scrollTop != top) {\n\n\t\t\t\t\tself.scrollTop = top;\n\n\t\t\t\t\tself.scrollVertical(dir);\n\n\t\t\t\t\tif (self.table.options.ajaxProgressiveLoad == \"scroll\") {\n\n\t\t\t\t\t\tself.table.modules.ajax.nextPage(self.element.scrollHeight - self.element.clientHeight - top);\n\t\t\t\t\t}\n\n\t\t\t\t\tself.table.options.scrollVertical(top);\n\t\t\t\t} else {\n\n\t\t\t\t\tself.scrollTop = top;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\t////////////////// Row Manipulation //////////////////\n\n\n\tRowManager.prototype.findRow = function (subject) {\n\n\t\tvar self = this;\n\n\t\tif ((typeof subject === 'undefined' ? 'undefined' : _typeof(subject)) == \"object\") {\n\n\t\t\tif (subject instanceof Row) {\n\n\t\t\t\t//subject is row element\n\n\t\t\t\treturn subject;\n\t\t\t} else if (subject instanceof RowComponent) {\n\n\t\t\t\t//subject is public row component\n\n\t\t\t\treturn subject._getSelf() || false;\n\t\t\t} else if (typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement) {\n\n\t\t\t\t//subject is a HTML element of the row\n\n\t\t\t\tvar match = self.rows.find(function (row) {\n\n\t\t\t\t\treturn row.element === subject;\n\t\t\t\t});\n\n\t\t\t\treturn match || false;\n\t\t\t}\n\t\t} else if (typeof subject == \"undefined\" || subject === null) {\n\n\t\t\treturn false;\n\t\t} else {\n\n\t\t\t//subject should be treated as the index of the row\n\n\t\t\tvar _match = self.rows.find(function (row) {\n\n\t\t\t\treturn row.data[self.table.options.index] == subject;\n\t\t\t});\n\n\t\t\treturn _match || false;\n\t\t}\n\n\t\t//catch all for any other type of input\n\n\n\t\treturn false;\n\t};\n\n\tRowManager.prototype.getRowFromDataObject = function (data) {\n\n\t\tvar match = this.rows.find(function (row) {\n\n\t\t\treturn row.data === data;\n\t\t});\n\n\t\treturn match || false;\n\t};\n\n\tRowManager.prototype.getRowFromPosition = function (position, active) {\n\n\t\tif (active) {\n\n\t\t\treturn this.activeRows[position];\n\t\t} else {\n\n\t\t\treturn this.rows[position];\n\t\t}\n\t};\n\n\tRowManager.prototype.scrollToRow = function (row, position, ifVisible) {\n\t\tvar _this9 = this;\n\n\t\tvar rowIndex = this.getDisplayRows().indexOf(row),\n\t\t    rowEl = row.getElement(),\n\t\t    rowTop,\n\t\t    offset = 0;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tif (rowIndex > -1) {\n\n\t\t\t\tif (typeof position === \"undefined\") {\n\n\t\t\t\t\tposition = _this9.table.options.scrollToRowPosition;\n\t\t\t\t}\n\n\t\t\t\tif (typeof ifVisible === \"undefined\") {\n\n\t\t\t\t\tifVisible = _this9.table.options.scrollToRowIfVisible;\n\t\t\t\t}\n\n\t\t\t\tif (position === \"nearest\") {\n\n\t\t\t\t\tswitch (_this9.renderMode) {\n\n\t\t\t\t\t\tcase \"classic\":\n\n\t\t\t\t\t\t\trowTop = Tabulator.prototype.helpers.elOffset(rowEl).top;\n\n\t\t\t\t\t\t\tposition = Math.abs(_this9.element.scrollTop - rowTop) > Math.abs(_this9.element.scrollTop + _this9.element.clientHeight - rowTop) ? \"bottom\" : \"top\";\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"virtual\":\n\n\t\t\t\t\t\t\tposition = Math.abs(_this9.vDomTop - rowIndex) > Math.abs(_this9.vDomBottom - rowIndex) ? \"bottom\" : \"top\";\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//check row visibility\n\n\t\t\t\tif (!ifVisible) {\n\n\t\t\t\t\tif (Tabulator.prototype.helpers.elVisible(rowEl)) {\n\n\t\t\t\t\t\toffset = Tabulator.prototype.helpers.elOffset(rowEl).top - Tabulator.prototype.helpers.elOffset(_this9.element).top;\n\n\t\t\t\t\t\tif (offset > 0 && offset < _this9.element.clientHeight - rowEl.offsetHeight) {\n\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//scroll to row\n\n\t\t\t\tswitch (_this9.renderMode) {\n\n\t\t\t\t\tcase \"classic\":\n\n\t\t\t\t\t\t_this9.element.scrollTop = Tabulator.prototype.helpers.elOffset(rowEl).top - Tabulator.prototype.helpers.elOffset(_this9.element).top + _this9.element.scrollTop;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"virtual\":\n\n\t\t\t\t\t\t_this9._virtualRenderFill(rowIndex, true);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\t//align to correct position\n\n\t\t\t\tswitch (position) {\n\n\t\t\t\t\tcase \"middle\":\n\n\t\t\t\t\tcase \"center\":\n\n\t\t\t\t\t\tif (_this9.element.scrollHeight - _this9.element.scrollTop == _this9.element.clientHeight) {\n\n\t\t\t\t\t\t\t_this9.element.scrollTop = _this9.element.scrollTop + (rowEl.offsetTop - _this9.element.scrollTop) - (_this9.element.scrollHeight - rowEl.offsetTop) / 2;\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t_this9.element.scrollTop = _this9.element.scrollTop - _this9.element.clientHeight / 2;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"bottom\":\n\n\t\t\t\t\t\tif (_this9.element.scrollHeight - _this9.element.scrollTop == _this9.element.clientHeight) {\n\n\t\t\t\t\t\t\t_this9.element.scrollTop = _this9.element.scrollTop - (_this9.element.scrollHeight - rowEl.offsetTop) + rowEl.offsetHeight;\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t_this9.element.scrollTop = _this9.element.scrollTop - _this9.element.clientHeight + rowEl.offsetHeight;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tresolve();\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Scroll Error - Row not visible\");\n\n\t\t\t\treject(\"Scroll Error - Row not visible\");\n\t\t\t}\n\t\t});\n\t};\n\n\t////////////////// Data Handling //////////////////\n\n\n\tRowManager.prototype.setData = function (data, renderInPosition, columnsChanged) {\n\t\tvar _this10 = this;\n\n\t\tvar self = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tif (renderInPosition && _this10.getDisplayRows().length) {\n\n\t\t\t\tif (self.table.options.pagination) {\n\n\t\t\t\t\tself._setDataActual(data, true);\n\t\t\t\t} else {\n\n\t\t\t\t\t_this10.reRenderInPosition(function () {\n\n\t\t\t\t\t\tself._setDataActual(data);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tif (_this10.table.options.autoColumns && columnsChanged) {\n\n\t\t\t\t\t_this10.table.columnManager.generateColumnsFromRowData(data);\n\t\t\t\t}\n\n\t\t\t\t_this10.resetScroll();\n\n\t\t\t\t_this10._setDataActual(data);\n\t\t\t}\n\n\t\t\tresolve();\n\t\t});\n\t};\n\n\tRowManager.prototype._setDataActual = function (data, renderInPosition) {\n\n\t\tvar self = this;\n\n\t\tself.table.options.dataLoading.call(this.table, data);\n\n\t\tthis._wipeElements();\n\n\t\tif (this.table.options.history && this.table.modExists(\"history\")) {\n\n\t\t\tthis.table.modules.history.clear();\n\t\t}\n\n\t\tif (Array.isArray(data)) {\n\n\t\t\tif (this.table.modExists(\"selectRow\")) {\n\n\t\t\t\tthis.table.modules.selectRow.clearSelectionData();\n\t\t\t}\n\n\t\t\tif (this.table.options.reactiveData && this.table.modExists(\"reactiveData\", true)) {\n\n\t\t\t\tthis.table.modules.reactiveData.watchData(data);\n\t\t\t}\n\n\t\t\tdata.forEach(function (def, i) {\n\n\t\t\t\tif (def && (typeof def === 'undefined' ? 'undefined' : _typeof(def)) === \"object\") {\n\n\t\t\t\t\tvar row = new Row(def, self);\n\n\t\t\t\t\tself.rows.push(row);\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn(\"Data Loading Warning - Invalid row data detected and ignored, expecting object but received:\", def);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tself.refreshActiveData(false, false, renderInPosition);\n\n\t\t\tself.table.options.dataLoaded.call(this.table, data);\n\t\t} else {\n\n\t\t\tconsole.error(\"Data Loading Error - Unable to process data due to invalid data type \\nExpecting: array \\nReceived: \", typeof data === 'undefined' ? 'undefined' : _typeof(data), \"\\nData:     \", data);\n\t\t}\n\t};\n\n\tRowManager.prototype._wipeElements = function () {\n\n\t\tthis.rows.forEach(function (row) {\n\n\t\t\trow.wipe();\n\t\t});\n\n\t\tif (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n\n\t\t\tthis.table.modules.groupRows.wipe();\n\t\t}\n\n\t\tthis.rows = [];\n\n\t\tthis.adjustTableSize();\n\t};\n\n\tRowManager.prototype.deleteRow = function (row, blockRedraw) {\n\n\t\tvar allIndex = this.rows.indexOf(row),\n\t\t    activeIndex = this.activeRows.indexOf(row);\n\n\t\tif (activeIndex > -1) {\n\n\t\t\tthis.activeRows.splice(activeIndex, 1);\n\t\t}\n\n\t\tif (allIndex > -1) {\n\n\t\t\tthis.rows.splice(allIndex, 1);\n\t\t}\n\n\t\tthis.setActiveRows(this.activeRows);\n\n\t\tthis.displayRowIterator(function (rows) {\n\n\t\t\tvar displayIndex = rows.indexOf(row);\n\n\t\t\tif (displayIndex > -1) {\n\n\t\t\t\trows.splice(displayIndex, 1);\n\t\t\t}\n\t\t});\n\n\t\tif (!blockRedraw) {\n\n\t\t\tthis.reRenderInPosition();\n\t\t}\n\n\t\tthis.regenerateRowNumbers();\n\n\t\tthis.table.options.rowDeleted.call(this.table, row.getComponent());\n\n\t\tthis.table.options.dataEdited.call(this.table, this.getData());\n\n\t\tif (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n\n\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\n\t\t} else if (this.table.options.pagination && this.table.modExists(\"page\")) {\n\n\t\t\tthis.refreshActiveData(false, false, true);\n\t\t} else {\n\n\t\t\tif (this.table.options.pagination && this.table.modExists(\"page\")) {\n\n\t\t\t\tthis.refreshActiveData(\"page\");\n\t\t\t}\n\t\t}\n\t};\n\n\tRowManager.prototype.addRow = function (data, pos, index, blockRedraw) {\n\n\t\tvar row = this.addRowActual(data, pos, index, blockRedraw);\n\n\t\tif (this.table.options.history && this.table.modExists(\"history\")) {\n\n\t\t\tthis.table.modules.history.action(\"rowAdd\", row, { data: data, pos: pos, index: index });\n\t\t}\n\n\t\treturn row;\n\t};\n\n\t//add multiple rows\n\n\tRowManager.prototype.addRows = function (data, pos, index) {\n\t\tvar _this11 = this;\n\n\t\tvar self = this,\n\t\t    length = 0,\n\t\t    rows = [];\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tpos = _this11.findAddRowPos(pos);\n\n\t\t\tif (!Array.isArray(data)) {\n\n\t\t\t\tdata = [data];\n\t\t\t}\n\n\t\t\tlength = data.length - 1;\n\n\t\t\tif (typeof index == \"undefined\" && pos || typeof index !== \"undefined\" && !pos) {\n\n\t\t\t\tdata.reverse();\n\t\t\t}\n\n\t\t\tdata.forEach(function (item, i) {\n\n\t\t\t\tvar row = self.addRow(item, pos, index, true);\n\n\t\t\t\trows.push(row);\n\t\t\t});\n\n\t\t\tif (_this11.table.options.groupBy && _this11.table.modExists(\"groupRows\")) {\n\n\t\t\t\t_this11.table.modules.groupRows.updateGroupRows(true);\n\t\t\t} else if (_this11.table.options.pagination && _this11.table.modExists(\"page\")) {\n\n\t\t\t\t_this11.refreshActiveData(false, false, true);\n\t\t\t} else {\n\n\t\t\t\t_this11.reRenderInPosition();\n\t\t\t}\n\n\t\t\t//recalc column calculations if present\n\n\t\t\tif (_this11.table.modExists(\"columnCalcs\")) {\n\n\t\t\t\t_this11.table.modules.columnCalcs.recalc(_this11.table.rowManager.activeRows);\n\t\t\t}\n\n\t\t\t_this11.regenerateRowNumbers();\n\n\t\t\tresolve(rows);\n\t\t});\n\t};\n\n\tRowManager.prototype.findAddRowPos = function (pos) {\n\n\t\tif (typeof pos === \"undefined\") {\n\n\t\t\tpos = this.table.options.addRowPos;\n\t\t}\n\n\t\tif (pos === \"pos\") {\n\n\t\t\tpos = true;\n\t\t}\n\n\t\tif (pos === \"bottom\") {\n\n\t\t\tpos = false;\n\t\t}\n\n\t\treturn pos;\n\t};\n\n\tRowManager.prototype.addRowActual = function (data, pos, index, blockRedraw) {\n\n\t\tvar row = data instanceof Row ? data : new Row(data || {}, this),\n\t\t    top = this.findAddRowPos(pos),\n\t\t    allIndex = -1,\n\t\t    activeIndex,\n\t\t    dispRows;\n\n\t\tif (!index && this.table.options.pagination && this.table.options.paginationAddRow == \"page\") {\n\n\t\t\tdispRows = this.getDisplayRows();\n\n\t\t\tif (top) {\n\n\t\t\t\tif (dispRows.length) {\n\n\t\t\t\t\tindex = dispRows[0];\n\t\t\t\t} else {\n\n\t\t\t\t\tif (this.activeRows.length) {\n\n\t\t\t\t\t\tindex = this.activeRows[this.activeRows.length - 1];\n\n\t\t\t\t\t\ttop = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tif (dispRows.length) {\n\n\t\t\t\t\tindex = dispRows[dispRows.length - 1];\n\n\t\t\t\t\ttop = dispRows.length < this.table.modules.page.getPageSize() ? false : true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (typeof index !== \"undefined\") {\n\n\t\t\tindex = this.findRow(index);\n\t\t}\n\n\t\tif (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n\n\t\t\tthis.table.modules.groupRows.assignRowToGroup(row);\n\n\t\t\tvar groupRows = row.getGroup().rows;\n\n\t\t\tif (groupRows.length > 1) {\n\n\t\t\t\tif (!index || index && groupRows.indexOf(index) == -1) {\n\n\t\t\t\t\tif (top) {\n\n\t\t\t\t\t\tif (groupRows[0] !== row) {\n\n\t\t\t\t\t\t\tindex = groupRows[0];\n\n\t\t\t\t\t\t\tthis._moveRowInArray(row.getGroup().rows, row, index, !top);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif (groupRows[groupRows.length - 1] !== row) {\n\n\t\t\t\t\t\t\tindex = groupRows[groupRows.length - 1];\n\n\t\t\t\t\t\t\tthis._moveRowInArray(row.getGroup().rows, row, index, !top);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._moveRowInArray(row.getGroup().rows, row, index, !top);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (index) {\n\n\t\t\tallIndex = this.rows.indexOf(index);\n\t\t}\n\n\t\tif (index && allIndex > -1) {\n\n\t\t\tactiveIndex = this.activeRows.indexOf(index);\n\n\t\t\tthis.displayRowIterator(function (rows) {\n\n\t\t\t\tvar displayIndex = rows.indexOf(index);\n\n\t\t\t\tif (displayIndex > -1) {\n\n\t\t\t\t\trows.splice(top ? displayIndex : displayIndex + 1, 0, row);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (activeIndex > -1) {\n\n\t\t\t\tthis.activeRows.splice(top ? activeIndex : activeIndex + 1, 0, row);\n\t\t\t}\n\n\t\t\tthis.rows.splice(top ? allIndex : allIndex + 1, 0, row);\n\t\t} else {\n\n\t\t\tif (top) {\n\n\t\t\t\tthis.displayRowIterator(function (rows) {\n\n\t\t\t\t\trows.unshift(row);\n\t\t\t\t});\n\n\t\t\t\tthis.activeRows.unshift(row);\n\n\t\t\t\tthis.rows.unshift(row);\n\t\t\t} else {\n\n\t\t\t\tthis.displayRowIterator(function (rows) {\n\n\t\t\t\t\trows.push(row);\n\t\t\t\t});\n\n\t\t\t\tthis.activeRows.push(row);\n\n\t\t\t\tthis.rows.push(row);\n\t\t\t}\n\t\t}\n\n\t\tthis.setActiveRows(this.activeRows);\n\n\t\tthis.table.options.rowAdded.call(this.table, row.getComponent());\n\n\t\tthis.table.options.dataEdited.call(this.table, this.getData());\n\n\t\tif (!blockRedraw) {\n\n\t\t\tthis.reRenderInPosition();\n\t\t}\n\n\t\treturn row;\n\t};\n\n\tRowManager.prototype.moveRow = function (from, to, after) {\n\n\t\tif (this.table.options.history && this.table.modExists(\"history\")) {\n\n\t\t\tthis.table.modules.history.action(\"rowMove\", from, { posFrom: this.getRowPosition(from), posTo: this.getRowPosition(to), to: to, after: after });\n\t\t}\n\n\t\tthis.moveRowActual(from, to, after);\n\n\t\tthis.regenerateRowNumbers();\n\n\t\tthis.table.options.rowMoved.call(this.table, from.getComponent());\n\t};\n\n\tRowManager.prototype.moveRowActual = function (from, to, after) {\n\t\tvar _this12 = this;\n\n\t\tthis._moveRowInArray(this.rows, from, to, after);\n\n\t\tthis._moveRowInArray(this.activeRows, from, to, after);\n\n\t\tthis.displayRowIterator(function (rows) {\n\n\t\t\t_this12._moveRowInArray(rows, from, to, after);\n\t\t});\n\n\t\tif (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n\n\t\t\tif (!after && to instanceof Group) {\n\n\t\t\t\tto = this.table.rowManager.prevDisplayRow(from) || to;\n\t\t\t}\n\n\t\t\tvar toGroup = to.getGroup();\n\n\t\t\tvar fromGroup = from.getGroup();\n\n\t\t\tif (toGroup === fromGroup) {\n\n\t\t\t\tthis._moveRowInArray(toGroup.rows, from, to, after);\n\t\t\t} else {\n\n\t\t\t\tif (fromGroup) {\n\n\t\t\t\t\tfromGroup.removeRow(from);\n\t\t\t\t}\n\n\t\t\t\ttoGroup.insertRow(from, to, after);\n\t\t\t}\n\t\t}\n\t};\n\n\tRowManager.prototype._moveRowInArray = function (rows, from, to, after) {\n\n\t\tvar fromIndex, toIndex, start, end;\n\n\t\tif (from !== to) {\n\n\t\t\tfromIndex = rows.indexOf(from);\n\n\t\t\tif (fromIndex > -1) {\n\n\t\t\t\trows.splice(fromIndex, 1);\n\n\t\t\t\ttoIndex = rows.indexOf(to);\n\n\t\t\t\tif (toIndex > -1) {\n\n\t\t\t\t\tif (after) {\n\n\t\t\t\t\t\trows.splice(toIndex + 1, 0, from);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\trows.splice(toIndex, 0, from);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\trows.splice(fromIndex, 0, from);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//restyle rows\n\n\t\t\tif (rows === this.getDisplayRows()) {\n\n\t\t\t\tstart = fromIndex < toIndex ? fromIndex : toIndex;\n\n\t\t\t\tend = toIndex > fromIndex ? toIndex : fromIndex + 1;\n\n\t\t\t\tfor (var _i4 = start; _i4 <= end; _i4++) {\n\n\t\t\t\t\tif (rows[_i4]) {\n\n\t\t\t\t\t\tthis.styleRow(rows[_i4], _i4);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tRowManager.prototype.clearData = function () {\n\n\t\tthis.setData([]);\n\t};\n\n\tRowManager.prototype.getRowIndex = function (row) {\n\n\t\treturn this.findRowIndex(row, this.rows);\n\t};\n\n\tRowManager.prototype.getDisplayRowIndex = function (row) {\n\n\t\tvar index = this.getDisplayRows().indexOf(row);\n\n\t\treturn index > -1 ? index : false;\n\t};\n\n\tRowManager.prototype.nextDisplayRow = function (row, rowOnly) {\n\n\t\tvar index = this.getDisplayRowIndex(row),\n\t\t    nextRow = false;\n\n\t\tif (index !== false && index < this.displayRowsCount - 1) {\n\n\t\t\tnextRow = this.getDisplayRows()[index + 1];\n\t\t}\n\n\t\tif (nextRow && (!(nextRow instanceof Row) || nextRow.type != \"row\")) {\n\n\t\t\treturn this.nextDisplayRow(nextRow, rowOnly);\n\t\t}\n\n\t\treturn nextRow;\n\t};\n\n\tRowManager.prototype.prevDisplayRow = function (row, rowOnly) {\n\n\t\tvar index = this.getDisplayRowIndex(row),\n\t\t    prevRow = false;\n\n\t\tif (index) {\n\n\t\t\tprevRow = this.getDisplayRows()[index - 1];\n\t\t}\n\n\t\tif (rowOnly && prevRow && (!(prevRow instanceof Row) || prevRow.type != \"row\")) {\n\n\t\t\treturn this.prevDisplayRow(prevRow, rowOnly);\n\t\t}\n\n\t\treturn prevRow;\n\t};\n\n\tRowManager.prototype.findRowIndex = function (row, list) {\n\n\t\tvar rowIndex;\n\n\t\trow = this.findRow(row);\n\n\t\tif (row) {\n\n\t\t\trowIndex = list.indexOf(row);\n\n\t\t\tif (rowIndex > -1) {\n\n\t\t\t\treturn rowIndex;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tRowManager.prototype.getData = function (active, transform) {\n\n\t\tvar output = [],\n\t\t    rows = this.getRows(active);\n\n\t\trows.forEach(function (row) {\n\n\t\t\tif (row.type == \"row\") {\n\n\t\t\t\toutput.push(row.getData(transform || \"data\"));\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t};\n\n\tRowManager.prototype.getComponents = function (active) {\n\n\t\tvar output = [],\n\t\t    rows = this.getRows(active);\n\n\t\trows.forEach(function (row) {\n\n\t\t\toutput.push(row.getComponent());\n\t\t});\n\n\t\treturn output;\n\t};\n\n\tRowManager.prototype.getDataCount = function (active) {\n\n\t\tvar rows = this.getRows(active);\n\n\t\treturn rows.length;\n\t};\n\n\tRowManager.prototype._genRemoteRequest = function () {\n\t\tvar _this13 = this;\n\n\t\tvar table = this.table,\n\t\t    options = table.options,\n\t\t    params = {};\n\n\t\tif (table.modExists(\"page\")) {\n\n\t\t\t//set sort data if defined\n\n\t\t\tif (options.ajaxSorting) {\n\n\t\t\t\tvar sorters = this.table.modules.sort.getSort();\n\n\t\t\t\tsorters.forEach(function (item) {\n\n\t\t\t\t\tdelete item.column;\n\t\t\t\t});\n\n\t\t\t\tparams[this.table.modules.page.paginationDataSentNames.sorters] = sorters;\n\t\t\t}\n\n\t\t\t//set filter data if defined\n\n\t\t\tif (options.ajaxFiltering) {\n\n\t\t\t\tvar filters = this.table.modules.filter.getFilters(true, true);\n\n\t\t\t\tparams[this.table.modules.page.paginationDataSentNames.filters] = filters;\n\t\t\t}\n\n\t\t\tthis.table.modules.ajax.setParams(params, true);\n\t\t}\n\n\t\ttable.modules.ajax.sendRequest().then(function (data) {\n\n\t\t\t_this13._setDataActual(data, true);\n\t\t}).catch(function (e) {});\n\t};\n\n\t//choose the path to refresh data after a filter update\n\n\tRowManager.prototype.filterRefresh = function () {\n\n\t\tvar table = this.table,\n\t\t    options = table.options,\n\t\t    left = this.scrollLeft;\n\n\t\tif (options.ajaxFiltering) {\n\n\t\t\tif (options.pagination == \"remote\" && table.modExists(\"page\")) {\n\n\t\t\t\ttable.modules.page.reset(true);\n\n\t\t\t\ttable.modules.page.setPage(1).then(function () {}).catch(function () {});\n\t\t\t} else if (options.ajaxProgressiveLoad) {\n\n\t\t\t\ttable.modules.ajax.loadData().then(function () {}).catch(function () {});\n\t\t\t} else {\n\n\t\t\t\t//assume data is url, make ajax call to url to get data\n\n\t\t\t\tthis._genRemoteRequest();\n\t\t\t}\n\t\t} else {\n\n\t\t\tthis.refreshActiveData(\"filter\");\n\t\t}\n\n\t\tthis.scrollHorizontal(left);\n\t};\n\n\t//choose the path to refresh data after a sorter update\n\n\tRowManager.prototype.sorterRefresh = function (loadOrignalData) {\n\n\t\tvar table = this.table,\n\t\t    options = this.table.options,\n\t\t    left = this.scrollLeft;\n\n\t\tif (options.ajaxSorting) {\n\n\t\t\tif ((options.pagination == \"remote\" || options.progressiveLoad) && table.modExists(\"page\")) {\n\n\t\t\t\ttable.modules.page.reset(true);\n\n\t\t\t\ttable.modules.page.setPage(1).then(function () {}).catch(function () {});\n\t\t\t} else if (options.ajaxProgressiveLoad) {\n\n\t\t\t\ttable.modules.ajax.loadData().then(function () {}).catch(function () {});\n\t\t\t} else {\n\n\t\t\t\t//assume data is url, make ajax call to url to get data\n\n\t\t\t\tthis._genRemoteRequest();\n\t\t\t}\n\t\t} else {\n\n\t\t\tthis.refreshActiveData(loadOrignalData ? \"filter\" : \"sort\");\n\t\t}\n\n\t\tthis.scrollHorizontal(left);\n\t};\n\n\tRowManager.prototype.scrollHorizontal = function (left) {\n\n\t\tthis.scrollLeft = left;\n\n\t\tthis.element.scrollLeft = left;\n\n\t\tif (this.table.options.groupBy) {\n\n\t\t\tthis.table.modules.groupRows.scrollHeaders(left);\n\t\t}\n\n\t\tif (this.table.modExists(\"columnCalcs\")) {\n\n\t\t\tthis.table.modules.columnCalcs.scrollHorizontal(left);\n\t\t}\n\t};\n\n\t//set active data set\n\n\tRowManager.prototype.refreshActiveData = function (stage, skipStage, renderInPosition) {\n\n\t\tvar self = this,\n\t\t    table = this.table,\n\t\t    cascadeOrder = [\"all\", \"filter\", \"sort\", \"display\", \"freeze\", \"group\", \"tree\", \"page\"],\n\t\t    displayIndex;\n\n\t\tif (this.redrawBlock) {\n\n\t\t\tif (!this.redrawBlockRestoreConfig || cascadeOrder.indexOf(stage) < cascadeOrder.indexOf(this.redrawBlockRestoreConfig.stage)) {\n\n\t\t\t\tthis.redrawBlockRestoreConfig = {\n\n\t\t\t\t\tstage: stage,\n\n\t\t\t\t\tskipStage: skipStage,\n\n\t\t\t\t\trenderInPosition: renderInPosition\n\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn;\n\t\t} else {\n\n\t\t\tif (self.table.modExists(\"edit\")) {\n\n\t\t\t\tself.table.modules.edit.cancelEdit();\n\t\t\t}\n\n\t\t\tif (!stage) {\n\n\t\t\t\tstage = \"all\";\n\t\t\t}\n\n\t\t\tif (table.options.selectable && !table.options.selectablePersistence && table.modExists(\"selectRow\")) {\n\n\t\t\t\ttable.modules.selectRow.deselectRows();\n\t\t\t}\n\n\t\t\t//cascade through data refresh stages\n\n\t\t\tswitch (stage) {\n\n\t\t\t\tcase \"all\":\n\n\t\t\t\tcase \"filter\":\n\n\t\t\t\t\tif (!skipStage) {\n\n\t\t\t\t\t\tif (table.modExists(\"filter\")) {\n\n\t\t\t\t\t\t\tself.setActiveRows(table.modules.filter.filter(self.rows));\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tself.setActiveRows(self.rows.slice(0));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tskipStage = false;\n\t\t\t\t\t}\n\n\t\t\t\tcase \"sort\":\n\n\t\t\t\t\tif (!skipStage) {\n\n\t\t\t\t\t\tif (table.modExists(\"sort\")) {\n\n\t\t\t\t\t\t\ttable.modules.sort.sort(this.activeRows);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tskipStage = false;\n\t\t\t\t\t}\n\n\t\t\t\t\t//regenerate row numbers for row number formatter if in use\n\n\t\t\t\t\tthis.regenerateRowNumbers();\n\n\t\t\t\t//generic stage to allow for pipeline trigger after the data manipulation stage\n\n\t\t\t\tcase \"display\":\n\n\t\t\t\t\tthis.resetDisplayRows();\n\n\t\t\t\tcase \"freeze\":\n\n\t\t\t\t\tif (!skipStage) {\n\n\t\t\t\t\t\tif (this.table.modExists(\"frozenRows\")) {\n\n\t\t\t\t\t\t\tif (table.modules.frozenRows.isFrozen()) {\n\n\t\t\t\t\t\t\t\tif (!table.modules.frozenRows.getDisplayIndex()) {\n\n\t\t\t\t\t\t\t\t\ttable.modules.frozenRows.setDisplayIndex(this.getNextDisplayIndex());\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tdisplayIndex = table.modules.frozenRows.getDisplayIndex();\n\n\t\t\t\t\t\t\t\tdisplayIndex = self.setDisplayRows(table.modules.frozenRows.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\n\n\t\t\t\t\t\t\t\tif (displayIndex !== true) {\n\n\t\t\t\t\t\t\t\t\ttable.modules.frozenRows.setDisplayIndex(displayIndex);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tskipStage = false;\n\t\t\t\t\t}\n\n\t\t\t\tcase \"group\":\n\n\t\t\t\t\tif (!skipStage) {\n\n\t\t\t\t\t\tif (table.options.groupBy && table.modExists(\"groupRows\")) {\n\n\t\t\t\t\t\t\tif (!table.modules.groupRows.getDisplayIndex()) {\n\n\t\t\t\t\t\t\t\ttable.modules.groupRows.setDisplayIndex(this.getNextDisplayIndex());\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tdisplayIndex = table.modules.groupRows.getDisplayIndex();\n\n\t\t\t\t\t\t\tdisplayIndex = self.setDisplayRows(table.modules.groupRows.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\n\n\t\t\t\t\t\t\tif (displayIndex !== true) {\n\n\t\t\t\t\t\t\t\ttable.modules.groupRows.setDisplayIndex(displayIndex);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tskipStage = false;\n\t\t\t\t\t}\n\n\t\t\t\tcase \"tree\":\n\n\t\t\t\t\tif (!skipStage) {\n\n\t\t\t\t\t\tif (table.options.dataTree && table.modExists(\"dataTree\")) {\n\n\t\t\t\t\t\t\tif (!table.modules.dataTree.getDisplayIndex()) {\n\n\t\t\t\t\t\t\t\ttable.modules.dataTree.setDisplayIndex(this.getNextDisplayIndex());\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tdisplayIndex = table.modules.dataTree.getDisplayIndex();\n\n\t\t\t\t\t\t\tdisplayIndex = self.setDisplayRows(table.modules.dataTree.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\n\n\t\t\t\t\t\t\tif (displayIndex !== true) {\n\n\t\t\t\t\t\t\t\ttable.modules.dataTree.setDisplayIndex(displayIndex);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tskipStage = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (table.options.pagination && table.modExists(\"page\") && !renderInPosition) {\n\n\t\t\t\t\t\tif (table.modules.page.getMode() == \"local\") {\n\n\t\t\t\t\t\t\ttable.modules.page.reset();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\tcase \"page\":\n\n\t\t\t\t\tif (!skipStage) {\n\n\t\t\t\t\t\tif (table.options.pagination && table.modExists(\"page\")) {\n\n\t\t\t\t\t\t\tif (!table.modules.page.getDisplayIndex()) {\n\n\t\t\t\t\t\t\t\ttable.modules.page.setDisplayIndex(this.getNextDisplayIndex());\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tdisplayIndex = table.modules.page.getDisplayIndex();\n\n\t\t\t\t\t\t\tif (table.modules.page.getMode() == \"local\") {\n\n\t\t\t\t\t\t\t\ttable.modules.page.setMaxRows(this.getDisplayRows(displayIndex - 1).length);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tdisplayIndex = self.setDisplayRows(table.modules.page.getRows(this.getDisplayRows(displayIndex - 1)), displayIndex);\n\n\t\t\t\t\t\t\tif (displayIndex !== true) {\n\n\t\t\t\t\t\t\t\ttable.modules.page.setDisplayIndex(displayIndex);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tskipStage = false;\n\t\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (Tabulator.prototype.helpers.elVisible(self.element)) {\n\n\t\t\t\tif (renderInPosition) {\n\n\t\t\t\t\tself.reRenderInPosition();\n\t\t\t\t} else {\n\n\t\t\t\t\tself.renderTable();\n\n\t\t\t\t\tif (table.options.layoutColumnsOnNewData) {\n\n\t\t\t\t\t\tself.table.columnManager.redraw(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (table.modExists(\"columnCalcs\")) {\n\n\t\t\t\ttable.modules.columnCalcs.recalc(this.activeRows);\n\t\t\t}\n\t\t}\n\t};\n\n\t//regenerate row numbers for row number formatter if in use\n\n\tRowManager.prototype.regenerateRowNumbers = function () {\n\t\tvar _this14 = this;\n\n\t\tif (this.rowNumColumn) {\n\n\t\t\tthis.activeRows.forEach(function (row) {\n\n\t\t\t\tvar cell = row.getCell(_this14.rowNumColumn);\n\n\t\t\t\tif (cell) {\n\n\t\t\t\t\tcell._generateContents();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\tRowManager.prototype.setActiveRows = function (activeRows) {\n\n\t\tthis.activeRows = activeRows;\n\n\t\tthis.activeRowsCount = this.activeRows.length;\n\t};\n\n\t//reset display rows array\n\n\tRowManager.prototype.resetDisplayRows = function () {\n\n\t\tthis.displayRows = [];\n\n\t\tthis.displayRows.push(this.activeRows.slice(0));\n\n\t\tthis.displayRowsCount = this.displayRows[0].length;\n\n\t\tif (this.table.modExists(\"frozenRows\")) {\n\n\t\t\tthis.table.modules.frozenRows.setDisplayIndex(0);\n\t\t}\n\n\t\tif (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n\n\t\t\tthis.table.modules.groupRows.setDisplayIndex(0);\n\t\t}\n\n\t\tif (this.table.options.pagination && this.table.modExists(\"page\")) {\n\n\t\t\tthis.table.modules.page.setDisplayIndex(0);\n\t\t}\n\t};\n\n\tRowManager.prototype.getNextDisplayIndex = function () {\n\n\t\treturn this.displayRows.length;\n\t};\n\n\t//set display row pipeline data\n\n\tRowManager.prototype.setDisplayRows = function (displayRows, index) {\n\n\t\tvar output = true;\n\n\t\tif (index && typeof this.displayRows[index] != \"undefined\") {\n\n\t\t\tthis.displayRows[index] = displayRows;\n\n\t\t\toutput = true;\n\t\t} else {\n\n\t\t\tthis.displayRows.push(displayRows);\n\n\t\t\toutput = index = this.displayRows.length - 1;\n\t\t}\n\n\t\tif (index == this.displayRows.length - 1) {\n\n\t\t\tthis.displayRowsCount = this.displayRows[this.displayRows.length - 1].length;\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tRowManager.prototype.getDisplayRows = function (index) {\n\n\t\tif (typeof index == \"undefined\") {\n\n\t\t\treturn this.displayRows.length ? this.displayRows[this.displayRows.length - 1] : [];\n\t\t} else {\n\n\t\t\treturn this.displayRows[index] || [];\n\t\t}\n\t};\n\n\tRowManager.prototype.getVisibleRows = function (viewable) {\n\n\t\tvar topEdge = this.element.scrollTop,\n\t\t    bottomEdge = this.element.clientHeight + topEdge,\n\t\t    topFound = false,\n\t\t    topRow = 0,\n\t\t    bottomRow = 0,\n\t\t    rows = this.getDisplayRows();\n\n\t\tif (viewable) {\n\n\t\t\tthis.getDisplayRows();\n\n\t\t\tfor (var i = this.vDomTop; i <= this.vDomBottom; i++) {\n\n\t\t\t\tif (rows[i]) {\n\n\t\t\t\t\tif (!topFound) {\n\n\t\t\t\t\t\tif (topEdge - rows[i].getElement().offsetTop >= 0) {\n\n\t\t\t\t\t\t\ttopRow = i;\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\ttopFound = true;\n\n\t\t\t\t\t\t\tif (bottomEdge - rows[i].getElement().offsetTop >= 0) {\n\n\t\t\t\t\t\t\t\tbottomRow = i;\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif (bottomEdge - rows[i].getElement().offsetTop >= 0) {\n\n\t\t\t\t\t\t\tbottomRow = i;\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\n\t\t\ttopRow = this.vDomTop;\n\n\t\t\tbottomRow = this.vDomBottom;\n\t\t}\n\n\t\treturn rows.slice(topRow, bottomRow + 1);\n\t};\n\n\t//repeat action accross display rows\n\n\tRowManager.prototype.displayRowIterator = function (callback) {\n\n\t\tthis.displayRows.forEach(callback);\n\n\t\tthis.displayRowsCount = this.displayRows[this.displayRows.length - 1].length;\n\t};\n\n\t//return only actual rows (not group headers etc)\n\n\tRowManager.prototype.getRows = function (active) {\n\n\t\tvar rows;\n\n\t\tswitch (active) {\n\n\t\t\tcase \"active\":\n\n\t\t\t\trows = this.activeRows;\n\n\t\t\t\tbreak;\n\n\t\t\tcase \"display\":\n\n\t\t\t\trows = this.table.rowManager.getDisplayRows();\n\n\t\t\t\tbreak;\n\n\t\t\tcase \"visible\":\n\n\t\t\t\trows = this.getVisibleRows(true);\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\trows = this.rows;\n\n\t\t}\n\n\t\treturn rows;\n\t};\n\n\t///////////////// Table Rendering /////////////////\n\n\n\t//trigger rerender of table in current position\n\n\tRowManager.prototype.reRenderInPosition = function (callback) {\n\n\t\tif (this.getRenderMode() == \"virtual\") {\n\n\t\t\tif (this.redrawBlock) {\n\n\t\t\t\tif (callback) {\n\n\t\t\t\t\tcallback();\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.redrawBlockRederInPosition = true;\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tvar scrollTop = this.element.scrollTop;\n\n\t\t\t\tvar topRow = false;\n\n\t\t\t\tvar topOffset = false;\n\n\t\t\t\tvar left = this.scrollLeft;\n\n\t\t\t\tvar rows = this.getDisplayRows();\n\n\t\t\t\tfor (var i = this.vDomTop; i <= this.vDomBottom; i++) {\n\n\t\t\t\t\tif (rows[i]) {\n\n\t\t\t\t\t\tvar diff = scrollTop - rows[i].getElement().offsetTop;\n\n\t\t\t\t\t\tif (topOffset === false || Math.abs(diff) < topOffset) {\n\n\t\t\t\t\t\t\ttopOffset = diff;\n\n\t\t\t\t\t\t\ttopRow = i;\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (callback) {\n\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\n\t\t\t\tthis._virtualRenderFill(topRow === false ? this.displayRowsCount - 1 : topRow, true, topOffset || 0);\n\n\t\t\t\tthis.scrollHorizontal(left);\n\t\t\t}\n\t\t} else {\n\n\t\t\tthis.renderTable();\n\n\t\t\tif (callback) {\n\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t};\n\n\tRowManager.prototype.setRenderMode = function () {\n\n\t\tif (this.table.options.virtualDom) {\n\n\t\t\tthis.renderMode = \"virtual\";\n\n\t\t\tif (this.table.element.clientHeight || this.table.options.height) {\n\n\t\t\t\tthis.fixedHeight = true;\n\t\t\t} else {\n\n\t\t\t\tthis.fixedHeight = false;\n\t\t\t}\n\t\t} else {\n\n\t\t\tthis.renderMode = \"classic\";\n\t\t}\n\t};\n\n\tRowManager.prototype.getRenderMode = function () {\n\n\t\treturn this.renderMode;\n\t};\n\n\tRowManager.prototype.renderTable = function () {\n\n\t\tthis.table.options.renderStarted.call(this.table);\n\n\t\tthis.element.scrollTop = 0;\n\n\t\tswitch (this.renderMode) {\n\n\t\t\tcase \"classic\":\n\n\t\t\t\tthis._simpleRender();\n\n\t\t\t\tbreak;\n\n\t\t\tcase \"virtual\":\n\n\t\t\t\tthis._virtualRenderFill();\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif (this.firstRender) {\n\n\t\t\tif (this.displayRowsCount) {\n\n\t\t\t\tthis.firstRender = false;\n\n\t\t\t\tthis.table.modules.layout.layout();\n\t\t\t} else {\n\n\t\t\t\tthis.renderEmptyScroll();\n\t\t\t}\n\t\t}\n\n\t\tif (this.table.modExists(\"frozenColumns\")) {\n\n\t\t\tthis.table.modules.frozenColumns.layout();\n\t\t}\n\n\t\tif (!this.displayRowsCount) {\n\n\t\t\tif (this.table.options.placeholder) {\n\n\t\t\t\tthis.table.options.placeholder.setAttribute(\"tabulator-render-mode\", this.renderMode);\n\n\t\t\t\tthis.getElement().appendChild(this.table.options.placeholder);\n\n\t\t\t\tthis.table.options.placeholder.style.width = this.table.columnManager.getWidth() + \"px\";\n\t\t\t}\n\t\t}\n\n\t\tthis.table.options.renderComplete.call(this.table);\n\t};\n\n\t//simple render on heightless table\n\n\tRowManager.prototype._simpleRender = function () {\n\n\t\tthis._clearVirtualDom();\n\n\t\tif (this.displayRowsCount) {\n\n\t\t\tthis.checkClassicModeGroupHeaderWidth();\n\t\t} else {\n\n\t\t\tthis.renderEmptyScroll();\n\t\t}\n\t};\n\n\tRowManager.prototype.checkClassicModeGroupHeaderWidth = function () {\n\n\t\tvar self = this,\n\t\t    element = this.tableElement,\n\t\t    onlyGroupHeaders = true;\n\n\t\tself.getDisplayRows().forEach(function (row, index) {\n\n\t\t\tself.styleRow(row, index);\n\n\t\t\telement.appendChild(row.getElement());\n\n\t\t\trow.initialize(true);\n\n\t\t\tif (row.type !== \"group\") {\n\n\t\t\t\tonlyGroupHeaders = false;\n\t\t\t}\n\t\t});\n\n\t\tif (onlyGroupHeaders) {\n\n\t\t\telement.style.minWidth = self.table.columnManager.getWidth() + \"px\";\n\t\t} else {\n\n\t\t\telement.style.minWidth = \"\";\n\t\t}\n\t};\n\n\t//show scrollbars on empty table div\n\n\tRowManager.prototype.renderEmptyScroll = function () {\n\n\t\tif (this.table.options.placeholder) {\n\n\t\t\tthis.tableElement.style.display = \"none\";\n\t\t} else {\n\n\t\t\tthis.tableElement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n\n\t\t\tthis.tableElement.style.minHeight = \"1px\";\n\n\t\t\tthis.tableElement.style.visibility = \"hidden\";\n\t\t}\n\t};\n\n\tRowManager.prototype._clearVirtualDom = function () {\n\n\t\tvar element = this.tableElement;\n\n\t\tif (this.table.options.placeholder && this.table.options.placeholder.parentNode) {\n\n\t\t\tthis.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder);\n\t\t}\n\n\t\t// element.children.detach();\n\n\t\twhile (element.firstChild) {\n\t\t\telement.removeChild(element.firstChild);\n\t\t}element.style.paddingTop = \"\";\n\n\t\telement.style.paddingBottom = \"\";\n\n\t\telement.style.minWidth = \"\";\n\n\t\telement.style.minHeight = \"\";\n\n\t\telement.style.display = \"\";\n\n\t\telement.style.visibility = \"\";\n\n\t\tthis.scrollTop = 0;\n\n\t\tthis.scrollLeft = 0;\n\n\t\tthis.vDomTop = 0;\n\n\t\tthis.vDomBottom = 0;\n\n\t\tthis.vDomTopPad = 0;\n\n\t\tthis.vDomBottomPad = 0;\n\t};\n\n\tRowManager.prototype.styleRow = function (row, index) {\n\n\t\tvar rowEl = row.getElement();\n\n\t\tif (index % 2) {\n\n\t\t\trowEl.classList.add(\"tabulator-row-even\");\n\n\t\t\trowEl.classList.remove(\"tabulator-row-odd\");\n\t\t} else {\n\n\t\t\trowEl.classList.add(\"tabulator-row-odd\");\n\n\t\t\trowEl.classList.remove(\"tabulator-row-even\");\n\t\t}\n\t};\n\n\t//full virtual render\n\n\tRowManager.prototype._virtualRenderFill = function (position, forceMove, offset) {\n\n\t\tvar self = this,\n\t\t    element = self.tableElement,\n\t\t    holder = self.element,\n\t\t    topPad = 0,\n\t\t    rowsHeight = 0,\n\t\t    topPadHeight = 0,\n\t\t    i = 0,\n\t\t    onlyGroupHeaders = true,\n\t\t    rows = self.getDisplayRows();\n\n\t\tposition = position || 0;\n\n\t\toffset = offset || 0;\n\n\t\tif (!position) {\n\n\t\t\tself._clearVirtualDom();\n\t\t} else {\n\n\t\t\twhile (element.firstChild) {\n\t\t\t\telement.removeChild(element.firstChild);\n\t\t\t} //check if position is too close to bottom of table\n\n\t\t\tvar heightOccupied = (self.displayRowsCount - position + 1) * self.vDomRowHeight;\n\n\t\t\tif (heightOccupied < self.height) {\n\n\t\t\t\tposition -= Math.ceil((self.height - heightOccupied) / self.vDomRowHeight);\n\n\t\t\t\tif (position < 0) {\n\n\t\t\t\t\tposition = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//calculate initial pad\n\n\t\t\ttopPad = Math.min(Math.max(Math.floor(self.vDomWindowBuffer / self.vDomRowHeight), self.vDomWindowMinMarginRows), position);\n\n\t\t\tposition -= topPad;\n\t\t}\n\n\t\tif (self.displayRowsCount && Tabulator.prototype.helpers.elVisible(self.element)) {\n\n\t\t\tself.vDomTop = position;\n\n\t\t\tself.vDomBottom = position - 1;\n\n\t\t\twhile ((rowsHeight <= self.height + self.vDomWindowBuffer || i < self.vDomWindowMinTotalRows) && self.vDomBottom < self.displayRowsCount - 1) {\n\n\t\t\t\tvar index = self.vDomBottom + 1,\n\t\t\t\t    row = rows[index],\n\t\t\t\t    rowHeight = 0;\n\n\t\t\t\tself.styleRow(row, index);\n\n\t\t\t\telement.appendChild(row.getElement());\n\n\t\t\t\tif (!row.initialized) {\n\n\t\t\t\t\trow.initialize(true);\n\t\t\t\t} else {\n\n\t\t\t\t\tif (!row.heightInitialized) {\n\n\t\t\t\t\t\trow.normalizeHeight(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\trowHeight = row.getHeight();\n\n\t\t\t\tif (i < topPad) {\n\n\t\t\t\t\ttopPadHeight += rowHeight;\n\t\t\t\t} else {\n\n\t\t\t\t\trowsHeight += rowHeight;\n\t\t\t\t}\n\n\t\t\t\tif (rowHeight > this.vDomWindowBuffer) {\n\n\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\n\t\t\t\t}\n\n\t\t\t\tif (row.type !== \"group\") {\n\n\t\t\t\t\tonlyGroupHeaders = false;\n\t\t\t\t}\n\n\t\t\t\tself.vDomBottom++;\n\n\t\t\t\ti++;\n\t\t\t}\n\n\t\t\tif (!position) {\n\n\t\t\t\tthis.vDomTopPad = 0;\n\n\t\t\t\t//adjust rowheight to match average of rendered elements\n\n\t\t\t\tself.vDomRowHeight = Math.floor((rowsHeight + topPadHeight) / i);\n\n\t\t\t\tself.vDomBottomPad = self.vDomRowHeight * (self.displayRowsCount - self.vDomBottom - 1);\n\n\t\t\t\tself.vDomScrollHeight = topPadHeight + rowsHeight + self.vDomBottomPad - self.height;\n\t\t\t} else {\n\n\t\t\t\tself.vDomTopPad = !forceMove ? self.scrollTop - topPadHeight : self.vDomRowHeight * this.vDomTop + offset;\n\n\t\t\t\tself.vDomBottomPad = self.vDomBottom == self.displayRowsCount - 1 ? 0 : Math.max(self.vDomScrollHeight - self.vDomTopPad - rowsHeight - topPadHeight, 0);\n\t\t\t}\n\n\t\t\telement.style.paddingTop = self.vDomTopPad + \"px\";\n\n\t\t\telement.style.paddingBottom = self.vDomBottomPad + \"px\";\n\n\t\t\tif (forceMove) {\n\n\t\t\t\tthis.scrollTop = self.vDomTopPad + topPadHeight + offset - (this.element.scrollWidth > this.element.clientWidth ? this.element.offsetHeight - this.element.clientHeight : 0);\n\t\t\t}\n\n\t\t\tthis.scrollTop = Math.min(this.scrollTop, this.element.scrollHeight - this.height);\n\n\t\t\t//adjust for horizontal scrollbar if present (and not at top of table)\n\n\t\t\tif (this.element.scrollWidth > this.element.offsetWidth && forceMove) {\n\n\t\t\t\tthis.scrollTop += this.element.offsetHeight - this.element.clientHeight;\n\t\t\t}\n\n\t\t\tthis.vDomScrollPosTop = this.scrollTop;\n\n\t\t\tthis.vDomScrollPosBottom = this.scrollTop;\n\n\t\t\tholder.scrollTop = this.scrollTop;\n\n\t\t\telement.style.minWidth = onlyGroupHeaders ? self.table.columnManager.getWidth() + \"px\" : \"\";\n\n\t\t\tif (self.table.options.groupBy) {\n\n\t\t\t\tif (self.table.modules.layout.getMode() != \"fitDataFill\" && self.displayRowsCount == self.table.modules.groupRows.countGroups()) {\n\n\t\t\t\t\tself.tableElement.style.minWidth = self.table.columnManager.getWidth();\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\n\t\t\tthis.renderEmptyScroll();\n\t\t}\n\n\t\tif (!this.fixedHeight) {\n\n\t\t\tthis.adjustTableSize();\n\t\t}\n\t};\n\n\t//handle vertical scrolling\n\n\tRowManager.prototype.scrollVertical = function (dir) {\n\n\t\tvar topDiff = this.scrollTop - this.vDomScrollPosTop;\n\n\t\tvar bottomDiff = this.scrollTop - this.vDomScrollPosBottom;\n\n\t\tvar margin = this.vDomWindowBuffer * 2;\n\n\t\tif (-topDiff > margin || bottomDiff > margin) {\n\n\t\t\t//if big scroll redraw table;\n\n\t\t\tvar left = this.scrollLeft;\n\n\t\t\tthis._virtualRenderFill(Math.floor(this.element.scrollTop / this.element.scrollHeight * this.displayRowsCount));\n\n\t\t\tthis.scrollHorizontal(left);\n\t\t} else {\n\n\t\t\tif (dir) {\n\n\t\t\t\t//scrolling up\n\n\t\t\t\tif (topDiff < 0) {\n\n\t\t\t\t\tthis._addTopRow(-topDiff);\n\t\t\t\t}\n\n\t\t\t\tif (bottomDiff < 0) {\n\n\t\t\t\t\t//hide bottom row if needed\n\n\t\t\t\t\tif (this.vDomScrollHeight - this.scrollTop > this.vDomWindowBuffer) {\n\n\t\t\t\t\t\tthis._removeBottomRow(-bottomDiff);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.vDomScrollPosBottom = this.scrollTop;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\t//scrolling down\n\n\t\t\t\tif (topDiff >= 0) {\n\n\t\t\t\t\t//hide top row if needed\n\n\t\t\t\t\tif (this.scrollTop > this.vDomWindowBuffer) {\n\n\t\t\t\t\t\tthis._removeTopRow(topDiff);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.vDomScrollPosTop = this.scrollTop;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (bottomDiff >= 0) {\n\n\t\t\t\t\tthis._addBottomRow(bottomDiff);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tRowManager.prototype._addTopRow = function (topDiff) {\n\t\tvar i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n\n\t\tvar table = this.tableElement,\n\t\t    rows = this.getDisplayRows();\n\n\t\tif (this.vDomTop) {\n\n\t\t\tvar index = this.vDomTop - 1,\n\t\t\t    topRow = rows[index],\n\t\t\t    topRowHeight = topRow.getHeight() || this.vDomRowHeight;\n\n\t\t\t//hide top row if needed\n\n\t\t\tif (topDiff >= topRowHeight) {\n\n\t\t\t\tthis.styleRow(topRow, index);\n\n\t\t\t\ttable.insertBefore(topRow.getElement(), table.firstChild);\n\n\t\t\t\tif (!topRow.initialized || !topRow.heightInitialized) {\n\n\t\t\t\t\tthis.vDomTopNewRows.push(topRow);\n\n\t\t\t\t\tif (!topRow.heightInitialized) {\n\n\t\t\t\t\t\ttopRow.clearCellHeight();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ttopRow.initialize();\n\n\t\t\t\tthis.vDomTopPad -= topRowHeight;\n\n\t\t\t\tif (this.vDomTopPad < 0) {\n\n\t\t\t\t\tthis.vDomTopPad = index * this.vDomRowHeight;\n\t\t\t\t}\n\n\t\t\t\tif (!index) {\n\n\t\t\t\t\tthis.vDomTopPad = 0;\n\t\t\t\t}\n\n\t\t\t\ttable.style.paddingTop = this.vDomTopPad + \"px\";\n\n\t\t\t\tthis.vDomScrollPosTop -= topRowHeight;\n\n\t\t\t\tthis.vDomTop--;\n\t\t\t}\n\n\t\t\ttopDiff = -(this.scrollTop - this.vDomScrollPosTop);\n\n\t\t\tif (topRow.getHeight() > this.vDomWindowBuffer) {\n\n\t\t\t\tthis.vDomWindowBuffer = topRow.getHeight() * 2;\n\t\t\t}\n\n\t\t\tif (i < this.vDomMaxRenderChain && this.vDomTop && topDiff >= (rows[this.vDomTop - 1].getHeight() || this.vDomRowHeight)) {\n\n\t\t\t\tthis._addTopRow(topDiff, i + 1);\n\t\t\t} else {\n\n\t\t\t\tthis._quickNormalizeRowHeight(this.vDomTopNewRows);\n\t\t\t}\n\t\t}\n\t};\n\n\tRowManager.prototype._removeTopRow = function (topDiff) {\n\n\t\tvar table = this.tableElement,\n\t\t    topRow = this.getDisplayRows()[this.vDomTop],\n\t\t    topRowHeight = topRow.getHeight() || this.vDomRowHeight;\n\n\t\tif (topDiff >= topRowHeight) {\n\n\t\t\tvar rowEl = topRow.getElement();\n\n\t\t\trowEl.parentNode.removeChild(rowEl);\n\n\t\t\tthis.vDomTopPad += topRowHeight;\n\n\t\t\ttable.style.paddingTop = this.vDomTopPad + \"px\";\n\n\t\t\tthis.vDomScrollPosTop += this.vDomTop ? topRowHeight : topRowHeight + this.vDomWindowBuffer;\n\n\t\t\tthis.vDomTop++;\n\n\t\t\ttopDiff = this.scrollTop - this.vDomScrollPosTop;\n\n\t\t\tthis._removeTopRow(topDiff);\n\t\t}\n\t};\n\n\tRowManager.prototype._addBottomRow = function (bottomDiff) {\n\t\tvar i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n\n\t\tvar table = this.tableElement,\n\t\t    rows = this.getDisplayRows();\n\n\t\tif (this.vDomBottom < this.displayRowsCount - 1) {\n\n\t\t\tvar index = this.vDomBottom + 1,\n\t\t\t    bottomRow = rows[index],\n\t\t\t    bottomRowHeight = bottomRow.getHeight() || this.vDomRowHeight;\n\n\t\t\t//hide bottom row if needed\n\n\t\t\tif (bottomDiff >= bottomRowHeight) {\n\n\t\t\t\tthis.styleRow(bottomRow, index);\n\n\t\t\t\ttable.appendChild(bottomRow.getElement());\n\n\t\t\t\tif (!bottomRow.initialized || !bottomRow.heightInitialized) {\n\n\t\t\t\t\tthis.vDomBottomNewRows.push(bottomRow);\n\n\t\t\t\t\tif (!bottomRow.heightInitialized) {\n\n\t\t\t\t\t\tbottomRow.clearCellHeight();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbottomRow.initialize();\n\n\t\t\t\tthis.vDomBottomPad -= bottomRowHeight;\n\n\t\t\t\tif (this.vDomBottomPad < 0 || index == this.displayRowsCount - 1) {\n\n\t\t\t\t\tthis.vDomBottomPad = 0;\n\t\t\t\t}\n\n\t\t\t\ttable.style.paddingBottom = this.vDomBottomPad + \"px\";\n\n\t\t\t\tthis.vDomScrollPosBottom += bottomRowHeight;\n\n\t\t\t\tthis.vDomBottom++;\n\t\t\t}\n\n\t\t\tbottomDiff = this.scrollTop - this.vDomScrollPosBottom;\n\n\t\t\tif (bottomRow.getHeight() > this.vDomWindowBuffer) {\n\n\t\t\t\tthis.vDomWindowBuffer = bottomRow.getHeight() * 2;\n\t\t\t}\n\n\t\t\tif (i < this.vDomMaxRenderChain && this.vDomBottom < this.displayRowsCount - 1 && bottomDiff >= (rows[this.vDomBottom + 1].getHeight() || this.vDomRowHeight)) {\n\n\t\t\t\tthis._addBottomRow(bottomDiff, i + 1);\n\t\t\t} else {\n\n\t\t\t\tthis._quickNormalizeRowHeight(this.vDomBottomNewRows);\n\t\t\t}\n\t\t}\n\t};\n\n\tRowManager.prototype._removeBottomRow = function (bottomDiff) {\n\n\t\tvar table = this.tableElement,\n\t\t    bottomRow = this.getDisplayRows()[this.vDomBottom],\n\t\t    bottomRowHeight = bottomRow.getHeight() || this.vDomRowHeight;\n\n\t\tif (bottomDiff >= bottomRowHeight) {\n\n\t\t\tvar rowEl = bottomRow.getElement();\n\n\t\t\tif (rowEl.parentNode) {\n\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t}\n\n\t\t\tthis.vDomBottomPad += bottomRowHeight;\n\n\t\t\tif (this.vDomBottomPad < 0) {\n\n\t\t\t\tthis.vDomBottomPad = 0;\n\t\t\t}\n\n\t\t\ttable.style.paddingBottom = this.vDomBottomPad + \"px\";\n\n\t\t\tthis.vDomScrollPosBottom -= bottomRowHeight;\n\n\t\t\tthis.vDomBottom--;\n\n\t\t\tbottomDiff = -(this.scrollTop - this.vDomScrollPosBottom);\n\n\t\t\tthis._removeBottomRow(bottomDiff);\n\t\t}\n\t};\n\n\tRowManager.prototype._quickNormalizeRowHeight = function (rows) {\n\n\t\trows.forEach(function (row) {\n\n\t\t\trow.calcHeight();\n\t\t});\n\n\t\trows.forEach(function (row) {\n\n\t\t\trow.setCellHeight();\n\t\t});\n\n\t\trows.length = 0;\n\t};\n\n\t//normalize height of active rows\n\n\tRowManager.prototype.normalizeHeight = function () {\n\n\t\tthis.activeRows.forEach(function (row) {\n\n\t\t\trow.normalizeHeight();\n\t\t});\n\t};\n\n\t//adjust the height of the table holder to fit in the Tabulator element\n\n\tRowManager.prototype.adjustTableSize = function () {\n\n\t\tvar initialHeight = this.element.clientHeight,\n\t\t    modExists;\n\n\t\tif (this.renderMode === \"virtual\") {\n\n\t\t\tvar otherHeight = this.columnManager.getElement().offsetHeight + (this.table.footerManager && !this.table.footerManager.external ? this.table.footerManager.getElement().offsetHeight : 0);\n\n\t\t\tif (this.fixedHeight) {\n\n\t\t\t\tthis.element.style.minHeight = \"calc(100% - \" + otherHeight + \"px)\";\n\n\t\t\t\tthis.element.style.height = \"calc(100% - \" + otherHeight + \"px)\";\n\n\t\t\t\tthis.element.style.maxHeight = \"calc(100% - \" + otherHeight + \"px)\";\n\t\t\t} else {\n\n\t\t\t\tthis.element.style.height = \"\";\n\n\t\t\t\tthis.element.style.height = this.table.element.clientHeight - otherHeight + \"px\";\n\n\t\t\t\tthis.element.scrollTop = this.scrollTop;\n\t\t\t}\n\n\t\t\tthis.height = this.element.clientHeight;\n\n\t\t\tthis.vDomWindowBuffer = this.table.options.virtualDomBuffer || this.height;\n\n\t\t\t//check if the table has changed size when dealing with variable height tables\n\n\t\t\tif (!this.fixedHeight && initialHeight != this.element.clientHeight) {\n\n\t\t\t\tmodExists = this.table.modExists(\"resizeTable\");\n\n\t\t\t\tif (modExists && !this.table.modules.resizeTable.autoResize || !modExists) {\n\n\t\t\t\t\tthis.redraw();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t//renitialize all rows\n\n\tRowManager.prototype.reinitialize = function () {\n\n\t\tthis.rows.forEach(function (row) {\n\n\t\t\trow.reinitialize();\n\t\t});\n\t};\n\n\t//prevent table from being redrawn\n\n\tRowManager.prototype.blockRedraw = function () {\n\n\t\tthis.redrawBlock = true;\n\n\t\tthis.redrawBlockRestoreConfig = false;\n\t};\n\n\t//restore table redrawing\n\n\tRowManager.prototype.restoreRedraw = function () {\n\n\t\tthis.redrawBlock = false;\n\n\t\tif (this.redrawBlockRestoreConfig) {\n\n\t\t\tthis.refreshActiveData(this.redrawBlockRestoreConfig.stage, this.redrawBlockRestoreConfig.skipStage, this.redrawBlockRestoreConfig.renderInPosition);\n\n\t\t\tthis.redrawBlockRestoreConfig = false;\n\t\t} else {\n\n\t\t\tif (this.redrawBlockRederInPosition) {\n\n\t\t\t\tthis.reRenderInPosition();\n\t\t\t}\n\t\t}\n\n\t\tthis.redrawBlockRederInPosition = false;\n\t};\n\n\t//redraw table\n\n\tRowManager.prototype.redraw = function (force) {\n\n\t\tvar pos = 0,\n\t\t    left = this.scrollLeft;\n\n\t\tthis.adjustTableSize();\n\n\t\tthis.table.tableWidth = this.table.element.clientWidth;\n\n\t\tif (!force) {\n\n\t\t\tif (this.renderMode == \"classic\") {\n\n\t\t\t\tif (this.table.options.groupBy) {\n\n\t\t\t\t\tthis.refreshActiveData(\"group\", false, false);\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._simpleRender();\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tthis.reRenderInPosition();\n\n\t\t\t\tthis.scrollHorizontal(left);\n\t\t\t}\n\n\t\t\tif (!this.displayRowsCount) {\n\n\t\t\t\tif (this.table.options.placeholder) {\n\n\t\t\t\t\tthis.getElement().appendChild(this.table.options.placeholder);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\n\t\t\tthis.renderTable();\n\t\t}\n\t};\n\n\tRowManager.prototype.resetScroll = function () {\n\n\t\tthis.element.scrollLeft = 0;\n\n\t\tthis.element.scrollTop = 0;\n\n\t\tif (this.table.browser === \"ie\") {\n\n\t\t\tvar event = document.createEvent(\"Event\");\n\n\t\t\tevent.initEvent(\"scroll\", false, true);\n\n\t\t\tthis.element.dispatchEvent(event);\n\t\t} else {\n\n\t\t\tthis.element.dispatchEvent(new Event('scroll'));\n\t\t}\n\t};\n\n\t//public row object\n\n\tvar RowComponent = function RowComponent(row) {\n\n\t\tthis._row = row;\n\t};\n\n\tRowComponent.prototype.getData = function (transform) {\n\n\t\treturn this._row.getData(transform);\n\t};\n\n\tRowComponent.prototype.getElement = function () {\n\n\t\treturn this._row.getElement();\n\t};\n\n\tRowComponent.prototype.getCells = function () {\n\n\t\tvar cells = [];\n\n\t\tthis._row.getCells().forEach(function (cell) {\n\n\t\t\tcells.push(cell.getComponent());\n\t\t});\n\n\t\treturn cells;\n\t};\n\n\tRowComponent.prototype.getCell = function (column) {\n\n\t\tvar cell = this._row.getCell(column);\n\n\t\treturn cell ? cell.getComponent() : false;\n\t};\n\n\tRowComponent.prototype.getIndex = function () {\n\n\t\treturn this._row.getData(\"data\")[this._row.table.options.index];\n\t};\n\n\tRowComponent.prototype.getPosition = function (active) {\n\n\t\treturn this._row.table.rowManager.getRowPosition(this._row, active);\n\t};\n\n\tRowComponent.prototype.delete = function () {\n\n\t\treturn this._row.delete();\n\t};\n\n\tRowComponent.prototype.scrollTo = function () {\n\n\t\treturn this._row.table.rowManager.scrollToRow(this._row);\n\t};\n\n\tRowComponent.prototype.pageTo = function () {\n\n\t\tif (this._row.table.modExists(\"page\", true)) {\n\n\t\t\treturn this._row.table.modules.page.setPageToRow(this._row);\n\t\t}\n\t};\n\n\tRowComponent.prototype.move = function (to, after) {\n\n\t\tthis._row.moveToRow(to, after);\n\t};\n\n\tRowComponent.prototype.update = function (data) {\n\n\t\treturn this._row.updateData(data);\n\t};\n\n\tRowComponent.prototype.normalizeHeight = function () {\n\n\t\tthis._row.normalizeHeight(true);\n\t};\n\n\tRowComponent.prototype.select = function () {\n\n\t\tthis._row.table.modules.selectRow.selectRows(this._row);\n\t};\n\n\tRowComponent.prototype.deselect = function () {\n\n\t\tthis._row.table.modules.selectRow.deselectRows(this._row);\n\t};\n\n\tRowComponent.prototype.toggleSelect = function () {\n\n\t\tthis._row.table.modules.selectRow.toggleRow(this._row);\n\t};\n\n\tRowComponent.prototype.isSelected = function () {\n\n\t\treturn this._row.table.modules.selectRow.isRowSelected(this._row);\n\t};\n\n\tRowComponent.prototype._getSelf = function () {\n\n\t\treturn this._row;\n\t};\n\n\tRowComponent.prototype.validate = function () {\n\n\t\treturn this._row.validate();\n\t};\n\n\tRowComponent.prototype.freeze = function () {\n\n\t\tif (this._row.table.modExists(\"frozenRows\", true)) {\n\n\t\t\tthis._row.table.modules.frozenRows.freezeRow(this._row);\n\t\t}\n\t};\n\n\tRowComponent.prototype.unfreeze = function () {\n\n\t\tif (this._row.table.modExists(\"frozenRows\", true)) {\n\n\t\t\tthis._row.table.modules.frozenRows.unfreezeRow(this._row);\n\t\t}\n\t};\n\n\tRowComponent.prototype.isFrozen = function () {\n\n\t\tif (this._row.table.modExists(\"frozenRows\", true)) {\n\n\t\t\tvar index = this._row.table.modules.frozenRows.rows.indexOf(this._row);\n\n\t\t\treturn index > -1;\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tRowComponent.prototype.treeCollapse = function () {\n\n\t\tif (this._row.table.modExists(\"dataTree\", true)) {\n\n\t\t\tthis._row.table.modules.dataTree.collapseRow(this._row);\n\t\t}\n\t};\n\n\tRowComponent.prototype.treeExpand = function () {\n\n\t\tif (this._row.table.modExists(\"dataTree\", true)) {\n\n\t\t\tthis._row.table.modules.dataTree.expandRow(this._row);\n\t\t}\n\t};\n\n\tRowComponent.prototype.treeToggle = function () {\n\n\t\tif (this._row.table.modExists(\"dataTree\", true)) {\n\n\t\t\tthis._row.table.modules.dataTree.toggleRow(this._row);\n\t\t}\n\t};\n\n\tRowComponent.prototype.getTreeParent = function () {\n\n\t\tif (this._row.table.modExists(\"dataTree\", true)) {\n\n\t\t\treturn this._row.table.modules.dataTree.getTreeParent(this._row);\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tRowComponent.prototype.getTreeChildren = function () {\n\n\t\tif (this._row.table.modExists(\"dataTree\", true)) {\n\n\t\t\treturn this._row.table.modules.dataTree.getTreeChildren(this._row);\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tRowComponent.prototype.addTreeChild = function (data, pos, index) {\n\n\t\tif (this._row.table.modExists(\"dataTree\", true)) {\n\n\t\t\treturn this._row.table.modules.dataTree.addTreeChildRow(this._row, data, pos, index);\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tRowComponent.prototype.reformat = function () {\n\n\t\treturn this._row.reinitialize();\n\t};\n\n\tRowComponent.prototype.getGroup = function () {\n\n\t\treturn this._row.getGroup().getComponent();\n\t};\n\n\tRowComponent.prototype.getTable = function () {\n\n\t\treturn this._row.table;\n\t};\n\n\tRowComponent.prototype.getNextRow = function () {\n\n\t\tvar row = this._row.nextRow();\n\n\t\treturn row ? row.getComponent() : row;\n\t};\n\n\tRowComponent.prototype.getPrevRow = function () {\n\n\t\tvar row = this._row.prevRow();\n\n\t\treturn row ? row.getComponent() : row;\n\t};\n\n\tvar Row = function Row(data, parent) {\n\t\tvar type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"row\";\n\n\n\t\tthis.table = parent.table;\n\n\t\tthis.parent = parent;\n\n\t\tthis.data = {};\n\n\t\tthis.type = type; //type of element\n\n\t\tthis.element = this.createElement();\n\n\t\tthis.modules = {}; //hold module variables;\n\n\t\tthis.cells = [];\n\n\t\tthis.height = 0; //hold element height\n\n\t\tthis.heightStyled = \"\"; //hold element height prestyled to improve render efficiency\n\n\t\tthis.manualHeight = false; //user has manually set row height\n\n\t\tthis.outerHeight = 0; //holde lements outer height\n\n\t\tthis.initialized = false; //element has been rendered\n\n\t\tthis.heightInitialized = false; //element has resized cells to fit\n\n\n\t\tthis.component = null;\n\n\t\tthis.setData(data);\n\n\t\tthis.generateElement();\n\t};\n\n\tRow.prototype.createElement = function () {\n\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-row\");\n\n\t\tel.setAttribute(\"role\", \"row\");\n\n\t\treturn el;\n\t};\n\n\tRow.prototype.getElement = function () {\n\n\t\treturn this.element;\n\t};\n\n\tRow.prototype.detachElement = function () {\n\n\t\tif (this.element && this.element.parentNode) {\n\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\t};\n\n\tRow.prototype.generateElement = function () {\n\n\t\tvar self = this,\n\t\t    dblTap,\n\t\t    tapHold,\n\t\t    tap;\n\n\t\t//set row selection characteristics\n\n\t\tif (self.table.options.selectable !== false && self.table.modExists(\"selectRow\")) {\n\n\t\t\tself.table.modules.selectRow.initializeRow(this);\n\t\t}\n\n\t\t//setup movable rows\n\n\t\tif (self.table.options.movableRows !== false && self.table.modExists(\"moveRow\")) {\n\n\t\t\tself.table.modules.moveRow.initializeRow(this);\n\t\t}\n\n\t\t//setup data tree\n\n\t\tif (self.table.options.dataTree !== false && self.table.modExists(\"dataTree\")) {\n\n\t\t\tself.table.modules.dataTree.initializeRow(this);\n\t\t}\n\n\t\t//setup column colapse container\n\n\t\tif (self.table.options.responsiveLayout === \"collapse\" && self.table.modExists(\"responsiveLayout\")) {\n\n\t\t\tself.table.modules.responsiveLayout.initializeRow(this);\n\t\t}\n\n\t\t//set column menu\n\n\t\tif (self.table.options.rowContextMenu && this.table.modExists(\"menu\")) {\n\n\t\t\tself.table.modules.menu.initializeRow(this);\n\t\t}\n\n\t\t//handle row click events\n\n\t\tif (self.table.options.rowClick) {\n\n\t\t\tself.element.addEventListener(\"click\", function (e) {\n\n\t\t\t\tself.table.options.rowClick(e, self.getComponent());\n\t\t\t});\n\t\t}\n\n\t\tif (self.table.options.rowDblClick) {\n\n\t\t\tself.element.addEventListener(\"dblclick\", function (e) {\n\n\t\t\t\tself.table.options.rowDblClick(e, self.getComponent());\n\t\t\t});\n\t\t}\n\n\t\tif (self.table.options.rowContext) {\n\n\t\t\tself.element.addEventListener(\"contextmenu\", function (e) {\n\n\t\t\t\tself.table.options.rowContext(e, self.getComponent());\n\t\t\t});\n\t\t}\n\n\t\t//handle mouse events\n\n\t\tif (self.table.options.rowMouseEnter) {\n\n\t\t\tself.element.addEventListener(\"mouseenter\", function (e) {\n\n\t\t\t\tself.table.options.rowMouseEnter(e, self.getComponent());\n\t\t\t});\n\t\t}\n\n\t\tif (self.table.options.rowMouseLeave) {\n\n\t\t\tself.element.addEventListener(\"mouseleave\", function (e) {\n\n\t\t\t\tself.table.options.rowMouseLeave(e, self.getComponent());\n\t\t\t});\n\t\t}\n\n\t\tif (self.table.options.rowMouseOver) {\n\n\t\t\tself.element.addEventListener(\"mouseover\", function (e) {\n\n\t\t\t\tself.table.options.rowMouseOver(e, self.getComponent());\n\t\t\t});\n\t\t}\n\n\t\tif (self.table.options.rowMouseOut) {\n\n\t\t\tself.element.addEventListener(\"mouseout\", function (e) {\n\n\t\t\t\tself.table.options.rowMouseOut(e, self.getComponent());\n\t\t\t});\n\t\t}\n\n\t\tif (self.table.options.rowMouseMove) {\n\n\t\t\tself.element.addEventListener(\"mousemove\", function (e) {\n\n\t\t\t\tself.table.options.rowMouseMove(e, self.getComponent());\n\t\t\t});\n\t\t}\n\n\t\tif (self.table.options.rowTap) {\n\n\t\t\ttap = false;\n\n\t\t\tself.element.addEventListener(\"touchstart\", function (e) {\n\n\t\t\t\ttap = true;\n\t\t\t}, { passive: true });\n\n\t\t\tself.element.addEventListener(\"touchend\", function (e) {\n\n\t\t\t\tif (tap) {\n\n\t\t\t\t\tself.table.options.rowTap(e, self.getComponent());\n\t\t\t\t}\n\n\t\t\t\ttap = false;\n\t\t\t});\n\t\t}\n\n\t\tif (self.table.options.rowDblTap) {\n\n\t\t\tdblTap = null;\n\n\t\t\tself.element.addEventListener(\"touchend\", function (e) {\n\n\t\t\t\tif (dblTap) {\n\n\t\t\t\t\tclearTimeout(dblTap);\n\n\t\t\t\t\tdblTap = null;\n\n\t\t\t\t\tself.table.options.rowDblTap(e, self.getComponent());\n\t\t\t\t} else {\n\n\t\t\t\t\tdblTap = setTimeout(function () {\n\n\t\t\t\t\t\tclearTimeout(dblTap);\n\n\t\t\t\t\t\tdblTap = null;\n\t\t\t\t\t}, 300);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (self.table.options.rowTapHold) {\n\n\t\t\ttapHold = null;\n\n\t\t\tself.element.addEventListener(\"touchstart\", function (e) {\n\n\t\t\t\tclearTimeout(tapHold);\n\n\t\t\t\ttapHold = setTimeout(function () {\n\n\t\t\t\t\tclearTimeout(tapHold);\n\n\t\t\t\t\ttapHold = null;\n\n\t\t\t\t\ttap = false;\n\n\t\t\t\t\tself.table.options.rowTapHold(e, self.getComponent());\n\t\t\t\t}, 1000);\n\t\t\t}, { passive: true });\n\n\t\t\tself.element.addEventListener(\"touchend\", function (e) {\n\n\t\t\t\tclearTimeout(tapHold);\n\n\t\t\t\ttapHold = null;\n\t\t\t});\n\t\t}\n\t};\n\n\tRow.prototype.generateCells = function () {\n\n\t\tthis.cells = this.table.columnManager.generateCells(this);\n\t};\n\n\t//functions to setup on first render\n\n\tRow.prototype.initialize = function (force) {\n\n\t\tvar self = this;\n\n\t\tif (!self.initialized || force) {\n\n\t\t\tself.deleteCells();\n\n\t\t\twhile (self.element.firstChild) {\n\t\t\t\tself.element.removeChild(self.element.firstChild);\n\t\t\t} //handle frozen cells\n\n\t\t\tif (this.table.modExists(\"frozenColumns\")) {\n\n\t\t\t\tthis.table.modules.frozenColumns.layoutRow(this);\n\t\t\t}\n\n\t\t\tthis.generateCells();\n\n\t\t\tself.cells.forEach(function (cell) {\n\n\t\t\t\tself.element.appendChild(cell.getElement());\n\n\t\t\t\tcell.cellRendered();\n\t\t\t});\n\n\t\t\tif (force) {\n\n\t\t\t\tself.normalizeHeight();\n\t\t\t}\n\n\t\t\t//setup movable rows\n\n\t\t\tif (self.table.options.dataTree && self.table.modExists(\"dataTree\")) {\n\n\t\t\t\tself.table.modules.dataTree.layoutRow(this);\n\t\t\t}\n\n\t\t\t//setup column colapse container\n\n\t\t\tif (self.table.options.responsiveLayout === \"collapse\" && self.table.modExists(\"responsiveLayout\")) {\n\n\t\t\t\tself.table.modules.responsiveLayout.layoutRow(this);\n\t\t\t}\n\n\t\t\tif (self.table.options.rowFormatter) {\n\n\t\t\t\tself.table.options.rowFormatter(self.getComponent());\n\t\t\t}\n\n\t\t\t//set resizable handles\n\n\t\t\tif (self.table.options.resizableRows && self.table.modExists(\"resizeRows\")) {\n\n\t\t\t\tself.table.modules.resizeRows.initializeRow(self);\n\t\t\t}\n\n\t\t\tself.initialized = true;\n\t\t}\n\t};\n\n\tRow.prototype.reinitializeHeight = function () {\n\n\t\tthis.heightInitialized = false;\n\n\t\tif (this.element.offsetParent !== null) {\n\n\t\t\tthis.normalizeHeight(true);\n\t\t}\n\t};\n\n\tRow.prototype.reinitialize = function () {\n\n\t\tthis.initialized = false;\n\n\t\tthis.heightInitialized = false;\n\n\t\tif (!this.manualHeight) {\n\n\t\t\tthis.height = 0;\n\n\t\t\tthis.heightStyled = \"\";\n\t\t}\n\n\t\tif (this.element.offsetParent !== null) {\n\n\t\t\tthis.initialize(true);\n\t\t}\n\t};\n\n\t//get heights when doing bulk row style calcs in virtual DOM\n\n\tRow.prototype.calcHeight = function (force) {\n\n\t\tvar maxHeight = 0,\n\t\t    minHeight = this.table.options.resizableRows ? this.element.clientHeight : 0;\n\n\t\tthis.cells.forEach(function (cell) {\n\n\t\t\tvar height = cell.getHeight();\n\n\t\t\tif (height > maxHeight) {\n\n\t\t\t\tmaxHeight = height;\n\t\t\t}\n\t\t});\n\n\t\tif (force) {\n\n\t\t\tthis.height = Math.max(maxHeight, minHeight);\n\t\t} else {\n\n\t\t\tthis.height = this.manualHeight ? this.height : Math.max(maxHeight, minHeight);\n\t\t}\n\n\t\tthis.heightStyled = this.height ? this.height + \"px\" : \"\";\n\n\t\tthis.outerHeight = this.element.offsetHeight;\n\t};\n\n\t//set of cells\n\n\tRow.prototype.setCellHeight = function () {\n\n\t\tthis.cells.forEach(function (cell) {\n\n\t\t\tcell.setHeight();\n\t\t});\n\n\t\tthis.heightInitialized = true;\n\t};\n\n\tRow.prototype.clearCellHeight = function () {\n\n\t\tthis.cells.forEach(function (cell) {\n\n\t\t\tcell.clearHeight();\n\t\t});\n\t};\n\n\t//normalize the height of elements in the row\n\n\tRow.prototype.normalizeHeight = function (force) {\n\n\t\tif (force) {\n\n\t\t\tthis.clearCellHeight();\n\t\t}\n\n\t\tthis.calcHeight(force);\n\n\t\tthis.setCellHeight();\n\t};\n\n\t// Row.prototype.setHeight = function(height){\n\n\t// \tthis.height = height;\n\n\n\t// \tthis.setCellHeight();\n\n\t// };\n\n\n\t//set height of rows\n\n\tRow.prototype.setHeight = function (height, force) {\n\n\t\tif (this.height != height || force) {\n\n\t\t\tthis.manualHeight = true;\n\n\t\t\tthis.height = height;\n\n\t\t\tthis.heightStyled = height ? height + \"px\" : \"\";\n\n\t\t\tthis.setCellHeight();\n\n\t\t\t// this.outerHeight = this.element.outerHeight();\n\n\t\t\tthis.outerHeight = this.element.offsetHeight;\n\t\t}\n\t};\n\n\t//return rows outer height\n\n\tRow.prototype.getHeight = function () {\n\n\t\treturn this.outerHeight;\n\t};\n\n\t//return rows outer Width\n\n\tRow.prototype.getWidth = function () {\n\n\t\treturn this.element.offsetWidth;\n\t};\n\n\t//////////////// Cell Management /////////////////\n\n\n\tRow.prototype.deleteCell = function (cell) {\n\n\t\tvar index = this.cells.indexOf(cell);\n\n\t\tif (index > -1) {\n\n\t\t\tthis.cells.splice(index, 1);\n\t\t}\n\t};\n\n\t//////////////// Data Management /////////////////\n\n\n\tRow.prototype.setData = function (data) {\n\n\t\tif (this.table.modExists(\"mutator\")) {\n\n\t\t\tdata = this.table.modules.mutator.transformRow(data, \"data\");\n\t\t}\n\n\t\tthis.data = data;\n\n\t\tif (this.table.options.reactiveData && this.table.modExists(\"reactiveData\", true)) {\n\n\t\t\tthis.table.modules.reactiveData.watchRow(this);\n\t\t}\n\t};\n\n\t//update the rows data\n\n\tRow.prototype.updateData = function (updatedData) {\n\t\tvar _this15 = this;\n\n\t\tvar visible = Tabulator.prototype.helpers.elVisible(this.element),\n\t\t    tempData = {},\n\t\t    newRowData;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tif (typeof updatedData === \"string\") {\n\n\t\t\t\tupdatedData = JSON.parse(updatedData);\n\t\t\t}\n\n\t\t\tif (_this15.table.options.reactiveData && _this15.table.modExists(\"reactiveData\", true)) {\n\n\t\t\t\t_this15.table.modules.reactiveData.block();\n\t\t\t}\n\n\t\t\t//mutate incomming data if needed\n\n\t\t\tif (_this15.table.modExists(\"mutator\")) {\n\n\t\t\t\ttempData = Object.assign(tempData, _this15.data);\n\n\t\t\t\ttempData = Object.assign(tempData, updatedData);\n\n\t\t\t\tnewRowData = _this15.table.modules.mutator.transformRow(tempData, \"data\", updatedData);\n\t\t\t} else {\n\n\t\t\t\tnewRowData = updatedData;\n\t\t\t}\n\n\t\t\t//set data\n\n\t\t\tfor (var attrname in newRowData) {\n\n\t\t\t\t_this15.data[attrname] = newRowData[attrname];\n\t\t\t}\n\n\t\t\tif (_this15.table.options.reactiveData && _this15.table.modExists(\"reactiveData\", true)) {\n\n\t\t\t\t_this15.table.modules.reactiveData.unblock();\n\t\t\t}\n\n\t\t\t//update affected cells only\n\n\t\t\tfor (var attrname in updatedData) {\n\n\t\t\t\tvar columns = _this15.table.columnManager.getColumnsByFieldRoot(attrname);\n\n\t\t\t\tcolumns.forEach(function (column) {\n\n\t\t\t\t\tvar cell = _this15.getCell(column.getField());\n\n\t\t\t\t\tif (cell) {\n\n\t\t\t\t\t\tvar value = column.getFieldValue(newRowData);\n\n\t\t\t\t\t\tif (cell.getValue() != value) {\n\n\t\t\t\t\t\t\tcell.setValueProcessData(value);\n\n\t\t\t\t\t\t\tif (visible) {\n\n\t\t\t\t\t\t\t\tcell.cellRendered();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t//Partial reinitialization if visible\n\n\t\t\tif (visible) {\n\n\t\t\t\t_this15.normalizeHeight(true);\n\n\t\t\t\tif (_this15.table.options.rowFormatter) {\n\n\t\t\t\t\t_this15.table.options.rowFormatter(_this15.getComponent());\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\t_this15.initialized = false;\n\n\t\t\t\t_this15.height = 0;\n\n\t\t\t\t_this15.heightStyled = \"\";\n\t\t\t}\n\n\t\t\tif (_this15.table.options.dataTree !== false && _this15.table.modExists(\"dataTree\") && _this15.table.modules.dataTree.redrawNeeded(updatedData)) {\n\n\t\t\t\t_this15.table.modules.dataTree.initializeRow(_this15);\n\n\t\t\t\t_this15.table.modules.dataTree.layoutRow(_this15);\n\n\t\t\t\t_this15.table.rowManager.refreshActiveData(\"tree\", false, true);\n\t\t\t}\n\n\t\t\t//this.reinitialize();\n\n\n\t\t\t_this15.table.options.rowUpdated.call(_this15.table, _this15.getComponent());\n\n\t\t\tresolve();\n\t\t});\n\t};\n\n\tRow.prototype.getData = function (transform) {\n\n\t\tvar self = this;\n\n\t\tif (transform) {\n\n\t\t\tif (self.table.modExists(\"accessor\")) {\n\n\t\t\t\treturn self.table.modules.accessor.transformRow(self.data, transform);\n\t\t\t}\n\t\t} else {\n\n\t\t\treturn this.data;\n\t\t}\n\t};\n\n\tRow.prototype.getCell = function (column) {\n\n\t\tvar match = false;\n\n\t\tcolumn = this.table.columnManager.findColumn(column);\n\n\t\tmatch = this.cells.find(function (cell) {\n\n\t\t\treturn cell.column === column;\n\t\t});\n\n\t\treturn match;\n\t};\n\n\tRow.prototype.getCellIndex = function (findCell) {\n\n\t\treturn this.cells.findIndex(function (cell) {\n\n\t\t\treturn cell === findCell;\n\t\t});\n\t};\n\n\tRow.prototype.findNextEditableCell = function (index) {\n\n\t\tvar nextCell = false;\n\n\t\tif (index < this.cells.length - 1) {\n\n\t\t\tfor (var i = index + 1; i < this.cells.length; i++) {\n\n\t\t\t\tvar cell = this.cells[i];\n\n\t\t\t\tif (cell.column.modules.edit && Tabulator.prototype.helpers.elVisible(cell.getElement())) {\n\n\t\t\t\t\tvar allowEdit = true;\n\n\t\t\t\t\tif (typeof cell.column.modules.edit.check == \"function\") {\n\n\t\t\t\t\t\tallowEdit = cell.column.modules.edit.check(cell.getComponent());\n\t\t\t\t\t}\n\n\t\t\t\t\tif (allowEdit) {\n\n\t\t\t\t\t\tnextCell = cell;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn nextCell;\n\t};\n\n\tRow.prototype.findPrevEditableCell = function (index) {\n\n\t\tvar prevCell = false;\n\n\t\tif (index > 0) {\n\n\t\t\tfor (var i = index - 1; i >= 0; i--) {\n\n\t\t\t\tvar cell = this.cells[i],\n\t\t\t\t    allowEdit = true;\n\n\t\t\t\tif (cell.column.modules.edit && Tabulator.prototype.helpers.elVisible(cell.getElement())) {\n\n\t\t\t\t\tif (typeof cell.column.modules.edit.check == \"function\") {\n\n\t\t\t\t\t\tallowEdit = cell.column.modules.edit.check(cell.getComponent());\n\t\t\t\t\t}\n\n\t\t\t\t\tif (allowEdit) {\n\n\t\t\t\t\t\tprevCell = cell;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn prevCell;\n\t};\n\n\tRow.prototype.getCells = function () {\n\n\t\treturn this.cells;\n\t};\n\n\tRow.prototype.nextRow = function () {\n\n\t\tvar row = this.table.rowManager.nextDisplayRow(this, true);\n\n\t\treturn row || false;\n\t};\n\n\tRow.prototype.prevRow = function () {\n\n\t\tvar row = this.table.rowManager.prevDisplayRow(this, true);\n\n\t\treturn row || false;\n\t};\n\n\tRow.prototype.moveToRow = function (to, before) {\n\n\t\tvar toRow = this.table.rowManager.findRow(to);\n\n\t\tif (toRow) {\n\n\t\t\tthis.table.rowManager.moveRowActual(this, toRow, !before);\n\n\t\t\tthis.table.rowManager.refreshActiveData(\"display\", false, true);\n\t\t} else {\n\n\t\t\tconsole.warn(\"Move Error - No matching row found:\", to);\n\t\t}\n\t};\n\n\tRow.prototype.validate = function () {\n\n\t\tvar invalid = [];\n\n\t\tthis.cells.forEach(function (cell) {\n\n\t\t\tif (!cell.validate()) {\n\n\t\t\t\tinvalid.push(cell.getComponent());\n\t\t\t}\n\t\t});\n\n\t\treturn invalid.length ? invalid : true;\n\t};\n\n\t///////////////////// Actions  /////////////////////\n\n\n\tRow.prototype.delete = function () {\n\t\tvar _this16 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tvar index, rows;\n\n\t\t\tif (_this16.table.options.history && _this16.table.modExists(\"history\")) {\n\n\t\t\t\tif (_this16.table.options.groupBy && _this16.table.modExists(\"groupRows\")) {\n\n\t\t\t\t\trows = _this16.getGroup().rows;\n\n\t\t\t\t\tindex = rows.indexOf(_this16);\n\n\t\t\t\t\tif (index) {\n\n\t\t\t\t\t\tindex = rows[index - 1];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\tindex = _this16.table.rowManager.getRowIndex(_this16);\n\n\t\t\t\t\tif (index) {\n\n\t\t\t\t\t\tindex = _this16.table.rowManager.rows[index - 1];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t_this16.table.modules.history.action(\"rowDelete\", _this16, { data: _this16.getData(), pos: !index, index: index });\n\t\t\t}\n\n\t\t\t_this16.deleteActual();\n\n\t\t\tresolve();\n\t\t});\n\t};\n\n\tRow.prototype.deleteActual = function (blockRedraw) {\n\n\t\tvar index = this.table.rowManager.getRowIndex(this);\n\n\t\tthis.detatchModules();\n\n\t\t// if(this.table.options.dataTree && this.table.modExists(\"dataTree\")){\n\n\t\t// \tthis.table.modules.dataTree.collapseRow(this, true);\n\n\t\t// }\n\n\n\t\t//remove any reactive data watchers from row object\n\n\t\tif (this.table.options.reactiveData && this.table.modExists(\"reactiveData\", true)) {}\n\n\t\t// this.table.modules.reactiveData.unwatchRow(this);\n\n\t\t//remove from group\n\n\t\tif (this.modules.group) {\n\n\t\t\tthis.modules.group.removeRow(this);\n\t\t}\n\n\t\tthis.table.rowManager.deleteRow(this, blockRedraw);\n\n\t\tthis.deleteCells();\n\n\t\tthis.initialized = false;\n\n\t\tthis.heightInitialized = false;\n\n\t\tif (this.table.options.dataTree && this.table.modExists(\"dataTree\", true)) {\n\n\t\t\tthis.table.modules.dataTree.rowDelete(this);\n\t\t}\n\n\t\t//recalc column calculations if present\n\n\t\tif (this.table.modExists(\"columnCalcs\")) {\n\n\t\t\tif (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n\n\t\t\t\tthis.table.modules.columnCalcs.recalcRowGroup(this);\n\t\t\t} else {\n\n\t\t\t\tthis.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\n\t\t\t}\n\t\t}\n\t};\n\n\tRow.prototype.detatchModules = function () {\n\n\t\t//deselect row if it is selected\n\n\t\tif (this.table.modExists(\"selectRow\")) {\n\n\t\t\tthis.table.modules.selectRow._deselectRow(this, true);\n\t\t}\n\n\t\t//cancel edit if row is currently being edited\n\n\t\tif (this.table.modExists(\"edit\")) {\n\n\t\t\tif (this.table.modules.edit.currentCell.row === this) {\n\n\t\t\t\tthis.table.modules.edit.cancelEdit();\n\t\t\t}\n\t\t}\n\n\t\tif (this.table.modExists(\"frozenRows\")) {\n\n\t\t\tthis.table.modules.frozenRows.detachRow(this);\n\t\t}\n\t};\n\n\tRow.prototype.deleteCells = function () {\n\n\t\tvar cellCount = this.cells.length;\n\n\t\tfor (var _i5 = 0; _i5 < cellCount; _i5++) {\n\n\t\t\tthis.cells[0].delete();\n\t\t}\n\t};\n\n\tRow.prototype.wipe = function () {\n\n\t\tthis.detatchModules();\n\n\t\tthis.deleteCells();\n\n\t\twhile (this.element.firstChild) {\n\t\t\tthis.element.removeChild(this.element.firstChild);\n\t\t}this.element = false;\n\n\t\tthis.modules = {};\n\n\t\tif (this.element.parentNode) {\n\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\t};\n\n\tRow.prototype.getGroup = function () {\n\n\t\treturn this.modules.group || false;\n\t};\n\n\t//////////////// Object Generation /////////////////\n\n\tRow.prototype.getComponent = function () {\n\n\t\tif (!this.component) {\n\n\t\t\tthis.component = new RowComponent(this);\n\t\t}\n\n\t\treturn this.component;\n\t};\n\n\t//public row object\n\n\tvar CellComponent = function CellComponent(cell) {\n\n\t\tthis._cell = cell;\n\t};\n\n\tCellComponent.prototype.getValue = function () {\n\n\t\treturn this._cell.getValue();\n\t};\n\n\tCellComponent.prototype.getOldValue = function () {\n\n\t\treturn this._cell.getOldValue();\n\t};\n\n\tCellComponent.prototype.getElement = function () {\n\n\t\treturn this._cell.getElement();\n\t};\n\n\tCellComponent.prototype.getRow = function () {\n\n\t\treturn this._cell.row.getComponent();\n\t};\n\n\tCellComponent.prototype.getData = function () {\n\n\t\treturn this._cell.row.getData();\n\t};\n\n\tCellComponent.prototype.getField = function () {\n\n\t\treturn this._cell.column.getField();\n\t};\n\n\tCellComponent.prototype.getColumn = function () {\n\n\t\treturn this._cell.column.getComponent();\n\t};\n\n\tCellComponent.prototype.setValue = function (value, mutate) {\n\n\t\tif (typeof mutate == \"undefined\") {\n\n\t\t\tmutate = true;\n\t\t}\n\n\t\tthis._cell.setValue(value, mutate);\n\t};\n\n\tCellComponent.prototype.restoreOldValue = function () {\n\n\t\tthis._cell.setValueActual(this._cell.getOldValue());\n\t};\n\n\tCellComponent.prototype.edit = function (force) {\n\n\t\treturn this._cell.edit(force);\n\t};\n\n\tCellComponent.prototype.cancelEdit = function () {\n\n\t\tthis._cell.cancelEdit();\n\t};\n\n\tCellComponent.prototype.isEdited = function () {\n\n\t\treturn !!this._cell.modules.edit && this._cell.modules.edit.edited;\n\t};\n\n\tCellComponent.prototype.clearEdited = function () {\n\n\t\tif (self.table.modExists(\"edit\", true)) {\n\n\t\t\tthis._cell.table.modules.edit.clearEdited(this._cell);\n\t\t}\n\t};\n\n\tCellComponent.prototype.isValid = function () {\n\n\t\treturn this._cell.modules.validate ? !this._cell.modules.validate.invalid : true;\n\t};\n\n\tCellComponent.prototype.validate = function () {\n\n\t\treturn this._cell.validate();\n\t};\n\n\tCellComponent.prototype.clearValidation = function () {\n\n\t\tif (self.table.modExists(\"validate\", true)) {\n\n\t\t\tthis._cell.table.modules.validate.clearValidation(this._cell);\n\t\t}\n\t};\n\n\tCellComponent.prototype.nav = function () {\n\n\t\treturn this._cell.nav();\n\t};\n\n\tCellComponent.prototype.checkHeight = function () {\n\n\t\tthis._cell.checkHeight();\n\t};\n\n\tCellComponent.prototype.getTable = function () {\n\n\t\treturn this._cell.table;\n\t};\n\n\tCellComponent.prototype._getSelf = function () {\n\n\t\treturn this._cell;\n\t};\n\n\tvar Cell = function Cell(column, row) {\n\n\t\tthis.table = column.table;\n\n\t\tthis.column = column;\n\n\t\tthis.row = row;\n\n\t\tthis.element = null;\n\n\t\tthis.value = null;\n\n\t\tthis.oldValue = null;\n\n\t\tthis.modules = {};\n\n\t\tthis.height = null;\n\n\t\tthis.width = null;\n\n\t\tthis.minWidth = null;\n\n\t\tthis.component = null;\n\n\t\tthis.build();\n\t};\n\n\t//////////////// Setup Functions /////////////////\n\n\n\t//generate element\n\n\tCell.prototype.build = function () {\n\n\t\tthis.generateElement();\n\n\t\tthis.setWidth();\n\n\t\tthis._configureCell();\n\n\t\tthis.setValueActual(this.column.getFieldValue(this.row.data));\n\t};\n\n\tCell.prototype.generateElement = function () {\n\n\t\tthis.element = document.createElement('div');\n\n\t\tthis.element.className = \"tabulator-cell\";\n\n\t\tthis.element.setAttribute(\"role\", \"gridcell\");\n\n\t\tthis.element = this.element;\n\t};\n\n\tCell.prototype._configureCell = function () {\n\n\t\tvar self = this,\n\t\t    cellEvents = self.column.cellEvents,\n\t\t    element = self.element,\n\t\t    field = this.column.getField(),\n\t\t    vertAligns = {\n\n\t\t\ttop: \"flex-start\",\n\n\t\t\tbottom: \"flex-end\",\n\n\t\t\tmiddle: \"center\"\n\n\t\t},\n\t\t    hozAligns = {\n\n\t\t\tleft: \"flex-start\",\n\n\t\t\tright: \"flex-end\",\n\n\t\t\tcenter: \"center\"\n\n\t\t};\n\n\t\t//set text alignment\n\n\t\telement.style.textAlign = self.column.hozAlign;\n\n\t\tif (self.column.vertAlign) {\n\n\t\t\telement.style.display = \"inline-flex\";\n\n\t\t\telement.style.alignItems = vertAligns[self.column.vertAlign] || \"\";\n\n\t\t\tif (self.column.hozAlign) {\n\n\t\t\t\telement.style.justifyContent = hozAligns[self.column.hozAlign] || \"\";\n\t\t\t}\n\t\t}\n\n\t\tif (field) {\n\n\t\t\telement.setAttribute(\"tabulator-field\", field);\n\t\t}\n\n\t\t//add class to cell if needed\n\n\t\tif (self.column.definition.cssClass) {\n\n\t\t\tvar classNames = self.column.definition.cssClass.split(\" \");\n\n\t\t\tclassNames.forEach(function (className) {\n\n\t\t\t\telement.classList.add(className);\n\t\t\t});\n\t\t}\n\n\t\t//update tooltip on mouse enter\n\n\t\tif (this.table.options.tooltipGenerationMode === \"hover\") {\n\n\t\t\telement.addEventListener(\"mouseenter\", function (e) {\n\n\t\t\t\tself._generateTooltip();\n\t\t\t});\n\t\t}\n\n\t\tself._bindClickEvents(cellEvents);\n\n\t\tself._bindTouchEvents(cellEvents);\n\n\t\tself._bindMouseEvents(cellEvents);\n\n\t\tif (self.column.modules.edit) {\n\n\t\t\tself.table.modules.edit.bindEditor(self);\n\t\t}\n\n\t\tif (self.column.definition.rowHandle && self.table.options.movableRows !== false && self.table.modExists(\"moveRow\")) {\n\n\t\t\tself.table.modules.moveRow.initializeCell(self);\n\t\t}\n\n\t\t//hide cell if not visible\n\n\t\tif (!self.column.visible) {\n\n\t\t\tself.hide();\n\t\t}\n\t};\n\n\tCell.prototype._bindClickEvents = function (cellEvents) {\n\n\t\tvar self = this,\n\t\t    element = self.element;\n\n\t\t//set event bindings\n\n\t\tif (cellEvents.cellClick || self.table.options.cellClick) {\n\n\t\t\telement.addEventListener(\"click\", function (e) {\n\n\t\t\t\tvar component = self.getComponent();\n\n\t\t\t\tif (cellEvents.cellClick) {\n\n\t\t\t\t\tcellEvents.cellClick.call(self.table, e, component);\n\t\t\t\t}\n\n\t\t\t\tif (self.table.options.cellClick) {\n\n\t\t\t\t\tself.table.options.cellClick.call(self.table, e, component);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (cellEvents.cellDblClick || this.table.options.cellDblClick) {\n\n\t\t\telement.addEventListener(\"dblclick\", function (e) {\n\n\t\t\t\tvar component = self.getComponent();\n\n\t\t\t\tif (cellEvents.cellDblClick) {\n\n\t\t\t\t\tcellEvents.cellDblClick.call(self.table, e, component);\n\t\t\t\t}\n\n\t\t\t\tif (self.table.options.cellDblClick) {\n\n\t\t\t\t\tself.table.options.cellDblClick.call(self.table, e, component);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\n\t\t\telement.addEventListener(\"dblclick\", function (e) {\n\n\t\t\t\tif (self.table.modExists(\"edit\")) {\n\n\t\t\t\t\tif (self.table.modules.edit.currentCell === self) {\n\n\t\t\t\t\t\treturn; //prevent instant selection of editor content\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\te.preventDefault();\n\n\t\t\t\ttry {\n\n\t\t\t\t\tif (document.selection) {\n\t\t\t\t\t\t// IE\n\n\t\t\t\t\t\tvar range = document.body.createTextRange();\n\n\t\t\t\t\t\trange.moveToElementText(self.element);\n\n\t\t\t\t\t\trange.select();\n\t\t\t\t\t} else if (window.getSelection) {\n\n\t\t\t\t\t\tvar range = document.createRange();\n\n\t\t\t\t\t\trange.selectNode(self.element);\n\n\t\t\t\t\t\twindow.getSelection().removeAllRanges();\n\n\t\t\t\t\t\twindow.getSelection().addRange(range);\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t});\n\t\t}\n\n\t\tif (cellEvents.cellContext || this.table.options.cellContext) {\n\n\t\t\telement.addEventListener(\"contextmenu\", function (e) {\n\n\t\t\t\tvar component = self.getComponent();\n\n\t\t\t\tif (cellEvents.cellContext) {\n\n\t\t\t\t\tcellEvents.cellContext.call(self.table, e, component);\n\t\t\t\t}\n\n\t\t\t\tif (self.table.options.cellContext) {\n\n\t\t\t\t\tself.table.options.cellContext.call(self.table, e, component);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\tCell.prototype._bindMouseEvents = function (cellEvents) {\n\n\t\tvar self = this,\n\t\t    element = self.element;\n\n\t\tif (cellEvents.cellMouseEnter || self.table.options.cellMouseEnter) {\n\n\t\t\telement.addEventListener(\"mouseenter\", function (e) {\n\n\t\t\t\tvar component = self.getComponent();\n\n\t\t\t\tif (cellEvents.cellMouseEnter) {\n\n\t\t\t\t\tcellEvents.cellMouseEnter.call(self.table, e, component);\n\t\t\t\t}\n\n\t\t\t\tif (self.table.options.cellMouseEnter) {\n\n\t\t\t\t\tself.table.options.cellMouseEnter.call(self.table, e, component);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (cellEvents.cellMouseLeave || self.table.options.cellMouseLeave) {\n\n\t\t\telement.addEventListener(\"mouseleave\", function (e) {\n\n\t\t\t\tvar component = self.getComponent();\n\n\t\t\t\tif (cellEvents.cellMouseLeave) {\n\n\t\t\t\t\tcellEvents.cellMouseLeave.call(self.table, e, component);\n\t\t\t\t}\n\n\t\t\t\tif (self.table.options.cellMouseLeave) {\n\n\t\t\t\t\tself.table.options.cellMouseLeave.call(self.table, e, component);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (cellEvents.cellMouseOver || self.table.options.cellMouseOver) {\n\n\t\t\telement.addEventListener(\"mouseover\", function (e) {\n\n\t\t\t\tvar component = self.getComponent();\n\n\t\t\t\tif (cellEvents.cellMouseOver) {\n\n\t\t\t\t\tcellEvents.cellMouseOver.call(self.table, e, component);\n\t\t\t\t}\n\n\t\t\t\tif (self.table.options.cellMouseOver) {\n\n\t\t\t\t\tself.table.options.cellMouseOver.call(self.table, e, component);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (cellEvents.cellMouseOut || self.table.options.cellMouseOut) {\n\n\t\t\telement.addEventListener(\"mouseout\", function (e) {\n\n\t\t\t\tvar component = self.getComponent();\n\n\t\t\t\tif (cellEvents.cellMouseOut) {\n\n\t\t\t\t\tcellEvents.cellMouseOut.call(self.table, e, component);\n\t\t\t\t}\n\n\t\t\t\tif (self.table.options.cellMouseOut) {\n\n\t\t\t\t\tself.table.options.cellMouseOut.call(self.table, e, component);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (cellEvents.cellMouseMove || self.table.options.cellMouseMove) {\n\n\t\t\telement.addEventListener(\"mousemove\", function (e) {\n\n\t\t\t\tvar component = self.getComponent();\n\n\t\t\t\tif (cellEvents.cellMouseMove) {\n\n\t\t\t\t\tcellEvents.cellMouseMove.call(self.table, e, component);\n\t\t\t\t}\n\n\t\t\t\tif (self.table.options.cellMouseMove) {\n\n\t\t\t\t\tself.table.options.cellMouseMove.call(self.table, e, component);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\tCell.prototype._bindTouchEvents = function (cellEvents) {\n\n\t\tvar self = this,\n\t\t    element = self.element,\n\t\t    dblTap,\n\t\t    tapHold,\n\t\t    tap;\n\n\t\tif (cellEvents.cellTap || this.table.options.cellTap) {\n\n\t\t\ttap = false;\n\n\t\t\telement.addEventListener(\"touchstart\", function (e) {\n\n\t\t\t\ttap = true;\n\t\t\t}, { passive: true });\n\n\t\t\telement.addEventListener(\"touchend\", function (e) {\n\n\t\t\t\tif (tap) {\n\n\t\t\t\t\tvar component = self.getComponent();\n\n\t\t\t\t\tif (cellEvents.cellTap) {\n\n\t\t\t\t\t\tcellEvents.cellTap.call(self.table, e, component);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (self.table.options.cellTap) {\n\n\t\t\t\t\t\tself.table.options.cellTap.call(self.table, e, component);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ttap = false;\n\t\t\t});\n\t\t}\n\n\t\tif (cellEvents.cellDblTap || this.table.options.cellDblTap) {\n\n\t\t\tdblTap = null;\n\n\t\t\telement.addEventListener(\"touchend\", function (e) {\n\n\t\t\t\tif (dblTap) {\n\n\t\t\t\t\tclearTimeout(dblTap);\n\n\t\t\t\t\tdblTap = null;\n\n\t\t\t\t\tvar component = self.getComponent();\n\n\t\t\t\t\tif (cellEvents.cellDblTap) {\n\n\t\t\t\t\t\tcellEvents.cellDblTap.call(self.table, e, component);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (self.table.options.cellDblTap) {\n\n\t\t\t\t\t\tself.table.options.cellDblTap.call(self.table, e, component);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\tdblTap = setTimeout(function () {\n\n\t\t\t\t\t\tclearTimeout(dblTap);\n\n\t\t\t\t\t\tdblTap = null;\n\t\t\t\t\t}, 300);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (cellEvents.cellTapHold || this.table.options.cellTapHold) {\n\n\t\t\ttapHold = null;\n\n\t\t\telement.addEventListener(\"touchstart\", function (e) {\n\n\t\t\t\tclearTimeout(tapHold);\n\n\t\t\t\ttapHold = setTimeout(function () {\n\n\t\t\t\t\tclearTimeout(tapHold);\n\n\t\t\t\t\ttapHold = null;\n\n\t\t\t\t\ttap = false;\n\n\t\t\t\t\tvar component = self.getComponent();\n\n\t\t\t\t\tif (cellEvents.cellTapHold) {\n\n\t\t\t\t\t\tcellEvents.cellTapHold.call(self.table, e, component);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (self.table.options.cellTapHold) {\n\n\t\t\t\t\t\tself.table.options.cellTapHold.call(self.table, e, component);\n\t\t\t\t\t}\n\t\t\t\t}, 1000);\n\t\t\t}, { passive: true });\n\n\t\t\telement.addEventListener(\"touchend\", function (e) {\n\n\t\t\t\tclearTimeout(tapHold);\n\n\t\t\t\ttapHold = null;\n\t\t\t});\n\t\t}\n\t};\n\n\t//generate cell contents\n\n\tCell.prototype._generateContents = function () {\n\n\t\tvar val;\n\n\t\tif (this.table.modExists(\"format\")) {\n\n\t\t\tval = this.table.modules.format.formatValue(this);\n\t\t} else {\n\n\t\t\tval = this.element.innerHTML = this.value;\n\t\t}\n\n\t\tswitch (typeof val === 'undefined' ? 'undefined' : _typeof(val)) {\n\n\t\t\tcase \"object\":\n\n\t\t\t\tif (val instanceof Node) {\n\n\t\t\t\t\t//clear previous cell contents\n\n\t\t\t\t\twhile (this.element.firstChild) {\n\t\t\t\t\t\tthis.element.removeChild(this.element.firstChild);\n\t\t\t\t\t}this.element.appendChild(val);\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.element.innerHTML = \"\";\n\n\t\t\t\t\tif (val != null) {\n\n\t\t\t\t\t\tconsole.warn(\"Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", val);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase \"undefined\":\n\n\t\t\tcase \"null\":\n\n\t\t\t\tthis.element.innerHTML = \"\";\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tthis.element.innerHTML = val;\n\n\t\t}\n\t};\n\n\tCell.prototype.cellRendered = function () {\n\n\t\tif (this.table.modExists(\"format\") && this.table.modules.format.cellRendered) {\n\n\t\t\tthis.table.modules.format.cellRendered(this);\n\t\t}\n\t};\n\n\t//generate tooltip text\n\n\tCell.prototype._generateTooltip = function () {\n\n\t\tvar tooltip = this.column.tooltip;\n\n\t\tif (tooltip) {\n\n\t\t\tif (tooltip === true) {\n\n\t\t\t\ttooltip = this.value;\n\t\t\t} else if (typeof tooltip == \"function\") {\n\n\t\t\t\ttooltip = tooltip(this.getComponent());\n\n\t\t\t\tif (tooltip === false) {\n\n\t\t\t\t\ttooltip = \"\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (typeof tooltip === \"undefined\") {\n\n\t\t\t\ttooltip = \"\";\n\t\t\t}\n\n\t\t\tthis.element.setAttribute(\"title\", tooltip);\n\t\t} else {\n\n\t\t\tthis.element.setAttribute(\"title\", \"\");\n\t\t}\n\t};\n\n\t//////////////////// Getters ////////////////////\n\n\tCell.prototype.getElement = function () {\n\n\t\treturn this.element;\n\t};\n\n\tCell.prototype.getValue = function () {\n\n\t\treturn this.value;\n\t};\n\n\tCell.prototype.getOldValue = function () {\n\n\t\treturn this.oldValue;\n\t};\n\n\t//////////////////// Actions ////////////////////\n\n\n\tCell.prototype.setValue = function (value, mutate) {\n\n\t\tvar changed = this.setValueProcessData(value, mutate),\n\t\t    component;\n\n\t\tif (changed) {\n\n\t\t\tif (this.table.options.history && this.table.modExists(\"history\")) {\n\n\t\t\t\tthis.table.modules.history.action(\"cellEdit\", this, { oldValue: this.oldValue, newValue: this.value });\n\t\t\t}\n\n\t\t\tcomponent = this.getComponent();\n\n\t\t\tif (this.column.cellEvents.cellEdited) {\n\n\t\t\t\tthis.column.cellEvents.cellEdited.call(this.table, component);\n\t\t\t}\n\n\t\t\tthis.cellRendered();\n\n\t\t\tthis.table.options.cellEdited.call(this.table, component);\n\n\t\t\tthis.table.options.dataEdited.call(this.table, this.table.rowManager.getData());\n\t\t}\n\t};\n\n\tCell.prototype.setValueProcessData = function (value, mutate) {\n\n\t\tvar changed = false;\n\n\t\tif (this.value != value) {\n\n\t\t\tchanged = true;\n\n\t\t\tif (mutate) {\n\n\t\t\t\tif (this.column.modules.mutate) {\n\n\t\t\t\t\tvalue = this.table.modules.mutator.transformCell(this, value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.setValueActual(value);\n\n\t\tif (changed && this.table.modExists(\"columnCalcs\")) {\n\n\t\t\tif (this.column.definition.topCalc || this.column.definition.bottomCalc) {\n\n\t\t\t\tif (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n\n\t\t\t\t\tif (this.table.options.columnCalcs == \"table\" || this.table.options.columnCalcs == \"both\") {\n\n\t\t\t\t\t\tthis.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.table.options.columnCalcs != \"table\") {\n\n\t\t\t\t\t\tthis.table.modules.columnCalcs.recalcRowGroup(this.row);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn changed;\n\t};\n\n\tCell.prototype.setValueActual = function (value) {\n\n\t\tthis.oldValue = this.value;\n\n\t\tthis.value = value;\n\n\t\tif (this.table.options.reactiveData && this.table.modExists(\"reactiveData\")) {\n\n\t\t\tthis.table.modules.reactiveData.block();\n\t\t}\n\n\t\tthis.column.setFieldValue(this.row.data, value);\n\n\t\tif (this.table.options.reactiveData && this.table.modExists(\"reactiveData\")) {\n\n\t\t\tthis.table.modules.reactiveData.unblock();\n\t\t}\n\n\t\tthis._generateContents();\n\n\t\tthis._generateTooltip();\n\n\t\t//set resizable handles\n\n\t\tif (this.table.options.resizableColumns && this.table.modExists(\"resizeColumns\")) {\n\n\t\t\tthis.table.modules.resizeColumns.initializeColumn(\"cell\", this.column, this.element);\n\t\t}\n\n\t\t//set column menu\n\n\t\tif (this.column.definition.contextMenu && this.table.modExists(\"menu\")) {\n\n\t\t\tthis.table.modules.menu.initializeCell(this);\n\t\t}\n\n\t\t//handle frozen cells\n\n\t\tif (this.table.modExists(\"frozenColumns\")) {\n\n\t\t\tthis.table.modules.frozenColumns.layoutElement(this.element, this.column);\n\t\t}\n\t};\n\n\tCell.prototype.setWidth = function () {\n\n\t\tthis.width = this.column.width;\n\n\t\tthis.element.style.width = this.column.widthStyled;\n\t};\n\n\tCell.prototype.clearWidth = function () {\n\n\t\tthis.width = \"\";\n\n\t\tthis.element.style.width = \"\";\n\t};\n\n\tCell.prototype.getWidth = function () {\n\n\t\treturn this.width || this.element.offsetWidth;\n\t};\n\n\tCell.prototype.setMinWidth = function () {\n\n\t\tthis.minWidth = this.column.minWidth;\n\n\t\tthis.element.style.minWidth = this.column.minWidthStyled;\n\t};\n\n\tCell.prototype.checkHeight = function () {\n\n\t\t// var height = this.element.css(\"height\");\n\n\t\tthis.row.reinitializeHeight();\n\t};\n\n\tCell.prototype.clearHeight = function () {\n\n\t\tthis.element.style.height = \"\";\n\n\t\tthis.height = null;\n\t};\n\n\tCell.prototype.setHeight = function () {\n\n\t\tthis.height = this.row.height;\n\n\t\tthis.element.style.height = this.row.heightStyled;\n\t};\n\n\tCell.prototype.getHeight = function () {\n\n\t\treturn this.height || this.element.offsetHeight;\n\t};\n\n\tCell.prototype.show = function () {\n\n\t\tthis.element.style.display = \"\";\n\t};\n\n\tCell.prototype.hide = function () {\n\n\t\tthis.element.style.display = \"none\";\n\t};\n\n\tCell.prototype.edit = function (force) {\n\n\t\tif (this.table.modExists(\"edit\", true)) {\n\n\t\t\treturn this.table.modules.edit.editCell(this, force);\n\t\t}\n\t};\n\n\tCell.prototype.cancelEdit = function () {\n\n\t\tif (this.table.modExists(\"edit\", true)) {\n\n\t\t\tvar editing = this.table.modules.edit.getCurrentCell();\n\n\t\t\tif (editing && editing._getSelf() === this) {\n\n\t\t\t\tthis.table.modules.edit.cancelEdit();\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Cancel Editor Error - This cell is not currently being edited \");\n\t\t\t}\n\t\t}\n\t};\n\n\tCell.prototype.validate = function () {\n\n\t\tif (this.column.modules.validate && this.table.modExists(\"validate\", true)) {\n\n\t\t\tvar valid = this.table.modules.validate.validate(this.column.modules.validate, this, this.getValue());\n\n\t\t\treturn valid === true;\n\t\t} else {\n\n\t\t\treturn true;\n\t\t}\n\t};\n\n\tCell.prototype.delete = function () {\n\n\t\tif (!this.table.rowManager.redrawBlock && this.element.parentNode) {\n\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\n\t\tif (this.modules.validate && this.modules.validate.invalid) {\n\n\t\t\tthis.table.modules.validate.clearValidation(this);\n\t\t}\n\n\t\tif (this.modules.edit && this.modules.edit.edited) {\n\n\t\t\tthis.table.modules.edit.clearEdited(this);\n\t\t}\n\n\t\tthis.element = false;\n\n\t\tthis.column.deleteCell(this);\n\n\t\tthis.row.deleteCell(this);\n\n\t\tthis.calcs = {};\n\t};\n\n\t//////////////// Navigation /////////////////\n\n\n\tCell.prototype.nav = function () {\n\n\t\tvar self = this,\n\t\t    nextCell = false,\n\t\t    index = this.row.getCellIndex(this);\n\n\t\treturn {\n\n\t\t\tnext: function next() {\n\n\t\t\t\tvar nextCell = this.right(),\n\t\t\t\t    nextRow;\n\n\t\t\t\tif (!nextCell) {\n\n\t\t\t\t\tnextRow = self.table.rowManager.nextDisplayRow(self.row, true);\n\n\t\t\t\t\tif (nextRow) {\n\n\t\t\t\t\t\tnextCell = nextRow.findNextEditableCell(-1);\n\n\t\t\t\t\t\tif (nextCell) {\n\n\t\t\t\t\t\t\tnextCell.edit();\n\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tprev: function prev() {\n\n\t\t\t\tvar nextCell = this.left(),\n\t\t\t\t    prevRow;\n\n\t\t\t\tif (!nextCell) {\n\n\t\t\t\t\tprevRow = self.table.rowManager.prevDisplayRow(self.row, true);\n\n\t\t\t\t\tif (prevRow) {\n\n\t\t\t\t\t\tnextCell = prevRow.findPrevEditableCell(prevRow.cells.length);\n\n\t\t\t\t\t\tif (nextCell) {\n\n\t\t\t\t\t\t\tnextCell.edit();\n\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tleft: function left() {\n\n\t\t\t\tnextCell = self.row.findPrevEditableCell(index);\n\n\t\t\t\tif (nextCell) {\n\n\t\t\t\t\tnextCell.edit();\n\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tright: function right() {\n\n\t\t\t\tnextCell = self.row.findNextEditableCell(index);\n\n\t\t\t\tif (nextCell) {\n\n\t\t\t\t\tnextCell.edit();\n\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tup: function up() {\n\n\t\t\t\tvar nextRow = self.table.rowManager.prevDisplayRow(self.row, true);\n\n\t\t\t\tif (nextRow) {\n\n\t\t\t\t\tnextRow.cells[index].edit();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdown: function down() {\n\n\t\t\t\tvar nextRow = self.table.rowManager.nextDisplayRow(self.row, true);\n\n\t\t\t\tif (nextRow) {\n\n\t\t\t\t\tnextRow.cells[index].edit();\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\t};\n\n\tCell.prototype.getIndex = function () {\n\n\t\tthis.row.getCellIndex(this);\n\t};\n\n\t//////////////// Object Generation /////////////////\n\n\tCell.prototype.getComponent = function () {\n\n\t\tif (!this.component) {\n\n\t\t\tthis.component = new CellComponent(this);\n\t\t}\n\n\t\treturn this.component;\n\t};\n\n\tvar FooterManager = function FooterManager(table) {\n\n\t\tthis.table = table;\n\n\t\tthis.active = false;\n\n\t\tthis.element = this.createElement(); //containing element\n\n\t\tthis.external = false;\n\n\t\tthis.links = [];\n\n\t\tthis._initialize();\n\t};\n\n\tFooterManager.prototype.createElement = function () {\n\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-footer\");\n\n\t\treturn el;\n\t};\n\n\tFooterManager.prototype._initialize = function (element) {\n\n\t\tif (this.table.options.footerElement) {\n\n\t\t\tswitch (_typeof(this.table.options.footerElement)) {\n\n\t\t\t\tcase \"string\":\n\n\t\t\t\t\tif (this.table.options.footerElement[0] === \"<\") {\n\n\t\t\t\t\t\tthis.element.innerHTML = this.table.options.footerElement;\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.external = true;\n\n\t\t\t\t\t\tthis.element = document.querySelector(this.table.options.footerElement);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tthis.element = this.table.options.footerElement;\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t}\n\t};\n\n\tFooterManager.prototype.getElement = function () {\n\n\t\treturn this.element;\n\t};\n\n\tFooterManager.prototype.append = function (element, parent) {\n\n\t\tthis.activate(parent);\n\n\t\tthis.element.appendChild(element);\n\n\t\tthis.table.rowManager.adjustTableSize();\n\t};\n\n\tFooterManager.prototype.prepend = function (element, parent) {\n\n\t\tthis.activate(parent);\n\n\t\tthis.element.insertBefore(element, this.element.firstChild);\n\n\t\tthis.table.rowManager.adjustTableSize();\n\t};\n\n\tFooterManager.prototype.remove = function (element) {\n\n\t\telement.parentNode.removeChild(element);\n\n\t\tthis.deactivate();\n\t};\n\n\tFooterManager.prototype.deactivate = function (force) {\n\n\t\tif (!this.element.firstChild || force) {\n\n\t\t\tif (!this.external) {\n\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\n\t\t\tthis.active = false;\n\t\t}\n\n\t\t// this.table.rowManager.adjustTableSize();\n\t};\n\n\tFooterManager.prototype.activate = function (parent) {\n\n\t\tif (!this.active) {\n\n\t\t\tthis.active = true;\n\n\t\t\tif (!this.external) {\n\n\t\t\t\tthis.table.element.appendChild(this.getElement());\n\n\t\t\t\tthis.table.element.style.display = '';\n\t\t\t}\n\t\t}\n\n\t\tif (parent) {\n\n\t\t\tthis.links.push(parent);\n\t\t}\n\t};\n\n\tFooterManager.prototype.redraw = function () {\n\n\t\tthis.links.forEach(function (link) {\n\n\t\t\tlink.footerRedraw();\n\t\t});\n\t};\n\n\tvar Tabulator = function Tabulator(element, options) {\n\n\t\tthis.options = {};\n\n\t\tthis.columnManager = null; // hold Column Manager\n\n\t\tthis.rowManager = null; //hold Row Manager\n\n\t\tthis.footerManager = null; //holder Footer Manager\n\n\t\tthis.browser = \"\"; //hold current browser type\n\n\t\tthis.browserSlow = false; //handle reduced functionality for slower browsers\n\n\t\tthis.browserMobile = false; //check if running on moble, prevent resize cancelling edit on keyboard appearence\n\n\n\t\tthis.modules = {}; //hold all modules bound to this table\n\n\n\t\tthis.initializeElement(element);\n\n\t\tthis.initializeOptions(options || {});\n\n\t\tthis._create();\n\n\t\tTabulator.prototype.comms.register(this); //register table for inderdevice communication\n\t};\n\n\t//default setup options\n\n\tTabulator.prototype.defaultOptions = {\n\n\t\theight: false, //height of tabulator\n\n\t\tminHeight: false, //minimum height of tabulator\n\n\t\tmaxHeight: false, //maximum height of tabulator\n\n\n\t\tlayout: \"fitData\", ///layout type \"fitColumns\" | \"fitData\"\n\n\t\tlayoutColumnsOnNewData: false, //update column widths on setData\n\n\n\t\tcolumnMinWidth: 40, //minimum global width for a column\n\n\t\tcolumnHeaderVertAlign: \"top\", //vertical alignment of column headers\n\n\t\tcolumnVertAlign: false, // DEPRECATED - Left to allow warning\n\n\n\t\tresizableColumns: true, //resizable columns\n\n\t\tresizableRows: false, //resizable rows\n\n\t\tautoResize: true, //auto resize table\n\n\n\t\tcolumns: [], //store for colum header info\n\n\n\t\tcellHozAlign: \"\", //horizontal align columns\n\n\t\tcellVertAlign: \"\", //certical align columns\n\n\n\t\tdata: [], //default starting data\n\n\n\t\tautoColumns: false, //build columns from data row structure\n\n\n\t\treactiveData: false, //enable data reactivity\n\n\n\t\tnestedFieldSeparator: \".\", //seperatpr for nested data\n\n\n\t\ttooltips: false, //Tool tip value\n\n\t\ttooltipsHeader: false, //Tool tip for headers\n\n\t\ttooltipGenerationMode: \"load\", //when to generate tooltips\n\n\n\t\tinitialSort: false, //initial sorting criteria\n\n\t\tinitialFilter: false, //initial filtering criteria\n\n\t\tinitialHeaderFilter: false, //initial header filtering criteria\n\n\n\t\tcolumnHeaderSortMulti: true, //multiple or single column sorting\n\n\n\t\tsortOrderReverse: false, //reverse internal sort ordering\n\n\n\t\theaderSort: true, //set default global header sort\n\n\t\theaderSortTristate: false, //set default tristate header sorting\n\n\n\t\tfooterElement: false, //hold footer element\n\n\n\t\tindex: \"id\", //filed for row index\n\n\n\t\tkeybindings: [], //array for keybindings\n\n\n\t\ttabEndNewRow: false, //create new row when tab to end of table\n\n\n\t\tinvalidOptionWarnings: true, //allow toggling of invalid option warnings\n\n\n\t\tclipboard: false, //enable clipboard\n\n\t\tclipboardCopyStyled: true, //formatted table data\n\n\t\tclipboardCopyConfig: false, //clipboard config\n\n\t\tclipboardCopyFormatter: false, //DEPRICATED - REMOVE in 5.0\n\n\t\tclipboardCopyRowRange: \"active\", //restrict clipboard to visible rows only\n\n\t\tclipboardPasteParser: \"table\", //convert pasted clipboard data to rows\n\n\t\tclipboardPasteAction: \"insert\", //how to insert pasted data into the table\n\n\n\t\tclipboardCopied: function clipboardCopied() {}, //data has been copied to the clipboard\n\n\t\tclipboardPasted: function clipboardPasted() {}, //data has been pasted into the table\n\n\t\tclipboardPasteError: function clipboardPasteError() {}, //data has not successfully been pasted into the table\n\n\n\t\tdownloadDataFormatter: false, //function to manipulate table data before it is downloaded\n\n\t\tdownloadReady: function downloadReady(data, blob) {\n\t\t\treturn blob;\n\t\t}, //function to manipulate download data\n\n\t\tdownloadComplete: false, //function to manipulate download data\n\n\t\tdownloadConfig: {}, //download config\n\n\t\tdownloadRowRange: \"active\", //restrict download to active rows only\n\n\n\t\tdataTree: false, //enable data tree\n\n\t\tdataTreeElementColumn: false,\n\n\t\tdataTreeBranchElement: true, //show data tree branch element\n\n\t\tdataTreeChildIndent: 9, //data tree child indent in px\n\n\t\tdataTreeChildField: \"_children\", //data tre column field to look for child rows\n\n\t\tdataTreeCollapseElement: false, //data tree row collapse element\n\n\t\tdataTreeExpandElement: false, //data tree row expand element\n\n\t\tdataTreeStartExpanded: false,\n\n\t\tdataTreeRowExpanded: function dataTreeRowExpanded() {}, //row has been expanded\n\n\t\tdataTreeRowCollapsed: function dataTreeRowCollapsed() {}, //row has been collapsed\n\n\t\tdataTreeChildColumnCalcs: false, //include visible data tree rows in column calculations\n\n\t\tdataTreeSelectPropagate: false, //seleccting a parent row selects its children\n\n\n\t\tprintAsHtml: false, //enable print as html\n\n\t\tprintFormatter: false, //printing page formatter\n\n\t\tprintHeader: false, //page header contents\n\n\t\tprintFooter: false, //page footer contents\n\n\t\tprintCopyStyle: true, //DEPRICATED - REMOVE in 5.0\n\n\t\tprintStyled: true, //enable print as html styling\n\n\t\tprintVisibleRows: true, //DEPRICATED - REMOVE in 5.0\n\n\t\tprintRowRange: \"visible\", //restrict print to visible rows only\n\n\t\tprintConfig: {}, //print config options\n\n\n\t\taddRowPos: \"bottom\", //position to insert blank rows, top|bottom\n\n\n\t\tselectable: \"highlight\", //highlight rows on hover\n\n\t\tselectableRangeMode: \"drag\", //highlight rows on hover\n\n\t\tselectableRollingSelection: true, //roll selection once maximum number of selectable rows is reached\n\n\t\tselectablePersistence: true, // maintain selection when table view is updated\n\n\t\tselectableCheck: function selectableCheck(data, row) {\n\t\t\treturn true;\n\t\t}, //check wheather row is selectable\n\n\n\t\theaderFilterLiveFilterDelay: 300, //delay before updating column after user types in header filter\n\n\t\theaderFilterPlaceholder: false, //placeholder text to display in header filters\n\n\n\t\theaderVisible: true, //hide header\n\n\n\t\thistory: false, //enable edit history\n\n\n\t\tlocale: false, //current system language\n\n\t\tlangs: {},\n\n\t\tvirtualDom: true, //enable DOM virtualization\n\n\t\tvirtualDomBuffer: 0, // set virtual DOM buffer size\n\n\n\t\tpersistentLayout: false, //DEPRICATED - REMOVE in 5.0\n\n\t\tpersistentSort: false, //DEPRICATED - REMOVE in 5.0\n\n\t\tpersistentFilter: false, //DEPRICATED - REMOVE in 5.0\n\n\t\tpersistenceID: \"\", //key for persistent storage\n\n\t\tpersistenceMode: true, //mode for storing persistence information\n\n\t\tpersistenceReaderFunc: false, //function for handling persistence data reading\n\n\t\tpersistenceWriterFunc: false, //function for handling persistence data writing\n\n\n\t\tpersistence: false,\n\n\t\tresponsiveLayout: false, //responsive layout flags\n\n\t\tresponsiveLayoutCollapseStartOpen: true, //start showing collapsed data\n\n\t\tresponsiveLayoutCollapseUseFormatters: true, //responsive layout collapse formatter\n\n\t\tresponsiveLayoutCollapseFormatter: false, //responsive layout collapse formatter\n\n\n\t\tpagination: false, //set pagination type\n\n\t\tpaginationSize: false, //set number of rows to a page\n\n\t\tpaginationInitialPage: 1, //initail page to show on load\n\n\t\tpaginationButtonCount: 5, // set count of page button\n\n\t\tpaginationSizeSelector: false, //add pagination size selector element\n\n\t\tpaginationElement: false, //element to hold pagination numbers\n\n\t\tpaginationDataSent: {}, //pagination data sent to the server\n\n\t\tpaginationDataReceived: {}, //pagination data received from the server\n\n\t\tpaginationAddRow: \"page\", //add rows on table or page\n\n\n\t\tajaxURL: false, //url for ajax loading\n\n\t\tajaxURLGenerator: false,\n\n\t\tajaxParams: {}, //params for ajax loading\n\n\t\tajaxConfig: \"get\", //ajax request type\n\n\t\tajaxContentType: \"form\", //ajax request type\n\n\t\tajaxRequestFunc: false, //promise function\n\n\t\tajaxLoader: true, //show loader\n\n\t\tajaxLoaderLoading: false, //loader element\n\n\t\tajaxLoaderError: false, //loader element\n\n\t\tajaxFiltering: false,\n\n\t\tajaxSorting: false,\n\n\t\tajaxProgressiveLoad: false, //progressive loading\n\n\t\tajaxProgressiveLoadDelay: 0, //delay between requests\n\n\t\tajaxProgressiveLoadScrollMargin: 0, //margin before scroll begins\n\n\n\t\tgroupBy: false, //enable table grouping and set field to group by\n\n\t\tgroupStartOpen: true, //starting state of group\n\n\t\tgroupValues: false,\n\n\t\tgroupHeader: false, //header generation function\n\n\t\tgroupHeaderPrint: null,\n\n\t\tgroupHeaderClipboard: null,\n\n\t\tgroupHeaderHtmlOutput: null,\n\n\t\tgroupHeaderDownload: null,\n\n\t\thtmlOutputConfig: false, //html outypu config\n\n\n\t\tmovableColumns: false, //enable movable columns\n\n\n\t\tmovableRows: false, //enable movable rows\n\n\t\tmovableRowsConnectedTables: false, //tables for movable rows to be connected to\n\n\t\tmovableRowsConnectedElements: false, //other elements for movable rows to be connected to\n\n\t\tmovableRowsSender: false,\n\n\t\tmovableRowsReceiver: \"insert\",\n\n\t\tmovableRowsSendingStart: function movableRowsSendingStart() {},\n\n\t\tmovableRowsSent: function movableRowsSent() {},\n\n\t\tmovableRowsSentFailed: function movableRowsSentFailed() {},\n\n\t\tmovableRowsSendingStop: function movableRowsSendingStop() {},\n\n\t\tmovableRowsReceivingStart: function movableRowsReceivingStart() {},\n\n\t\tmovableRowsReceived: function movableRowsReceived() {},\n\n\t\tmovableRowsReceivedFailed: function movableRowsReceivedFailed() {},\n\n\t\tmovableRowsReceivingStop: function movableRowsReceivingStop() {},\n\n\t\tmovableRowsElementDrop: function movableRowsElementDrop() {},\n\n\t\tscrollToRowPosition: \"top\",\n\n\t\tscrollToRowIfVisible: true,\n\n\t\tscrollToColumnPosition: \"left\",\n\n\t\tscrollToColumnIfVisible: true,\n\n\t\trowFormatter: false,\n\n\t\trowFormatterPrint: null,\n\n\t\trowFormatterClipboard: null,\n\n\t\trowFormatterHtmlOutput: null,\n\n\t\tplaceholder: false,\n\n\t\t//table building callbacks\n\n\t\ttableBuilding: function tableBuilding() {},\n\n\t\ttableBuilt: function tableBuilt() {},\n\n\t\t//render callbacks\n\n\t\trenderStarted: function renderStarted() {},\n\n\t\trenderComplete: function renderComplete() {},\n\n\t\t//row callbacks\n\n\t\trowClick: false,\n\n\t\trowDblClick: false,\n\n\t\trowContext: false,\n\n\t\trowTap: false,\n\n\t\trowDblTap: false,\n\n\t\trowTapHold: false,\n\n\t\trowMouseEnter: false,\n\n\t\trowMouseLeave: false,\n\n\t\trowMouseOver: false,\n\n\t\trowMouseOut: false,\n\n\t\trowMouseMove: false,\n\n\t\trowContextMenu: false,\n\n\t\trowAdded: function rowAdded() {},\n\n\t\trowDeleted: function rowDeleted() {},\n\n\t\trowMoved: function rowMoved() {},\n\n\t\trowUpdated: function rowUpdated() {},\n\n\t\trowSelectionChanged: function rowSelectionChanged() {},\n\n\t\trowSelected: function rowSelected() {},\n\n\t\trowDeselected: function rowDeselected() {},\n\n\t\trowResized: function rowResized() {},\n\n\t\t//cell callbacks\n\n\t\t//row callbacks\n\n\t\tcellClick: false,\n\n\t\tcellDblClick: false,\n\n\t\tcellContext: false,\n\n\t\tcellTap: false,\n\n\t\tcellDblTap: false,\n\n\t\tcellTapHold: false,\n\n\t\tcellMouseEnter: false,\n\n\t\tcellMouseLeave: false,\n\n\t\tcellMouseOver: false,\n\n\t\tcellMouseOut: false,\n\n\t\tcellMouseMove: false,\n\n\t\tcellEditing: function cellEditing() {},\n\n\t\tcellEdited: function cellEdited() {},\n\n\t\tcellEditCancelled: function cellEditCancelled() {},\n\n\t\t//column callbacks\n\n\t\tcolumnMoved: false,\n\n\t\tcolumnResized: function columnResized() {},\n\n\t\tcolumnTitleChanged: function columnTitleChanged() {},\n\n\t\tcolumnVisibilityChanged: function columnVisibilityChanged() {},\n\n\t\t//HTML iport callbacks\n\n\t\thtmlImporting: function htmlImporting() {},\n\n\t\thtmlImported: function htmlImported() {},\n\n\t\t//data callbacks\n\n\t\tdataLoading: function dataLoading() {},\n\n\t\tdataLoaded: function dataLoaded() {},\n\n\t\tdataEdited: function dataEdited() {},\n\n\t\t//ajax callbacks\n\n\t\tajaxRequesting: function ajaxRequesting() {},\n\n\t\tajaxResponse: false,\n\n\t\tajaxError: function ajaxError() {},\n\n\t\t//filtering callbacks\n\n\t\tdataFiltering: false,\n\n\t\tdataFiltered: false,\n\n\t\t//sorting callbacks\n\n\t\tdataSorting: function dataSorting() {},\n\n\t\tdataSorted: function dataSorted() {},\n\n\t\t//grouping callbacks\n\n\t\tgroupToggleElement: \"arrow\",\n\n\t\tgroupClosedShowCalcs: false,\n\n\t\tdataGrouping: function dataGrouping() {},\n\n\t\tdataGrouped: false,\n\n\t\tgroupVisibilityChanged: function groupVisibilityChanged() {},\n\n\t\tgroupClick: false,\n\n\t\tgroupDblClick: false,\n\n\t\tgroupContext: false,\n\n\t\tgroupContextMenu: false,\n\n\t\tgroupTap: false,\n\n\t\tgroupDblTap: false,\n\n\t\tgroupTapHold: false,\n\n\t\tcolumnCalcs: true,\n\n\t\t//pagination callbacks\n\n\t\tpageLoaded: function pageLoaded() {},\n\n\t\t//localization callbacks\n\n\t\tlocalized: function localized() {},\n\n\t\t//validation callbacks\n\n\t\tvalidationMode: \"blocking\",\n\n\t\tvalidationFailed: function validationFailed() {},\n\n\t\t//history callbacks\n\n\t\thistoryUndo: function historyUndo() {},\n\n\t\thistoryRedo: function historyRedo() {},\n\n\t\t//scroll callbacks\n\n\t\tscrollHorizontal: function scrollHorizontal() {},\n\n\t\tscrollVertical: function scrollVertical() {}\n\n\t};\n\n\tTabulator.prototype.initializeOptions = function (options) {\n\n\t\t//warn user if option is not available\n\n\t\tif (options.invalidOptionWarnings !== false) {\n\n\t\t\tfor (var key in options) {\n\n\t\t\t\tif (typeof this.defaultOptions[key] === \"undefined\") {\n\n\t\t\t\t\tconsole.warn(\"Invalid table constructor option:\", key);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//assign options to table\n\n\t\tfor (var key in this.defaultOptions) {\n\n\t\t\tif (key in options) {\n\n\t\t\t\tthis.options[key] = options[key];\n\t\t\t} else {\n\n\t\t\t\tif (Array.isArray(this.defaultOptions[key])) {\n\n\t\t\t\t\tthis.options[key] = [];\n\t\t\t\t} else if (_typeof(this.defaultOptions[key]) === \"object\" && this.defaultOptions[key] !== null) {\n\n\t\t\t\t\tthis.options[key] = {};\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.options[key] = this.defaultOptions[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tTabulator.prototype.initializeElement = function (element) {\n\n\t\tif (typeof HTMLElement !== \"undefined\" && element instanceof HTMLElement) {\n\n\t\t\tthis.element = element;\n\n\t\t\treturn true;\n\t\t} else if (typeof element === \"string\") {\n\n\t\t\tthis.element = document.querySelector(element);\n\n\t\t\tif (this.element) {\n\n\t\t\t\treturn true;\n\t\t\t} else {\n\n\t\t\t\tconsole.error(\"Tabulator Creation Error - no element found matching selector: \", element);\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else {\n\n\t\t\tconsole.error(\"Tabulator Creation Error - Invalid element provided:\", element);\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t//convert depricated functionality to new functions\n\n\tTabulator.prototype._mapDepricatedFunctionality = function () {\n\n\t\t//map depricated persistance setup options\n\n\t\tif (this.options.persistentLayout || this.options.persistentSort || this.options.persistentFilter) {\n\n\t\t\tif (!this.options.persistence) {\n\n\t\t\t\tthis.options.persistence = {};\n\t\t\t}\n\t\t}\n\n\t\tif (this.options.downloadDataFormatter) {\n\n\t\t\tconsole.warn(\"DEPRECATION WARNING - downloadDataFormatter option has been deprecated\");\n\t\t}\n\n\t\tif (typeof this.options.clipboardCopyHeader !== \"undefined\") {\n\n\t\t\tthis.options.columnHeaders = this.options.clipboardCopyHeader;\n\n\t\t\tconsole.warn(\"DEPRECATION WARNING - clipboardCopyHeader option has been deprecated, please use the columnHeaders property on the clipboardCopyConfig option\");\n\t\t}\n\n\t\tif (this.options.printVisibleRows !== true) {\n\n\t\t\tconsole.warn(\"printVisibleRows option is deprecated, you should now use the printRowRange option\");\n\n\t\t\tthis.options.persistence.printRowRange = \"active\";\n\t\t}\n\n\t\tif (this.options.printCopyStyle !== true) {\n\n\t\t\tconsole.warn(\"printCopyStyle option is deprecated, you should now use the printStyled option\");\n\n\t\t\tthis.options.persistence.printStyled = this.options.printCopyStyle;\n\t\t}\n\n\t\tif (this.options.persistentLayout) {\n\n\t\t\tconsole.warn(\"persistentLayout option is deprecated, you should now use the persistence option\");\n\n\t\t\tif (this.options.persistence !== true && typeof this.options.persistence.columns === \"undefined\") {\n\n\t\t\t\tthis.options.persistence.columns = true;\n\t\t\t}\n\t\t}\n\n\t\tif (this.options.persistentSort) {\n\n\t\t\tconsole.warn(\"persistentSort option is deprecated, you should now use the persistence option\");\n\n\t\t\tif (this.options.persistence !== true && typeof this.options.persistence.sort === \"undefined\") {\n\n\t\t\t\tthis.options.persistence.sort = true;\n\t\t\t}\n\t\t}\n\n\t\tif (this.options.persistentFilter) {\n\n\t\t\tconsole.warn(\"persistentFilter option is deprecated, you should now use the persistence option\");\n\n\t\t\tif (this.options.persistence !== true && typeof this.options.persistence.filter === \"undefined\") {\n\n\t\t\t\tthis.options.persistence.filter = true;\n\t\t\t}\n\t\t}\n\n\t\tif (this.options.columnVertAlign) {\n\n\t\t\tconsole.warn(\"columnVertAlign option is deprecated, you should now use the columnHeaderVertAlign option\");\n\n\t\t\tthis.options.columnHeaderVertAlign = this.options.columnVertAlign;\n\t\t}\n\t};\n\n\tTabulator.prototype._clearSelection = function () {\n\n\t\tthis.element.classList.add(\"tabulator-block-select\");\n\n\t\tif (window.getSelection) {\n\n\t\t\tif (window.getSelection().empty) {\n\t\t\t\t// Chrome\n\n\t\t\t\twindow.getSelection().empty();\n\t\t\t} else if (window.getSelection().removeAllRanges) {\n\t\t\t\t// Firefox\n\n\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t}\n\t\t} else if (document.selection) {\n\t\t\t// IE?\n\n\t\t\tdocument.selection.empty();\n\t\t}\n\n\t\tthis.element.classList.remove(\"tabulator-block-select\");\n\t};\n\n\t//concreate table\n\n\tTabulator.prototype._create = function () {\n\n\t\tthis._clearObjectPointers();\n\n\t\tthis._mapDepricatedFunctionality();\n\n\t\tthis.bindModules();\n\n\t\tif (this.element.tagName === \"TABLE\") {\n\n\t\t\tif (this.modExists(\"htmlTableImport\", true)) {\n\n\t\t\t\tthis.modules.htmlTableImport.parseTable();\n\t\t\t}\n\t\t}\n\n\t\tthis.columnManager = new ColumnManager(this);\n\n\t\tthis.rowManager = new RowManager(this);\n\n\t\tthis.footerManager = new FooterManager(this);\n\n\t\tthis.columnManager.setRowManager(this.rowManager);\n\n\t\tthis.rowManager.setColumnManager(this.columnManager);\n\n\t\tthis._buildElement();\n\n\t\tthis._loadInitialData();\n\t};\n\n\t//clear pointers to objects in default config object\n\n\tTabulator.prototype._clearObjectPointers = function () {\n\n\t\tthis.options.columns = this.options.columns.slice(0);\n\n\t\tif (!this.options.reactiveData) {\n\n\t\t\tthis.options.data = this.options.data.slice(0);\n\t\t}\n\t};\n\n\t//build tabulator element\n\n\tTabulator.prototype._buildElement = function () {\n\t\tvar _this17 = this;\n\n\t\tvar element = this.element,\n\t\t    mod = this.modules,\n\t\t    options = this.options;\n\n\t\toptions.tableBuilding.call(this);\n\n\t\telement.classList.add(\"tabulator\");\n\n\t\telement.setAttribute(\"role\", \"grid\");\n\n\t\t//empty element\n\n\t\twhile (element.firstChild) {\n\t\t\telement.removeChild(element.firstChild);\n\t\t} //set table height\n\n\t\tif (options.height) {\n\n\t\t\toptions.height = isNaN(options.height) ? options.height : options.height + \"px\";\n\n\t\t\telement.style.height = options.height;\n\t\t}\n\n\t\t//set table min height\n\n\t\tif (options.minHeight !== false) {\n\n\t\t\toptions.minHeight = isNaN(options.minHeight) ? options.minHeight : options.minHeight + \"px\";\n\n\t\t\telement.style.minHeight = options.minHeight;\n\t\t}\n\n\t\t//set table maxHeight\n\n\t\tif (options.maxHeight !== false) {\n\n\t\t\toptions.maxHeight = isNaN(options.maxHeight) ? options.maxHeight : options.maxHeight + \"px\";\n\n\t\t\telement.style.maxHeight = options.maxHeight;\n\t\t}\n\n\t\tthis.columnManager.initialize();\n\n\t\tthis.rowManager.initialize();\n\n\t\tthis._detectBrowser();\n\n\t\tif (this.modExists(\"layout\", true)) {\n\n\t\t\tmod.layout.initialize(options.layout);\n\t\t}\n\n\t\t//set localization\n\n\t\tif (options.headerFilterPlaceholder !== false) {\n\n\t\t\tmod.localize.setHeaderFilterPlaceholder(options.headerFilterPlaceholder);\n\t\t}\n\n\t\tfor (var locale in options.langs) {\n\n\t\t\tmod.localize.installLang(locale, options.langs[locale]);\n\t\t}\n\n\t\tmod.localize.setLocale(options.locale);\n\n\t\t//configure placeholder element\n\n\t\tif (typeof options.placeholder == \"string\") {\n\n\t\t\tvar el = document.createElement(\"div\");\n\n\t\t\tel.classList.add(\"tabulator-placeholder\");\n\n\t\t\tvar span = document.createElement(\"span\");\n\n\t\t\tspan.innerHTML = options.placeholder;\n\n\t\t\tel.appendChild(span);\n\n\t\t\toptions.placeholder = el;\n\t\t}\n\n\t\t//build table elements\n\n\t\telement.appendChild(this.columnManager.getElement());\n\n\t\telement.appendChild(this.rowManager.getElement());\n\n\t\tif (options.footerElement) {\n\n\t\t\tthis.footerManager.activate();\n\t\t}\n\n\t\tif (options.persistence && this.modExists(\"persistence\", true)) {\n\n\t\t\tmod.persistence.initialize();\n\t\t}\n\n\t\tif (options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.columns) {\n\n\t\t\toptions.columns = mod.persistence.load(\"columns\", options.columns);\n\t\t}\n\n\t\tif (options.movableRows && this.modExists(\"moveRow\")) {\n\n\t\t\tmod.moveRow.initialize();\n\t\t}\n\n\t\tif (options.autoColumns && this.options.data) {\n\n\t\t\tthis.columnManager.generateColumnsFromRowData(this.options.data);\n\t\t}\n\n\t\tif (this.modExists(\"columnCalcs\")) {\n\n\t\t\tmod.columnCalcs.initialize();\n\t\t}\n\n\t\tthis.columnManager.setColumns(options.columns);\n\n\t\tif (options.dataTree && this.modExists(\"dataTree\", true)) {\n\n\t\t\tmod.dataTree.initialize();\n\t\t}\n\n\t\tif (this.modExists(\"frozenRows\")) {\n\n\t\t\tthis.modules.frozenRows.initialize();\n\t\t}\n\n\t\tif ((options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.sort || options.initialSort) && this.modExists(\"sort\", true)) {\n\n\t\t\tvar sorters = [];\n\n\t\t\tif (options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.sort) {\n\n\t\t\t\tsorters = mod.persistence.load(\"sort\");\n\n\t\t\t\tif (sorters === false && options.initialSort) {\n\n\t\t\t\t\tsorters = options.initialSort;\n\t\t\t\t}\n\t\t\t} else if (options.initialSort) {\n\n\t\t\t\tsorters = options.initialSort;\n\t\t\t}\n\n\t\t\tmod.sort.setSort(sorters);\n\t\t}\n\n\t\tif ((options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.filter || options.initialFilter) && this.modExists(\"filter\", true)) {\n\n\t\t\tvar filters = [];\n\n\t\t\tif (options.persistence && this.modExists(\"persistence\", true) && mod.persistence.config.filter) {\n\n\t\t\t\tfilters = mod.persistence.load(\"filter\");\n\n\t\t\t\tif (filters === false && options.initialFilter) {\n\n\t\t\t\t\tfilters = options.initialFilter;\n\t\t\t\t}\n\t\t\t} else if (options.initialFilter) {\n\n\t\t\t\tfilters = options.initialFilter;\n\t\t\t}\n\n\t\t\tmod.filter.setFilter(filters);\n\t\t}\n\n\t\tif (options.initialHeaderFilter && this.modExists(\"filter\", true)) {\n\n\t\t\toptions.initialHeaderFilter.forEach(function (item) {\n\n\t\t\t\tvar column = _this17.columnManager.findColumn(item.field);\n\n\t\t\t\tif (column) {\n\n\t\t\t\t\tmod.filter.setHeaderFilterValue(column, item.value);\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", item.field);\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (this.modExists(\"ajax\")) {\n\n\t\t\tmod.ajax.initialize();\n\t\t}\n\n\t\tif (options.pagination && this.modExists(\"page\", true)) {\n\n\t\t\tmod.page.initialize();\n\t\t}\n\n\t\tif (options.groupBy && this.modExists(\"groupRows\", true)) {\n\n\t\t\tmod.groupRows.initialize();\n\t\t}\n\n\t\tif (this.modExists(\"keybindings\")) {\n\n\t\t\tmod.keybindings.initialize();\n\t\t}\n\n\t\tif (this.modExists(\"selectRow\")) {\n\n\t\t\tmod.selectRow.clearSelectionData(true);\n\t\t}\n\n\t\tif (options.autoResize && this.modExists(\"resizeTable\")) {\n\n\t\t\tmod.resizeTable.initialize();\n\t\t}\n\n\t\tif (this.modExists(\"clipboard\")) {\n\n\t\t\tmod.clipboard.initialize();\n\t\t}\n\n\t\tif (options.printAsHtml && this.modExists(\"print\")) {\n\n\t\t\tmod.print.initialize();\n\t\t}\n\n\t\toptions.tableBuilt.call(this);\n\t};\n\n\tTabulator.prototype._loadInitialData = function () {\n\n\t\tvar self = this;\n\n\t\tif (self.options.pagination && self.modExists(\"page\")) {\n\n\t\t\tself.modules.page.reset(true, true);\n\n\t\t\tif (self.options.pagination == \"local\") {\n\n\t\t\t\tif (self.options.data.length) {\n\n\t\t\t\t\tself.rowManager.setData(self.options.data, false, true);\n\t\t\t\t} else {\n\n\t\t\t\t\tif ((self.options.ajaxURL || self.options.ajaxURLGenerator) && self.modExists(\"ajax\")) {\n\n\t\t\t\t\t\tself.modules.ajax.loadData(false, true).then(function () {}).catch(function () {\n\n\t\t\t\t\t\t\tif (self.options.paginationInitialPage) {\n\n\t\t\t\t\t\t\t\tself.modules.page.setPage(self.options.paginationInitialPage);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tself.rowManager.setData(self.options.data, false, true);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (self.options.paginationInitialPage) {\n\n\t\t\t\t\tself.modules.page.setPage(self.options.paginationInitialPage);\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tif (self.options.ajaxURL) {\n\n\t\t\t\t\tself.modules.page.setPage(self.options.paginationInitialPage).then(function () {}).catch(function () {});\n\t\t\t\t} else {\n\n\t\t\t\t\tself.rowManager.setData([], false, true);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\n\t\t\tif (self.options.data.length) {\n\n\t\t\t\tself.rowManager.setData(self.options.data);\n\t\t\t} else {\n\n\t\t\t\tif ((self.options.ajaxURL || self.options.ajaxURLGenerator) && self.modExists(\"ajax\")) {\n\n\t\t\t\t\tself.modules.ajax.loadData(false, true).then(function () {}).catch(function () {});\n\t\t\t\t} else {\n\n\t\t\t\t\tself.rowManager.setData(self.options.data, false, true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t//deconstructor\n\n\tTabulator.prototype.destroy = function () {\n\n\t\tvar element = this.element;\n\n\t\tTabulator.prototype.comms.deregister(this); //deregister table from inderdevice communication\n\n\n\t\tif (this.options.reactiveData && this.modExists(\"reactiveData\", true)) {\n\n\t\t\tthis.modules.reactiveData.unwatchData();\n\t\t}\n\n\t\t//clear row data\n\n\t\tthis.rowManager.rows.forEach(function (row) {\n\n\t\t\trow.wipe();\n\t\t});\n\n\t\tthis.rowManager.rows = [];\n\n\t\tthis.rowManager.activeRows = [];\n\n\t\tthis.rowManager.displayRows = [];\n\n\t\t//clear event bindings\n\n\t\tif (this.options.autoResize && this.modExists(\"resizeTable\")) {\n\n\t\t\tthis.modules.resizeTable.clearBindings();\n\t\t}\n\n\t\tif (this.modExists(\"keybindings\")) {\n\n\t\t\tthis.modules.keybindings.clearBindings();\n\t\t}\n\n\t\t//clear DOM\n\n\t\twhile (element.firstChild) {\n\t\t\telement.removeChild(element.firstChild);\n\t\t}element.classList.remove(\"tabulator\");\n\t};\n\n\tTabulator.prototype._detectBrowser = function () {\n\n\t\tvar ua = navigator.userAgent || navigator.vendor || window.opera;\n\n\t\tif (ua.indexOf(\"Trident\") > -1) {\n\n\t\t\tthis.browser = \"ie\";\n\n\t\t\tthis.browserSlow = true;\n\t\t} else if (ua.indexOf(\"Edge\") > -1) {\n\n\t\t\tthis.browser = \"edge\";\n\n\t\t\tthis.browserSlow = true;\n\t\t} else if (ua.indexOf(\"Firefox\") > -1) {\n\n\t\t\tthis.browser = \"firefox\";\n\n\t\t\tthis.browserSlow = false;\n\t\t} else {\n\n\t\t\tthis.browser = \"other\";\n\n\t\t\tthis.browserSlow = false;\n\t\t}\n\n\t\tthis.browserMobile = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(ua) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(ua.substr(0, 4));\n\t};\n\n\t////////////////// Data Handling //////////////////\n\n\n\t//block table redrawing\n\n\tTabulator.prototype.blockRedraw = function () {\n\n\t\treturn this.rowManager.blockRedraw();\n\t};\n\n\t//restore table redrawing\n\n\tTabulator.prototype.restoreRedraw = function () {\n\n\t\treturn this.rowManager.restoreRedraw();\n\t};\n\n\t//local data from local file\n\n\tTabulator.prototype.setDataFromLocalFile = function (extensions) {\n\t\tvar _this18 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tvar input = document.createElement(\"input\");\n\n\t\t\tinput.type = \"file\";\n\n\t\t\tinput.accept = extensions || \".json,application/json\";\n\n\t\t\tinput.addEventListener(\"change\", function (e) {\n\n\t\t\t\tvar file = input.files[0],\n\t\t\t\t    reader = new FileReader(),\n\t\t\t\t    data;\n\n\t\t\t\treader.readAsText(file);\n\n\t\t\t\treader.onload = function (e) {\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\tdata = JSON.parse(reader.result);\n\t\t\t\t\t} catch (e) {\n\n\t\t\t\t\t\tconsole.warn(\"File Load Error - File contents is invalid JSON\", e);\n\n\t\t\t\t\t\treject(e);\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t_this18.setData(data).then(function (data) {\n\n\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t}).catch(function (err) {\n\n\t\t\t\t\t\tresolve(err);\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\treader.onerror = function (e) {\n\n\t\t\t\t\tconsole.warn(\"File Load Error - Unable to read file\");\n\n\t\t\t\t\treject();\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tinput.click();\n\t\t});\n\t};\n\n\t//load data\n\n\tTabulator.prototype.setData = function (data, params, config) {\n\n\t\tif (this.modExists(\"ajax\")) {\n\n\t\t\tthis.modules.ajax.blockActiveRequest();\n\t\t}\n\n\t\treturn this._setData(data, params, config, false, true);\n\t};\n\n\tTabulator.prototype._setData = function (data, params, config, inPosition, columnsChanged) {\n\n\t\tvar self = this;\n\n\t\tif (typeof data === \"string\") {\n\n\t\t\tif (data.indexOf(\"{\") == 0 || data.indexOf(\"[\") == 0) {\n\n\t\t\t\t//data is a json encoded string\n\n\t\t\t\treturn self.rowManager.setData(JSON.parse(data), inPosition, columnsChanged);\n\t\t\t} else {\n\n\t\t\t\tif (self.modExists(\"ajax\", true)) {\n\n\t\t\t\t\tif (params) {\n\n\t\t\t\t\t\tself.modules.ajax.setParams(params);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (config) {\n\n\t\t\t\t\t\tself.modules.ajax.setConfig(config);\n\t\t\t\t\t}\n\n\t\t\t\t\tself.modules.ajax.setUrl(data);\n\n\t\t\t\t\tif (self.options.pagination == \"remote\" && self.modExists(\"page\", true)) {\n\n\t\t\t\t\t\tself.modules.page.reset(true, true);\n\n\t\t\t\t\t\treturn self.modules.page.setPage(1);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t//assume data is url, make ajax call to url to get data\n\n\t\t\t\t\t\treturn self.modules.ajax.loadData(inPosition, columnsChanged);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\n\t\t\tif (data) {\n\n\t\t\t\t//asume data is already an object\n\n\t\t\t\treturn self.rowManager.setData(data, inPosition, columnsChanged);\n\t\t\t} else {\n\n\t\t\t\t//no data provided, check if ajaxURL is present;\n\n\t\t\t\tif (self.modExists(\"ajax\") && (self.modules.ajax.getUrl || self.options.ajaxURLGenerator)) {\n\n\t\t\t\t\tif (self.options.pagination == \"remote\" && self.modExists(\"page\", true)) {\n\n\t\t\t\t\t\tself.modules.page.reset(true, true);\n\n\t\t\t\t\t\treturn self.modules.page.setPage(1);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\treturn self.modules.ajax.loadData(inPosition, columnsChanged);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\t//empty data\n\n\t\t\t\t\treturn self.rowManager.setData([], inPosition, columnsChanged);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t//clear data\n\n\tTabulator.prototype.clearData = function () {\n\n\t\tif (this.modExists(\"ajax\")) {\n\n\t\t\tthis.modules.ajax.blockActiveRequest();\n\t\t}\n\n\t\tthis.rowManager.clearData();\n\t};\n\n\t//get table data array\n\n\tTabulator.prototype.getData = function (active) {\n\n\t\tif (active === true) {\n\n\t\t\tconsole.warn(\"passing a boolean to the getData function is deprecated, you should now pass the string 'active'\");\n\n\t\t\tactive = \"active\";\n\t\t}\n\n\t\treturn this.rowManager.getData(active);\n\t};\n\n\t//get table data array count\n\n\tTabulator.prototype.getDataCount = function (active) {\n\n\t\tif (active === true) {\n\n\t\t\tconsole.warn(\"passing a boolean to the getDataCount function is deprecated, you should now pass the string 'active'\");\n\n\t\t\tactive = \"active\";\n\t\t}\n\n\t\treturn this.rowManager.getDataCount(active);\n\t};\n\n\t//search for specific row components\n\n\tTabulator.prototype.searchRows = function (field, type, value) {\n\n\t\tif (this.modExists(\"filter\", true)) {\n\n\t\t\treturn this.modules.filter.search(\"rows\", field, type, value);\n\t\t}\n\t};\n\n\t//search for specific data\n\n\tTabulator.prototype.searchData = function (field, type, value) {\n\n\t\tif (this.modExists(\"filter\", true)) {\n\n\t\t\treturn this.modules.filter.search(\"data\", field, type, value);\n\t\t}\n\t};\n\n\t//get table html\n\n\tTabulator.prototype.getHtml = function (visible, style, config) {\n\n\t\tif (this.modExists(\"export\", true)) {\n\n\t\t\treturn this.modules.export.getHtml(visible, style, config);\n\t\t}\n\t};\n\n\t//get print html\n\n\tTabulator.prototype.print = function (visible, style, config) {\n\n\t\tif (this.modExists(\"print\", true)) {\n\n\t\t\treturn this.modules.print.printFullscreen(visible, style, config);\n\t\t}\n\t};\n\n\t//retrieve Ajax URL\n\n\tTabulator.prototype.getAjaxUrl = function () {\n\n\t\tif (this.modExists(\"ajax\", true)) {\n\n\t\t\treturn this.modules.ajax.getUrl();\n\t\t}\n\t};\n\n\t//replace data, keeping table in position with same sort\n\n\tTabulator.prototype.replaceData = function (data, params, config) {\n\n\t\tif (this.modExists(\"ajax\")) {\n\n\t\t\tthis.modules.ajax.blockActiveRequest();\n\t\t}\n\n\t\treturn this._setData(data, params, config, true);\n\t};\n\n\t//update table data\n\n\tTabulator.prototype.updateData = function (data) {\n\t\tvar _this19 = this;\n\n\t\tvar self = this;\n\n\t\tvar responses = 0;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tif (_this19.modExists(\"ajax\")) {\n\n\t\t\t\t_this19.modules.ajax.blockActiveRequest();\n\t\t\t}\n\n\t\t\tif (typeof data === \"string\") {\n\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\n\t\t\tif (data) {\n\n\t\t\t\tdata.forEach(function (item) {\n\n\t\t\t\t\tvar row = self.rowManager.findRow(item[self.options.index]);\n\n\t\t\t\t\tif (row) {\n\n\t\t\t\t\t\tresponses++;\n\n\t\t\t\t\t\trow.updateData(item).then(function () {\n\n\t\t\t\t\t\t\tresponses--;\n\n\t\t\t\t\t\t\tif (!responses) {\n\n\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\n\n\t\t\t\treject(\"Update Error - No data provided\");\n\t\t\t}\n\t\t});\n\t};\n\n\tTabulator.prototype.addData = function (data, pos, index) {\n\t\tvar _this20 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tif (_this20.modExists(\"ajax\")) {\n\n\t\t\t\t_this20.modules.ajax.blockActiveRequest();\n\t\t\t}\n\n\t\t\tif (typeof data === \"string\") {\n\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\n\t\t\tif (data) {\n\n\t\t\t\t_this20.rowManager.addRows(data, pos, index).then(function (rows) {\n\n\t\t\t\t\tvar output = [];\n\n\t\t\t\t\trows.forEach(function (row) {\n\n\t\t\t\t\t\toutput.push(row.getComponent());\n\t\t\t\t\t});\n\n\t\t\t\t\tresolve(output);\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\n\n\t\t\t\treject(\"Update Error - No data provided\");\n\t\t\t}\n\t\t});\n\t};\n\n\t//update table data\n\n\tTabulator.prototype.updateOrAddData = function (data) {\n\t\tvar _this21 = this;\n\n\t\tvar self = this,\n\t\t    rows = [],\n\t\t    responses = 0;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tif (_this21.modExists(\"ajax\")) {\n\n\t\t\t\t_this21.modules.ajax.blockActiveRequest();\n\t\t\t}\n\n\t\t\tif (typeof data === \"string\") {\n\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\n\t\t\tif (data) {\n\n\t\t\t\tdata.forEach(function (item) {\n\n\t\t\t\t\tvar row = self.rowManager.findRow(item[self.options.index]);\n\n\t\t\t\t\tresponses++;\n\n\t\t\t\t\tif (row) {\n\n\t\t\t\t\t\trow.updateData(item).then(function () {\n\n\t\t\t\t\t\t\tresponses--;\n\n\t\t\t\t\t\t\trows.push(row.getComponent());\n\n\t\t\t\t\t\t\tif (!responses) {\n\n\t\t\t\t\t\t\t\tresolve(rows);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tself.rowManager.addRows(item).then(function (newRows) {\n\n\t\t\t\t\t\t\tresponses--;\n\n\t\t\t\t\t\t\trows.push(newRows[0].getComponent());\n\n\t\t\t\t\t\t\tif (!responses) {\n\n\t\t\t\t\t\t\t\tresolve(rows);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\n\n\t\t\t\treject(\"Update Error - No data provided\");\n\t\t\t}\n\t\t});\n\t};\n\n\t//get row object\n\n\tTabulator.prototype.getRow = function (index) {\n\n\t\tvar row = this.rowManager.findRow(index);\n\n\t\tif (row) {\n\n\t\t\treturn row.getComponent();\n\t\t} else {\n\n\t\t\tconsole.warn(\"Find Error - No matching row found:\", index);\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t//get row object\n\n\tTabulator.prototype.getRowFromPosition = function (position, active) {\n\n\t\tvar row = this.rowManager.getRowFromPosition(position, active);\n\n\t\tif (row) {\n\n\t\t\treturn row.getComponent();\n\t\t} else {\n\n\t\t\tconsole.warn(\"Find Error - No matching row found:\", position);\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t//delete row from table\n\n\tTabulator.prototype.deleteRow = function (index) {\n\t\tvar _this22 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tvar self = _this22,\n\t\t\t    count = 0,\n\t\t\t    successCount = 0,\n\t\t\t    foundRows = [];\n\n\t\t\tfunction doneCheck() {\n\n\t\t\t\tcount++;\n\n\t\t\t\tif (count == index.length) {\n\n\t\t\t\t\tif (successCount) {\n\n\t\t\t\t\t\tself.rowManager.reRenderInPosition();\n\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!Array.isArray(index)) {\n\n\t\t\t\tindex = [index];\n\t\t\t}\n\n\t\t\t//find matching rows\n\n\t\t\tindex.forEach(function (item) {\n\n\t\t\t\tvar row = _this22.rowManager.findRow(item, true);\n\n\t\t\t\tif (row) {\n\n\t\t\t\t\tfoundRows.push(row);\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn(\"Delete Error - No matching row found:\", item);\n\n\t\t\t\t\treject(\"Delete Error - No matching row found\");\n\n\t\t\t\t\tdoneCheck();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t//sort rows into correct order to ensure smooth delete from table\n\n\t\t\tfoundRows.sort(function (a, b) {\n\n\t\t\t\treturn _this22.rowManager.rows.indexOf(a) > _this22.rowManager.rows.indexOf(b) ? 1 : -1;\n\t\t\t});\n\n\t\t\tfoundRows.forEach(function (row) {\n\n\t\t\t\trow.delete().then(function () {\n\n\t\t\t\t\tsuccessCount++;\n\n\t\t\t\t\tdoneCheck();\n\t\t\t\t}).catch(function (err) {\n\n\t\t\t\t\tdoneCheck();\n\n\t\t\t\t\treject(err);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t};\n\n\t//add row to table\n\n\tTabulator.prototype.addRow = function (data, pos, index) {\n\t\tvar _this23 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tif (typeof data === \"string\") {\n\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\n\t\t\t_this23.rowManager.addRows(data, pos, index).then(function (rows) {\n\n\t\t\t\t//recalc column calculations if present\n\n\t\t\t\tif (_this23.modExists(\"columnCalcs\")) {\n\n\t\t\t\t\t_this23.modules.columnCalcs.recalc(_this23.rowManager.activeRows);\n\t\t\t\t}\n\n\t\t\t\tresolve(rows[0].getComponent());\n\t\t\t});\n\t\t});\n\t};\n\n\t//update a row if it exitsts otherwise create it\n\n\tTabulator.prototype.updateOrAddRow = function (index, data) {\n\t\tvar _this24 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tvar row = _this24.rowManager.findRow(index);\n\n\t\t\tif (typeof data === \"string\") {\n\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\n\t\t\tif (row) {\n\n\t\t\t\trow.updateData(data).then(function () {\n\n\t\t\t\t\t//recalc column calculations if present\n\n\t\t\t\t\tif (_this24.modExists(\"columnCalcs\")) {\n\n\t\t\t\t\t\t_this24.modules.columnCalcs.recalc(_this24.rowManager.activeRows);\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve(row.getComponent());\n\t\t\t\t}).catch(function (err) {\n\n\t\t\t\t\treject(err);\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\trow = _this24.rowManager.addRows(data).then(function (rows) {\n\n\t\t\t\t\t//recalc column calculations if present\n\n\t\t\t\t\tif (_this24.modExists(\"columnCalcs\")) {\n\n\t\t\t\t\t\t_this24.modules.columnCalcs.recalc(_this24.rowManager.activeRows);\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve(rows[0].getComponent());\n\t\t\t\t}).catch(function (err) {\n\n\t\t\t\t\treject(err);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n\t//update row data\n\n\tTabulator.prototype.updateRow = function (index, data) {\n\t\tvar _this25 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tvar row = _this25.rowManager.findRow(index);\n\n\t\t\tif (typeof data === \"string\") {\n\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\n\t\t\tif (row) {\n\n\t\t\t\trow.updateData(data).then(function () {\n\n\t\t\t\t\tresolve(row.getComponent());\n\t\t\t\t}).catch(function (err) {\n\n\t\t\t\t\treject(err);\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Update Error - No matching row found:\", index);\n\n\t\t\t\treject(\"Update Error - No matching row found\");\n\t\t\t}\n\t\t});\n\t};\n\n\t//scroll to row in DOM\n\n\tTabulator.prototype.scrollToRow = function (index, position, ifVisible) {\n\t\tvar _this26 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tvar row = _this26.rowManager.findRow(index);\n\n\t\t\tif (row) {\n\n\t\t\t\t_this26.rowManager.scrollToRow(row, position, ifVisible).then(function () {\n\n\t\t\t\t\tresolve();\n\t\t\t\t}).catch(function (err) {\n\n\t\t\t\t\treject(err);\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Scroll Error - No matching row found:\", index);\n\n\t\t\t\treject(\"Scroll Error - No matching row found\");\n\t\t\t}\n\t\t});\n\t};\n\n\tTabulator.prototype.moveRow = function (from, to, after) {\n\n\t\tvar fromRow = this.rowManager.findRow(from);\n\n\t\tif (fromRow) {\n\n\t\t\tfromRow.moveToRow(to, after);\n\t\t} else {\n\n\t\t\tconsole.warn(\"Move Error - No matching row found:\", from);\n\t\t}\n\t};\n\n\tTabulator.prototype.getRows = function (active) {\n\n\t\tif (active === true) {\n\n\t\t\tconsole.warn(\"passing a boolean to the getRows function is deprecated, you should now pass the string 'active'\");\n\n\t\t\tactive = \"active\";\n\t\t}\n\n\t\treturn this.rowManager.getComponents(active);\n\t};\n\n\t//get position of row in table\n\n\tTabulator.prototype.getRowPosition = function (index, active) {\n\n\t\tvar row = this.rowManager.findRow(index);\n\n\t\tif (row) {\n\n\t\t\treturn this.rowManager.getRowPosition(row, active);\n\t\t} else {\n\n\t\t\tconsole.warn(\"Position Error - No matching row found:\", index);\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t//copy table data to clipboard\n\n\tTabulator.prototype.copyToClipboard = function (selector) {\n\n\t\tif (this.modExists(\"clipboard\", true)) {\n\n\t\t\tthis.modules.clipboard.copy(selector);\n\t\t}\n\t};\n\n\t/////////////// Column Functions  ///////////////\n\n\n\tTabulator.prototype.setColumns = function (definition) {\n\n\t\tthis.columnManager.setColumns(definition);\n\t};\n\n\tTabulator.prototype.getColumns = function (structured) {\n\n\t\treturn this.columnManager.getComponents(structured);\n\t};\n\n\tTabulator.prototype.getColumn = function (field) {\n\n\t\tvar col = this.columnManager.findColumn(field);\n\n\t\tif (col) {\n\n\t\t\treturn col.getComponent();\n\t\t} else {\n\n\t\t\tconsole.warn(\"Find Error - No matching column found:\", field);\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.getColumnDefinitions = function () {\n\n\t\treturn this.columnManager.getDefinitionTree();\n\t};\n\n\tTabulator.prototype.getColumnLayout = function () {\n\n\t\tif (this.modExists(\"persistence\", true)) {\n\n\t\t\treturn this.modules.persistence.parseColumns(this.columnManager.getColumns());\n\t\t}\n\t};\n\n\tTabulator.prototype.setColumnLayout = function (layout) {\n\n\t\tif (this.modExists(\"persistence\", true)) {\n\n\t\t\tthis.columnManager.setColumns(this.modules.persistence.mergeDefinition(this.options.columns, layout));\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tTabulator.prototype.showColumn = function (field) {\n\n\t\tvar column = this.columnManager.findColumn(field);\n\n\t\tif (column) {\n\n\t\t\tcolumn.show();\n\n\t\t\tif (this.options.responsiveLayout && this.modExists(\"responsiveLayout\", true)) {\n\n\t\t\t\tthis.modules.responsiveLayout.update();\n\t\t\t}\n\t\t} else {\n\n\t\t\tconsole.warn(\"Column Show Error - No matching column found:\", field);\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.hideColumn = function (field) {\n\n\t\tvar column = this.columnManager.findColumn(field);\n\n\t\tif (column) {\n\n\t\t\tcolumn.hide();\n\n\t\t\tif (this.options.responsiveLayout && this.modExists(\"responsiveLayout\", true)) {\n\n\t\t\t\tthis.modules.responsiveLayout.update();\n\t\t\t}\n\t\t} else {\n\n\t\t\tconsole.warn(\"Column Hide Error - No matching column found:\", field);\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.toggleColumn = function (field) {\n\n\t\tvar column = this.columnManager.findColumn(field);\n\n\t\tif (column) {\n\n\t\t\tif (column.visible) {\n\n\t\t\t\tcolumn.hide();\n\t\t\t} else {\n\n\t\t\t\tcolumn.show();\n\t\t\t}\n\t\t} else {\n\n\t\t\tconsole.warn(\"Column Visibility Toggle Error - No matching column found:\", field);\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.addColumn = function (definition, before, field) {\n\t\tvar _this27 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tvar column = _this27.columnManager.findColumn(field);\n\n\t\t\t_this27.columnManager.addColumn(definition, before, column).then(function (column) {\n\n\t\t\t\tresolve(column.getComponent());\n\t\t\t}).catch(function (err) {\n\n\t\t\t\treject(err);\n\t\t\t});\n\t\t});\n\t};\n\n\tTabulator.prototype.deleteColumn = function (field) {\n\t\tvar _this28 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tvar column = _this28.columnManager.findColumn(field);\n\n\t\t\tif (column) {\n\n\t\t\t\tcolumn.delete().then(function () {\n\n\t\t\t\t\tresolve();\n\t\t\t\t}).catch(function (err) {\n\n\t\t\t\t\treject(err);\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Column Delete Error - No matching column found:\", field);\n\n\t\t\t\treject();\n\t\t\t}\n\t\t});\n\t};\n\n\tTabulator.prototype.updateColumnDefinition = function (field, definition) {\n\t\tvar _this29 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tvar column = _this29.columnManager.findColumn(field);\n\n\t\t\tif (column) {\n\n\t\t\t\tcolumn.updateDefinition(definition).then(function (col) {\n\n\t\t\t\t\tresolve(col);\n\t\t\t\t}).catch(function (err) {\n\n\t\t\t\t\treject(err);\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Column Update Error - No matching column found:\", field);\n\n\t\t\t\treject();\n\t\t\t}\n\t\t});\n\t};\n\n\tTabulator.prototype.moveColumn = function (from, to, after) {\n\n\t\tvar fromColumn = this.columnManager.findColumn(from);\n\n\t\tvar toColumn = this.columnManager.findColumn(to);\n\n\t\tif (fromColumn) {\n\n\t\t\tif (toColumn) {\n\n\t\t\t\tthis.columnManager.moveColumn(fromColumn, toColumn, after);\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Move Error - No matching column found:\", toColumn);\n\t\t\t}\n\t\t} else {\n\n\t\t\tconsole.warn(\"Move Error - No matching column found:\", from);\n\t\t}\n\t};\n\n\t//scroll to column in DOM\n\n\tTabulator.prototype.scrollToColumn = function (field, position, ifVisible) {\n\t\tvar _this30 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tvar column = _this30.columnManager.findColumn(field);\n\n\t\t\tif (column) {\n\n\t\t\t\t_this30.columnManager.scrollToColumn(column, position, ifVisible).then(function () {\n\n\t\t\t\t\tresolve();\n\t\t\t\t}).catch(function (err) {\n\n\t\t\t\t\treject(err);\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Scroll Error - No matching column found:\", field);\n\n\t\t\t\treject(\"Scroll Error - No matching column found\");\n\t\t\t}\n\t\t});\n\t};\n\n\t//////////// Localization Functions  ////////////\n\n\tTabulator.prototype.setLocale = function (locale) {\n\n\t\tthis.modules.localize.setLocale(locale);\n\t};\n\n\tTabulator.prototype.getLocale = function () {\n\n\t\treturn this.modules.localize.getLocale();\n\t};\n\n\tTabulator.prototype.getLang = function (locale) {\n\n\t\treturn this.modules.localize.getLang(locale);\n\t};\n\n\t//////////// General Public Functions ////////////\n\n\n\t//redraw list without updating data\n\n\tTabulator.prototype.redraw = function (force) {\n\n\t\tthis.columnManager.redraw(force);\n\n\t\tthis.rowManager.redraw(force);\n\t};\n\n\tTabulator.prototype.setHeight = function (height) {\n\n\t\tif (this.rowManager.renderMode !== \"classic\") {\n\n\t\t\tthis.options.height = isNaN(height) ? height : height + \"px\";\n\n\t\t\tthis.element.style.height = this.options.height;\n\n\t\t\tthis.rowManager.setRenderMode();\n\n\t\t\tthis.rowManager.redraw();\n\t\t} else {\n\n\t\t\tconsole.warn(\"setHeight function is not available in classic render mode\");\n\t\t}\n\t};\n\n\t///////////////////// Sorting ////////////////////\n\n\n\t//trigger sort\n\n\tTabulator.prototype.setSort = function (sortList, dir) {\n\n\t\tif (this.modExists(\"sort\", true)) {\n\n\t\t\tthis.modules.sort.setSort(sortList, dir);\n\n\t\t\tthis.rowManager.sorterRefresh();\n\t\t}\n\t};\n\n\tTabulator.prototype.getSorters = function () {\n\n\t\tif (this.modExists(\"sort\", true)) {\n\n\t\t\treturn this.modules.sort.getSort();\n\t\t}\n\t};\n\n\tTabulator.prototype.clearSort = function () {\n\n\t\tif (this.modExists(\"sort\", true)) {\n\n\t\t\tthis.modules.sort.clear();\n\n\t\t\tthis.rowManager.sorterRefresh();\n\t\t}\n\t};\n\n\t///////////////////// Filtering ////////////////////\n\n\n\t//set standard filters\n\n\tTabulator.prototype.setFilter = function (field, type, value, params) {\n\n\t\tif (this.modExists(\"filter\", true)) {\n\n\t\t\tthis.modules.filter.setFilter(field, type, value, params);\n\n\t\t\tthis.rowManager.filterRefresh();\n\t\t}\n\t};\n\n\t//add filter to array\n\n\tTabulator.prototype.addFilter = function (field, type, value, params) {\n\n\t\tif (this.modExists(\"filter\", true)) {\n\n\t\t\tthis.modules.filter.addFilter(field, type, value, params);\n\n\t\t\tthis.rowManager.filterRefresh();\n\t\t}\n\t};\n\n\t//get all filters\n\n\tTabulator.prototype.getFilters = function (all) {\n\n\t\tif (this.modExists(\"filter\", true)) {\n\n\t\t\treturn this.modules.filter.getFilters(all);\n\t\t}\n\t};\n\n\tTabulator.prototype.setHeaderFilterFocus = function (field) {\n\n\t\tif (this.modExists(\"filter\", true)) {\n\n\t\t\tvar column = this.columnManager.findColumn(field);\n\n\t\t\tif (column) {\n\n\t\t\t\tthis.modules.filter.setHeaderFilterFocus(column);\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Column Filter Focus Error - No matching column found:\", field);\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t};\n\n\tTabulator.prototype.getHeaderFilterValue = function (field) {\n\n\t\tif (this.modExists(\"filter\", true)) {\n\n\t\t\tvar column = this.columnManager.findColumn(field);\n\n\t\t\tif (column) {\n\n\t\t\t\treturn this.modules.filter.getHeaderFilterValue(column);\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", field);\n\t\t\t}\n\t\t}\n\t};\n\n\tTabulator.prototype.setHeaderFilterValue = function (field, value) {\n\n\t\tif (this.modExists(\"filter\", true)) {\n\n\t\t\tvar column = this.columnManager.findColumn(field);\n\n\t\t\tif (column) {\n\n\t\t\t\tthis.modules.filter.setHeaderFilterValue(column, value);\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", field);\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t};\n\n\tTabulator.prototype.getHeaderFilters = function () {\n\n\t\tif (this.modExists(\"filter\", true)) {\n\n\t\t\treturn this.modules.filter.getHeaderFilters();\n\t\t}\n\t};\n\n\t//remove filter from array\n\n\tTabulator.prototype.removeFilter = function (field, type, value) {\n\n\t\tif (this.modExists(\"filter\", true)) {\n\n\t\t\tthis.modules.filter.removeFilter(field, type, value);\n\n\t\t\tthis.rowManager.filterRefresh();\n\t\t}\n\t};\n\n\t//clear filters\n\n\tTabulator.prototype.clearFilter = function (all) {\n\n\t\tif (this.modExists(\"filter\", true)) {\n\n\t\t\tthis.modules.filter.clearFilter(all);\n\n\t\t\tthis.rowManager.filterRefresh();\n\t\t}\n\t};\n\n\t//clear header filters\n\n\tTabulator.prototype.clearHeaderFilter = function () {\n\n\t\tif (this.modExists(\"filter\", true)) {\n\n\t\t\tthis.modules.filter.clearHeaderFilter();\n\n\t\t\tthis.rowManager.filterRefresh();\n\t\t}\n\t};\n\n\t///////////////////// select ////////////////////\n\n\tTabulator.prototype.selectRow = function (rows) {\n\n\t\tif (this.modExists(\"selectRow\", true)) {\n\n\t\t\tif (rows === true) {\n\n\t\t\t\tconsole.warn(\"passing a boolean to the selectRowselectRow function is deprecated, you should now pass the string 'active'\");\n\n\t\t\t\trows = \"active\";\n\t\t\t}\n\n\t\t\tthis.modules.selectRow.selectRows(rows);\n\t\t}\n\t};\n\n\tTabulator.prototype.deselectRow = function (rows) {\n\n\t\tif (this.modExists(\"selectRow\", true)) {\n\n\t\t\tthis.modules.selectRow.deselectRows(rows);\n\t\t}\n\t};\n\n\tTabulator.prototype.toggleSelectRow = function (row) {\n\n\t\tif (this.modExists(\"selectRow\", true)) {\n\n\t\t\tthis.modules.selectRow.toggleRow(row);\n\t\t}\n\t};\n\n\tTabulator.prototype.getSelectedRows = function () {\n\n\t\tif (this.modExists(\"selectRow\", true)) {\n\n\t\t\treturn this.modules.selectRow.getSelectedRows();\n\t\t}\n\t};\n\n\tTabulator.prototype.getSelectedData = function () {\n\n\t\tif (this.modExists(\"selectRow\", true)) {\n\n\t\t\treturn this.modules.selectRow.getSelectedData();\n\t\t}\n\t};\n\n\t///////////////////// validation  ////////////////////\n\n\tTabulator.prototype.getInvalidCells = function () {\n\n\t\tif (this.modExists(\"validate\", true)) {\n\n\t\t\treturn this.modules.validate.getInvalidCells();\n\t\t}\n\t};\n\n\tTabulator.prototype.clearCellValidation = function (cells) {\n\t\tvar _this31 = this;\n\n\t\tif (this.modExists(\"validate\", true)) {\n\n\t\t\tif (!cells) {\n\n\t\t\t\tcells = this.modules.validate.getInvalidCells();\n\t\t\t}\n\n\t\t\tif (!Array.isArray(cells)) {\n\n\t\t\t\tcells = [cells];\n\t\t\t}\n\n\t\t\tcells.forEach(function (cell) {\n\n\t\t\t\t_this31.modules.validate.clearValidation(cell._getSelf());\n\t\t\t});\n\t\t}\n\t};\n\n\tTabulator.prototype.validate = function (cells) {\n\n\t\tvar output = [];\n\n\t\t//clear row data\n\n\t\tthis.rowManager.rows.forEach(function (row) {\n\n\t\t\tvar valid = row.validate();\n\n\t\t\tif (valid !== true) {\n\n\t\t\t\toutput = output.concat(valid);\n\t\t\t}\n\t\t});\n\n\t\treturn output.length ? output : true;\n\t};\n\n\t//////////// Pagination Functions  ////////////\n\n\n\tTabulator.prototype.setMaxPage = function (max) {\n\n\t\tif (this.options.pagination && this.modExists(\"page\")) {\n\n\t\t\tthis.modules.page.setMaxPage(max);\n\t\t} else {\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.setPage = function (page) {\n\n\t\tif (this.options.pagination && this.modExists(\"page\")) {\n\n\t\t\treturn this.modules.page.setPage(page);\n\t\t} else {\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\treject();\n\t\t\t});\n\t\t}\n\t};\n\n\tTabulator.prototype.setPageToRow = function (row) {\n\t\tvar _this32 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tif (_this32.options.pagination && _this32.modExists(\"page\")) {\n\n\t\t\t\trow = _this32.rowManager.findRow(row);\n\n\t\t\t\tif (row) {\n\n\t\t\t\t\t_this32.modules.page.setPageToRow(row).then(function () {\n\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}).catch(function () {\n\n\t\t\t\t\t\treject();\n\t\t\t\t\t});\n\t\t\t\t} else {\n\n\t\t\t\t\treject();\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\treject();\n\t\t\t}\n\t\t});\n\t};\n\n\tTabulator.prototype.setPageSize = function (size) {\n\n\t\tif (this.options.pagination && this.modExists(\"page\")) {\n\n\t\t\tthis.modules.page.setPageSize(size);\n\n\t\t\tthis.modules.page.setPage(1).then(function () {}).catch(function () {});\n\t\t} else {\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.getPageSize = function () {\n\n\t\tif (this.options.pagination && this.modExists(\"page\", true)) {\n\n\t\t\treturn this.modules.page.getPageSize();\n\t\t}\n\t};\n\n\tTabulator.prototype.previousPage = function () {\n\n\t\tif (this.options.pagination && this.modExists(\"page\")) {\n\n\t\t\tthis.modules.page.previousPage();\n\t\t} else {\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.nextPage = function () {\n\n\t\tif (this.options.pagination && this.modExists(\"page\")) {\n\n\t\t\tthis.modules.page.nextPage();\n\t\t} else {\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.getPage = function () {\n\n\t\tif (this.options.pagination && this.modExists(\"page\")) {\n\n\t\t\treturn this.modules.page.getPage();\n\t\t} else {\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.getPageMax = function () {\n\n\t\tif (this.options.pagination && this.modExists(\"page\")) {\n\n\t\t\treturn this.modules.page.getPageMax();\n\t\t} else {\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t///////////////// Grouping Functions ///////////////\n\n\n\tTabulator.prototype.setGroupBy = function (groups) {\n\n\t\tif (this.modExists(\"groupRows\", true)) {\n\n\t\t\tthis.options.groupBy = groups;\n\n\t\t\tthis.modules.groupRows.initialize();\n\n\t\t\tthis.rowManager.refreshActiveData(\"display\");\n\n\t\t\tif (this.options.persistence && this.modExists(\"persistence\", true) && this.modules.persistence.config.group) {\n\n\t\t\t\tthis.modules.persistence.save(\"group\");\n\t\t\t}\n\t\t} else {\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.setGroupStartOpen = function (values) {\n\n\t\tif (this.modExists(\"groupRows\", true)) {\n\n\t\t\tthis.options.groupStartOpen = values;\n\n\t\t\tthis.modules.groupRows.initialize();\n\n\t\t\tif (this.options.groupBy) {\n\n\t\t\t\tthis.rowManager.refreshActiveData(\"group\");\n\n\t\t\t\tif (this.options.persistence && this.modExists(\"persistence\", true) && this.modules.persistence.config.group) {\n\n\t\t\t\t\tthis.modules.persistence.save(\"group\");\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n\t\t\t}\n\t\t} else {\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.setGroupHeader = function (values) {\n\n\t\tif (this.modExists(\"groupRows\", true)) {\n\n\t\t\tthis.options.groupHeader = values;\n\n\t\t\tthis.modules.groupRows.initialize();\n\n\t\t\tif (this.options.groupBy) {\n\n\t\t\t\tthis.rowManager.refreshActiveData(\"group\");\n\n\t\t\t\tif (this.options.persistence && this.modExists(\"persistence\", true) && this.modules.persistence.config.group) {\n\n\t\t\t\t\tthis.modules.persistence.save(\"group\");\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n\t\t\t}\n\t\t} else {\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.getGroups = function (values) {\n\n\t\tif (this.modExists(\"groupRows\", true)) {\n\n\t\t\treturn this.modules.groupRows.getGroups(true);\n\t\t} else {\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t// get grouped table data in the same format as getData()\n\n\tTabulator.prototype.getGroupedData = function () {\n\n\t\tif (this.modExists(\"groupRows\", true)) {\n\n\t\t\treturn this.options.groupBy ? this.modules.groupRows.getGroupedData() : this.getData();\n\t\t}\n\t};\n\n\tTabulator.prototype.getEditedCells = function () {\n\n\t\tif (this.modExists(\"edit\", true)) {\n\n\t\t\treturn this.modules.edit.getEditedCells();\n\t\t}\n\t};\n\n\tTabulator.prototype.clearCellEdited = function (cells) {\n\t\tvar _this33 = this;\n\n\t\tif (this.modExists(\"edit\", true)) {\n\n\t\t\tif (!cells) {\n\n\t\t\t\tcells = this.modules.edit.getEditedCells();\n\t\t\t}\n\n\t\t\tif (!Array.isArray(cells)) {\n\n\t\t\t\tcells = [cells];\n\t\t\t}\n\n\t\t\tcells.forEach(function (cell) {\n\n\t\t\t\t_this33.modules.edit.clearEdited(cell._getSelf());\n\t\t\t});\n\t\t}\n\t};\n\n\t///////////////// Column Calculation Functions ///////////////\n\n\tTabulator.prototype.getCalcResults = function () {\n\n\t\tif (this.modExists(\"columnCalcs\", true)) {\n\n\t\t\treturn this.modules.columnCalcs.getResults();\n\t\t} else {\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.recalc = function () {\n\n\t\tif (this.modExists(\"columnCalcs\", true)) {\n\n\t\t\tthis.modules.columnCalcs.recalcAll(this.rowManager.activeRows);\n\t\t}\n\t};\n\n\t/////////////// Navigation Management //////////////\n\n\n\tTabulator.prototype.navigatePrev = function () {\n\n\t\tvar cell = false;\n\n\t\tif (this.modExists(\"edit\", true)) {\n\n\t\t\tcell = this.modules.edit.currentCell;\n\n\t\t\tif (cell) {\n\n\t\t\t\treturn cell.nav().prev();\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tTabulator.prototype.navigateNext = function () {\n\n\t\tvar cell = false;\n\n\t\tif (this.modExists(\"edit\", true)) {\n\n\t\t\tcell = this.modules.edit.currentCell;\n\n\t\t\tif (cell) {\n\n\t\t\t\treturn cell.nav().next();\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tTabulator.prototype.navigateLeft = function () {\n\n\t\tvar cell = false;\n\n\t\tif (this.modExists(\"edit\", true)) {\n\n\t\t\tcell = this.modules.edit.currentCell;\n\n\t\t\tif (cell) {\n\n\t\t\t\te.preventDefault();\n\n\t\t\t\treturn cell.nav().left();\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tTabulator.prototype.navigateRight = function () {\n\n\t\tvar cell = false;\n\n\t\tif (this.modExists(\"edit\", true)) {\n\n\t\t\tcell = this.modules.edit.currentCell;\n\n\t\t\tif (cell) {\n\n\t\t\t\te.preventDefault();\n\n\t\t\t\treturn cell.nav().right();\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tTabulator.prototype.navigateUp = function () {\n\n\t\tvar cell = false;\n\n\t\tif (this.modExists(\"edit\", true)) {\n\n\t\t\tcell = this.modules.edit.currentCell;\n\n\t\t\tif (cell) {\n\n\t\t\t\te.preventDefault();\n\n\t\t\t\treturn cell.nav().up();\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tTabulator.prototype.navigateDown = function () {\n\n\t\tvar cell = false;\n\n\t\tif (this.modExists(\"edit\", true)) {\n\n\t\t\tcell = this.modules.edit.currentCell;\n\n\t\t\tif (cell) {\n\n\t\t\t\te.preventDefault();\n\n\t\t\t\treturn cell.nav().down();\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n\n\t/////////////// History Management //////////////\n\n\tTabulator.prototype.undo = function () {\n\n\t\tif (this.options.history && this.modExists(\"history\", true)) {\n\n\t\t\treturn this.modules.history.undo();\n\t\t} else {\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.redo = function () {\n\n\t\tif (this.options.history && this.modExists(\"history\", true)) {\n\n\t\t\treturn this.modules.history.redo();\n\t\t} else {\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.getHistoryUndoSize = function () {\n\n\t\tif (this.options.history && this.modExists(\"history\", true)) {\n\n\t\t\treturn this.modules.history.getHistoryUndoSize();\n\t\t} else {\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.getHistoryRedoSize = function () {\n\n\t\tif (this.options.history && this.modExists(\"history\", true)) {\n\n\t\t\treturn this.modules.history.getHistoryRedoSize();\n\t\t} else {\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t/////////////// Download Management //////////////\n\n\n\tTabulator.prototype.download = function (type, filename, options, active) {\n\n\t\tif (this.modExists(\"download\", true)) {\n\n\t\t\tthis.modules.download.download(type, filename, options, active);\n\t\t}\n\t};\n\n\tTabulator.prototype.downloadToTab = function (type, filename, options, active) {\n\n\t\tif (this.modExists(\"download\", true)) {\n\n\t\t\tthis.modules.download.download(type, filename, options, active, true);\n\t\t}\n\t};\n\n\t/////////// Inter Table Communications ///////////\n\n\n\tTabulator.prototype.tableComms = function (table, module, action, data) {\n\n\t\tthis.modules.comms.receive(table, module, action, data);\n\t};\n\n\t////////////// Extension Management //////////////\n\n\n\t//object to hold module\n\n\tTabulator.prototype.moduleBindings = {};\n\n\t//extend module\n\n\tTabulator.prototype.extendModule = function (name, property, values) {\n\n\t\tif (Tabulator.prototype.moduleBindings[name]) {\n\n\t\t\tvar source = Tabulator.prototype.moduleBindings[name].prototype[property];\n\n\t\t\tif (source) {\n\n\t\t\t\tif ((typeof values === 'undefined' ? 'undefined' : _typeof(values)) == \"object\") {\n\n\t\t\t\t\tfor (var key in values) {\n\n\t\t\t\t\t\tsource[key] = values[key];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn(\"Module Error - Invalid value type, it must be an object\");\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tconsole.warn(\"Module Error - property does not exist:\", property);\n\t\t\t}\n\t\t} else {\n\n\t\t\tconsole.warn(\"Module Error - module does not exist:\", name);\n\t\t}\n\t};\n\n\t//add module to tabulator\n\n\tTabulator.prototype.registerModule = function (name, module) {\n\n\t\tvar self = this;\n\n\t\tTabulator.prototype.moduleBindings[name] = module;\n\t};\n\n\t//ensure that module are bound to instantiated function\n\n\tTabulator.prototype.bindModules = function () {\n\n\t\tthis.modules = {};\n\n\t\tfor (var name in Tabulator.prototype.moduleBindings) {\n\n\t\t\tthis.modules[name] = new Tabulator.prototype.moduleBindings[name](this);\n\t\t}\n\t};\n\n\t//Check for module\n\n\tTabulator.prototype.modExists = function (plugin, required) {\n\n\t\tif (this.modules[plugin]) {\n\n\t\t\treturn true;\n\t\t} else {\n\n\t\t\tif (required) {\n\n\t\t\t\tconsole.error(\"Tabulator Module Not Installed: \" + plugin);\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tTabulator.prototype.helpers = {\n\n\t\telVisible: function elVisible(el) {\n\n\t\t\treturn !(el.offsetWidth <= 0 && el.offsetHeight <= 0);\n\t\t},\n\n\t\telOffset: function elOffset(el) {\n\n\t\t\tvar box = el.getBoundingClientRect();\n\n\t\t\treturn {\n\n\t\t\t\ttop: box.top + window.pageYOffset - document.documentElement.clientTop,\n\n\t\t\t\tleft: box.left + window.pageXOffset - document.documentElement.clientLeft\n\n\t\t\t};\n\t\t},\n\n\t\tdeepClone: function deepClone(obj) {\n\n\t\t\tvar clone = Array.isArray(obj) ? [] : {};\n\n\t\t\tfor (var i in obj) {\n\n\t\t\t\tif (obj[i] != null && _typeof(obj[i]) === \"object\") {\n\n\t\t\t\t\tif (obj[i] instanceof Date) {\n\n\t\t\t\t\t\tclone[i] = new Date(obj[i]);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tclone[i] = this.deepClone(obj[i]);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\tclone[i] = obj[i];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn clone;\n\t\t}\n\n\t};\n\n\tTabulator.prototype.comms = {\n\n\t\ttables: [],\n\n\t\tregister: function register(table) {\n\n\t\t\tTabulator.prototype.comms.tables.push(table);\n\t\t},\n\n\t\tderegister: function deregister(table) {\n\n\t\t\tvar index = Tabulator.prototype.comms.tables.indexOf(table);\n\n\t\t\tif (index > -1) {\n\n\t\t\t\tTabulator.prototype.comms.tables.splice(index, 1);\n\t\t\t}\n\t\t},\n\n\t\tlookupTable: function lookupTable(query, silent) {\n\n\t\t\tvar results = [],\n\t\t\t    matches,\n\t\t\t    match;\n\n\t\t\tif (typeof query === \"string\") {\n\n\t\t\t\tmatches = document.querySelectorAll(query);\n\n\t\t\t\tif (matches.length) {\n\n\t\t\t\t\tfor (var i = 0; i < matches.length; i++) {\n\n\t\t\t\t\t\tmatch = Tabulator.prototype.comms.matchElement(matches[i]);\n\n\t\t\t\t\t\tif (match) {\n\n\t\t\t\t\t\t\tresults.push(match);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (typeof HTMLElement !== \"undefined\" && query instanceof HTMLElement || query instanceof Tabulator) {\n\n\t\t\t\tmatch = Tabulator.prototype.comms.matchElement(query);\n\n\t\t\t\tif (match) {\n\n\t\t\t\t\tresults.push(match);\n\t\t\t\t}\n\t\t\t} else if (Array.isArray(query)) {\n\n\t\t\t\tquery.forEach(function (item) {\n\n\t\t\t\t\tresults = results.concat(Tabulator.prototype.comms.lookupTable(item));\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\tif (!silent) {\n\n\t\t\t\t\tconsole.warn(\"Table Connection Error - Invalid Selector\", query);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn results;\n\t\t},\n\n\t\tmatchElement: function matchElement(element) {\n\n\t\t\treturn Tabulator.prototype.comms.tables.find(function (table) {\n\n\t\t\t\treturn element instanceof Tabulator ? table === element : table.element === element;\n\t\t\t});\n\t\t}\n\n\t};\n\n\tTabulator.prototype.findTable = function (query) {\n\n\t\tvar results = Tabulator.prototype.comms.lookupTable(query, true);\n\n\t\treturn Array.isArray(results) && !results.length ? false : results;\n\t};\n\n\tvar Layout = function Layout(table) {\n\n\t\tthis.table = table;\n\n\t\tthis.mode = null;\n\t};\n\n\t//initialize layout system\n\n\n\tLayout.prototype.initialize = function (layout) {\n\n\t\tif (this.modes[layout]) {\n\n\t\t\tthis.mode = layout;\n\t\t} else {\n\n\t\t\tconsole.warn(\"Layout Error - invalid mode set, defaulting to 'fitData' : \" + layout);\n\n\t\t\tthis.mode = 'fitData';\n\t\t}\n\n\t\tthis.table.element.setAttribute(\"tabulator-layout\", this.mode);\n\t};\n\n\tLayout.prototype.getMode = function () {\n\n\t\treturn this.mode;\n\t};\n\n\t//trigger table layout\n\n\n\tLayout.prototype.layout = function () {\n\n\t\tthis.modes[this.mode].call(this, this.table.columnManager.columnsByIndex);\n\t};\n\n\t//layout render functions\n\n\n\tLayout.prototype.modes = {\n\n\t\t//resize columns to fit data they contain\n\n\n\t\t\"fitData\": function fitData(columns) {\n\n\t\t\tcolumns.forEach(function (column) {\n\n\t\t\t\tcolumn.reinitializeWidth();\n\t\t\t});\n\n\t\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t\t}\n\t\t},\n\n\t\t//resize columns to fit data they contain and stretch row to fill table\n\n\n\t\t\"fitDataFill\": function fitDataFill(columns) {\n\n\t\t\tcolumns.forEach(function (column) {\n\n\t\t\t\tcolumn.reinitializeWidth();\n\t\t\t});\n\n\t\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t\t}\n\t\t},\n\n\t\t//resize columns to fit data they contain\n\n\n\t\t\"fitDataTable\": function fitDataTable(columns) {\n\n\t\t\tcolumns.forEach(function (column) {\n\n\t\t\t\tcolumn.reinitializeWidth();\n\t\t\t});\n\n\t\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t\t}\n\t\t},\n\n\t\t//resize columns to fit data the contain and stretch last column to fill table\n\n\n\t\t\"fitDataStretch\": function fitDataStretch(columns) {\n\t\t\tvar _this34 = this;\n\n\t\t\tvar colsWidth = 0,\n\t\t\t    tableWidth = this.table.rowManager.element.clientWidth,\n\t\t\t    gap = 0,\n\t\t\t    lastCol = false;\n\n\t\t\tcolumns.forEach(function (column, i) {\n\n\t\t\t\tif (!column.widthFixed) {\n\n\t\t\t\t\tcolumn.reinitializeWidth();\n\t\t\t\t}\n\n\t\t\t\tif (_this34.table.options.responsiveLayout ? column.modules.responsive.visible : column.visible) {\n\n\t\t\t\t\tlastCol = column;\n\t\t\t\t}\n\n\t\t\t\tif (column.visible) {\n\n\t\t\t\t\tcolsWidth += column.getWidth();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (lastCol) {\n\n\t\t\t\tgap = tableWidth - colsWidth + lastCol.getWidth();\n\n\t\t\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\t\t\tlastCol.setWidth(0);\n\n\t\t\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t\t\t}\n\n\t\t\t\tif (gap > 0) {\n\n\t\t\t\t\tlastCol.setWidth(gap);\n\t\t\t\t} else {\n\n\t\t\t\t\tlastCol.reinitializeWidth();\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//resize columns to fit\n\n\n\t\t\"fitColumns\": function fitColumns(columns) {\n\n\t\t\tvar self = this;\n\n\t\t\tvar totalWidth = self.table.element.clientWidth; //table element width\n\n\n\t\t\tvar fixedWidth = 0; //total width of columns with a defined width\n\n\n\t\t\tvar flexWidth = 0; //total width available to flexible columns\n\n\n\t\t\tvar flexGrowUnits = 0; //total number of widthGrow blocks accross all columns\n\n\n\t\t\tvar flexColWidth = 0; //desired width of flexible columns\n\n\n\t\t\tvar flexColumns = []; //array of flexible width columns\n\n\n\t\t\tvar fixedShrinkColumns = []; //array of fixed width columns that can shrink\n\n\n\t\t\tvar flexShrinkUnits = 0; //total number of widthShrink blocks accross all columns\n\n\n\t\t\tvar overflowWidth = 0; //horizontal overflow width\n\n\n\t\t\tvar gapFill = 0; //number of pixels to be added to final column to close and half pixel gaps\n\n\n\t\t\tfunction calcWidth(width) {\n\n\t\t\t\tvar colWidth;\n\n\t\t\t\tif (typeof width == \"string\") {\n\n\t\t\t\t\tif (width.indexOf(\"%\") > -1) {\n\n\t\t\t\t\t\tcolWidth = totalWidth / 100 * parseInt(width);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tcolWidth = parseInt(width);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\n\t\t\t\t\tcolWidth = width;\n\t\t\t\t}\n\n\t\t\t\treturn colWidth;\n\t\t\t}\n\n\t\t\t//ensure columns resize to take up the correct amount of space\n\n\n\t\t\tfunction scaleColumns(columns, freeSpace, colWidth, shrinkCols) {\n\n\t\t\t\tvar oversizeCols = [],\n\t\t\t\t    oversizeSpace = 0,\n\t\t\t\t    remainingSpace = 0,\n\t\t\t\t    nextColWidth = 0,\n\t\t\t\t    gap = 0,\n\t\t\t\t    changeUnits = 0,\n\t\t\t\t    undersizeCols = [];\n\n\t\t\t\tfunction calcGrow(col) {\n\n\t\t\t\t\treturn colWidth * (col.column.definition.widthGrow || 1);\n\t\t\t\t}\n\n\t\t\t\tfunction calcShrink(col) {\n\n\t\t\t\t\treturn calcWidth(col.width) - colWidth * (col.column.definition.widthShrink || 0);\n\t\t\t\t}\n\n\t\t\t\tcolumns.forEach(function (col, i) {\n\n\t\t\t\t\tvar width = shrinkCols ? calcShrink(col) : calcGrow(col);\n\n\t\t\t\t\tif (col.column.minWidth >= width) {\n\n\t\t\t\t\t\toversizeCols.push(col);\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tundersizeCols.push(col);\n\n\t\t\t\t\t\tchangeUnits += shrinkCols ? col.column.definition.widthShrink || 1 : col.column.definition.widthGrow || 1;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (oversizeCols.length) {\n\n\t\t\t\t\toversizeCols.forEach(function (col) {\n\n\t\t\t\t\t\toversizeSpace += shrinkCols ? col.width - col.column.minWidth : col.column.minWidth;\n\n\t\t\t\t\t\tcol.width = col.column.minWidth;\n\t\t\t\t\t});\n\n\t\t\t\t\tremainingSpace = freeSpace - oversizeSpace;\n\n\t\t\t\t\tnextColWidth = changeUnits ? Math.floor(remainingSpace / changeUnits) : remainingSpace;\n\n\t\t\t\t\tgap = remainingSpace - nextColWidth * changeUnits;\n\n\t\t\t\t\tgap += scaleColumns(undersizeCols, remainingSpace, nextColWidth, shrinkCols);\n\t\t\t\t} else {\n\n\t\t\t\t\tgap = changeUnits ? freeSpace - Math.floor(freeSpace / changeUnits) * changeUnits : freeSpace;\n\n\t\t\t\t\tundersizeCols.forEach(function (column) {\n\n\t\t\t\t\t\tcolumn.width = shrinkCols ? calcShrink(column) : calcGrow(column);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn gap;\n\t\t\t}\n\n\t\t\tif (this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)) {\n\n\t\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t\t}\n\n\t\t\t//adjust for vertical scrollbar if present\n\n\n\t\t\tif (this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight) {\n\n\t\t\t\ttotalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\n\t\t\t}\n\n\t\t\tcolumns.forEach(function (column) {\n\n\t\t\t\tvar width, minWidth, colWidth;\n\n\t\t\t\tif (column.visible) {\n\n\t\t\t\t\twidth = column.definition.width;\n\n\t\t\t\t\tminWidth = parseInt(column.minWidth);\n\n\t\t\t\t\tif (width) {\n\n\t\t\t\t\t\tcolWidth = calcWidth(width);\n\n\t\t\t\t\t\tfixedWidth += colWidth > minWidth ? colWidth : minWidth;\n\n\t\t\t\t\t\tif (column.definition.widthShrink) {\n\n\t\t\t\t\t\t\tfixedShrinkColumns.push({\n\n\t\t\t\t\t\t\t\tcolumn: column,\n\n\t\t\t\t\t\t\t\twidth: colWidth > minWidth ? colWidth : minWidth\n\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tflexShrinkUnits += column.definition.widthShrink;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tflexColumns.push({\n\n\t\t\t\t\t\t\tcolumn: column,\n\n\t\t\t\t\t\t\twidth: 0\n\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tflexGrowUnits += column.definition.widthGrow || 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t//calculate available space\n\n\n\t\t\tflexWidth = totalWidth - fixedWidth;\n\n\t\t\t//calculate correct column size\n\n\n\t\t\tflexColWidth = Math.floor(flexWidth / flexGrowUnits);\n\n\t\t\t//generate column widths\n\n\n\t\t\tvar gapFill = scaleColumns(flexColumns, flexWidth, flexColWidth, false);\n\n\t\t\t//increase width of last column to account for rounding errors\n\n\n\t\t\tif (flexColumns.length && gapFill > 0) {\n\n\t\t\t\tflexColumns[flexColumns.length - 1].width += +gapFill;\n\t\t\t}\n\n\t\t\t//caculate space for columns to be shrunk into\n\n\n\t\t\tflexColumns.forEach(function (col) {\n\n\t\t\t\tflexWidth -= col.width;\n\t\t\t});\n\n\t\t\toverflowWidth = Math.abs(gapFill) + flexWidth;\n\n\t\t\t//shrink oversize columns if there is no available space\n\n\n\t\t\tif (overflowWidth > 0 && flexShrinkUnits) {\n\n\t\t\t\tgapFill = scaleColumns(fixedShrinkColumns, overflowWidth, Math.floor(overflowWidth / flexShrinkUnits), true);\n\t\t\t}\n\n\t\t\t//decrease width of last column to account for rounding errors\n\n\n\t\t\tif (fixedShrinkColumns.length) {\n\n\t\t\t\tfixedShrinkColumns[fixedShrinkColumns.length - 1].width -= gapFill;\n\t\t\t}\n\n\t\t\tflexColumns.forEach(function (col) {\n\n\t\t\t\tcol.column.setWidth(col.width);\n\t\t\t});\n\n\t\t\tfixedShrinkColumns.forEach(function (col) {\n\n\t\t\t\tcol.column.setWidth(col.width);\n\t\t\t});\n\t\t}\n\n\t};\n\n\tTabulator.prototype.registerModule(\"layout\", Layout);\n\n\tvar Localize = function Localize(table) {\n\n\t\tthis.table = table; //hold Tabulator object\n\n\t\tthis.locale = \"default\"; //current locale\n\n\t\tthis.lang = false; //current language\n\n\t\tthis.bindings = {}; //update events to call when locale is changed\n\t};\n\n\t//set header placehoder\n\n\tLocalize.prototype.setHeaderFilterPlaceholder = function (placeholder) {\n\n\t\tthis.langs.default.headerFilters.default = placeholder;\n\t};\n\n\t//set header filter placeholder by column\n\n\tLocalize.prototype.setHeaderFilterColumnPlaceholder = function (column, placeholder) {\n\n\t\tthis.langs.default.headerFilters.columns[column] = placeholder;\n\n\t\tif (this.lang && !this.lang.headerFilters.columns[column]) {\n\n\t\t\tthis.lang.headerFilters.columns[column] = placeholder;\n\t\t}\n\t};\n\n\t//setup a lang description object\n\n\tLocalize.prototype.installLang = function (locale, lang) {\n\n\t\tif (this.langs[locale]) {\n\n\t\t\tthis._setLangProp(this.langs[locale], lang);\n\t\t} else {\n\n\t\t\tthis.langs[locale] = lang;\n\t\t}\n\t};\n\n\tLocalize.prototype._setLangProp = function (lang, values) {\n\n\t\tfor (var key in values) {\n\n\t\t\tif (lang[key] && _typeof(lang[key]) == \"object\") {\n\n\t\t\t\tthis._setLangProp(lang[key], values[key]);\n\t\t\t} else {\n\n\t\t\t\tlang[key] = values[key];\n\t\t\t}\n\t\t}\n\t};\n\n\t//set current locale\n\n\tLocalize.prototype.setLocale = function (desiredLocale) {\n\n\t\tvar self = this;\n\n\t\tdesiredLocale = desiredLocale || \"default\";\n\n\t\t//fill in any matching languge values\n\n\t\tfunction traverseLang(trans, path) {\n\n\t\t\tfor (var prop in trans) {\n\n\t\t\t\tif (_typeof(trans[prop]) == \"object\") {\n\n\t\t\t\t\tif (!path[prop]) {\n\n\t\t\t\t\t\tpath[prop] = {};\n\t\t\t\t\t}\n\n\t\t\t\t\ttraverseLang(trans[prop], path[prop]);\n\t\t\t\t} else {\n\n\t\t\t\t\tpath[prop] = trans[prop];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//determing correct locale to load\n\n\t\tif (desiredLocale === true && navigator.language) {\n\n\t\t\t//get local from system\n\n\t\t\tdesiredLocale = navigator.language.toLowerCase();\n\t\t}\n\n\t\tif (desiredLocale) {\n\n\t\t\t//if locale is not set, check for matching top level locale else use default\n\n\t\t\tif (!self.langs[desiredLocale]) {\n\n\t\t\t\tvar prefix = desiredLocale.split(\"-\")[0];\n\n\t\t\t\tif (self.langs[prefix]) {\n\n\t\t\t\t\tconsole.warn(\"Localization Error - Exact matching locale not found, using closest match: \", desiredLocale, prefix);\n\n\t\t\t\t\tdesiredLocale = prefix;\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn(\"Localization Error - Matching locale not found, using default: \", desiredLocale);\n\n\t\t\t\t\tdesiredLocale = \"default\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tself.locale = desiredLocale;\n\n\t\t//load default lang template\n\n\t\tself.lang = Tabulator.prototype.helpers.deepClone(self.langs.default || {});\n\n\t\tif (desiredLocale != \"default\") {\n\n\t\t\ttraverseLang(self.langs[desiredLocale], self.lang);\n\t\t}\n\n\t\tself.table.options.localized.call(self.table, self.locale, self.lang);\n\n\t\tself._executeBindings();\n\t};\n\n\t//get current locale\n\n\tLocalize.prototype.getLocale = function (locale) {\n\n\t\treturn self.locale;\n\t};\n\n\t//get lang object for given local or current if none provided\n\n\tLocalize.prototype.getLang = function (locale) {\n\n\t\treturn locale ? this.langs[locale] : this.lang;\n\t};\n\n\t//get text for current locale\n\n\tLocalize.prototype.getText = function (path, value) {\n\n\t\tvar path = value ? path + \"|\" + value : path,\n\t\t    pathArray = path.split(\"|\"),\n\t\t    text = this._getLangElement(pathArray, this.locale);\n\n\t\t// if(text === false){\n\n\t\t// \tconsole.warn(\"Localization Error - Matching localized text not found for given path: \", path);\n\n\t\t// }\n\n\n\t\treturn text || \"\";\n\t};\n\n\t//traverse langs object and find localized copy\n\n\tLocalize.prototype._getLangElement = function (path, locale) {\n\n\t\tvar self = this;\n\n\t\tvar root = self.lang;\n\n\t\tpath.forEach(function (level) {\n\n\t\t\tvar rootPath;\n\n\t\t\tif (root) {\n\n\t\t\t\trootPath = root[level];\n\n\t\t\t\tif (typeof rootPath != \"undefined\") {\n\n\t\t\t\t\troot = rootPath;\n\t\t\t\t} else {\n\n\t\t\t\t\troot = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn root;\n\t};\n\n\t//set update binding\n\n\tLocalize.prototype.bind = function (path, callback) {\n\n\t\tif (!this.bindings[path]) {\n\n\t\t\tthis.bindings[path] = [];\n\t\t}\n\n\t\tthis.bindings[path].push(callback);\n\n\t\tcallback(this.getText(path), this.lang);\n\t};\n\n\t//itterate through bindings and trigger updates\n\n\tLocalize.prototype._executeBindings = function () {\n\n\t\tvar self = this;\n\n\t\tvar _loop = function _loop(path) {\n\n\t\t\tself.bindings[path].forEach(function (binding) {\n\n\t\t\t\tbinding(self.getText(path), self.lang);\n\t\t\t});\n\t\t};\n\n\t\tfor (var path in self.bindings) {\n\t\t\t_loop(path);\n\t\t}\n\t};\n\n\t//Localized text listings\n\n\tLocalize.prototype.langs = {\n\n\t\t\"default\": { //hold default locale text\n\n\t\t\t\"groups\": {\n\n\t\t\t\t\"item\": \"item\",\n\n\t\t\t\t\"items\": \"items\"\n\n\t\t\t},\n\n\t\t\t\"columns\": {},\n\n\t\t\t\"ajax\": {\n\n\t\t\t\t\"loading\": \"Loading\",\n\n\t\t\t\t\"error\": \"Error\"\n\n\t\t\t},\n\n\t\t\t\"pagination\": {\n\n\t\t\t\t\"page_size\": \"Page Size\",\n\n\t\t\t\t\"page_title\": \"Show Page\",\n\n\t\t\t\t\"first\": \"First\",\n\n\t\t\t\t\"first_title\": \"First Page\",\n\n\t\t\t\t\"last\": \"Last\",\n\n\t\t\t\t\"last_title\": \"Last Page\",\n\n\t\t\t\t\"prev\": \"Prev\",\n\n\t\t\t\t\"prev_title\": \"Prev Page\",\n\n\t\t\t\t\"next\": \"Next\",\n\n\t\t\t\t\"next_title\": \"Next Page\",\n\n\t\t\t\t\"all\": \"All\"\n\n\t\t\t},\n\n\t\t\t\"headerFilters\": {\n\n\t\t\t\t\"default\": \"filter column...\",\n\n\t\t\t\t\"columns\": {}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tTabulator.prototype.registerModule(\"localize\", Localize);\n\n\tvar Comms = function Comms(table) {\n\n\t\tthis.table = table;\n\t};\n\n\tComms.prototype.getConnections = function (selectors) {\n\n\t\tvar self = this,\n\t\t    connections = [],\n\t\t    connection;\n\n\t\tconnection = Tabulator.prototype.comms.lookupTable(selectors);\n\n\t\tconnection.forEach(function (con) {\n\n\t\t\tif (self.table !== con) {\n\n\t\t\t\tconnections.push(con);\n\t\t\t}\n\t\t});\n\n\t\treturn connections;\n\t};\n\n\tComms.prototype.send = function (selectors, module, action, data) {\n\n\t\tvar self = this,\n\t\t    connections = this.getConnections(selectors);\n\n\t\tconnections.forEach(function (connection) {\n\n\t\t\tconnection.tableComms(self.table.element, module, action, data);\n\t\t});\n\n\t\tif (!connections.length && selectors) {\n\n\t\t\tconsole.warn(\"Table Connection Error - No tables matching selector found\", selectors);\n\t\t}\n\t};\n\n\tComms.prototype.receive = function (table, module, action, data) {\n\n\t\tif (this.table.modExists(module)) {\n\n\t\t\treturn this.table.modules[module].commsReceived(table, action, data);\n\t\t} else {\n\n\t\t\tconsole.warn(\"Inter-table Comms Error - no such module:\", module);\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"comms\", Comms);\n\n\tvar Accessor = function Accessor(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.allowedTypes = [\"\", \"data\", \"download\", \"clipboard\", \"print\", \"htmlOutput\"]; //list of accessor types\n\t};\n\n\t//initialize column accessor\n\tAccessor.prototype.initializeColumn = function (column) {\n\t\tvar self = this,\n\t\t    match = false,\n\t\t    config = {};\n\n\t\tthis.allowedTypes.forEach(function (type) {\n\t\t\tvar key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\t\t    accessor;\n\n\t\t\tif (column.definition[key]) {\n\t\t\t\taccessor = self.lookupAccessor(column.definition[key]);\n\n\t\t\t\tif (accessor) {\n\t\t\t\t\tmatch = true;\n\n\t\t\t\t\tconfig[key] = {\n\t\t\t\t\t\taccessor: accessor,\n\t\t\t\t\t\tparams: column.definition[key + \"Params\"] || {}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (match) {\n\t\t\tcolumn.modules.accessor = config;\n\t\t}\n\t};\n\n\tAccessor.prototype.lookupAccessor = function (value) {\n\t\tvar accessor = false;\n\n\t\t//set column accessor\n\t\tswitch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n\t\t\tcase \"string\":\n\t\t\t\tif (this.accessors[value]) {\n\t\t\t\t\taccessor = this.accessors[value];\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"Accessor Error - No such accessor found, ignoring: \", value);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\taccessor = value;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn accessor;\n\t};\n\n\t//apply accessor to row\n\tAccessor.prototype.transformRow = function (dataIn, type) {\n\t\tvar self = this,\n\t\t    key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1));\n\n\t\t//clone data object with deep copy to isolate internal data from returned result\n\t\tvar data = Tabulator.prototype.helpers.deepClone(dataIn || {});\n\n\t\tself.table.columnManager.traverse(function (column) {\n\t\t\tvar value, accessor, params, component;\n\n\t\t\tif (column.modules.accessor) {\n\n\t\t\t\taccessor = column.modules.accessor[key] || column.modules.accessor.accessor || false;\n\n\t\t\t\tif (accessor) {\n\t\t\t\t\tvalue = column.getFieldValue(data);\n\n\t\t\t\t\tif (value != \"undefined\") {\n\t\t\t\t\t\tcomponent = column.getComponent();\n\t\t\t\t\t\tparams = typeof accessor.params === \"function\" ? accessor.params(value, data, type, component) : accessor.params;\n\t\t\t\t\t\tcolumn.setFieldValue(data, accessor.accessor(value, data, type, params, component));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn data;\n\t},\n\n\t//default accessors\n\tAccessor.prototype.accessors = {};\n\n\tTabulator.prototype.registerModule(\"accessor\", Accessor);\n\tvar Ajax = function Ajax(table) {\n\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.config = false; //hold config object for ajax request\n\t\tthis.url = \"\"; //request URL\n\t\tthis.urlGenerator = false;\n\t\tthis.params = false; //request parameters\n\n\t\tthis.loaderElement = this.createLoaderElement(); //loader message div\n\t\tthis.msgElement = this.createMsgElement(); //message element\n\t\tthis.loadingElement = false;\n\t\tthis.errorElement = false;\n\t\tthis.loaderPromise = false;\n\n\t\tthis.progressiveLoad = false;\n\t\tthis.loading = false;\n\n\t\tthis.requestOrder = 0; //prevent requests comming out of sequence if overridden by another load request\n\t};\n\n\t//initialize setup options\n\tAjax.prototype.initialize = function () {\n\t\tvar template;\n\n\t\tthis.loaderElement.appendChild(this.msgElement);\n\n\t\tif (this.table.options.ajaxLoaderLoading) {\n\t\t\tif (typeof this.table.options.ajaxLoaderLoading == \"string\") {\n\t\t\t\ttemplate = document.createElement('template');\n\t\t\t\ttemplate.innerHTML = this.table.options.ajaxLoaderLoading.trim();\n\t\t\t\tthis.loadingElement = template.content.firstChild;\n\t\t\t} else {\n\t\t\t\tthis.loadingElement = this.table.options.ajaxLoaderLoading;\n\t\t\t}\n\t\t}\n\n\t\tthis.loaderPromise = this.table.options.ajaxRequestFunc || this.defaultLoaderPromise;\n\n\t\tthis.urlGenerator = this.table.options.ajaxURLGenerator || this.defaultURLGenerator;\n\n\t\tif (this.table.options.ajaxLoaderError) {\n\t\t\tif (typeof this.table.options.ajaxLoaderError == \"string\") {\n\t\t\t\ttemplate = document.createElement('template');\n\t\t\t\ttemplate.innerHTML = this.table.options.ajaxLoaderError.trim();\n\t\t\t\tthis.errorElement = template.content.firstChild;\n\t\t\t} else {\n\t\t\t\tthis.errorElement = this.table.options.ajaxLoaderError;\n\t\t\t}\n\t\t}\n\n\t\tif (this.table.options.ajaxParams) {\n\t\t\tthis.setParams(this.table.options.ajaxParams);\n\t\t}\n\n\t\tif (this.table.options.ajaxConfig) {\n\t\t\tthis.setConfig(this.table.options.ajaxConfig);\n\t\t}\n\n\t\tif (this.table.options.ajaxURL) {\n\t\t\tthis.setUrl(this.table.options.ajaxURL);\n\t\t}\n\n\t\tif (this.table.options.ajaxProgressiveLoad) {\n\t\t\tif (this.table.options.pagination) {\n\t\t\t\tthis.progressiveLoad = false;\n\t\t\t\tconsole.error(\"Progressive Load Error - Pagination and progressive load cannot be used at the same time\");\n\t\t\t} else {\n\t\t\t\tif (this.table.modExists(\"page\")) {\n\t\t\t\t\tthis.progressiveLoad = this.table.options.ajaxProgressiveLoad;\n\t\t\t\t\tthis.table.modules.page.initializeProgressive(this.progressiveLoad);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error(\"Pagination plugin is required for progressive ajax loading\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tAjax.prototype.createLoaderElement = function () {\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-loader\");\n\t\treturn el;\n\t};\n\n\tAjax.prototype.createMsgElement = function () {\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-loader-msg\");\n\t\tel.setAttribute(\"role\", \"alert\");\n\n\t\treturn el;\n\t};\n\n\t//set ajax params\n\tAjax.prototype.setParams = function (params, update) {\n\t\tif (update) {\n\t\t\tthis.params = this.params || {};\n\n\t\t\tfor (var key in params) {\n\t\t\t\tthis.params[key] = params[key];\n\t\t\t}\n\t\t} else {\n\t\t\tthis.params = params;\n\t\t}\n\t};\n\n\tAjax.prototype.getParams = function () {\n\t\treturn this.params || {};\n\t};\n\n\t//load config object\n\tAjax.prototype.setConfig = function (config) {\n\t\tthis._loadDefaultConfig();\n\n\t\tif (typeof config == \"string\") {\n\t\t\tthis.config.method = config;\n\t\t} else {\n\t\t\tfor (var key in config) {\n\t\t\t\tthis.config[key] = config[key];\n\t\t\t}\n\t\t}\n\t};\n\n\t//create config object from default\n\tAjax.prototype._loadDefaultConfig = function (force) {\n\t\tvar self = this;\n\t\tif (!self.config || force) {\n\n\t\t\tself.config = {};\n\n\t\t\t//load base config from defaults\n\t\t\tfor (var key in self.defaultConfig) {\n\t\t\t\tself.config[key] = self.defaultConfig[key];\n\t\t\t}\n\t\t}\n\t};\n\n\t//set request url\n\tAjax.prototype.setUrl = function (url) {\n\t\tthis.url = url;\n\t};\n\n\t//get request url\n\tAjax.prototype.getUrl = function () {\n\t\treturn this.url;\n\t};\n\n\t//lstandard loading function\n\tAjax.prototype.loadData = function (inPosition, columnsChanged) {\n\t\tvar self = this;\n\n\t\tif (this.progressiveLoad) {\n\t\t\treturn this._loadDataProgressive();\n\t\t} else {\n\t\t\treturn this._loadDataStandard(inPosition, columnsChanged);\n\t\t}\n\t};\n\n\tAjax.prototype.nextPage = function (diff) {\n\t\tvar margin;\n\n\t\tif (!this.loading) {\n\n\t\t\tmargin = this.table.options.ajaxProgressiveLoadScrollMargin || this.table.rowManager.getElement().clientHeight * 2;\n\n\t\t\tif (diff < margin) {\n\t\t\t\tthis.table.modules.page.nextPage().then(function () {}).catch(function () {});\n\t\t\t}\n\t\t}\n\t};\n\n\tAjax.prototype.blockActiveRequest = function () {\n\t\tthis.requestOrder++;\n\t};\n\n\tAjax.prototype._loadDataProgressive = function () {\n\t\tthis.table.rowManager.setData([]);\n\t\treturn this.table.modules.page.setPage(1);\n\t};\n\n\tAjax.prototype._loadDataStandard = function (inPosition, columnsChanged) {\n\t\tvar _this35 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\t_this35.sendRequest(inPosition).then(function (data) {\n\t\t\t\t_this35.table.rowManager.setData(data, inPosition, columnsChanged).then(function () {\n\t\t\t\t\tresolve();\n\t\t\t\t}).catch(function (e) {\n\t\t\t\t\treject(e);\n\t\t\t\t});\n\t\t\t}).catch(function (e) {\n\t\t\t\treject(e);\n\t\t\t});\n\t\t});\n\t};\n\n\tAjax.prototype.generateParamsList = function (data, prefix) {\n\t\tvar self = this,\n\t\t    output = [];\n\n\t\tprefix = prefix || \"\";\n\n\t\tif (Array.isArray(data)) {\n\t\t\tdata.forEach(function (item, i) {\n\t\t\t\toutput = output.concat(self.generateParamsList(item, prefix ? prefix + \"[\" + i + \"]\" : i));\n\t\t\t});\n\t\t} else if ((typeof data === 'undefined' ? 'undefined' : _typeof(data)) === \"object\") {\n\t\t\tfor (var key in data) {\n\t\t\t\toutput = output.concat(self.generateParamsList(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push({ key: prefix, value: data });\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tAjax.prototype.serializeParams = function (params) {\n\t\tvar output = this.generateParamsList(params),\n\t\t    encoded = [];\n\n\t\toutput.forEach(function (item) {\n\t\t\tencoded.push(encodeURIComponent(item.key) + \"=\" + encodeURIComponent(item.value));\n\t\t});\n\n\t\treturn encoded.join(\"&\");\n\t};\n\n\t//send ajax request\n\tAjax.prototype.sendRequest = function (silent) {\n\t\tvar _this36 = this;\n\n\t\tvar self = this,\n\t\t    url = self.url,\n\t\t    requestNo,\n\t\t    esc,\n\t\t    query;\n\n\t\tself.requestOrder++;\n\t\trequestNo = self.requestOrder;\n\n\t\tself._loadDefaultConfig();\n\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tif (self.table.options.ajaxRequesting.call(_this36.table, self.url, self.params) !== false) {\n\n\t\t\t\tself.loading = true;\n\n\t\t\t\tif (!silent) {\n\t\t\t\t\tself.showLoader();\n\t\t\t\t}\n\n\t\t\t\t_this36.loaderPromise(url, self.config, self.params).then(function (data) {\n\t\t\t\t\tif (requestNo === self.requestOrder) {\n\t\t\t\t\t\tif (self.table.options.ajaxResponse) {\n\t\t\t\t\t\t\tdata = self.table.options.ajaxResponse.call(self.table, self.url, self.params, data);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve(data);\n\n\t\t\t\t\t\tself.hideLoader();\n\t\t\t\t\t\tself.loading = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn(\"Ajax Response Blocked - An active ajax request was blocked by an attempt to change table data while the request was being made\");\n\t\t\t\t\t}\n\t\t\t\t}).catch(function (error) {\n\t\t\t\t\tconsole.error(\"Ajax Load Error: \", error);\n\t\t\t\t\tself.table.options.ajaxError.call(self.table, error);\n\n\t\t\t\t\tself.showError();\n\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tself.hideLoader();\n\t\t\t\t\t}, 3000);\n\n\t\t\t\t\tself.loading = false;\n\n\t\t\t\t\treject();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treject();\n\t\t\t}\n\t\t});\n\t};\n\n\tAjax.prototype.showLoader = function () {\n\t\tvar shouldLoad = typeof this.table.options.ajaxLoader === \"function\" ? this.table.options.ajaxLoader() : this.table.options.ajaxLoader;\n\n\t\tif (shouldLoad) {\n\n\t\t\tthis.hideLoader();\n\n\t\t\twhile (this.msgElement.firstChild) {\n\t\t\t\tthis.msgElement.removeChild(this.msgElement.firstChild);\n\t\t\t}this.msgElement.classList.remove(\"tabulator-error\");\n\t\t\tthis.msgElement.classList.add(\"tabulator-loading\");\n\n\t\t\tif (this.loadingElement) {\n\t\t\t\tthis.msgElement.appendChild(this.loadingElement);\n\t\t\t} else {\n\t\t\t\tthis.msgElement.innerHTML = this.table.modules.localize.getText(\"ajax|loading\");\n\t\t\t}\n\n\t\t\tthis.table.element.appendChild(this.loaderElement);\n\t\t}\n\t};\n\n\tAjax.prototype.showError = function () {\n\t\tthis.hideLoader();\n\n\t\twhile (this.msgElement.firstChild) {\n\t\t\tthis.msgElement.removeChild(this.msgElement.firstChild);\n\t\t}this.msgElement.classList.remove(\"tabulator-loading\");\n\t\tthis.msgElement.classList.add(\"tabulator-error\");\n\n\t\tif (this.errorElement) {\n\t\t\tthis.msgElement.appendChild(this.errorElement);\n\t\t} else {\n\t\t\tthis.msgElement.innerHTML = this.table.modules.localize.getText(\"ajax|error\");\n\t\t}\n\n\t\tthis.table.element.appendChild(this.loaderElement);\n\t};\n\n\tAjax.prototype.hideLoader = function () {\n\t\tif (this.loaderElement.parentNode) {\n\t\t\tthis.loaderElement.parentNode.removeChild(this.loaderElement);\n\t\t}\n\t};\n\n\t//default ajax config object\n\tAjax.prototype.defaultConfig = {\n\t\tmethod: \"GET\"\n\t};\n\n\tAjax.prototype.defaultURLGenerator = function (url, config, params) {\n\n\t\tif (url) {\n\t\t\tif (params && Object.keys(params).length) {\n\t\t\t\tif (!config.method || config.method.toLowerCase() == \"get\") {\n\t\t\t\t\tconfig.method = \"get\";\n\n\t\t\t\t\turl += (url.includes(\"?\") ? \"&\" : \"?\") + this.serializeParams(params);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn url;\n\t};\n\n\tAjax.prototype.defaultLoaderPromise = function (url, config, params) {\n\t\tvar self = this,\n\t\t    contentType;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t//set url\n\t\t\turl = self.urlGenerator(url, config, params);\n\n\t\t\t//set body content if not GET request\n\t\t\tif (config.method.toUpperCase() != \"GET\") {\n\t\t\t\tcontentType = _typeof(self.table.options.ajaxContentType) === \"object\" ? self.table.options.ajaxContentType : self.contentTypeFormatters[self.table.options.ajaxContentType];\n\t\t\t\tif (contentType) {\n\n\t\t\t\t\tfor (var key in contentType.headers) {\n\t\t\t\t\t\tif (!config.headers) {\n\t\t\t\t\t\t\tconfig.headers = {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof config.headers[key] === \"undefined\") {\n\t\t\t\t\t\t\tconfig.headers[key] = contentType.headers[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconfig.body = contentType.body.call(self, url, config, params);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"Ajax Error - Invalid ajaxContentType value:\", self.table.options.ajaxContentType);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (url) {\n\n\t\t\t\t//configure headers\n\t\t\t\tif (typeof config.headers === \"undefined\") {\n\t\t\t\t\tconfig.headers = {};\n\t\t\t\t}\n\n\t\t\t\tif (typeof config.headers.Accept === \"undefined\") {\n\t\t\t\t\tconfig.headers.Accept = \"application/json\";\n\t\t\t\t}\n\n\t\t\t\tif (typeof config.headers[\"X-Requested-With\"] === \"undefined\") {\n\t\t\t\t\tconfig.headers[\"X-Requested-With\"] = \"XMLHttpRequest\";\n\t\t\t\t}\n\n\t\t\t\tif (typeof config.mode === \"undefined\") {\n\t\t\t\t\tconfig.mode = \"cors\";\n\t\t\t\t}\n\n\t\t\t\tif (config.mode == \"cors\") {\n\n\t\t\t\t\tif (typeof config.headers[\"Access-Control-Allow-Origin\"] === \"undefined\") {\n\t\t\t\t\t\tconfig.headers[\"Access-Control-Allow-Origin\"] = window.location.origin;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (typeof config.credentials === \"undefined\") {\n\t\t\t\t\t\tconfig.credentials = 'same-origin';\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (typeof config.credentials === \"undefined\") {\n\t\t\t\t\t\tconfig.credentials = 'include';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//send request\n\t\t\t\tfetch(url, config).then(function (response) {\n\t\t\t\t\tif (response.ok) {\n\t\t\t\t\t\tresponse.json().then(function (data) {\n\t\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t\t}).catch(function (error) {\n\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t\tconsole.warn(\"Ajax Load Error - Invalid JSON returned\", error);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.error(\"Ajax Load Error - Connection Error: \" + response.status, response.statusText);\n\t\t\t\t\t\treject(response);\n\t\t\t\t\t}\n\t\t\t\t}).catch(function (error) {\n\t\t\t\t\tconsole.error(\"Ajax Load Error - Connection Error: \", error);\n\t\t\t\t\treject(error);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Ajax Load Error - No URL Set\");\n\t\t\t\tresolve([]);\n\t\t\t}\n\t\t});\n\t};\n\n\tAjax.prototype.contentTypeFormatters = {\n\t\t\"json\": {\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t},\n\t\t\tbody: function body(url, config, params) {\n\t\t\t\treturn JSON.stringify(params);\n\t\t\t}\n\t\t},\n\t\t\"form\": {\n\t\t\theaders: {},\n\t\t\tbody: function body(url, config, params) {\n\t\t\t\tvar output = this.generateParamsList(params),\n\t\t\t\t    form = new FormData();\n\n\t\t\t\toutput.forEach(function (item) {\n\t\t\t\t\tform.append(item.key, item.value);\n\t\t\t\t});\n\n\t\t\t\treturn form;\n\t\t\t}\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"ajax\", Ajax);\n\n\tvar ColumnCalcs = function ColumnCalcs(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.topCalcs = [];\n\t\tthis.botCalcs = [];\n\t\tthis.genColumn = false;\n\t\tthis.topElement = this.createElement();\n\t\tthis.botElement = this.createElement();\n\t\tthis.topRow = false;\n\t\tthis.botRow = false;\n\t\tthis.topInitialized = false;\n\t\tthis.botInitialized = false;\n\n\t\tthis.initialize();\n\t};\n\n\tColumnCalcs.prototype.createElement = function () {\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-calcs-holder\");\n\t\treturn el;\n\t};\n\n\tColumnCalcs.prototype.initialize = function () {\n\t\tthis.genColumn = new Column({ field: \"value\" }, this);\n\t};\n\n\t//dummy functions to handle being mock column manager\n\tColumnCalcs.prototype.registerColumnField = function () {};\n\n\t//initialize column calcs\n\tColumnCalcs.prototype.initializeColumn = function (column) {\n\t\tvar def = column.definition;\n\n\t\tvar config = {\n\t\t\ttopCalcParams: def.topCalcParams || {},\n\t\t\tbotCalcParams: def.bottomCalcParams || {}\n\t\t};\n\n\t\tif (def.topCalc) {\n\n\t\t\tswitch (_typeof(def.topCalc)) {\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif (this.calculations[def.topCalc]) {\n\t\t\t\t\t\tconfig.topCalc = this.calculations[def.topCalc];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.topCalc);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\tconfig.topCalc = def.topCalc;\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif (config.topCalc) {\n\t\t\t\tcolumn.modules.columnCalcs = config;\n\t\t\t\tthis.topCalcs.push(column);\n\n\t\t\t\tif (this.table.options.columnCalcs != \"group\") {\n\t\t\t\t\tthis.initializeTopRow();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (def.bottomCalc) {\n\t\t\tswitch (_typeof(def.bottomCalc)) {\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif (this.calculations[def.bottomCalc]) {\n\t\t\t\t\t\tconfig.botCalc = this.calculations[def.bottomCalc];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.bottomCalc);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\tconfig.botCalc = def.bottomCalc;\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif (config.botCalc) {\n\t\t\t\tcolumn.modules.columnCalcs = config;\n\t\t\t\tthis.botCalcs.push(column);\n\n\t\t\t\tif (this.table.options.columnCalcs != \"group\") {\n\t\t\t\t\tthis.initializeBottomRow();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tColumnCalcs.prototype.removeCalcs = function () {\n\t\tvar changed = false;\n\n\t\tif (this.topInitialized) {\n\t\t\tthis.topInitialized = false;\n\t\t\tthis.topElement.parentNode.removeChild(this.topElement);\n\t\t\tchanged = true;\n\t\t}\n\n\t\tif (this.botInitialized) {\n\t\t\tthis.botInitialized = false;\n\t\t\tthis.table.footerManager.remove(this.botElement);\n\t\t\tchanged = true;\n\t\t}\n\n\t\tif (changed) {\n\t\t\tthis.table.rowManager.adjustTableSize();\n\t\t}\n\t};\n\n\tColumnCalcs.prototype.initializeTopRow = function () {\n\t\tif (!this.topInitialized) {\n\t\t\t// this.table.columnManager.headersElement.after(this.topElement);\n\t\t\tthis.table.columnManager.getElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\n\t\t\tthis.topInitialized = true;\n\t\t}\n\t};\n\n\tColumnCalcs.prototype.initializeBottomRow = function () {\n\t\tif (!this.botInitialized) {\n\t\t\tthis.table.footerManager.prepend(this.botElement);\n\t\t\tthis.botInitialized = true;\n\t\t}\n\t};\n\n\tColumnCalcs.prototype.scrollHorizontal = function (left) {\n\t\tvar hozAdjust = 0,\n\t\t    scrollWidth = this.table.columnManager.getElement().scrollWidth - this.table.element.clientWidth;\n\n\t\tif (this.botInitialized) {\n\t\t\tthis.botRow.getElement().style.marginLeft = -left + \"px\";\n\t\t}\n\t};\n\n\tColumnCalcs.prototype.recalc = function (rows) {\n\t\tvar data, row;\n\n\t\tif (this.topInitialized || this.botInitialized) {\n\t\t\tdata = this.rowsToData(rows);\n\n\t\t\tif (this.topInitialized) {\n\t\t\t\tif (this.topRow) {\n\t\t\t\t\tthis.topRow.deleteCells();\n\t\t\t\t}\n\n\t\t\t\trow = this.generateRow(\"top\", this.rowsToData(rows));\n\t\t\t\tthis.topRow = row;\n\t\t\t\twhile (this.topElement.firstChild) {\n\t\t\t\t\tthis.topElement.removeChild(this.topElement.firstChild);\n\t\t\t\t}this.topElement.appendChild(row.getElement());\n\t\t\t\trow.initialize(true);\n\t\t\t}\n\n\t\t\tif (this.botInitialized) {\n\t\t\t\tif (this.botRow) {\n\t\t\t\t\tthis.botRow.deleteCells();\n\t\t\t\t}\n\n\t\t\t\trow = this.generateRow(\"bottom\", this.rowsToData(rows));\n\t\t\t\tthis.botRow = row;\n\t\t\t\twhile (this.botElement.firstChild) {\n\t\t\t\t\tthis.botElement.removeChild(this.botElement.firstChild);\n\t\t\t\t}this.botElement.appendChild(row.getElement());\n\t\t\t\trow.initialize(true);\n\t\t\t}\n\n\t\t\tthis.table.rowManager.adjustTableSize();\n\n\t\t\t//set resizable handles\n\t\t\tif (this.table.modExists(\"frozenColumns\")) {\n\t\t\t\tthis.table.modules.frozenColumns.layout();\n\t\t\t}\n\t\t}\n\t};\n\n\tColumnCalcs.prototype.recalcRowGroup = function (row) {\n\t\tthis.recalcGroup(this.table.modules.groupRows.getRowGroup(row));\n\t};\n\n\tColumnCalcs.prototype.recalcAll = function () {\n\t\tvar _this37 = this;\n\n\t\tif (this.topCalcs.length || this.botCalcs.length) {\n\t\t\tif (this.table.options.columnCalcs !== \"group\") {\n\t\t\t\tthis.recalc(this.table.rowManager.activeRows);\n\t\t\t}\n\n\t\t\tif (this.table.options.groupBy && this.table.options.columnCalcs !== \"table\") {\n\n\t\t\t\tvar groups = table.modules.groupRows.getChildGroups();\n\n\t\t\t\tgroups.forEach(function (group) {\n\t\t\t\t\t_this37.recalcGroup(group);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\tColumnCalcs.prototype.recalcGroup = function (group) {\n\t\tvar data, rowData;\n\n\t\tif (group) {\n\t\t\tif (group.calcs) {\n\t\t\t\tif (group.calcs.bottom) {\n\t\t\t\t\tdata = this.rowsToData(group.rows);\n\t\t\t\t\trowData = this.generateRowData(\"bottom\", data);\n\n\t\t\t\t\tgroup.calcs.bottom.updateData(rowData);\n\t\t\t\t\tgroup.calcs.bottom.reinitialize();\n\t\t\t\t}\n\n\t\t\t\tif (group.calcs.top) {\n\t\t\t\t\tdata = this.rowsToData(group.rows);\n\t\t\t\t\trowData = this.generateRowData(\"top\", data);\n\n\t\t\t\t\tgroup.calcs.top.updateData(rowData);\n\t\t\t\t\tgroup.calcs.top.reinitialize();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t//generate top stats row\n\tColumnCalcs.prototype.generateTopRow = function (rows) {\n\t\treturn this.generateRow(\"top\", this.rowsToData(rows));\n\t};\n\t//generate bottom stats row\n\tColumnCalcs.prototype.generateBottomRow = function (rows) {\n\t\treturn this.generateRow(\"bottom\", this.rowsToData(rows));\n\t};\n\n\tColumnCalcs.prototype.rowsToData = function (rows) {\n\t\tvar _this38 = this;\n\n\t\tvar data = [];\n\n\t\trows.forEach(function (row) {\n\t\t\tdata.push(row.getData());\n\n\t\t\tif (_this38.table.options.dataTree && _this38.table.options.dataTreeChildColumnCalcs) {\n\t\t\t\tif (row.modules.dataTree.open) {\n\t\t\t\t\tvar children = _this38.rowsToData(_this38.table.modules.dataTree.getFilteredTreeChildren(row));\n\t\t\t\t\tdata = data.concat(children);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn data;\n\t};\n\n\t//generate stats row\n\tColumnCalcs.prototype.generateRow = function (pos, data) {\n\t\tvar self = this,\n\t\t    rowData = this.generateRowData(pos, data),\n\t\t    row;\n\n\t\tif (self.table.modExists(\"mutator\")) {\n\t\t\tself.table.modules.mutator.disable();\n\t\t}\n\n\t\trow = new Row(rowData, this, \"calc\");\n\n\t\tif (self.table.modExists(\"mutator\")) {\n\t\t\tself.table.modules.mutator.enable();\n\t\t}\n\n\t\trow.getElement().classList.add(\"tabulator-calcs\", \"tabulator-calcs-\" + pos);\n\n\t\trow.generateCells = function () {\n\n\t\t\tvar cells = [];\n\n\t\t\tself.table.columnManager.columnsByIndex.forEach(function (column) {\n\n\t\t\t\t//set field name of mock column\n\t\t\t\tself.genColumn.setField(column.getField());\n\t\t\t\tself.genColumn.hozAlign = column.hozAlign;\n\n\t\t\t\tif (column.definition[pos + \"CalcFormatter\"] && self.table.modExists(\"format\")) {\n\n\t\t\t\t\tself.genColumn.modules.format = {\n\t\t\t\t\t\tformatter: self.table.modules.format.getFormatter(column.definition[pos + \"CalcFormatter\"]),\n\t\t\t\t\t\tparams: column.definition[pos + \"CalcFormatterParams\"]\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tself.genColumn.modules.format = {\n\t\t\t\t\t\tformatter: self.table.modules.format.getFormatter(\"plaintext\"),\n\t\t\t\t\t\tparams: {}\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\t//ensure css class defintion is replicated to calculation cell\n\t\t\t\tself.genColumn.definition.cssClass = column.definition.cssClass;\n\n\t\t\t\t//generate cell and assign to correct column\n\t\t\t\tvar cell = new Cell(self.genColumn, row);\n\t\t\t\tcell.column = column;\n\t\t\t\tcell.setWidth();\n\n\t\t\t\tcolumn.cells.push(cell);\n\t\t\t\tcells.push(cell);\n\n\t\t\t\tif (!column.visible) {\n\t\t\t\t\tcell.hide();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.cells = cells;\n\t\t};\n\n\t\treturn row;\n\t};\n\n\t//generate stats row\n\tColumnCalcs.prototype.generateRowData = function (pos, data) {\n\t\tvar rowData = {},\n\t\t    calcs = pos == \"top\" ? this.topCalcs : this.botCalcs,\n\t\t    type = pos == \"top\" ? \"topCalc\" : \"botCalc\",\n\t\t    params,\n\t\t    paramKey;\n\n\t\tcalcs.forEach(function (column) {\n\t\t\tvar values = [];\n\n\t\t\tif (column.modules.columnCalcs && column.modules.columnCalcs[type]) {\n\t\t\t\tdata.forEach(function (item) {\n\t\t\t\t\tvalues.push(column.getFieldValue(item));\n\t\t\t\t});\n\n\t\t\t\tparamKey = type + \"Params\";\n\t\t\t\tparams = typeof column.modules.columnCalcs[paramKey] === \"function\" ? column.modules.columnCalcs[paramKey](values, data) : column.modules.columnCalcs[paramKey];\n\n\t\t\t\tcolumn.setFieldValue(rowData, column.modules.columnCalcs[type](values, data, params));\n\t\t\t}\n\t\t});\n\n\t\treturn rowData;\n\t};\n\n\tColumnCalcs.prototype.hasTopCalcs = function () {\n\t\treturn !!this.topCalcs.length;\n\t};\n\n\tColumnCalcs.prototype.hasBottomCalcs = function () {\n\t\treturn !!this.botCalcs.length;\n\t};\n\n\t//handle table redraw\n\tColumnCalcs.prototype.redraw = function () {\n\t\tif (this.topRow) {\n\t\t\tthis.topRow.normalizeHeight(true);\n\t\t}\n\t\tif (this.botRow) {\n\t\t\tthis.botRow.normalizeHeight(true);\n\t\t}\n\t};\n\n\t//return the calculated\n\tColumnCalcs.prototype.getResults = function () {\n\t\tvar self = this,\n\t\t    results = {},\n\t\t    groups;\n\n\t\tif (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n\t\t\tgroups = this.table.modules.groupRows.getGroups(true);\n\n\t\t\tgroups.forEach(function (group) {\n\t\t\t\tresults[group.getKey()] = self.getGroupResults(group);\n\t\t\t});\n\t\t} else {\n\t\t\tresults = {\n\t\t\t\ttop: this.topRow ? this.topRow.getData() : {},\n\t\t\t\tbottom: this.botRow ? this.botRow.getData() : {}\n\t\t\t};\n\t\t}\n\n\t\treturn results;\n\t};\n\n\t//get results from a group\n\tColumnCalcs.prototype.getGroupResults = function (group) {\n\t\tvar self = this,\n\t\t    groupObj = group._getSelf(),\n\t\t    subGroups = group.getSubGroups(),\n\t\t    subGroupResults = {},\n\t\t    results = {};\n\n\t\tsubGroups.forEach(function (subgroup) {\n\t\t\tsubGroupResults[subgroup.getKey()] = self.getGroupResults(subgroup);\n\t\t});\n\n\t\tresults = {\n\t\t\ttop: groupObj.calcs.top ? groupObj.calcs.top.getData() : {},\n\t\t\tbottom: groupObj.calcs.bottom ? groupObj.calcs.bottom.getData() : {},\n\t\t\tgroups: subGroupResults\n\t\t};\n\n\t\treturn results;\n\t};\n\n\t//default calculations\n\tColumnCalcs.prototype.calculations = {\n\t\t\"avg\": function avg(values, data, calcParams) {\n\t\t\tvar output = 0,\n\t\t\t    precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : 2;\n\n\t\t\tif (values.length) {\n\t\t\t\toutput = values.reduce(function (sum, value) {\n\t\t\t\t\tvalue = Number(value);\n\t\t\t\t\treturn sum + value;\n\t\t\t\t});\n\n\t\t\t\toutput = output / values.length;\n\n\t\t\t\toutput = precision !== false ? output.toFixed(precision) : output;\n\t\t\t}\n\n\t\t\treturn parseFloat(output).toString();\n\t\t},\n\t\t\"max\": function max(values, data, calcParams) {\n\t\t\tvar output = null,\n\t\t\t    precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\t\tvalues.forEach(function (value) {\n\n\t\t\t\tvalue = Number(value);\n\n\t\t\t\tif (value > output || output === null) {\n\t\t\t\t\toutput = value;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn output !== null ? precision !== false ? output.toFixed(precision) : output : \"\";\n\t\t},\n\t\t\"min\": function min(values, data, calcParams) {\n\t\t\tvar output = null,\n\t\t\t    precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\t\tvalues.forEach(function (value) {\n\n\t\t\t\tvalue = Number(value);\n\n\t\t\t\tif (value < output || output === null) {\n\t\t\t\t\toutput = value;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn output !== null ? precision !== false ? output.toFixed(precision) : output : \"\";\n\t\t},\n\t\t\"sum\": function sum(values, data, calcParams) {\n\t\t\tvar output = 0,\n\t\t\t    precision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\t\tif (values.length) {\n\t\t\t\tvalues.forEach(function (value) {\n\t\t\t\t\tvalue = Number(value);\n\n\t\t\t\t\toutput += !isNaN(value) ? Number(value) : 0;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn precision !== false ? output.toFixed(precision) : output;\n\t\t},\n\t\t\"concat\": function concat(values, data, calcParams) {\n\t\t\tvar output = 0;\n\n\t\t\tif (values.length) {\n\t\t\t\toutput = values.reduce(function (sum, value) {\n\t\t\t\t\treturn String(sum) + String(value);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn output;\n\t\t},\n\t\t\"count\": function count(values, data, calcParams) {\n\t\t\tvar output = 0;\n\n\t\t\tif (values.length) {\n\t\t\t\tvalues.forEach(function (value) {\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\toutput++;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn output;\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"columnCalcs\", ColumnCalcs);\n\n\tvar Clipboard = function Clipboard(table) {\n\t\tthis.table = table;\n\t\tthis.mode = true;\n\n\t\tthis.pasteParser = function () {};\n\t\tthis.pasteAction = function () {};\n\t\tthis.customSelection = false;\n\t\tthis.rowRange = false;\n\t\tthis.blocked = true; //block copy actions not originating from this command\n\t};\n\n\tClipboard.prototype.initialize = function () {\n\t\tvar _this39 = this;\n\n\t\tthis.mode = this.table.options.clipboard;\n\n\t\tthis.rowRange = this.table.options.clipboardCopyRowRange;\n\n\t\tif (this.mode === true || this.mode === \"copy\") {\n\t\t\tthis.table.element.addEventListener(\"copy\", function (e) {\n\t\t\t\tvar plain, html, list;\n\n\t\t\t\tif (!_this39.blocked) {\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tif (_this39.customSelection) {\n\t\t\t\t\t\tplain = _this39.customSelection;\n\n\t\t\t\t\t\tif (_this39.table.options.clipboardCopyFormatter) {\n\t\t\t\t\t\t\tplain = _this39.table.options.clipboardCopyFormatter(\"plain\", plain);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar list = _this39.table.modules.export.generateExportList(_this39.rowRange, _this39.table.options.clipboardCopyStyled, _this39.table.options.clipboardCopyConfig, \"clipboard\");\n\n\t\t\t\t\t\thtml = _this39.table.modules.export.genereateHTMLTable(list);\n\t\t\t\t\t\tplain = html ? _this39.generatePlainContent(list) : \"\";\n\n\t\t\t\t\t\tif (_this39.table.options.clipboardCopyFormatter) {\n\t\t\t\t\t\t\tplain = _this39.table.options.clipboardCopyFormatter(\"plain\", plain);\n\t\t\t\t\t\t\thtml = _this39.table.options.clipboardCopyFormatter(\"html\", html);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (window.clipboardData && window.clipboardData.setData) {\n\t\t\t\t\t\twindow.clipboardData.setData('Text', plain);\n\t\t\t\t\t} else if (e.clipboardData && e.clipboardData.setData) {\n\t\t\t\t\t\te.clipboardData.setData('text/plain', plain);\n\t\t\t\t\t\tif (html) {\n\t\t\t\t\t\t\te.clipboardData.setData('text/html', html);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (e.originalEvent && e.originalEvent.clipboardData.setData) {\n\t\t\t\t\t\te.originalEvent.clipboardData.setData('text/plain', plain);\n\t\t\t\t\t\tif (html) {\n\t\t\t\t\t\t\te.originalEvent.clipboardData.setData('text/html', html);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t_this39.table.options.clipboardCopied.call(_this39.table, plain, html);\n\n\t\t\t\t\t_this39.reset();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (this.mode === true || this.mode === \"paste\") {\n\t\t\tthis.table.element.addEventListener(\"paste\", function (e) {\n\t\t\t\t_this39.paste(e);\n\t\t\t});\n\t\t}\n\n\t\tthis.setPasteParser(this.table.options.clipboardPasteParser);\n\t\tthis.setPasteAction(this.table.options.clipboardPasteAction);\n\t};\n\n\tClipboard.prototype.reset = function () {\n\t\tthis.blocked = false;\n\t\tthis.originalSelectionText = \"\";\n\t};\n\n\tClipboard.prototype.generatePlainContent = function (list) {\n\t\tvar output = [];\n\n\t\tlist.forEach(function (row) {\n\t\t\tvar rowData = [];\n\n\t\t\trow.columns.forEach(function (col) {\n\t\t\t\tvar value = \"\";\n\n\t\t\t\tif (col) {\n\n\t\t\t\t\tif (row.type === \"group\") {\n\t\t\t\t\t\tcol.value = col.component.getKey();\n\t\t\t\t\t}\n\n\t\t\t\t\tswitch (_typeof(col.value)) {\n\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\tvalue = JSON.stringify(col.value);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\tcase \"null\":\n\t\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tvalue = col.value;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\trowData.push(value);\n\t\t\t});\n\n\t\t\toutput.push(rowData.join(\"\\t\"));\n\t\t});\n\n\t\treturn output.join(\"\\n\");\n\t};\n\n\tClipboard.prototype.copy = function (range, internal) {\n\t\tvar range, sel, textRange;\n\t\tthis.blocked = false;\n\t\tthis.customSelection = false;\n\n\t\tif (this.mode === true || this.mode === \"copy\") {\n\n\t\t\tthis.rowRange = range || this.table.options.clipboardCopyRowRange;\n\n\t\t\tif (typeof window.getSelection != \"undefined\" && typeof document.createRange != \"undefined\") {\n\t\t\t\trange = document.createRange();\n\t\t\t\trange.selectNodeContents(this.table.element);\n\t\t\t\tsel = window.getSelection();\n\n\t\t\t\tif (sel.toString() && internal) {\n\t\t\t\t\tthis.customSelection = sel.toString();\n\t\t\t\t}\n\n\t\t\t\tsel.removeAllRanges();\n\t\t\t\tsel.addRange(range);\n\t\t\t} else if (typeof document.selection != \"undefined\" && typeof document.body.createTextRange != \"undefined\") {\n\t\t\t\ttextRange = document.body.createTextRange();\n\t\t\t\ttextRange.moveToElementText(this.table.element);\n\t\t\t\ttextRange.select();\n\t\t\t}\n\n\t\t\tdocument.execCommand('copy');\n\n\t\t\tif (sel) {\n\t\t\t\tsel.removeAllRanges();\n\t\t\t}\n\t\t}\n\t};\n\n\t//PASTE EVENT HANDLING\n\n\tClipboard.prototype.setPasteAction = function (action) {\n\n\t\tswitch (typeof action === 'undefined' ? 'undefined' : _typeof(action)) {\n\t\t\tcase \"string\":\n\t\t\t\tthis.pasteAction = this.pasteActions[action];\n\n\t\t\t\tif (!this.pasteAction) {\n\t\t\t\t\tconsole.warn(\"Clipboard Error - No such paste action found:\", action);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tthis.pasteAction = action;\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tClipboard.prototype.setPasteParser = function (parser) {\n\t\tswitch (typeof parser === 'undefined' ? 'undefined' : _typeof(parser)) {\n\t\t\tcase \"string\":\n\t\t\t\tthis.pasteParser = this.pasteParsers[parser];\n\n\t\t\t\tif (!this.pasteParser) {\n\t\t\t\t\tconsole.warn(\"Clipboard Error - No such paste parser found:\", parser);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tthis.pasteParser = parser;\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tClipboard.prototype.paste = function (e) {\n\t\tvar data, rowData, rows;\n\n\t\tif (this.checkPaseOrigin(e)) {\n\n\t\t\tdata = this.getPasteData(e);\n\n\t\t\trowData = this.pasteParser.call(this, data);\n\n\t\t\tif (rowData) {\n\t\t\t\te.preventDefault();\n\n\t\t\t\tif (this.table.modExists(\"mutator\")) {\n\t\t\t\t\trowData = this.mutateData(rowData);\n\t\t\t\t}\n\n\t\t\t\trows = this.pasteAction.call(this, rowData);\n\t\t\t\tthis.table.options.clipboardPasted.call(this.table, data, rowData, rows);\n\t\t\t} else {\n\t\t\t\tthis.table.options.clipboardPasteError.call(this.table, data);\n\t\t\t}\n\t\t}\n\t};\n\n\tClipboard.prototype.mutateData = function (data) {\n\t\tvar self = this,\n\t\t    output = [];\n\n\t\tif (Array.isArray(data)) {\n\t\t\tdata.forEach(function (row) {\n\t\t\t\toutput.push(self.table.modules.mutator.transformRow(row, \"clipboard\"));\n\t\t\t});\n\t\t} else {\n\t\t\toutput = data;\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tClipboard.prototype.checkPaseOrigin = function (e) {\n\t\tvar valid = true;\n\n\t\tif (e.target.tagName != \"DIV\" || this.table.modules.edit.currentCell) {\n\t\t\tvalid = false;\n\t\t}\n\n\t\treturn valid;\n\t};\n\n\tClipboard.prototype.getPasteData = function (e) {\n\t\tvar data;\n\n\t\tif (window.clipboardData && window.clipboardData.getData) {\n\t\t\tdata = window.clipboardData.getData('Text');\n\t\t} else if (e.clipboardData && e.clipboardData.getData) {\n\t\t\tdata = e.clipboardData.getData('text/plain');\n\t\t} else if (e.originalEvent && e.originalEvent.clipboardData.getData) {\n\t\t\tdata = e.originalEvent.clipboardData.getData('text/plain');\n\t\t}\n\n\t\treturn data;\n\t};\n\n\tClipboard.prototype.pasteParsers = {\n\t\ttable: function table(clipboard) {\n\t\t\tvar data = [],\n\t\t\t    success = false,\n\t\t\t    headerFindSuccess = true,\n\t\t\t    columns = this.table.columnManager.columns,\n\t\t\t    columnMap = [],\n\t\t\t    rows = [];\n\n\t\t\t//get data from clipboard into array of columns and rows.\n\t\t\tclipboard = clipboard.split(\"\\n\");\n\n\t\t\tclipboard.forEach(function (row) {\n\t\t\t\tdata.push(row.split(\"\\t\"));\n\t\t\t});\n\n\t\t\tif (data.length && !(data.length === 1 && data[0].length < 2)) {\n\t\t\t\tsuccess = true;\n\n\t\t\t\t//check if headers are present by title\n\t\t\t\tdata[0].forEach(function (value) {\n\t\t\t\t\tvar column = columns.find(function (column) {\n\t\t\t\t\t\treturn value && column.definition.title && value.trim() && column.definition.title.trim() === value.trim();\n\t\t\t\t\t});\n\n\t\t\t\t\tif (column) {\n\t\t\t\t\t\tcolumnMap.push(column);\n\t\t\t\t\t} else {\n\t\t\t\t\t\theaderFindSuccess = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t//check if column headers are present by field\n\t\t\t\tif (!headerFindSuccess) {\n\t\t\t\t\theaderFindSuccess = true;\n\t\t\t\t\tcolumnMap = [];\n\n\t\t\t\t\tdata[0].forEach(function (value) {\n\t\t\t\t\t\tvar column = columns.find(function (column) {\n\t\t\t\t\t\t\treturn value && column.field && value.trim() && column.field.trim() === value.trim();\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (column) {\n\t\t\t\t\t\t\tcolumnMap.push(column);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\theaderFindSuccess = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tif (!headerFindSuccess) {\n\t\t\t\t\t\tcolumnMap = this.table.columnManager.columnsByIndex;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//remove header row if found\n\t\t\t\tif (headerFindSuccess) {\n\t\t\t\t\tdata.shift();\n\t\t\t\t}\n\n\t\t\t\tdata.forEach(function (item) {\n\t\t\t\t\tvar row = {};\n\n\t\t\t\t\titem.forEach(function (value, i) {\n\t\t\t\t\t\tif (columnMap[i]) {\n\t\t\t\t\t\t\trow[columnMap[i].field] = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\trows.push(row);\n\t\t\t\t});\n\n\t\t\t\treturn rows;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t};\n\n\tClipboard.prototype.pasteActions = {\n\t\treplace: function replace(rows) {\n\t\t\treturn this.table.setData(rows);\n\t\t},\n\t\tupdate: function update(rows) {\n\t\t\treturn this.table.updateOrAddData(rows);\n\t\t},\n\t\tinsert: function insert(rows) {\n\t\t\treturn this.table.addData(rows);\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"clipboard\", Clipboard);\n\n\tvar DataTree = function DataTree(table) {\n\t\tthis.table = table;\n\t\tthis.indent = 10;\n\t\tthis.field = \"\";\n\t\tthis.collapseEl = null;\n\t\tthis.expandEl = null;\n\t\tthis.branchEl = null;\n\t\tthis.elementField = false;\n\n\t\tthis.startOpen = function () {};\n\n\t\tthis.displayIndex = 0;\n\t};\n\n\tDataTree.prototype.initialize = function () {\n\t\tvar dummyEl = null,\n\t\t    firstCol = this.table.columnManager.getFirstVisibileColumn(),\n\t\t    options = this.table.options;\n\n\t\tthis.field = options.dataTreeChildField;\n\t\tthis.indent = options.dataTreeChildIndent;\n\t\tthis.elementField = options.dataTreeElementColumn || (firstCol ? firstCol.field : false);\n\n\t\tif (options.dataTreeBranchElement) {\n\n\t\t\tif (options.dataTreeBranchElement === true) {\n\t\t\t\tthis.branchEl = document.createElement(\"div\");\n\t\t\t\tthis.branchEl.classList.add(\"tabulator-data-tree-branch\");\n\t\t\t} else {\n\t\t\t\tif (typeof options.dataTreeBranchElement === \"string\") {\n\t\t\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\t\t\tdummyEl.innerHTML = options.dataTreeBranchElement;\n\t\t\t\t\tthis.branchEl = dummyEl.firstChild;\n\t\t\t\t} else {\n\t\t\t\t\tthis.branchEl = options.dataTreeBranchElement;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (options.dataTreeCollapseElement) {\n\t\t\tif (typeof options.dataTreeCollapseElement === \"string\") {\n\t\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\t\tdummyEl.innerHTML = options.dataTreeCollapseElement;\n\t\t\t\tthis.collapseEl = dummyEl.firstChild;\n\t\t\t} else {\n\t\t\t\tthis.collapseEl = options.dataTreeCollapseElement;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.collapseEl = document.createElement(\"div\");\n\t\t\tthis.collapseEl.classList.add(\"tabulator-data-tree-control\");\n\t\t\tthis.collapseEl.tabIndex = 0;\n\t\t\tthis.collapseEl.innerHTML = \"<div class='tabulator-data-tree-control-collapse'></div>\";\n\t\t}\n\n\t\tif (options.dataTreeExpandElement) {\n\t\t\tif (typeof options.dataTreeExpandElement === \"string\") {\n\t\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\t\tdummyEl.innerHTML = options.dataTreeExpandElement;\n\t\t\t\tthis.expandEl = dummyEl.firstChild;\n\t\t\t} else {\n\t\t\t\tthis.expandEl = options.dataTreeExpandElement;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.expandEl = document.createElement(\"div\");\n\t\t\tthis.expandEl.classList.add(\"tabulator-data-tree-control\");\n\t\t\tthis.expandEl.tabIndex = 0;\n\t\t\tthis.expandEl.innerHTML = \"<div class='tabulator-data-tree-control-expand'></div>\";\n\t\t}\n\n\t\tswitch (_typeof(options.dataTreeStartExpanded)) {\n\t\t\tcase \"boolean\":\n\t\t\t\tthis.startOpen = function (row, index) {\n\t\t\t\t\treturn options.dataTreeStartExpanded;\n\t\t\t\t};\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tthis.startOpen = options.dataTreeStartExpanded;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthis.startOpen = function (row, index) {\n\t\t\t\t\treturn options.dataTreeStartExpanded[index];\n\t\t\t\t};\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tDataTree.prototype.initializeRow = function (row) {\n\t\tvar childArray = row.getData()[this.field];\n\t\tvar isArray = Array.isArray(childArray);\n\n\t\tvar children = isArray || !isArray && (typeof childArray === 'undefined' ? 'undefined' : _typeof(childArray)) === \"object\" && childArray !== null;\n\n\t\tif (!children && row.modules.dataTree && row.modules.dataTree.branchEl) {\n\t\t\trow.modules.dataTree.branchEl.parentNode.removeChild(row.modules.dataTree.branchEl);\n\t\t}\n\n\t\tif (!children && row.modules.dataTree && row.modules.dataTree.controlEl) {\n\t\t\trow.modules.dataTree.controlEl.parentNode.removeChild(row.modules.dataTree.controlEl);\n\t\t}\n\n\t\trow.modules.dataTree = {\n\t\t\tindex: row.modules.dataTree ? row.modules.dataTree.index : 0,\n\t\t\topen: children ? row.modules.dataTree ? row.modules.dataTree.open : this.startOpen(row.getComponent(), 0) : false,\n\t\t\tcontrolEl: row.modules.dataTree && children ? row.modules.dataTree.controlEl : false,\n\t\t\tbranchEl: row.modules.dataTree && children ? row.modules.dataTree.branchEl : false,\n\t\t\tparent: row.modules.dataTree ? row.modules.dataTree.parent : false,\n\t\t\tchildren: children\n\t\t};\n\t};\n\n\tDataTree.prototype.layoutRow = function (row) {\n\t\tvar cell = this.elementField ? row.getCell(this.elementField) : row.getCells()[0],\n\t\t    el = cell.getElement(),\n\t\t    config = row.modules.dataTree;\n\n\t\tif (config.branchEl) {\n\t\t\tif (config.branchEl.parentNode) {\n\t\t\t\tconfig.branchEl.parentNode.removeChild(config.branchEl);\n\t\t\t}\n\t\t\tconfig.branchEl = false;\n\t\t}\n\n\t\tif (config.controlEl) {\n\t\t\tif (config.controlEl.parentNode) {\n\t\t\t\tconfig.controlEl.parentNode.removeChild(config.controlEl);\n\t\t\t}\n\t\t\tconfig.controlEl = false;\n\t\t}\n\n\t\tthis.generateControlElement(row, el);\n\n\t\trow.element.classList.add(\"tabulator-tree-level-\" + config.index);\n\n\t\tif (config.index) {\n\t\t\tif (this.branchEl) {\n\t\t\t\tconfig.branchEl = this.branchEl.cloneNode(true);\n\t\t\t\tel.insertBefore(config.branchEl, el.firstChild);\n\t\t\t\tconfig.branchEl.style.marginLeft = (config.branchEl.offsetWidth + config.branchEl.style.marginRight) * (config.index - 1) + config.index * this.indent + \"px\";\n\t\t\t} else {\n\t\t\t\tel.style.paddingLeft = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-left')) + config.index * this.indent + \"px\";\n\t\t\t}\n\t\t}\n\t};\n\n\tDataTree.prototype.generateControlElement = function (row, el) {\n\t\tvar _this40 = this;\n\n\t\tvar config = row.modules.dataTree,\n\t\t    el = el || row.getCells()[0].getElement(),\n\t\t    oldControl = config.controlEl;\n\n\t\tif (config.children !== false) {\n\n\t\t\tif (config.open) {\n\t\t\t\tconfig.controlEl = this.collapseEl.cloneNode(true);\n\t\t\t\tconfig.controlEl.addEventListener(\"click\", function (e) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t_this40.collapseRow(row);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconfig.controlEl = this.expandEl.cloneNode(true);\n\t\t\t\tconfig.controlEl.addEventListener(\"click\", function (e) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t_this40.expandRow(row);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconfig.controlEl.addEventListener(\"mousedown\", function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\n\t\t\tif (oldControl && oldControl.parentNode === el) {\n\t\t\t\toldControl.parentNode.replaceChild(config.controlEl, oldControl);\n\t\t\t} else {\n\t\t\t\tel.insertBefore(config.controlEl, el.firstChild);\n\t\t\t}\n\t\t}\n\t};\n\n\tDataTree.prototype.setDisplayIndex = function (index) {\n\t\tthis.displayIndex = index;\n\t};\n\n\tDataTree.prototype.getDisplayIndex = function () {\n\t\treturn this.displayIndex;\n\t};\n\n\tDataTree.prototype.getRows = function (rows) {\n\t\tvar _this41 = this;\n\n\t\tvar output = [];\n\n\t\trows.forEach(function (row, i) {\n\t\t\tvar config, children;\n\n\t\t\toutput.push(row);\n\n\t\t\tif (row instanceof Row) {\n\n\t\t\t\tconfig = row.modules.dataTree.children;\n\n\t\t\t\tif (!config.index && config.children !== false) {\n\t\t\t\t\tchildren = _this41.getChildren(row);\n\n\t\t\t\t\tchildren.forEach(function (child) {\n\t\t\t\t\t\toutput.push(child);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t};\n\n\tDataTree.prototype.getChildren = function (row) {\n\t\tvar _this42 = this;\n\n\t\tvar config = row.modules.dataTree,\n\t\t    children = [],\n\t\t    output = [];\n\n\t\tif (config.children !== false && config.open) {\n\t\t\tif (!Array.isArray(config.children)) {\n\t\t\t\tconfig.children = this.generateChildren(row);\n\t\t\t}\n\n\t\t\tif (this.table.modExists(\"filter\")) {\n\t\t\t\tchildren = this.table.modules.filter.filter(config.children);\n\t\t\t} else {\n\t\t\t\tchildren = config.children;\n\t\t\t}\n\n\t\t\tif (this.table.modExists(\"sort\")) {\n\t\t\t\tthis.table.modules.sort.sort(children);\n\t\t\t}\n\n\t\t\tchildren.forEach(function (child) {\n\t\t\t\toutput.push(child);\n\n\t\t\t\tvar subChildren = _this42.getChildren(child);\n\n\t\t\t\tsubChildren.forEach(function (sub) {\n\t\t\t\t\toutput.push(sub);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tDataTree.prototype.generateChildren = function (row) {\n\t\tvar _this43 = this;\n\n\t\tvar children = [];\n\n\t\tvar childArray = row.getData()[this.field];\n\n\t\tif (!Array.isArray(childArray)) {\n\t\t\tchildArray = [childArray];\n\t\t}\n\n\t\tchildArray.forEach(function (childData) {\n\t\t\tvar childRow = new Row(childData || {}, _this43.table.rowManager);\n\t\t\tchildRow.modules.dataTree.index = row.modules.dataTree.index + 1;\n\t\t\tchildRow.modules.dataTree.parent = row;\n\t\t\tif (childRow.modules.dataTree.children) {\n\t\t\t\tchildRow.modules.dataTree.open = _this43.startOpen(childRow.getComponent(), childRow.modules.dataTree.index);\n\t\t\t}\n\t\t\tchildren.push(childRow);\n\t\t});\n\n\t\treturn children;\n\t};\n\n\tDataTree.prototype.expandRow = function (row, silent) {\n\t\tvar config = row.modules.dataTree;\n\n\t\tif (config.children !== false) {\n\t\t\tconfig.open = true;\n\n\t\t\trow.reinitialize();\n\n\t\t\tthis.table.rowManager.refreshActiveData(\"tree\", false, true);\n\n\t\t\tthis.table.options.dataTreeRowExpanded(row.getComponent(), row.modules.dataTree.index);\n\t\t}\n\t};\n\n\tDataTree.prototype.collapseRow = function (row) {\n\t\tvar config = row.modules.dataTree;\n\n\t\tif (config.children !== false) {\n\t\t\tconfig.open = false;\n\n\t\t\trow.reinitialize();\n\n\t\t\tthis.table.rowManager.refreshActiveData(\"tree\", false, true);\n\n\t\t\tthis.table.options.dataTreeRowCollapsed(row.getComponent(), row.modules.dataTree.index);\n\t\t}\n\t};\n\n\tDataTree.prototype.toggleRow = function (row) {\n\t\tvar config = row.modules.dataTree;\n\n\t\tif (config.children !== false) {\n\t\t\tif (config.open) {\n\t\t\t\tthis.collapseRow(row);\n\t\t\t} else {\n\t\t\t\tthis.expandRow(row);\n\t\t\t}\n\t\t}\n\t};\n\n\tDataTree.prototype.getTreeParent = function (row) {\n\t\treturn row.modules.dataTree.parent ? row.modules.dataTree.parent.getComponent() : false;\n\t};\n\n\tDataTree.prototype.getFilteredTreeChildren = function (row) {\n\t\tvar config = row.modules.dataTree,\n\t\t    output = [],\n\t\t    children;\n\n\t\tif (config.children) {\n\n\t\t\tif (!Array.isArray(config.children)) {\n\t\t\t\tconfig.children = this.generateChildren(row);\n\t\t\t}\n\n\t\t\tif (this.table.modExists(\"filter\")) {\n\t\t\t\tchildren = this.table.modules.filter.filter(config.children);\n\t\t\t} else {\n\t\t\t\tchildren = config.children;\n\t\t\t}\n\n\t\t\tchildren.forEach(function (childRow) {\n\t\t\t\tif (childRow instanceof Row) {\n\t\t\t\t\toutput.push(childRow);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tDataTree.prototype.rowDelete = function (row) {\n\t\tvar parent = row.modules.dataTree.parent,\n\t\t    childIndex;\n\n\t\tif (parent) {\n\t\t\tchildIndex = this.findChildIndex(row, parent);\n\n\t\t\tif (childIndex !== false) {\n\t\t\t\tparent.data[this.field].splice(childIndex, 1);\n\t\t\t}\n\n\t\t\tif (!parent.data[this.field].length) {\n\t\t\t\tdelete parent.data[this.field];\n\t\t\t}\n\n\t\t\tthis.initializeRow(parent);\n\t\t\tthis.layoutRow(parent);\n\t\t}\n\n\t\tthis.table.rowManager.refreshActiveData(\"tree\", false, true);\n\t};\n\n\tDataTree.prototype.addTreeChildRow = function (row, data, top, index) {\n\t\tvar childIndex = false;\n\n\t\tif (typeof data === \"string\") {\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\n\t\tif (!Array.isArray(row.data[this.field])) {\n\t\t\trow.data[this.field] = [];\n\n\t\t\trow.modules.dataTree.open = this.startOpen(row.getComponent(), row.modules.dataTree.index);\n\t\t}\n\n\t\tif (typeof index !== \"undefined\") {\n\t\t\tchildIndex = this.findChildIndex(index, row);\n\n\t\t\tif (childIndex !== false) {\n\t\t\t\trow.data[this.field].splice(top ? childIndex : childIndex + 1, 0, data);\n\t\t\t}\n\t\t}\n\n\t\tif (childIndex === false) {\n\t\t\tif (top) {\n\t\t\t\trow.data[this.field].unshift(data);\n\t\t\t} else {\n\t\t\t\trow.data[this.field].push(data);\n\t\t\t}\n\t\t}\n\n\t\tthis.initializeRow(row);\n\t\tthis.layoutRow(row);\n\n\t\tthis.table.rowManager.refreshActiveData(\"tree\", false, true);\n\t};\n\n\tDataTree.prototype.findChildIndex = function (subject, parent) {\n\t\tvar _this44 = this;\n\n\t\tvar match = false;\n\n\t\tif ((typeof subject === 'undefined' ? 'undefined' : _typeof(subject)) == \"object\") {\n\n\t\t\tif (subject instanceof Row) {\n\t\t\t\t//subject is row element\n\t\t\t\tmatch = subject.data;\n\t\t\t} else if (subject instanceof RowComponent) {\n\t\t\t\t//subject is public row component\n\t\t\t\tmatch = subject._getSelf().data;\n\t\t\t} else if (typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement) {\n\t\t\t\tif (parent.modules.dataTree) {\n\t\t\t\t\tmatch = parent.modules.dataTree.children.find(function (childRow) {\n\t\t\t\t\t\treturn childRow instanceof Row ? childRow.element === subject : false;\n\t\t\t\t\t});\n\n\t\t\t\t\tif (match) {\n\t\t\t\t\t\tmatch = match.data;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (typeof subject == \"undefined\" || subject === null) {\n\t\t\tmatch = false;\n\t\t} else {\n\t\t\t//subject should be treated as the index of the row\n\t\t\tmatch = parent.data[this.field].find(function (row) {\n\t\t\t\treturn row.data[_this44.table.options.index] == subject;\n\t\t\t});\n\t\t}\n\n\t\tif (match) {\n\n\t\t\tif (Array.isArray(parent.data[this.field])) {\n\t\t\t\tmatch = parent.data[this.field].indexOf(match);\n\t\t\t}\n\n\t\t\tif (match == -1) {\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t}\n\n\t\t//catch all for any other type of input\n\n\t\treturn match;\n\t};\n\n\tDataTree.prototype.getTreeChildren = function (row) {\n\t\tvar config = row.modules.dataTree,\n\t\t    output = [];\n\n\t\tif (config.children) {\n\n\t\t\tif (!Array.isArray(config.children)) {\n\t\t\t\tconfig.children = this.generateChildren(row);\n\t\t\t}\n\n\t\t\tconfig.children.forEach(function (childRow) {\n\t\t\t\tif (childRow instanceof Row) {\n\t\t\t\t\toutput.push(childRow.getComponent());\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tDataTree.prototype.checkForRestyle = function (cell) {\n\t\tif (!cell.row.cells.indexOf(cell)) {\n\t\t\tcell.row.reinitialize();\n\t\t}\n\t};\n\n\tDataTree.prototype.getChildField = function () {\n\t\treturn this.field;\n\t};\n\n\tDataTree.prototype.redrawNeeded = function (data) {\n\t\treturn (this.field ? typeof data[this.field] !== \"undefined\" : false) || (this.elementField ? typeof data[this.elementField] !== \"undefined\" : false);\n\t};\n\n\tTabulator.prototype.registerModule(\"dataTree\", DataTree);\n\n\tvar Download = function Download(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t};\n\n\t//trigger file download\n\tDownload.prototype.download = function (type, filename, options, range, interceptCallback) {\n\t\tvar self = this,\n\t\t    downloadFunc = false;\n\n\t\tfunction buildLink(data, mime) {\n\t\t\tif (interceptCallback) {\n\t\t\t\tif (interceptCallback === true) {\n\t\t\t\t\tself.triggerDownload(data, mime, type, filename, true);\n\t\t\t\t} else {\n\t\t\t\t\tinterceptCallback(data);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tself.triggerDownload(data, mime, type, filename);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof type == \"function\") {\n\t\t\tdownloadFunc = type;\n\t\t} else {\n\t\t\tif (self.downloaders[type]) {\n\t\t\t\tdownloadFunc = self.downloaders[type];\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Download Error - No such download type found: \", type);\n\t\t\t}\n\t\t}\n\n\t\tif (downloadFunc) {\n\t\t\tvar list = this.generateExportList(range);\n\n\t\t\tdownloadFunc.call(this.table, list, options || {}, buildLink);\n\t\t}\n\t};\n\n\tDownload.prototype.generateExportList = function (range) {\n\t\tvar list = this.table.modules.export.generateExportList(this.table.options.downloadConfig, false, range || this.table.options.downloadRowRange, \"download\");\n\n\t\t//assign group header formatter\n\t\tvar groupHeader = this.table.options.groupHeaderDownload;\n\n\t\tif (groupHeader && !Array.isArray(groupHeader)) {\n\t\t\tgroupHeader = [groupHeader];\n\t\t}\n\n\t\tlist.forEach(function (row) {\n\t\t\tvar group;\n\n\t\t\tif (row.type === \"group\") {\n\t\t\t\tgroup = row.columns[0];\n\n\t\t\t\tif (groupHeader && groupHeader[row.indent]) {\n\t\t\t\t\tgroup.value = groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn list;\n\t};\n\n\tDownload.prototype.triggerDownload = function (data, mime, type, filename, newTab) {\n\t\tvar element = document.createElement('a'),\n\t\t    blob = new Blob([data], { type: mime }),\n\t\t    filename = filename || \"Tabulator.\" + (typeof type === \"function\" ? \"txt\" : type);\n\n\t\tblob = this.table.options.downloadReady.call(this.table, data, blob);\n\n\t\tif (blob) {\n\n\t\t\tif (newTab) {\n\t\t\t\twindow.open(window.URL.createObjectURL(blob));\n\t\t\t} else {\n\t\t\t\tif (navigator.msSaveOrOpenBlob) {\n\t\t\t\t\tnavigator.msSaveOrOpenBlob(blob, filename);\n\t\t\t\t} else {\n\t\t\t\t\telement.setAttribute('href', window.URL.createObjectURL(blob));\n\n\t\t\t\t\t//set file title\n\t\t\t\t\telement.setAttribute('download', filename);\n\n\t\t\t\t\t//trigger download\n\t\t\t\t\telement.style.display = 'none';\n\t\t\t\t\tdocument.body.appendChild(element);\n\t\t\t\t\telement.click();\n\n\t\t\t\t\t//remove temporary link element\n\t\t\t\t\tdocument.body.removeChild(element);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.table.options.downloadComplete) {\n\t\t\t\tthis.table.options.downloadComplete();\n\t\t\t}\n\t\t}\n\t};\n\n\tDownload.prototype.commsReceived = function (table, action, data) {\n\t\tswitch (action) {\n\t\t\tcase \"intercept\":\n\t\t\t\tthis.download(data.type, \"\", data.options, data.active, data.intercept);\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\t//downloaders\n\tDownload.prototype.downloaders = {\n\t\tcsv: function csv(list, options, setFileContents) {\n\t\t\tvar delimiter = options && options.delimiter ? options.delimiter : \",\",\n\t\t\t    fileContents = [],\n\t\t\t    headers = [];\n\n\t\t\tlist.forEach(function (row) {\n\t\t\t\tvar item = [];\n\n\t\t\t\tswitch (row.type) {\n\t\t\t\t\tcase \"group\":\n\t\t\t\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process row groups\");\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"calc\":\n\t\t\t\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process column calculations\");\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"header\":\n\t\t\t\t\t\trow.columns.forEach(function (col, i) {\n\t\t\t\t\t\t\tif (col && col.depth === 1) {\n\t\t\t\t\t\t\t\theaders[i] = typeof col.value == \"undefined\" || typeof col.value == \"null\" ? \"\" : col.value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"row\":\n\t\t\t\t\t\trow.columns.forEach(function (col) {\n\n\t\t\t\t\t\t\tif (col) {\n\n\t\t\t\t\t\t\t\tswitch (_typeof(col.value)) {\n\t\t\t\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\t\t\t\tcol.value = JSON.stringify(col.value);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\t\t\t\tcase \"null\":\n\t\t\t\t\t\t\t\t\t\tcol.value = \"\";\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\titem.push('\"' + String(col.value).split('\"').join('\"\"') + '\"');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tfileContents.push(item.join(delimiter));\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (headers.length) {\n\t\t\t\tfileContents = [headers].concat(fileContents);\n\t\t\t}\n\n\t\t\tfileContents = fileContents.join(\"\\n\");\n\n\t\t\tif (options.bom) {\n\t\t\t\tfileContents = '\\uFEFF' + fileContents;\n\t\t\t}\n\n\t\t\tsetFileContents(fileContents, \"text/csv\");\n\t\t},\n\n\t\tjson: function json(list, options, setFileContents) {\n\t\t\tvar fileContents = [];\n\n\t\t\tlist.forEach(function (row) {\n\t\t\t\tvar item = {};\n\n\t\t\t\tswitch (row.type) {\n\t\t\t\t\tcase \"header\":\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"group\":\n\t\t\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process row groups\");\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"calc\":\n\t\t\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process column calculations\");\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"row\":\n\t\t\t\t\t\trow.columns.forEach(function (col) {\n\t\t\t\t\t\t\tif (col) {\n\t\t\t\t\t\t\t\titem[col.component.getField()] = col.value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tfileContents.push(item);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tfileContents = JSON.stringify(fileContents, null, '\\t');\n\n\t\t\tsetFileContents(fileContents, \"application/json\");\n\t\t},\n\n\t\tpdf: function pdf(list, options, setFileContents) {\n\t\t\tvar header = [],\n\t\t\t    body = [],\n\t\t\t    autoTableParams = {},\n\t\t\t    rowGroupStyles = options.rowGroupStyles || {\n\t\t\t\tfontStyle: \"bold\",\n\t\t\t\tfontSize: 12,\n\t\t\t\tcellPadding: 6,\n\t\t\t\tfillColor: 220\n\t\t\t},\n\t\t\t    rowCalcStyles = options.rowCalcStyles || {\n\t\t\t\tfontStyle: \"bold\",\n\t\t\t\tfontSize: 10,\n\t\t\t\tcellPadding: 4,\n\t\t\t\tfillColor: 232\n\t\t\t},\n\t\t\t    jsPDFParams = options.jsPDF || {},\n\t\t\t    title = options && options.title ? options.title : \"\";\n\n\t\t\tif (!jsPDFParams.orientation) {\n\t\t\t\tjsPDFParams.orientation = options.orientation || \"landscape\";\n\t\t\t}\n\n\t\t\tif (!jsPDFParams.unit) {\n\t\t\t\tjsPDFParams.unit = \"pt\";\n\t\t\t}\n\n\t\t\t//parse row list\n\t\t\tlist.forEach(function (row) {\n\t\t\t\tvar item = {};\n\n\t\t\t\tswitch (row.type) {\n\t\t\t\t\tcase \"header\":\n\t\t\t\t\t\theader.push(parseRow(row));\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"group\":\n\t\t\t\t\t\tbody.push(parseRow(row, rowGroupStyles));\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"calc\":\n\t\t\t\t\t\tbody.push(parseRow(row, rowCalcStyles));\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"row\":\n\t\t\t\t\t\tbody.push(parseRow(row));\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tfunction parseRow(row, styles) {\n\t\t\t\tvar rowData = [];\n\n\t\t\t\trow.columns.forEach(function (col) {\n\t\t\t\t\tvar cell;\n\n\t\t\t\t\tif (col) {\n\t\t\t\t\t\tswitch (_typeof(col.value)) {\n\t\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\t\tcol.value = JSON.stringify(col.value);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\t\tcase \"null\":\n\t\t\t\t\t\t\t\tcol.value = \"\";\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcell = {\n\t\t\t\t\t\t\tcontent: col.value,\n\t\t\t\t\t\t\tcolSpan: col.width,\n\t\t\t\t\t\t\trowSpan: col.height\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (styles) {\n\t\t\t\t\t\t\tcell.styles = styles;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trowData.push(cell);\n\t\t\t\t\t} else {\n\t\t\t\t\t\trowData.push(\"\");\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn rowData;\n\t\t\t}\n\n\t\t\t//configure PDF\n\t\t\tvar doc = new jsPDF(jsPDFParams); //set document to landscape, better for most tables\n\n\t\t\tif (options && options.autoTable) {\n\t\t\t\tif (typeof options.autoTable === \"function\") {\n\t\t\t\t\tautoTableParams = options.autoTable(doc) || {};\n\t\t\t\t} else {\n\t\t\t\t\tautoTableParams = options.autoTable;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (title) {\n\t\t\t\tautoTableParams.addPageContent = function (data) {\n\t\t\t\t\tdoc.text(title, 40, 30);\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tautoTableParams.head = header;\n\t\t\tautoTableParams.body = body;\n\n\t\t\tdoc.autoTable(autoTableParams);\n\n\t\t\tif (options && options.documentProcessing) {\n\t\t\t\toptions.documentProcessing(doc);\n\t\t\t}\n\n\t\t\tsetFileContents(doc.output(\"arraybuffer\"), \"application/pdf\");\n\t\t},\n\n\t\txlsx: function xlsx(list, options, setFileContents) {\n\t\t\tvar self = this,\n\t\t\t    sheetName = options.sheetName || \"Sheet1\",\n\t\t\t    workbook = XLSX.utils.book_new(),\n\t\t\t    output;\n\n\t\t\tworkbook.SheetNames = [];\n\t\t\tworkbook.Sheets = {};\n\n\t\t\tfunction generateSheet() {\n\t\t\t\tvar rows = [],\n\t\t\t\t    merges = [],\n\t\t\t\t    worksheet = {},\n\t\t\t\t    range = { s: { c: 0, r: 0 }, e: { c: list[0] ? list[0].columns.reduce(function (a, b) {\n\t\t\t\t\t\t\treturn a + (b && b.width ? b.width : 1);\n\t\t\t\t\t\t}, 0) : 0, r: list.length } };\n\n\t\t\t\t//parse row list\n\t\t\t\tlist.forEach(function (row, i) {\n\t\t\t\t\tvar rowData = [];\n\n\t\t\t\t\trow.columns.forEach(function (col, j) {\n\n\t\t\t\t\t\tif (col) {\n\t\t\t\t\t\t\trowData.push(!(col.value instanceof Date) && _typeof(col.value) === \"object\" ? JSON.stringify(col.value) : col.value);\n\n\t\t\t\t\t\t\tif (col.width > 1 || col.height > -1) {\n\t\t\t\t\t\t\t\tmerges.push({ s: { r: i, c: j }, e: { r: i + col.height - 1, c: j + col.width - 1 } });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trowData.push(\"\");\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\trows.push(rowData);\n\t\t\t\t});\n\n\t\t\t\t//convert rows to worksheet\n\t\t\t\tXLSX.utils.sheet_add_aoa(worksheet, rows);\n\n\t\t\t\tworksheet['!ref'] = XLSX.utils.encode_range(range);\n\n\t\t\t\tif (merges.length) {\n\t\t\t\t\tworksheet[\"!merges\"] = merges;\n\t\t\t\t}\n\n\t\t\t\treturn worksheet;\n\t\t\t}\n\n\t\t\tif (options.sheetOnly) {\n\t\t\t\tsetFileContents(generateSheet());\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (options.sheets) {\n\t\t\t\tfor (var sheet in options.sheets) {\n\n\t\t\t\t\tif (options.sheets[sheet] === true) {\n\t\t\t\t\t\tworkbook.SheetNames.push(sheet);\n\t\t\t\t\t\tworkbook.Sheets[sheet] = generateSheet();\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tworkbook.SheetNames.push(sheet);\n\n\t\t\t\t\t\tthis.table.modules.comms.send(options.sheets[sheet], \"download\", \"intercept\", {\n\t\t\t\t\t\t\ttype: \"xlsx\",\n\t\t\t\t\t\t\toptions: { sheetOnly: true },\n\t\t\t\t\t\t\tactive: self.active,\n\t\t\t\t\t\t\tintercept: function intercept(data) {\n\t\t\t\t\t\t\t\tworkbook.Sheets[sheet] = data;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tworkbook.SheetNames.push(sheetName);\n\t\t\t\tworkbook.Sheets[sheetName] = generateSheet();\n\t\t\t}\n\n\t\t\tif (options.documentProcessing) {\n\t\t\t\tworkbook = options.documentProcessing(workbook);\n\t\t\t}\n\n\t\t\t//convert workbook to binary array\n\t\t\tfunction s2ab(s) {\n\t\t\t\tvar buf = new ArrayBuffer(s.length);\n\t\t\t\tvar view = new Uint8Array(buf);\n\t\t\t\tfor (var i = 0; i != s.length; ++i) {\n\t\t\t\t\tview[i] = s.charCodeAt(i) & 0xFF;\n\t\t\t\t}return buf;\n\t\t\t}\n\n\t\t\toutput = XLSX.write(workbook, { bookType: 'xlsx', bookSST: true, type: 'binary' });\n\n\t\t\tsetFileContents(s2ab(output), \"application/octet-stream\");\n\t\t},\n\n\t\thtml: function html(list, options, setFileContents) {\n\t\t\tif (this.modExists(\"export\", true)) {\n\t\t\t\tsetFileContents(this.modules.export.genereateHTMLTable(list), \"text/html\");\n\t\t\t}\n\t\t}\n\n\t};\n\n\tTabulator.prototype.registerModule(\"download\", Download);\n\n\tvar Edit = function Edit(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.currentCell = false; //hold currently editing cell\n\t\tthis.mouseClick = false; //hold mousedown state to prevent click binding being overriden by editor opening\n\t\tthis.recursionBlock = false; //prevent focus recursion\n\t\tthis.invalidEdit = false;\n\t\tthis.editedCells = [];\n\t};\n\n\t//initialize column editor\n\tEdit.prototype.initializeColumn = function (column) {\n\t\tvar self = this,\n\t\t    config = {\n\t\t\teditor: false,\n\t\t\tblocked: false,\n\t\t\tcheck: column.definition.editable,\n\t\t\tparams: column.definition.editorParams || {}\n\t\t};\n\n\t\t//set column editor\n\t\tswitch (_typeof(column.definition.editor)) {\n\t\t\tcase \"string\":\n\n\t\t\t\tif (column.definition.editor === \"tick\") {\n\t\t\t\t\tcolumn.definition.editor = \"tickCross\";\n\t\t\t\t\tconsole.warn(\"DEPRECATION WARNING - the tick editor has been deprecated, please use the tickCross editor\");\n\t\t\t\t}\n\n\t\t\t\tif (self.editors[column.definition.editor]) {\n\t\t\t\t\tconfig.editor = self.editors[column.definition.editor];\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"Editor Error - No such editor found: \", column.definition.editor);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tconfig.editor = column.definition.editor;\n\t\t\t\tbreak;\n\n\t\t\tcase \"boolean\":\n\n\t\t\t\tif (column.definition.editor === true) {\n\n\t\t\t\t\tif (typeof column.definition.formatter !== \"function\") {\n\n\t\t\t\t\t\tif (column.definition.formatter === \"tick\") {\n\t\t\t\t\t\t\tcolumn.definition.formatter = \"tickCross\";\n\t\t\t\t\t\t\tconsole.warn(\"DEPRECATION WARNING - the tick editor has been deprecated, please use the tickCross editor\");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (self.editors[column.definition.formatter]) {\n\t\t\t\t\t\t\tconfig.editor = self.editors[column.definition.formatter];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconfig.editor = self.editors[\"input\"];\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn(\"Editor Error - Cannot auto lookup editor for a custom formatter: \", column.definition.formatter);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (config.editor) {\n\t\t\tcolumn.modules.edit = config;\n\t\t}\n\t};\n\n\tEdit.prototype.getCurrentCell = function () {\n\t\treturn this.currentCell ? this.currentCell.getComponent() : false;\n\t};\n\n\tEdit.prototype.clearEditor = function (cancel) {\n\t\tvar cell = this.currentCell,\n\t\t    cellEl;\n\n\t\tthis.invalidEdit = false;\n\n\t\tif (cell) {\n\t\t\tthis.currentCell = false;\n\n\t\t\tcellEl = cell.getElement();\n\n\t\t\tif (cancel) {\n\t\t\t\tcell.validate();\n\t\t\t} else {\n\t\t\t\tcellEl.classList.remove(\"tabulator-validation-fail\");\n\t\t\t}\n\n\t\t\tcellEl.classList.remove(\"tabulator-editing\");\n\t\t\twhile (cellEl.firstChild) {\n\t\t\t\tcellEl.removeChild(cellEl.firstChild);\n\t\t\t}cell.row.getElement().classList.remove(\"tabulator-row-editing\");\n\t\t}\n\t};\n\n\tEdit.prototype.cancelEdit = function () {\n\n\t\tif (this.currentCell) {\n\t\t\tvar cell = this.currentCell;\n\t\t\tvar component = this.currentCell.getComponent();\n\n\t\t\tthis.clearEditor(true);\n\t\t\tcell.setValueActual(cell.getValue());\n\t\t\tcell.cellRendered();\n\n\t\t\tif (cell.column.cellEvents.cellEditCancelled) {\n\t\t\t\tcell.column.cellEvents.cellEditCancelled.call(this.table, component);\n\t\t\t}\n\n\t\t\tthis.table.options.cellEditCancelled.call(this.table, component);\n\t\t}\n\t};\n\n\t//return a formatted value for a cell\n\tEdit.prototype.bindEditor = function (cell) {\n\t\tvar self = this,\n\t\t    element = cell.getElement();\n\n\t\telement.setAttribute(\"tabindex\", 0);\n\n\t\telement.addEventListener(\"click\", function (e) {\n\t\t\tif (!element.classList.contains(\"tabulator-editing\")) {\n\t\t\t\telement.focus({ preventScroll: true });\n\t\t\t}\n\t\t});\n\n\t\telement.addEventListener(\"mousedown\", function (e) {\n\t\t\tself.mouseClick = true;\n\t\t});\n\n\t\telement.addEventListener(\"focus\", function (e) {\n\t\t\tif (!self.recursionBlock) {\n\t\t\t\tself.edit(cell, e, false);\n\t\t\t}\n\t\t});\n\t};\n\n\tEdit.prototype.focusCellNoEvent = function (cell, block) {\n\t\tthis.recursionBlock = true;\n\t\tif (!(block && this.table.browser === \"ie\")) {\n\t\t\tcell.getElement().focus({ preventScroll: true });\n\t\t}\n\t\tthis.recursionBlock = false;\n\t};\n\n\tEdit.prototype.editCell = function (cell, forceEdit) {\n\t\tthis.focusCellNoEvent(cell);\n\t\tthis.edit(cell, false, forceEdit);\n\t};\n\n\tEdit.prototype.focusScrollAdjust = function (cell) {\n\t\tif (this.table.rowManager.getRenderMode() == \"virtual\") {\n\t\t\tvar topEdge = this.table.rowManager.element.scrollTop,\n\t\t\t    bottomEdge = this.table.rowManager.element.clientHeight + this.table.rowManager.element.scrollTop,\n\t\t\t    rowEl = cell.row.getElement(),\n\t\t\t    offset = rowEl.offsetTop;\n\n\t\t\tif (rowEl.offsetTop < topEdge) {\n\t\t\t\tthis.table.rowManager.element.scrollTop -= topEdge - rowEl.offsetTop;\n\t\t\t} else {\n\t\t\t\tif (rowEl.offsetTop + rowEl.offsetHeight > bottomEdge) {\n\t\t\t\t\tthis.table.rowManager.element.scrollTop += rowEl.offsetTop + rowEl.offsetHeight - bottomEdge;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar leftEdge = this.table.rowManager.element.scrollLeft,\n\t\t\t    rightEdge = this.table.rowManager.element.clientWidth + this.table.rowManager.element.scrollLeft,\n\t\t\t    cellEl = cell.getElement(),\n\t\t\t    offset = cellEl.offsetLeft;\n\n\t\t\tif (this.table.modExists(\"frozenColumns\")) {\n\t\t\t\tleftEdge += parseInt(this.table.modules.frozenColumns.leftMargin);\n\t\t\t\trightEdge -= parseInt(this.table.modules.frozenColumns.rightMargin);\n\t\t\t}\n\n\t\t\tif (cellEl.offsetLeft < leftEdge) {\n\t\t\t\tthis.table.rowManager.element.scrollLeft -= leftEdge - cellEl.offsetLeft;\n\t\t\t} else {\n\t\t\t\tif (cellEl.offsetLeft + cellEl.offsetWidth > rightEdge) {\n\t\t\t\t\tthis.table.rowManager.element.scrollLeft += cellEl.offsetLeft + cellEl.offsetWidth - rightEdge;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tEdit.prototype.edit = function (cell, e, forceEdit) {\n\t\tvar self = this,\n\t\t    allowEdit = true,\n\t\t    rendered = function rendered() {},\n\t\t    element = cell.getElement(),\n\t\t    cellEditor,\n\t\t    component,\n\t\t    params;\n\n\t\t//prevent editing if another cell is refusing to leave focus (eg. validation fail)\n\t\tif (this.currentCell) {\n\t\t\tif (!this.invalidEdit) {\n\t\t\t\tthis.cancelEdit();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t//handle successfull value change\n\t\tfunction success(value) {\n\t\t\tif (self.currentCell === cell) {\n\t\t\t\tvar valid = true;\n\n\t\t\t\tif (cell.column.modules.validate && self.table.modExists(\"validate\") && self.table.options.validationMode != \"manual\") {\n\t\t\t\t\tvalid = self.table.modules.validate.validate(cell.column.modules.validate, cell, value);\n\t\t\t\t}\n\n\t\t\t\tif (valid === true || self.table.options.validationMode === \"highlight\") {\n\t\t\t\t\tself.clearEditor();\n\t\t\t\t\tcell.setValue(value, true);\n\n\t\t\t\t\tif (!cell.modules.edit) {\n\t\t\t\t\t\tcell.modules.edit = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tcell.modules.edit.edited = true;\n\n\t\t\t\t\tif (self.editedCells.indexOf(cell) == -1) {\n\t\t\t\t\t\tself.editedCells.push(cell);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (self.table.options.dataTree && self.table.modExists(\"dataTree\")) {\n\t\t\t\t\t\tself.table.modules.dataTree.checkForRestyle(cell);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (valid !== true) {\n\t\t\t\t\t\telement.classList.add(\"tabulator-validation-fail\");\n\t\t\t\t\t\tself.table.options.validationFailed.call(self.table, cell.getComponent(), value, valid);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\tself.invalidEdit = true;\n\t\t\t\t\telement.classList.add(\"tabulator-validation-fail\");\n\t\t\t\t\tself.focusCellNoEvent(cell, true);\n\t\t\t\t\trendered();\n\t\t\t\t\tself.table.options.validationFailed.call(self.table, cell.getComponent(), value, valid);\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// console.warn(\"Edit Success Error - cannot call success on a cell that is no longer being edited\");\n\t\t\t}\n\t\t}\n\n\t\t//handle aborted edit\n\t\tfunction cancel() {\n\t\t\tif (self.currentCell === cell) {\n\t\t\t\tself.cancelEdit();\n\n\t\t\t\tif (self.table.options.dataTree && self.table.modExists(\"dataTree\")) {\n\t\t\t\t\tself.table.modules.dataTree.checkForRestyle(cell);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// console.warn(\"Edit Success Error - cannot call cancel on a cell that is no longer being edited\");\n\t\t\t}\n\t\t}\n\n\t\tfunction onRendered(callback) {\n\t\t\trendered = callback;\n\t\t}\n\n\t\tif (!cell.column.modules.edit.blocked) {\n\t\t\tif (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\n\t\t\tswitch (_typeof(cell.column.modules.edit.check)) {\n\t\t\t\tcase \"function\":\n\t\t\t\t\tallowEdit = cell.column.modules.edit.check(cell.getComponent());\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tallowEdit = cell.column.modules.edit.check;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (allowEdit || forceEdit) {\n\n\t\t\t\tself.cancelEdit();\n\n\t\t\t\tself.currentCell = cell;\n\n\t\t\t\tthis.focusScrollAdjust(cell);\n\n\t\t\t\tcomponent = cell.getComponent();\n\n\t\t\t\tif (this.mouseClick) {\n\t\t\t\t\tthis.mouseClick = false;\n\n\t\t\t\t\tif (cell.column.cellEvents.cellClick) {\n\t\t\t\t\t\tcell.column.cellEvents.cellClick.call(this.table, e, component);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (cell.column.cellEvents.cellEditing) {\n\t\t\t\t\tcell.column.cellEvents.cellEditing.call(this.table, component);\n\t\t\t\t}\n\n\t\t\t\tself.table.options.cellEditing.call(this.table, component);\n\n\t\t\t\tparams = typeof cell.column.modules.edit.params === \"function\" ? cell.column.modules.edit.params(component) : cell.column.modules.edit.params;\n\n\t\t\t\tcellEditor = cell.column.modules.edit.editor.call(self, component, onRendered, success, cancel, params);\n\n\t\t\t\t//if editor returned, add to DOM, if false, abort edit\n\t\t\t\tif (cellEditor !== false) {\n\n\t\t\t\t\tif (cellEditor instanceof Node) {\n\t\t\t\t\t\telement.classList.add(\"tabulator-editing\");\n\t\t\t\t\t\tcell.row.getElement().classList.add(\"tabulator-row-editing\");\n\t\t\t\t\t\twhile (element.firstChild) {\n\t\t\t\t\t\t\telement.removeChild(element.firstChild);\n\t\t\t\t\t\t}element.appendChild(cellEditor);\n\n\t\t\t\t\t\t//trigger onRendered Callback\n\t\t\t\t\t\trendered();\n\n\t\t\t\t\t\t//prevent editing from triggering rowClick event\n\t\t\t\t\t\tvar children = element.children;\n\n\t\t\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\t\t\tchildren[i].addEventListener(\"click\", function (e) {\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn(\"Edit Error - Editor should return an instance of Node, the editor returned:\", cellEditor);\n\t\t\t\t\t\telement.blur();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\telement.blur();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tthis.mouseClick = false;\n\t\t\t\telement.blur();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.mouseClick = false;\n\t\t\telement.blur();\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tEdit.prototype.maskInput = function (el, options) {\n\t\tvar mask = options.mask,\n\t\t    maskLetter = typeof options.maskLetterChar !== \"undefined\" ? options.maskLetterChar : \"A\",\n\t\t    maskNumber = typeof options.maskNumberChar !== \"undefined\" ? options.maskNumberChar : \"9\",\n\t\t    maskWildcard = typeof options.maskWildcardChar !== \"undefined\" ? options.maskWildcardChar : \"*\",\n\t\t    success = false;\n\n\t\tfunction fillSymbols(index) {\n\t\t\tvar symbol = mask[index];\n\t\t\tif (typeof symbol !== \"undefined\" && symbol !== maskWildcard && symbol !== maskLetter && symbol !== maskNumber) {\n\t\t\t\tel.value = el.value + \"\" + symbol;\n\t\t\t\tfillSymbols(index + 1);\n\t\t\t}\n\t\t}\n\n\t\tel.addEventListener(\"keydown\", function (e) {\n\t\t\tvar index = el.value.length,\n\t\t\t    char = e.key;\n\n\t\t\tif (e.keyCode > 46) {\n\t\t\t\tif (index >= mask.length) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tsuccess = false;\n\t\t\t\t\treturn false;\n\t\t\t\t} else {\n\t\t\t\t\tswitch (mask[index]) {\n\t\t\t\t\t\tcase maskLetter:\n\t\t\t\t\t\t\tif (char.toUpperCase() == char.toLowerCase()) {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\tsuccess = false;\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase maskNumber:\n\t\t\t\t\t\t\tif (isNaN(char)) {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\tsuccess = false;\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase maskWildcard:\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tif (char !== mask[index]) {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\tsuccess = false;\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tsuccess = true;\n\t\t\t}\n\n\t\t\treturn;\n\t\t});\n\n\t\tel.addEventListener(\"keyup\", function (e) {\n\t\t\tif (e.keyCode > 46) {\n\t\t\t\tif (options.maskAutoFill) {\n\t\t\t\t\tfillSymbols(el.value.length);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (!el.placeholder) {\n\t\t\tel.placeholder = mask;\n\t\t}\n\n\t\tif (options.maskAutoFill) {\n\t\t\tfillSymbols(el.value.length);\n\t\t}\n\t};\n\n\tEdit.prototype.getEditedCells = function () {\n\t\tvar output = [];\n\n\t\tthis.editedCells.forEach(function (cell) {\n\t\t\toutput.push(cell.getComponent());\n\t\t});\n\n\t\treturn output;\n\t};\n\n\tEdit.prototype.clearEdited = function (cell) {\n\t\tvar editIndex;\n\n\t\tif (cell.modules.validate && cell.modules.edit && cell.modules.edit.edited) {\n\t\t\tcell.modules.validate.invalid = false;\n\n\t\t\teditIndex = this.editedCells.indexOf(cell);\n\n\t\t\tif (editIndex > -1) {\n\t\t\t\tthis.editedCells.splice(editIndex, 1);\n\t\t\t}\n\t\t}\n\t};\n\n\t//default data editors\n\tEdit.prototype.editors = {\n\n\t\t//input element\n\t\tinput: function input(cell, onRendered, success, cancel, editorParams) {\n\n\t\t\t//create and style input\n\t\t\tvar cellValue = cell.getValue(),\n\t\t\t    input = document.createElement(\"input\");\n\n\t\t\tinput.setAttribute(\"type\", editorParams.search ? \"search\" : \"text\");\n\n\t\t\tinput.style.padding = \"4px\";\n\t\t\tinput.style.width = \"100%\";\n\t\t\tinput.style.boxSizing = \"border-box\";\n\n\t\t\tif (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n\t\t\t\tfor (var key in editorParams.elementAttributes) {\n\t\t\t\t\tif (key.charAt(0) == \"+\") {\n\t\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinput.value = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\n\t\t\tonRendered(function () {\n\t\t\t\tinput.focus({ preventScroll: true });\n\t\t\t\tinput.style.height = \"100%\";\n\t\t\t});\n\n\t\t\tfunction onChange(e) {\n\t\t\t\tif ((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\" || input.value !== cellValue) {\n\t\t\t\t\tif (success(input.value)) {\n\t\t\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcancel();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//submit new value on blur or change\n\t\t\tinput.addEventListener(\"change\", onChange);\n\t\t\tinput.addEventListener(\"blur\", onChange);\n\n\t\t\t//submit new value on enter\n\t\t\tinput.addEventListener(\"keydown\", function (e) {\n\t\t\t\tswitch (e.keyCode) {\n\t\t\t\t\t// case 9:\n\t\t\t\t\tcase 13:\n\t\t\t\t\t\tonChange(e);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 27:\n\t\t\t\t\t\tcancel();\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (editorParams.mask) {\n\t\t\t\tthis.table.modules.edit.maskInput(input, editorParams);\n\t\t\t}\n\n\t\t\treturn input;\n\t\t},\n\n\t\t//resizable text area element\n\t\ttextarea: function textarea(cell, onRendered, success, cancel, editorParams) {\n\t\t\tvar self = this,\n\t\t\t    cellValue = cell.getValue(),\n\t\t\t    vertNav = editorParams.verticalNavigation || \"hybrid\",\n\t\t\t    value = String(cellValue !== null && typeof cellValue !== \"undefined\" ? cellValue : \"\"),\n\t\t\t    count = (value.match(/(?:\\r\\n|\\r|\\n)/g) || []).length + 1,\n\t\t\t    input = document.createElement(\"textarea\"),\n\t\t\t    scrollHeight = 0;\n\n\t\t\t//create and style input\n\t\t\tinput.style.display = \"block\";\n\t\t\tinput.style.padding = \"2px\";\n\t\t\tinput.style.height = \"100%\";\n\t\t\tinput.style.width = \"100%\";\n\t\t\tinput.style.boxSizing = \"border-box\";\n\t\t\tinput.style.whiteSpace = \"pre-wrap\";\n\t\t\tinput.style.resize = \"none\";\n\n\t\t\tif (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n\t\t\t\tfor (var key in editorParams.elementAttributes) {\n\t\t\t\t\tif (key.charAt(0) == \"+\") {\n\t\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinput.value = value;\n\n\t\t\tonRendered(function () {\n\t\t\t\tinput.focus({ preventScroll: true });\n\t\t\t\tinput.style.height = \"100%\";\n\t\t\t});\n\n\t\t\tfunction onChange(e) {\n\n\t\t\t\tif ((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\" || input.value !== cellValue) {\n\n\t\t\t\t\tif (success(input.value)) {\n\t\t\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t\t\t}\n\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tcell.getRow().normalizeHeight();\n\t\t\t\t\t}, 300);\n\t\t\t\t} else {\n\t\t\t\t\tcancel();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//submit new value on blur or change\n\t\t\tinput.addEventListener(\"change\", onChange);\n\t\t\tinput.addEventListener(\"blur\", onChange);\n\n\t\t\tinput.addEventListener(\"keyup\", function () {\n\n\t\t\t\tinput.style.height = \"\";\n\n\t\t\t\tvar heightNow = input.scrollHeight;\n\n\t\t\t\tinput.style.height = heightNow + \"px\";\n\n\t\t\t\tif (heightNow != scrollHeight) {\n\t\t\t\t\tscrollHeight = heightNow;\n\t\t\t\t\tcell.getRow().normalizeHeight();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tinput.addEventListener(\"keydown\", function (e) {\n\n\t\t\t\tswitch (e.keyCode) {\n\t\t\t\t\tcase 27:\n\t\t\t\t\t\tcancel();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 38:\n\t\t\t\t\t\t//up arrow\n\t\t\t\t\t\tif (vertNav == \"editor\" || vertNav == \"hybrid\" && input.selectionStart) {\n\t\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 40:\n\t\t\t\t\t\t//down arrow\n\t\t\t\t\t\tif (vertNav == \"editor\" || vertNav == \"hybrid\" && input.selectionStart !== input.value.length) {\n\t\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (editorParams.mask) {\n\t\t\t\tthis.table.modules.edit.maskInput(input, editorParams);\n\t\t\t}\n\n\t\t\treturn input;\n\t\t},\n\n\t\t//input element with type of number\n\t\tnumber: function number(cell, onRendered, success, cancel, editorParams) {\n\n\t\t\tvar cellValue = cell.getValue(),\n\t\t\t    vertNav = editorParams.verticalNavigation || \"editor\",\n\t\t\t    input = document.createElement(\"input\");\n\n\t\t\tinput.setAttribute(\"type\", \"number\");\n\n\t\t\tif (typeof editorParams.max != \"undefined\") {\n\t\t\t\tinput.setAttribute(\"max\", editorParams.max);\n\t\t\t}\n\n\t\t\tif (typeof editorParams.min != \"undefined\") {\n\t\t\t\tinput.setAttribute(\"min\", editorParams.min);\n\t\t\t}\n\n\t\t\tif (typeof editorParams.step != \"undefined\") {\n\t\t\t\tinput.setAttribute(\"step\", editorParams.step);\n\t\t\t}\n\n\t\t\t//create and style input\n\t\t\tinput.style.padding = \"4px\";\n\t\t\tinput.style.width = \"100%\";\n\t\t\tinput.style.boxSizing = \"border-box\";\n\n\t\t\tif (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n\t\t\t\tfor (var key in editorParams.elementAttributes) {\n\t\t\t\t\tif (key.charAt(0) == \"+\") {\n\t\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinput.value = cellValue;\n\n\t\t\tvar blurFunc = function blurFunc(e) {\n\t\t\t\tonChange();\n\t\t\t};\n\n\t\t\tonRendered(function () {\n\t\t\t\t//submit new value on blur\n\t\t\t\tinput.removeEventListener(\"blur\", blurFunc);\n\n\t\t\t\tinput.focus({ preventScroll: true });\n\t\t\t\tinput.style.height = \"100%\";\n\n\t\t\t\t//submit new value on blur\n\t\t\t\tinput.addEventListener(\"blur\", blurFunc);\n\t\t\t});\n\n\t\t\tfunction onChange() {\n\t\t\t\tvar value = input.value;\n\n\t\t\t\tif (!isNaN(value) && value !== \"\") {\n\t\t\t\t\tvalue = Number(value);\n\t\t\t\t}\n\n\t\t\t\tif (value !== cellValue) {\n\t\t\t\t\tif (success(value)) {\n\t\t\t\t\t\tcellValue = value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcancel();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//submit new value on enter\n\t\t\tinput.addEventListener(\"keydown\", function (e) {\n\t\t\t\tswitch (e.keyCode) {\n\t\t\t\t\tcase 13:\n\t\t\t\t\t\t// case 9:\n\t\t\t\t\t\tonChange();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 27:\n\t\t\t\t\t\tcancel();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 38: //up arrow\n\t\t\t\t\tcase 40:\n\t\t\t\t\t\t//down arrow\n\t\t\t\t\t\tif (vertNav == \"editor\") {\n\t\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (editorParams.mask) {\n\t\t\t\tthis.table.modules.edit.maskInput(input, editorParams);\n\t\t\t}\n\n\t\t\treturn input;\n\t\t},\n\n\t\t//input element with type of number\n\t\trange: function range(cell, onRendered, success, cancel, editorParams) {\n\n\t\t\tvar cellValue = cell.getValue(),\n\t\t\t    input = document.createElement(\"input\");\n\n\t\t\tinput.setAttribute(\"type\", \"range\");\n\n\t\t\tif (typeof editorParams.max != \"undefined\") {\n\t\t\t\tinput.setAttribute(\"max\", editorParams.max);\n\t\t\t}\n\n\t\t\tif (typeof editorParams.min != \"undefined\") {\n\t\t\t\tinput.setAttribute(\"min\", editorParams.min);\n\t\t\t}\n\n\t\t\tif (typeof editorParams.step != \"undefined\") {\n\t\t\t\tinput.setAttribute(\"step\", editorParams.step);\n\t\t\t}\n\n\t\t\t//create and style input\n\t\t\tinput.style.padding = \"4px\";\n\t\t\tinput.style.width = \"100%\";\n\t\t\tinput.style.boxSizing = \"border-box\";\n\n\t\t\tif (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n\t\t\t\tfor (var key in editorParams.elementAttributes) {\n\t\t\t\t\tif (key.charAt(0) == \"+\") {\n\t\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinput.value = cellValue;\n\n\t\t\tonRendered(function () {\n\t\t\t\tinput.focus({ preventScroll: true });\n\t\t\t\tinput.style.height = \"100%\";\n\t\t\t});\n\n\t\t\tfunction onChange() {\n\t\t\t\tvar value = input.value;\n\n\t\t\t\tif (!isNaN(value) && value !== \"\") {\n\t\t\t\t\tvalue = Number(value);\n\t\t\t\t}\n\n\t\t\t\tif (value != cellValue) {\n\t\t\t\t\tif (success(value)) {\n\t\t\t\t\t\tcellValue = value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcancel();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//submit new value on blur\n\t\t\tinput.addEventListener(\"blur\", function (e) {\n\t\t\t\tonChange();\n\t\t\t});\n\n\t\t\t//submit new value on enter\n\t\t\tinput.addEventListener(\"keydown\", function (e) {\n\t\t\t\tswitch (e.keyCode) {\n\t\t\t\t\tcase 13:\n\t\t\t\t\t\t// case 9:\n\t\t\t\t\t\tonChange();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 27:\n\t\t\t\t\t\tcancel();\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn input;\n\t\t},\n\n\t\t//select\n\t\tselect: function select(cell, onRendered, success, cancel, editorParams) {\n\t\t\tvar _this45 = this;\n\n\t\t\tvar self = this,\n\t\t\t    cellEl = cell.getElement(),\n\t\t\t    initialValue = cell.getValue(),\n\t\t\t    vertNav = editorParams.verticalNavigation || \"editor\",\n\t\t\t    initialDisplayValue = typeof initialValue !== \"undefined\" || initialValue === null ? Array.isArray(initialValue) ? initialValue : [initialValue] : typeof editorParams.defaultValue !== \"undefined\" ? editorParams.defaultValue : [],\n\t\t\t    input = document.createElement(\"input\"),\n\t\t\t    listEl = document.createElement(\"div\"),\n\t\t\t    multiselect = editorParams.multiselect,\n\t\t\t    dataItems = [],\n\t\t\t    currentItem = {},\n\t\t\t    displayItems = [],\n\t\t\t    currentItems = [],\n\t\t\t    blurable = true,\n\t\t\t    blockListShow = false;\n\n\t\t\tif (Array.isArray(editorParams) || !Array.isArray(editorParams) && (typeof editorParams === 'undefined' ? 'undefined' : _typeof(editorParams)) === \"object\" && !editorParams.values) {\n\t\t\t\tconsole.warn(\"DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object\");\n\t\t\t\teditorParams = { values: editorParams };\n\t\t\t}\n\n\t\t\tfunction getUniqueColumnValues(field) {\n\t\t\t\tvar output = {},\n\t\t\t\t    data = self.table.getData(),\n\t\t\t\t    column;\n\n\t\t\t\tif (field) {\n\t\t\t\t\tcolumn = self.table.columnManager.getColumnByField(field);\n\t\t\t\t} else {\n\t\t\t\t\tcolumn = cell.getColumn()._getSelf();\n\t\t\t\t}\n\n\t\t\t\tif (column) {\n\t\t\t\t\tdata.forEach(function (row) {\n\t\t\t\t\t\tvar val = column.getFieldValue(row);\n\n\t\t\t\t\t\tif (val !== null && typeof val !== \"undefined\" && val !== \"\") {\n\t\t\t\t\t\t\toutput[val] = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tif (editorParams.sortValuesList) {\n\t\t\t\t\t\tif (editorParams.sortValuesList == \"asc\") {\n\t\t\t\t\t\t\toutput = Object.keys(output).sort();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\toutput = Object.keys(output).sort().reverse();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\toutput = Object.keys(output);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"unable to find matching column to create select lookup list:\", field);\n\t\t\t\t}\n\n\t\t\t\treturn output;\n\t\t\t}\n\n\t\t\tfunction parseItems(inputValues, curentValues) {\n\t\t\t\tvar dataList = [];\n\t\t\t\tvar displayList = [];\n\n\t\t\t\tfunction processComplexListItem(item) {\n\t\t\t\t\tvar item = {\n\t\t\t\t\t\tlabel: item.label,\n\t\t\t\t\t\tvalue: item.value,\n\t\t\t\t\t\titemParams: item.itemParams,\n\t\t\t\t\t\telementAttributes: item.elementAttributes,\n\t\t\t\t\t\telement: false\n\t\t\t\t\t};\n\n\t\t\t\t\t// if(item.value === curentValue || (!isNaN(parseFloat(item.value)) && !isNaN(parseFloat(item.value)) && parseFloat(item.value) === parseFloat(curentValue))){\n\t\t\t\t\t// \tsetCurrentItem(item);\n\t\t\t\t\t// }\n\n\t\t\t\t\tif (curentValues.indexOf(item.value) > -1) {\n\t\t\t\t\t\tsetItem(item);\n\t\t\t\t\t}\n\n\t\t\t\t\tdataList.push(item);\n\t\t\t\t\tdisplayList.push(item);\n\n\t\t\t\t\treturn item;\n\t\t\t\t}\n\n\t\t\t\tif (typeof inputValues == \"function\") {\n\t\t\t\t\tinputValues = inputValues(cell);\n\t\t\t\t}\n\n\t\t\t\tif (Array.isArray(inputValues)) {\n\t\t\t\t\tinputValues.forEach(function (value) {\n\t\t\t\t\t\tvar item;\n\n\t\t\t\t\t\tif ((typeof value === 'undefined' ? 'undefined' : _typeof(value)) === \"object\") {\n\n\t\t\t\t\t\t\tif (value.options) {\n\t\t\t\t\t\t\t\titem = {\n\t\t\t\t\t\t\t\t\tlabel: value.label,\n\t\t\t\t\t\t\t\t\tgroup: true,\n\t\t\t\t\t\t\t\t\titemParams: value.itemParams,\n\t\t\t\t\t\t\t\t\telementAttributes: value.elementAttributes,\n\t\t\t\t\t\t\t\t\telement: false\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\tdisplayList.push(item);\n\n\t\t\t\t\t\t\t\tvalue.options.forEach(function (item) {\n\t\t\t\t\t\t\t\t\tprocessComplexListItem(item);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tprocessComplexListItem(value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\titem = {\n\t\t\t\t\t\t\t\tlabel: value,\n\t\t\t\t\t\t\t\tvalue: value,\n\t\t\t\t\t\t\t\telement: false\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t// if(item.value === curentValue || (!isNaN(parseFloat(item.value)) && !isNaN(parseFloat(item.value)) && parseFloat(item.value) === parseFloat(curentValue))){\n\t\t\t\t\t\t\t// \tsetCurrentItem(item);\n\t\t\t\t\t\t\t// }\n\n\t\t\t\t\t\t\tif (curentValues.indexOf(item.value) > -1) {\n\t\t\t\t\t\t\t\tsetItem(item);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tdataList.push(item);\n\t\t\t\t\t\t\tdisplayList.push(item);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tfor (var key in inputValues) {\n\t\t\t\t\t\tvar item = {\n\t\t\t\t\t\t\tlabel: inputValues[key],\n\t\t\t\t\t\t\tvalue: key,\n\t\t\t\t\t\t\telement: false\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// if(item.value === curentValue || (!isNaN(parseFloat(item.value)) && !isNaN(parseFloat(item.value)) && parseFloat(item.value) === parseFloat(curentValue))){\n\t\t\t\t\t\t// \tsetCurrentItem(item);\n\t\t\t\t\t\t// }\n\n\t\t\t\t\t\tif (curentValues.indexOf(item.value) > -1) {\n\t\t\t\t\t\t\tsetItem(item);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdataList.push(item);\n\t\t\t\t\t\tdisplayList.push(item);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tdataItems = dataList;\n\t\t\t\tdisplayItems = displayList;\n\n\t\t\t\tfillList();\n\t\t\t}\n\n\t\t\tfunction fillList() {\n\t\t\t\twhile (listEl.firstChild) {\n\t\t\t\t\tlistEl.removeChild(listEl.firstChild);\n\t\t\t\t}displayItems.forEach(function (item) {\n\n\t\t\t\t\tvar el = item.element;\n\n\t\t\t\t\tif (!el) {\n\t\t\t\t\t\tel = document.createElement(\"div\");\n\t\t\t\t\t\titem.label = editorParams.listItemFormatter ? editorParams.listItemFormatter(item.value, item.label, cell, el, item.itemParams) : item.label;\n\t\t\t\t\t\tif (item.group) {\n\t\t\t\t\t\t\tel.classList.add(\"tabulator-edit-select-list-group\");\n\t\t\t\t\t\t\tel.tabIndex = 0;\n\t\t\t\t\t\t\tel.innerHTML = item.label === \"\" ? \"&nbsp;\" : item.label;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tel.classList.add(\"tabulator-edit-select-list-item\");\n\t\t\t\t\t\t\tel.tabIndex = 0;\n\t\t\t\t\t\t\tel.innerHTML = item.label === \"\" ? \"&nbsp;\" : item.label;\n\n\t\t\t\t\t\t\tel.addEventListener(\"click\", function () {\n\t\t\t\t\t\t\t\tblockListShow = true;\n\n\t\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\t\tblockListShow = false;\n\t\t\t\t\t\t\t\t}, 10);\n\n\t\t\t\t\t\t\t\t// setCurrentItem(item);\n\t\t\t\t\t\t\t\t// chooseItem();\n\t\t\t\t\t\t\t\tif (multiselect) {\n\t\t\t\t\t\t\t\t\ttoggleItem(item);\n\t\t\t\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tchooseItem(item);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t// if(item === currentItem){\n\t\t\t\t\t\t\t// \tel.classList.add(\"active\");\n\t\t\t\t\t\t\t// }\n\n\t\t\t\t\t\t\tif (currentItems.indexOf(item) > -1) {\n\t\t\t\t\t\t\t\tel.classList.add(\"active\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (item.elementAttributes && _typeof(item.elementAttributes) == \"object\") {\n\t\t\t\t\t\t\tfor (var key in item.elementAttributes) {\n\t\t\t\t\t\t\t\tif (key.charAt(0) == \"+\") {\n\t\t\t\t\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\t\t\t\t\tel.setAttribute(key, input.getAttribute(key) + item.elementAttributes[\"+\" + key]);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tel.setAttribute(key, item.elementAttributes[key]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tel.addEventListener(\"mousedown\", function () {\n\t\t\t\t\t\t\tblurable = false;\n\n\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\tblurable = true;\n\t\t\t\t\t\t\t}, 10);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\titem.element = el;\n\t\t\t\t\t}\n\n\t\t\t\t\tlistEl.appendChild(el);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfunction setCurrentItem(item, active) {\n\n\t\t\t\tif (!multiselect && currentItem && currentItem.element) {\n\t\t\t\t\tcurrentItem.element.classList.remove(\"active\");\n\t\t\t\t}\n\n\t\t\t\tif (currentItem && currentItem.element) {\n\t\t\t\t\tcurrentItem.element.classList.remove(\"focused\");\n\t\t\t\t}\n\n\t\t\t\tcurrentItem = item;\n\n\t\t\t\tif (item.element) {\n\t\t\t\t\titem.element.classList.add(\"focused\");\n\t\t\t\t\tif (active) {\n\t\t\t\t\t\titem.element.classList.add(\"active\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// function chooseItem(){\n\t\t\t// \thideList();\n\n\t\t\t// \tif(initialValue !== currentItem.value){\n\t\t\t// \t\tinitialValue = currentItem.value;\n\t\t\t// \t\tsuccess(currentItem.value);\n\t\t\t// \t}else{\n\t\t\t// \t\tcancel();\n\t\t\t// \t}\n\t\t\t// }\n\n\t\t\tfunction setItem(item) {\n\t\t\t\tvar index = currentItems.indexOf(item);\n\n\t\t\t\tif (index == -1) {\n\t\t\t\t\tcurrentItems.push(item);\n\t\t\t\t\tsetCurrentItem(item, true);\n\t\t\t\t}\n\n\t\t\t\tfillInput();\n\t\t\t}\n\n\t\t\tfunction unsetItem(index) {\n\t\t\t\tvar item = currentItems[index];\n\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tcurrentItems.splice(index, 1);\n\t\t\t\t\tif (item.element) {\n\t\t\t\t\t\titem.element.classList.remove(\"active\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction toggleItem(item) {\n\t\t\t\tif (!item) {\n\t\t\t\t\titem = currentItem;\n\t\t\t\t}\n\n\t\t\t\tvar index = currentItems.indexOf(item);\n\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tunsetItem(index);\n\t\t\t\t} else {\n\t\t\t\t\tif (multiselect !== true && currentItems.length >= multiselect) {\n\t\t\t\t\t\tunsetItem(0);\n\t\t\t\t\t}\n\n\t\t\t\t\tsetItem(item);\n\t\t\t\t}\n\n\t\t\t\tfillInput();\n\t\t\t}\n\n\t\t\tfunction chooseItem(item) {\n\t\t\t\thideList();\n\n\t\t\t\tif (!item) {\n\t\t\t\t\titem = currentItem;\n\t\t\t\t}\n\n\t\t\t\tif (item) {\n\t\t\t\t\tinput.value = item.label;\n\t\t\t\t\tsuccess(item.value);\n\t\t\t\t}\n\n\t\t\t\tinitialDisplayValue = input.value;\n\t\t\t}\n\n\t\t\tfunction chooseItems(silent) {\n\t\t\t\tif (!silent) {\n\t\t\t\t\thideList();\n\t\t\t\t}\n\n\t\t\t\tvar output = [];\n\n\t\t\t\tcurrentItems.forEach(function (item) {\n\t\t\t\t\toutput.push(item.value);\n\t\t\t\t});\n\n\t\t\t\tinitialDisplayValue = input.value;\n\n\t\t\t\tsuccess(output);\n\t\t\t}\n\n\t\t\tfunction fillInput() {\n\t\t\t\tvar output = [];\n\n\t\t\t\tcurrentItems.forEach(function (item) {\n\t\t\t\t\toutput.push(item.label);\n\t\t\t\t});\n\n\t\t\t\tinput.value = output.join(\", \");\n\n\t\t\t\tif (self.currentCell === false) {\n\t\t\t\t\tchooseItems(true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction unsetItems() {\n\n\t\t\t\tvar len = currentItems.length;\n\n\t\t\t\tfor (var _i6 = 0; _i6 < len; _i6++) {\n\t\t\t\t\tunsetItem(0);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction cancelItem() {\n\t\t\t\thideList();\n\t\t\t\tcancel();\n\t\t\t}\n\n\t\t\tfunction showList() {\n\t\t\t\tcurrentItems = [];\n\n\t\t\t\tif (!listEl.parentNode) {\n\t\t\t\t\tif (editorParams.values === true) {\n\t\t\t\t\t\tparseItems(getUniqueColumnValues(), initialDisplayValue);\n\t\t\t\t\t} else if (typeof editorParams.values === \"string\") {\n\t\t\t\t\t\tparseItems(getUniqueColumnValues(editorParams.values), initialDisplayValue);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparseItems(editorParams.values || [], initialDisplayValue);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar offset = Tabulator.prototype.helpers.elOffset(cellEl);\n\n\t\t\t\t\tlistEl.style.minWidth = cellEl.offsetWidth + \"px\";\n\n\t\t\t\t\tlistEl.style.top = offset.top + cellEl.offsetHeight + \"px\";\n\t\t\t\t\tlistEl.style.left = offset.left + \"px\";\n\n\t\t\t\t\tlistEl.addEventListener(\"mousedown\", function (e) {\n\t\t\t\t\t\tblurable = false;\n\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\tblurable = true;\n\t\t\t\t\t\t}, 10);\n\t\t\t\t\t});\n\n\t\t\t\t\tdocument.body.appendChild(listEl);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction hideList() {\n\t\t\t\tif (listEl.parentNode) {\n\t\t\t\t\tlistEl.parentNode.removeChild(listEl);\n\t\t\t\t}\n\n\t\t\t\tremoveScrollListener();\n\t\t\t}\n\n\t\t\tfunction removeScrollListener() {\n\t\t\t\tself.table.rowManager.element.removeEventListener(\"scroll\", cancelItem);\n\t\t\t}\n\n\t\t\t//style input\n\t\t\tinput.setAttribute(\"type\", \"text\");\n\n\t\t\tinput.style.padding = \"4px\";\n\t\t\tinput.style.width = \"100%\";\n\t\t\tinput.style.boxSizing = \"border-box\";\n\t\t\tinput.style.cursor = \"default\";\n\t\t\tinput.readOnly = this.currentCell != false;\n\n\t\t\tif (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n\t\t\t\tfor (var key in editorParams.elementAttributes) {\n\t\t\t\t\tif (key.charAt(0) == \"+\") {\n\t\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinput.value = typeof initialValue !== \"undefined\" || initialValue === null ? initialValue : \"\";\n\n\t\t\t// if(editorParams.values === true){\n\t\t\t// \tparseItems(getUniqueColumnValues(), initialValue);\n\t\t\t// }else if(typeof editorParams.values === \"string\"){\n\t\t\t// \tparseItems(getUniqueColumnValues(editorParams.values), initialValue);\n\t\t\t// }else{\n\t\t\t// \tparseItems(editorParams.values || [], initialValue);\n\t\t\t// }\n\n\t\t\tinput.addEventListener(\"search\", function (e) {\n\t\t\t\tif (!input.value) {\n\t\t\t\t\tunsetItems();\n\t\t\t\t\tchooseItems();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t//allow key based navigation\n\t\t\tinput.addEventListener(\"keydown\", function (e) {\n\t\t\t\tvar index;\n\n\t\t\t\tswitch (e.keyCode) {\n\t\t\t\t\tcase 38:\n\t\t\t\t\t\t//up arrow\n\t\t\t\t\t\tindex = dataItems.indexOf(currentItem);\n\n\t\t\t\t\t\tif (vertNav == \"editor\" || vertNav == \"hybrid\" && index) {\n\t\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\t\tif (index > 0) {\n\t\t\t\t\t\t\t\tsetCurrentItem(dataItems[index - 1], !multiselect);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 40:\n\t\t\t\t\t\t//down arrow\n\t\t\t\t\t\tindex = dataItems.indexOf(currentItem);\n\n\t\t\t\t\t\tif (vertNav == \"editor\" || vertNav == \"hybrid\" && index < dataItems.length - 1) {\n\t\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\t\tif (index < dataItems.length - 1) {\n\t\t\t\t\t\t\t\tif (index == -1) {\n\t\t\t\t\t\t\t\t\tsetCurrentItem(dataItems[0], !multiselect);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsetCurrentItem(dataItems[index + 1], !multiselect);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 37: //left arrow\n\t\t\t\t\tcase 39:\n\t\t\t\t\t\t//right arrow\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 13:\n\t\t\t\t\t\t//enter\n\t\t\t\t\t\t// chooseItem();\n\n\t\t\t\t\t\tif (multiselect) {\n\t\t\t\t\t\t\ttoggleItem();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tchooseItem();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 27:\n\t\t\t\t\t\t//escape\n\t\t\t\t\t\tcancelItem();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 9:\n\t\t\t\t\t\t//tab\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif (self.currentCell === false) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tinput.addEventListener(\"blur\", function (e) {\n\t\t\t\tif (blurable) {\n\t\t\t\t\tif (multiselect) {\n\t\t\t\t\t\tchooseItems();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcancelItem();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tinput.addEventListener(\"focus\", function (e) {\n\t\t\t\tif (!blockListShow) {\n\t\t\t\t\tshowList();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t//style list element\n\t\t\tlistEl = document.createElement(\"div\");\n\t\t\tlistEl.classList.add(\"tabulator-edit-select-list\");\n\n\t\t\tonRendered(function () {\n\t\t\t\tinput.style.height = \"100%\";\n\t\t\t\tinput.focus({ preventScroll: true });\n\t\t\t});\n\n\t\t\tsetTimeout(function () {\n\t\t\t\t_this45.table.rowManager.element.addEventListener(\"scroll\", cancelItem);\n\t\t\t}, 10);\n\n\t\t\treturn input;\n\t\t},\n\n\t\t//autocomplete\n\t\tautocomplete: function autocomplete(cell, onRendered, success, cancel, editorParams) {\n\t\t\tvar _this46 = this;\n\n\t\t\tvar self = this,\n\t\t\t    cellEl = cell.getElement(),\n\t\t\t    initialValue = cell.getValue(),\n\t\t\t    vertNav = editorParams.verticalNavigation || \"editor\",\n\t\t\t    initialDisplayValue = typeof initialValue !== \"undefined\" || initialValue === null ? initialValue : typeof editorParams.defaultValue !== \"undefined\" ? editorParams.defaultValue : \"\",\n\t\t\t    input = document.createElement(\"input\"),\n\t\t\t    listEl = document.createElement(\"div\"),\n\t\t\t    allItems = [],\n\t\t\t    displayItems = [],\n\t\t\t    values = [],\n\t\t\t    currentItem = false,\n\t\t\t    blurable = true,\n\t\t\t    uniqueColumnValues = false;\n\n\t\t\t//style input\n\t\t\tinput.setAttribute(\"type\", \"search\");\n\n\t\t\tinput.style.padding = \"4px\";\n\t\t\tinput.style.width = \"100%\";\n\t\t\tinput.style.boxSizing = \"border-box\";\n\n\t\t\tif (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n\t\t\t\tfor (var key in editorParams.elementAttributes) {\n\t\t\t\t\tif (key.charAt(0) == \"+\") {\n\t\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//style list element\n\t\t\tlistEl.classList.add(\"tabulator-edit-select-list\");\n\n\t\t\tlistEl.addEventListener(\"mousedown\", function (e) {\n\t\t\t\tblurable = false;\n\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tblurable = true;\n\t\t\t\t}, 10);\n\t\t\t});\n\n\t\t\tfunction genUniqueColumnValues() {\n\t\t\t\tif (editorParams.values === true) {\n\t\t\t\t\tuniqueColumnValues = getUniqueColumnValues();\n\t\t\t\t} else if (typeof editorParams.values === \"string\") {\n\t\t\t\t\tuniqueColumnValues = getUniqueColumnValues(editorParams.values);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction getUniqueColumnValues(field) {\n\t\t\t\tvar output = {},\n\t\t\t\t    data = self.table.getData(),\n\t\t\t\t    column;\n\n\t\t\t\tif (field) {\n\t\t\t\t\tcolumn = self.table.columnManager.getColumnByField(field);\n\t\t\t\t} else {\n\t\t\t\t\tcolumn = cell.getColumn()._getSelf();\n\t\t\t\t}\n\n\t\t\t\tif (column) {\n\t\t\t\t\tdata.forEach(function (row) {\n\t\t\t\t\t\tvar val = column.getFieldValue(row);\n\n\t\t\t\t\t\tif (val !== null && typeof val !== \"undefined\" && val !== \"\") {\n\t\t\t\t\t\t\toutput[val] = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tif (editorParams.sortValuesList) {\n\t\t\t\t\t\tif (editorParams.sortValuesList == \"asc\") {\n\t\t\t\t\t\t\toutput = Object.keys(output).sort();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\toutput = Object.keys(output).sort().reverse();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\toutput = Object.keys(output);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"unable to find matching column to create autocomplete lookup list:\", field);\n\t\t\t\t}\n\n\t\t\t\treturn output;\n\t\t\t}\n\n\t\t\tfunction filterList(term, intialLoad) {\n\t\t\t\tvar matches = [],\n\t\t\t\t    values,\n\t\t\t\t    items,\n\t\t\t\t    searchEl;\n\n\t\t\t\t//lookup base values list\n\t\t\t\tif (uniqueColumnValues) {\n\t\t\t\t\tvalues = uniqueColumnValues;\n\t\t\t\t} else {\n\t\t\t\t\tvalues = editorParams.values || [];\n\t\t\t\t}\n\n\t\t\t\tif (editorParams.searchFunc) {\n\t\t\t\t\tmatches = editorParams.searchFunc(term, values);\n\n\t\t\t\t\tif (matches instanceof Promise) {\n\n\t\t\t\t\t\taddNotice(typeof editorParams.searchingPlaceholder !== \"undefined\" ? editorParams.searchingPlaceholder : \"Searching...\");\n\n\t\t\t\t\t\tmatches.then(function (result) {\n\t\t\t\t\t\t\tfillListIfNotEmpty(parseItems(result), intialLoad);\n\t\t\t\t\t\t}).catch(function (err) {\n\t\t\t\t\t\t\tconsole.err(\"error in autocomplete search promise:\", err);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfillListIfNotEmpty(parseItems(matches), intialLoad);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\titems = parseItems(values);\n\n\t\t\t\t\tif (term === \"\") {\n\t\t\t\t\t\tif (editorParams.showListOnEmpty) {\n\t\t\t\t\t\t\tmatches = items;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\titems.forEach(function (item) {\n\t\t\t\t\t\t\tif (item.value !== null || typeof item.value !== \"undefined\") {\n\t\t\t\t\t\t\t\tif (String(item.value).toLowerCase().indexOf(String(term).toLowerCase()) > -1 || String(item.title).toLowerCase().indexOf(String(term).toLowerCase()) > -1) {\n\t\t\t\t\t\t\t\t\tmatches.push(item);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tfillListIfNotEmpty(matches, intialLoad);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction addNotice(notice) {\n\t\t\t\tvar searchEl = document.createElement(\"div\");\n\n\t\t\t\tclearList();\n\n\t\t\t\tif (notice !== false) {\n\t\t\t\t\tsearchEl.classList.add(\"tabulator-edit-select-list-notice\");\n\t\t\t\t\tsearchEl.tabIndex = 0;\n\n\t\t\t\t\tif (notice instanceof Node) {\n\t\t\t\t\t\tsearchEl.appendChild(notice);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsearchEl.innerHTML = notice;\n\t\t\t\t\t}\n\n\t\t\t\t\tlistEl.appendChild(searchEl);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction parseItems(inputValues) {\n\t\t\t\tvar itemList = [];\n\n\t\t\t\tif (Array.isArray(inputValues)) {\n\t\t\t\t\tinputValues.forEach(function (value) {\n\n\t\t\t\t\t\tvar item = {};\n\n\t\t\t\t\t\tif ((typeof value === 'undefined' ? 'undefined' : _typeof(value)) === \"object\") {\n\t\t\t\t\t\t\titem.title = editorParams.listItemFormatter ? editorParams.listItemFormatter(value.value, value.label) : value.label;\n\t\t\t\t\t\t\titem.value = value.value;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\titem.title = editorParams.listItemFormatter ? editorParams.listItemFormatter(value, value) : value;\n\t\t\t\t\t\t\titem.value = value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\titemList.push(item);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tfor (var key in inputValues) {\n\t\t\t\t\t\tvar item = {\n\t\t\t\t\t\t\ttitle: editorParams.listItemFormatter ? editorParams.listItemFormatter(key, inputValues[key]) : inputValues[key],\n\t\t\t\t\t\t\tvalue: key\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\titemList.push(item);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn itemList;\n\t\t\t}\n\n\t\t\tfunction clearList() {\n\t\t\t\twhile (listEl.firstChild) {\n\t\t\t\t\tlistEl.removeChild(listEl.firstChild);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction fillListIfNotEmpty(items, intialLoad) {\n\t\t\t\tif (items.length) {\n\t\t\t\t\tfillList(items, intialLoad);\n\t\t\t\t} else {\n\t\t\t\t\tif (editorParams.emptyPlaceholder) {\n\t\t\t\t\t\taddNotice(editorParams.emptyPlaceholder);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction fillList(items, intialLoad) {\n\t\t\t\tvar current = false;\n\n\t\t\t\tclearList();\n\n\t\t\t\tdisplayItems = items;\n\n\t\t\t\tdisplayItems.forEach(function (item) {\n\t\t\t\t\tvar el = item.element;\n\n\t\t\t\t\tif (!el) {\n\t\t\t\t\t\tel = document.createElement(\"div\");\n\t\t\t\t\t\tel.classList.add(\"tabulator-edit-select-list-item\");\n\t\t\t\t\t\tel.tabIndex = 0;\n\t\t\t\t\t\tel.innerHTML = item.title;\n\n\t\t\t\t\t\tel.addEventListener(\"click\", function (e) {\n\t\t\t\t\t\t\tsetCurrentItem(item);\n\t\t\t\t\t\t\tchooseItem();\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tel.addEventListener(\"mousedown\", function (e) {\n\t\t\t\t\t\t\tblurable = false;\n\n\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\tblurable = true;\n\t\t\t\t\t\t\t}, 10);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\titem.element = el;\n\n\t\t\t\t\t\tif (intialLoad && item.value == initialValue) {\n\t\t\t\t\t\t\tinput.value = item.title;\n\t\t\t\t\t\t\titem.element.classList.add(\"active\");\n\t\t\t\t\t\t\tcurrent = true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (item === currentItem) {\n\t\t\t\t\t\t\titem.element.classList.add(\"active\");\n\t\t\t\t\t\t\tcurrent = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tlistEl.appendChild(el);\n\t\t\t\t});\n\n\t\t\t\tif (!current) {\n\t\t\t\t\tsetCurrentItem(false);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction chooseItem() {\n\t\t\t\thideList();\n\n\t\t\t\tif (currentItem) {\n\t\t\t\t\tif (initialValue !== currentItem.value) {\n\t\t\t\t\t\tinitialValue = currentItem.value;\n\t\t\t\t\t\tinput.value = currentItem.title;\n\t\t\t\t\t\tsuccess(currentItem.value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcancel();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (editorParams.freetext) {\n\t\t\t\t\t\tinitialValue = input.value;\n\t\t\t\t\t\tsuccess(input.value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (editorParams.allowEmpty && input.value === \"\") {\n\t\t\t\t\t\t\tinitialValue = input.value;\n\t\t\t\t\t\t\tsuccess(input.value);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcancel();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction showList() {\n\t\t\t\tif (!listEl.parentNode) {\n\t\t\t\t\twhile (listEl.firstChild) {\n\t\t\t\t\t\tlistEl.removeChild(listEl.firstChild);\n\t\t\t\t\t}var offset = Tabulator.prototype.helpers.elOffset(cellEl);\n\n\t\t\t\t\tlistEl.style.minWidth = cellEl.offsetWidth + \"px\";\n\n\t\t\t\t\tlistEl.style.top = offset.top + cellEl.offsetHeight + \"px\";\n\t\t\t\t\tlistEl.style.left = offset.left + \"px\";\n\t\t\t\t\tdocument.body.appendChild(listEl);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction setCurrentItem(item, showInputValue) {\n\t\t\t\tif (currentItem && currentItem.element) {\n\t\t\t\t\tcurrentItem.element.classList.remove(\"active\");\n\t\t\t\t}\n\n\t\t\t\tcurrentItem = item;\n\n\t\t\t\tif (item && item.element) {\n\t\t\t\t\titem.element.classList.add(\"active\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction hideList() {\n\t\t\t\tif (listEl.parentNode) {\n\t\t\t\t\tlistEl.parentNode.removeChild(listEl);\n\t\t\t\t}\n\n\t\t\t\tremoveScrollListener();\n\t\t\t}\n\n\t\t\tfunction cancelItem() {\n\t\t\t\thideList();\n\t\t\t\tcancel();\n\t\t\t}\n\n\t\t\tfunction removeScrollListener() {\n\t\t\t\tself.table.rowManager.element.removeEventListener(\"scroll\", cancelItem);\n\t\t\t}\n\n\t\t\t//allow key based navigation\n\t\t\tinput.addEventListener(\"keydown\", function (e) {\n\t\t\t\tvar index;\n\n\t\t\t\tswitch (e.keyCode) {\n\t\t\t\t\tcase 38:\n\t\t\t\t\t\t//up arrow\n\t\t\t\t\t\tindex = displayItems.indexOf(currentItem);\n\n\t\t\t\t\t\tif (vertNav == \"editor\" || vertNav == \"hybrid\" && index) {\n\t\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\t\tif (index > 0) {\n\t\t\t\t\t\t\t\tsetCurrentItem(displayItems[index - 1]);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsetCurrentItem(false);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 40:\n\t\t\t\t\t\t//down arrow\n\n\t\t\t\t\t\tindex = displayItems.indexOf(currentItem);\n\n\t\t\t\t\t\tif (vertNav == \"editor\" || vertNav == \"hybrid\" && index < displayItems.length - 1) {\n\n\t\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\t\tif (index < displayItems.length - 1) {\n\t\t\t\t\t\t\t\tif (index == -1) {\n\t\t\t\t\t\t\t\t\tsetCurrentItem(displayItems[0]);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsetCurrentItem(displayItems[index + 1]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 37: //left arrow\n\t\t\t\t\tcase 39:\n\t\t\t\t\t\t//right arrow\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t// e.preventDefault();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 13:\n\t\t\t\t\t\t//enter\n\t\t\t\t\t\tchooseItem();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 27:\n\t\t\t\t\t\t//escape\n\t\t\t\t\t\tcancelItem();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 36: //home\n\t\t\t\t\tcase 35:\n\t\t\t\t\t\t//end\n\t\t\t\t\t\t//prevent table navigation while using input element\n\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tinput.addEventListener(\"keyup\", function (e) {\n\n\t\t\t\tswitch (e.keyCode) {\n\t\t\t\t\tcase 38: //up arrow\n\t\t\t\t\tcase 37: //left arrow\n\t\t\t\t\tcase 39: //up arrow\n\t\t\t\t\tcase 40: //right arrow\n\t\t\t\t\tcase 13: //enter\n\t\t\t\t\tcase 27:\n\t\t\t\t\t\t//escape\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tfilterList(input.value);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tinput.addEventListener(\"search\", function (e) {\n\t\t\t\tfilterList(input.value);\n\t\t\t});\n\n\t\t\tinput.addEventListener(\"blur\", function (e) {\n\t\t\t\tif (blurable) {\n\t\t\t\t\tchooseItem();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tinput.addEventListener(\"focus\", function (e) {\n\t\t\t\tvar value = initialDisplayValue;\n\t\t\t\tgenUniqueColumnValues();\n\t\t\t\tshowList();\n\t\t\t\tinput.value = value;\n\t\t\t\tfilterList(value, true);\n\t\t\t});\n\n\t\t\tonRendered(function () {\n\t\t\t\tinput.style.height = \"100%\";\n\t\t\t\tinput.focus({ preventScroll: true });\n\t\t\t});\n\n\t\t\tif (editorParams.mask) {\n\t\t\t\tthis.table.modules.edit.maskInput(input, editorParams);\n\t\t\t}\n\n\t\t\tsetTimeout(function () {\n\t\t\t\t_this46.table.rowManager.element.addEventListener(\"scroll\", cancelItem);\n\t\t\t}, 10);\n\n\t\t\tgenUniqueColumnValues();\n\t\t\tinput.value = initialDisplayValue;\n\t\t\tfilterList(initialDisplayValue, true);\n\n\t\t\treturn input;\n\t\t},\n\n\t\t//star rating\n\t\tstar: function star(cell, onRendered, success, cancel, editorParams) {\n\t\t\tvar self = this,\n\t\t\t    element = cell.getElement(),\n\t\t\t    value = cell.getValue(),\n\t\t\t    maxStars = element.getElementsByTagName(\"svg\").length || 5,\n\t\t\t    size = element.getElementsByTagName(\"svg\")[0] ? element.getElementsByTagName(\"svg\")[0].getAttribute(\"width\") : 14,\n\t\t\t    stars = [],\n\t\t\t    starsHolder = document.createElement(\"div\"),\n\t\t\t    star = document.createElementNS('http://www.w3.org/2000/svg', \"svg\");\n\n\t\t\t//change star type\n\t\t\tfunction starChange(val) {\n\t\t\t\tstars.forEach(function (star, i) {\n\t\t\t\t\tif (i < val) {\n\t\t\t\t\t\tif (self.table.browser == \"ie\") {\n\t\t\t\t\t\t\tstar.setAttribute(\"class\", \"tabulator-star-active\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstar.classList.replace(\"tabulator-star-inactive\", \"tabulator-star-active\");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstar.innerHTML = '<polygon fill=\"#488CE9\" stroke=\"#014AAE\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (self.table.browser == \"ie\") {\n\t\t\t\t\t\t\tstar.setAttribute(\"class\", \"tabulator-star-inactive\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstar.classList.replace(\"tabulator-star-active\", \"tabulator-star-inactive\");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstar.innerHTML = '<polygon fill=\"#010155\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t//build stars\n\t\t\tfunction buildStar(i) {\n\n\t\t\t\tvar starHolder = document.createElement(\"span\");\n\t\t\t\tvar nextStar = star.cloneNode(true);\n\n\t\t\t\tstars.push(nextStar);\n\n\t\t\t\tstarHolder.addEventListener(\"mouseenter\", function (e) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\tstarChange(i);\n\t\t\t\t});\n\n\t\t\t\tstarHolder.addEventListener(\"mousemove\", function (e) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t});\n\n\t\t\t\tstarHolder.addEventListener(\"click\", function (e) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\tsuccess(i);\n\t\t\t\t\telement.blur();\n\t\t\t\t});\n\n\t\t\t\tstarHolder.appendChild(nextStar);\n\t\t\t\tstarsHolder.appendChild(starHolder);\n\t\t\t}\n\n\t\t\t//handle keyboard navigation value change\n\t\t\tfunction changeValue(val) {\n\t\t\t\tvalue = val;\n\t\t\t\tstarChange(val);\n\t\t\t}\n\n\t\t\t//style cell\n\t\t\telement.style.whiteSpace = \"nowrap\";\n\t\t\telement.style.overflow = \"hidden\";\n\t\t\telement.style.textOverflow = \"ellipsis\";\n\n\t\t\t//style holding element\n\t\t\tstarsHolder.style.verticalAlign = \"middle\";\n\t\t\tstarsHolder.style.display = \"inline-block\";\n\t\t\tstarsHolder.style.padding = \"4px\";\n\n\t\t\t//style star\n\t\t\tstar.setAttribute(\"width\", size);\n\t\t\tstar.setAttribute(\"height\", size);\n\t\t\tstar.setAttribute(\"viewBox\", \"0 0 512 512\");\n\t\t\tstar.setAttribute(\"xml:space\", \"preserve\");\n\t\t\tstar.style.padding = \"0 1px\";\n\n\t\t\tif (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n\t\t\t\tfor (var key in editorParams.elementAttributes) {\n\t\t\t\t\tif (key.charAt(0) == \"+\") {\n\t\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\t\tstarsHolder.setAttribute(key, starsHolder.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstarsHolder.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//create correct number of stars\n\t\t\tfor (var i = 1; i <= maxStars; i++) {\n\t\t\t\tbuildStar(i);\n\t\t\t}\n\n\t\t\t//ensure value does not exceed number of stars\n\t\t\tvalue = Math.min(parseInt(value), maxStars);\n\n\t\t\t// set initial styling of stars\n\t\t\tstarChange(value);\n\n\t\t\tstarsHolder.addEventListener(\"mousemove\", function (e) {\n\t\t\t\tstarChange(0);\n\t\t\t});\n\n\t\t\tstarsHolder.addEventListener(\"click\", function (e) {\n\t\t\t\tsuccess(0);\n\t\t\t});\n\n\t\t\telement.addEventListener(\"blur\", function (e) {\n\t\t\t\tcancel();\n\t\t\t});\n\n\t\t\t//allow key based navigation\n\t\t\telement.addEventListener(\"keydown\", function (e) {\n\t\t\t\tswitch (e.keyCode) {\n\t\t\t\t\tcase 39:\n\t\t\t\t\t\t//right arrow\n\t\t\t\t\t\tchangeValue(value + 1);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 37:\n\t\t\t\t\t\t//left arrow\n\t\t\t\t\t\tchangeValue(value - 1);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 13:\n\t\t\t\t\t\t//enter\n\t\t\t\t\t\tsuccess(value);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 27:\n\t\t\t\t\t\t//escape\n\t\t\t\t\t\tcancel();\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn starsHolder;\n\t\t},\n\n\t\t//draggable progress bar\n\t\tprogress: function progress(cell, onRendered, success, cancel, editorParams) {\n\t\t\tvar element = cell.getElement(),\n\t\t\t    max = typeof editorParams.max === \"undefined\" ? element.getElementsByTagName(\"div\")[0].getAttribute(\"max\") || 100 : editorParams.max,\n\t\t\t    min = typeof editorParams.min === \"undefined\" ? element.getElementsByTagName(\"div\")[0].getAttribute(\"min\") || 0 : editorParams.min,\n\t\t\t    percent = (max - min) / 100,\n\t\t\t    value = cell.getValue() || 0,\n\t\t\t    handle = document.createElement(\"div\"),\n\t\t\t    bar = document.createElement(\"div\"),\n\t\t\t    mouseDrag,\n\t\t\t    mouseDragWidth;\n\n\t\t\t//set new value\n\t\t\tfunction updateValue() {\n\t\t\t\tvar calcVal = percent * Math.round(bar.offsetWidth / (element.clientWidth / 100)) + min;\n\t\t\t\tsuccess(calcVal);\n\t\t\t\telement.setAttribute(\"aria-valuenow\", calcVal);\n\t\t\t\telement.setAttribute(\"aria-label\", value);\n\t\t\t}\n\n\t\t\t//style handle\n\t\t\thandle.style.position = \"absolute\";\n\t\t\thandle.style.right = \"0\";\n\t\t\thandle.style.top = \"0\";\n\t\t\thandle.style.bottom = \"0\";\n\t\t\thandle.style.width = \"5px\";\n\t\t\thandle.classList.add(\"tabulator-progress-handle\");\n\n\t\t\t//style bar\n\t\t\tbar.style.display = \"inline-block\";\n\t\t\tbar.style.position = \"relative\";\n\t\t\t// bar.style.top = \"8px\";\n\t\t\t// bar.style.bottom = \"8px\";\n\t\t\t// bar.style.left = \"4px\";\n\t\t\t// bar.style.marginRight = \"4px\";\n\t\t\tbar.style.height = \"100%\";\n\t\t\tbar.style.backgroundColor = \"#488CE9\";\n\t\t\tbar.style.maxWidth = \"100%\";\n\t\t\tbar.style.minWidth = \"0%\";\n\n\t\t\tif (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n\t\t\t\tfor (var key in editorParams.elementAttributes) {\n\t\t\t\t\tif (key.charAt(0) == \"+\") {\n\t\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\t\tbar.setAttribute(key, bar.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbar.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//style cell\n\t\t\telement.style.padding = \"4px 4px\";\n\n\t\t\t//make sure value is in range\n\t\t\tvalue = Math.min(parseFloat(value), max);\n\t\t\tvalue = Math.max(parseFloat(value), min);\n\n\t\t\t//workout percentage\n\t\t\tvalue = Math.round((value - min) / percent);\n\t\t\t// bar.style.right = value + \"%\";\n\t\t\tbar.style.width = value + \"%\";\n\n\t\t\telement.setAttribute(\"aria-valuemin\", min);\n\t\t\telement.setAttribute(\"aria-valuemax\", max);\n\n\t\t\tbar.appendChild(handle);\n\n\t\t\thandle.addEventListener(\"mousedown\", function (e) {\n\t\t\t\tmouseDrag = e.screenX;\n\t\t\t\tmouseDragWidth = bar.offsetWidth;\n\t\t\t});\n\n\t\t\thandle.addEventListener(\"mouseover\", function () {\n\t\t\t\thandle.style.cursor = \"ew-resize\";\n\t\t\t});\n\n\t\t\telement.addEventListener(\"mousemove\", function (e) {\n\t\t\t\tif (mouseDrag) {\n\t\t\t\t\tbar.style.width = mouseDragWidth + e.screenX - mouseDrag + \"px\";\n\t\t\t\t}\n\t\t\t});\n\n\t\t\telement.addEventListener(\"mouseup\", function (e) {\n\t\t\t\tif (mouseDrag) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.stopImmediatePropagation();\n\n\t\t\t\t\tmouseDrag = false;\n\t\t\t\t\tmouseDragWidth = false;\n\n\t\t\t\t\tupdateValue();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t//allow key based navigation\n\t\t\telement.addEventListener(\"keydown\", function (e) {\n\t\t\t\tswitch (e.keyCode) {\n\t\t\t\t\tcase 39:\n\t\t\t\t\t\t//right arrow\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tbar.style.width = bar.clientWidth + element.clientWidth / 100 + \"px\";\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 37:\n\t\t\t\t\t\t//left arrow\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tbar.style.width = bar.clientWidth - element.clientWidth / 100 + \"px\";\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 9: //tab\n\t\t\t\t\tcase 13:\n\t\t\t\t\t\t//enter\n\t\t\t\t\t\tupdateValue();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 27:\n\t\t\t\t\t\t//escape\n\t\t\t\t\t\tcancel();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\t\t\t});\n\n\t\t\telement.addEventListener(\"blur\", function () {\n\t\t\t\tcancel();\n\t\t\t});\n\n\t\t\treturn bar;\n\t\t},\n\n\t\t//checkbox\n\t\ttickCross: function tickCross(cell, onRendered, success, cancel, editorParams) {\n\t\t\tvar value = cell.getValue(),\n\t\t\t    input = document.createElement(\"input\"),\n\t\t\t    tristate = editorParams.tristate,\n\t\t\t    indetermValue = typeof editorParams.indeterminateValue === \"undefined\" ? null : editorParams.indeterminateValue,\n\t\t\t    indetermState = false;\n\n\t\t\tinput.setAttribute(\"type\", \"checkbox\");\n\t\t\tinput.style.marginTop = \"5px\";\n\t\t\tinput.style.boxSizing = \"border-box\";\n\n\t\t\tif (editorParams.elementAttributes && _typeof(editorParams.elementAttributes) == \"object\") {\n\t\t\t\tfor (var key in editorParams.elementAttributes) {\n\t\t\t\t\tif (key.charAt(0) == \"+\") {\n\t\t\t\t\t\tkey = key.slice(1);\n\t\t\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinput.value = value;\n\n\t\t\tif (tristate && (typeof value === \"undefined\" || value === indetermValue || value === \"\")) {\n\t\t\t\tindetermState = true;\n\t\t\t\tinput.indeterminate = true;\n\t\t\t}\n\n\t\t\tif (this.table.browser != \"firefox\") {\n\t\t\t\t//prevent blur issue on mac firefox\n\t\t\t\tonRendered(function () {\n\t\t\t\t\tinput.focus({ preventScroll: true });\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tinput.checked = value === true || value === \"true\" || value === \"True\" || value === 1;\n\n\t\t\tfunction setValue(blur) {\n\t\t\t\tif (tristate) {\n\t\t\t\t\tif (!blur) {\n\t\t\t\t\t\tif (input.checked && !indetermState) {\n\t\t\t\t\t\t\tinput.checked = false;\n\t\t\t\t\t\t\tinput.indeterminate = true;\n\t\t\t\t\t\t\tindetermState = true;\n\t\t\t\t\t\t\treturn indetermValue;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tindetermState = false;\n\t\t\t\t\t\t\treturn input.checked;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (indetermState) {\n\t\t\t\t\t\t\treturn indetermValue;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn input.checked;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn input.checked;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//submit new value on blur\n\t\t\tinput.addEventListener(\"change\", function (e) {\n\t\t\t\tsuccess(setValue());\n\t\t\t});\n\n\t\t\tinput.addEventListener(\"blur\", function (e) {\n\t\t\t\tsuccess(setValue(true));\n\t\t\t});\n\n\t\t\t//submit new value on enter\n\t\t\tinput.addEventListener(\"keydown\", function (e) {\n\t\t\t\tif (e.keyCode == 13) {\n\t\t\t\t\tsuccess(setValue());\n\t\t\t\t}\n\t\t\t\tif (e.keyCode == 27) {\n\t\t\t\t\tcancel();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn input;\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"edit\", Edit);\n\n\tvar ExportRow = function ExportRow(type, columns, component, indent) {\n\t\tthis.type = type;\n\t\tthis.columns = columns;\n\t\tthis.component = component || false;\n\t\tthis.indent = indent || 0;\n\t};\n\n\tvar ExportColumn = function ExportColumn(value, component, width, height, depth) {\n\t\tthis.value = value;\n\t\tthis.component = component || false;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.depth = depth;\n\t};\n\n\tvar Export = function Export(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.config = {};\n\t\tthis.cloneTableStyle = true;\n\t\tthis.colVisProp = \"\";\n\t};\n\n\tExport.prototype.generateExportList = function (config, style, range, colVisProp) {\n\t\tthis.cloneTableStyle = style;\n\t\tthis.config = config || {};\n\t\tthis.colVisProp = colVisProp;\n\n\t\tvar headers = this.config.columnHeaders !== false ? this.headersToExportRows(this.generateColumnGroupHeaders()) : [];\n\t\tvar body = this.bodyToExportRows(this.rowLookup(range));\n\n\t\treturn headers.concat(body);\n\t};\n\n\tExport.prototype.genereateTable = function (config, style, range, colVisProp) {\n\t\tvar list = this.generateExportList(config, style, range, colVisProp);\n\n\t\treturn this.genereateTableElement(list);\n\t};\n\n\tExport.prototype.rowLookup = function (range) {\n\t\tvar _this47 = this;\n\n\t\tvar rows = [];\n\n\t\tif (typeof range == \"function\") {\n\t\t\trange.call(this.table).forEach(function (row) {\n\t\t\t\trow = _this47.table.rowManager.findRow(row);\n\n\t\t\t\tif (row) {\n\t\t\t\t\trows.push(row);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tswitch (range) {\n\t\t\t\tcase true:\n\t\t\t\tcase \"visible\":\n\t\t\t\t\trows = this.table.rowManager.getVisibleRows(true);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"all\":\n\t\t\t\t\trows = this.table.rowManager.rows;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"selected\":\n\t\t\t\t\trows = this.table.modules.selectRow.selectedRows;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"active\":\n\t\t\t\tdefault:\n\t\t\t\t\trows = this.table.rowManager.getDisplayRows();\n\t\t\t}\n\t\t}\n\n\t\treturn Object.assign([], rows);\n\t};\n\n\tExport.prototype.generateColumnGroupHeaders = function () {\n\t\tvar _this48 = this;\n\n\t\tvar output = [];\n\n\t\tvar columns = this.config.columnGroups !== false ? this.table.columnManager.columns : this.table.columnManager.columnsByIndex;\n\n\t\tcolumns.forEach(function (column) {\n\t\t\tvar colData = _this48.processColumnGroup(column);\n\n\t\t\tif (colData) {\n\t\t\t\toutput.push(colData);\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t};\n\n\tExport.prototype.processColumnGroup = function (column) {\n\t\tvar _this49 = this;\n\n\t\tvar subGroups = column.columns,\n\t\t    maxDepth = 0,\n\t\t    title = column.definition[\"title\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))] || column.definition.title;\n\n\t\tvar groupData = {\n\t\t\ttitle: title,\n\t\t\tcolumn: column,\n\t\t\tdepth: 1\n\t\t};\n\n\t\tif (subGroups.length) {\n\t\t\tgroupData.subGroups = [];\n\t\t\tgroupData.width = 0;\n\n\t\t\tsubGroups.forEach(function (subGroup) {\n\t\t\t\tvar subGroupData = _this49.processColumnGroup(subGroup);\n\n\t\t\t\tif (subGroupData) {\n\t\t\t\t\tgroupData.width += subGroupData.width;\n\t\t\t\t\tgroupData.subGroups.push(subGroupData);\n\n\t\t\t\t\tif (subGroupData.depth > maxDepth) {\n\t\t\t\t\t\tmaxDepth = subGroupData.depth;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tgroupData.depth += maxDepth;\n\n\t\t\tif (!groupData.width) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.columnVisCheck(column)) {\n\t\t\t\tgroupData.width = 1;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn groupData;\n\t};\n\n\tExport.prototype.columnVisCheck = function (column) {\n\t\treturn column.definition[this.colVisProp] !== false && (column.visible || !column.visible && column.definition[this.colVisProp]);\n\t};\n\n\tExport.prototype.headersToExportRows = function (columns) {\n\t\tvar headers = [],\n\t\t    headerDepth = 0,\n\t\t    exportRows = [];\n\n\t\tfunction parseColumnGroup(column, level) {\n\n\t\t\tvar depth = headerDepth - level;\n\n\t\t\tif (typeof headers[level] === \"undefined\") {\n\t\t\t\theaders[level] = [];\n\t\t\t}\n\n\t\t\tcolumn.height = column.subGroups ? 1 : depth - column.depth + 1;\n\n\t\t\theaders[level].push(column);\n\n\t\t\tif (column.height > 1) {\n\t\t\t\tfor (var _i7 = 1; _i7 < column.height; _i7++) {\n\n\t\t\t\t\tif (typeof headers[level + _i7] === \"undefined\") {\n\t\t\t\t\t\theaders[level + _i7] = [];\n\t\t\t\t\t}\n\n\t\t\t\t\theaders[level + _i7].push(false);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (column.width > 1) {\n\t\t\t\tfor (var _i8 = 1; _i8 < column.width; _i8++) {\n\t\t\t\t\theaders[level].push(false);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (column.subGroups) {\n\t\t\t\tcolumn.subGroups.forEach(function (subGroup) {\n\t\t\t\t\tparseColumnGroup(subGroup, level + 1);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t//calculate maximum header debth\n\t\tcolumns.forEach(function (column) {\n\t\t\tif (column.depth > headerDepth) {\n\t\t\t\theaderDepth = column.depth;\n\t\t\t}\n\t\t});\n\n\t\tcolumns.forEach(function (column) {\n\t\t\tparseColumnGroup(column, 0);\n\t\t});\n\n\t\theaders.forEach(function (header) {\n\t\t\tvar columns = [];\n\n\t\t\theader.forEach(function (col) {\n\t\t\t\tif (col) {\n\t\t\t\t\tcolumns.push(new ExportColumn(col.title, col.column.getComponent(), col.width, col.height, col.depth));\n\t\t\t\t} else {\n\t\t\t\t\tcolumns.push(null);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\texportRows.push(new ExportRow(\"header\", columns));\n\t\t});\n\n\t\treturn exportRows;\n\t};\n\n\tExport.prototype.bodyToExportRows = function (rows) {\n\t\tvar _this50 = this;\n\n\t\tvar columns = [];\n\t\tvar exportRows = [];\n\n\t\tthis.table.columnManager.columnsByIndex.forEach(function (column) {\n\t\t\tif (_this50.columnVisCheck(column)) {\n\t\t\t\tcolumns.push(column.getComponent());\n\t\t\t}\n\t\t});\n\n\t\tif (this.config.columnCalcs !== false && this.table.modExists(\"columnCalcs\")) {\n\t\t\tif (this.table.modules.columnCalcs.topInitialized) {\n\t\t\t\trows.unshift(this.table.modules.columnCalcs.topRow);\n\t\t\t}\n\n\t\t\tif (this.table.modules.columnCalcs.botInitialized) {\n\t\t\t\trows.push(this.table.modules.columnCalcs.botRow);\n\t\t\t}\n\t\t}\n\n\t\trows = rows.filter(function (row) {\n\t\t\tswitch (row.type) {\n\t\t\t\tcase \"group\":\n\t\t\t\t\treturn _this50.config.rowGroups !== false;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"calc\":\n\t\t\t\t\treturn _this50.config.columnCalcs !== false;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"row\":\n\t\t\t\t\treturn !(_this50.table.options.dataTree && _this50.config.dataTree === false && row.modules.dataTree.parent);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t});\n\n\t\trows.forEach(function (row, i) {\n\t\t\tvar rowData = row.getData(_this50.colVisProp);\n\t\t\tvar exportCols = [];\n\t\t\tvar indent = 0;\n\n\t\t\tswitch (row.type) {\n\t\t\t\tcase \"group\":\n\t\t\t\t\tindent = row.level;\n\t\t\t\t\texportCols.push(new ExportColumn(row.key, row.getComponent(), columns.length, 1));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"calc\":\n\t\t\t\tcase \"row\":\n\t\t\t\t\tcolumns.forEach(function (col) {\n\t\t\t\t\t\texportCols.push(new ExportColumn(col._column.getFieldValue(rowData), col, 1, 1));\n\t\t\t\t\t});\n\n\t\t\t\t\tif (_this50.table.options.dataTree && _this50.config.dataTree !== false) {\n\t\t\t\t\t\tindent = row.modules.dataTree.index;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\texportRows.push(new ExportRow(row.type, exportCols, row.getComponent(), indent));\n\t\t});\n\n\t\treturn exportRows;\n\t};\n\n\tExport.prototype.genereateTableElement = function (list) {\n\t\tvar _this51 = this;\n\n\t\tvar table = document.createElement(\"table\"),\n\t\t    headerEl = document.createElement(\"thead\"),\n\t\t    bodyEl = document.createElement(\"tbody\"),\n\t\t    styles = this.lookupTableStyles(),\n\t\t    rowFormatter = this.table.options[\"rowFormatter\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))],\n\t\t    setup = {};\n\n\t\tsetup.rowFormatter = rowFormatter !== null ? rowFormatter : this.table.options.rowFormatter;\n\n\t\tif (this.table.options.dataTree && this.config.dataTree !== false && this.table.modExists(\"columnCalcs\")) {\n\t\t\tsetup.treeElementField = this.table.modules.dataTree.elementField;\n\t\t}\n\n\t\t//assign group header formatter\n\t\tsetup.groupHeader = this.table.options[\"groupHeader\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))];\n\n\t\tif (setup.groupHeader && !Array.isArray(setup.groupHeader)) {\n\t\t\tsetup.groupHeader = [setup.groupHeader];\n\t\t}\n\n\t\ttable.classList.add(\"tabulator-print-table\");\n\n\t\tthis.mapElementStyles(this.table.columnManager.getHeadersElement(), headerEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\n\t\tif (list.length > 1000) {\n\t\t\tconsole.warn(\"It may take a long time to render an HTML table with more than 1000 rows\");\n\t\t}\n\n\t\tlist.forEach(function (row, i) {\n\t\t\tswitch (row.type) {\n\t\t\t\tcase \"header\":\n\t\t\t\t\theaderEl.appendChild(_this51.genereateHeaderElement(row, setup, styles));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"group\":\n\t\t\t\t\tbodyEl.appendChild(_this51.genereateGroupElement(row, setup, styles));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"calc\":\n\t\t\t\t\tbodyEl.appendChild(_this51.genereateCalcElement(row, setup, styles));\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"row\":\n\t\t\t\t\tvar rowEl = _this51.genereateRowElement(row, setup, styles);\n\t\t\t\t\t_this51.mapElementStyles(i % 2 && styles.evenRow ? styles.evenRow : styles.oddRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\t\t\t\t\tbodyEl.appendChild(rowEl);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\n\t\tif (headerEl.innerHTML) {\n\t\t\ttable.appendChild(headerEl);\n\t\t}\n\n\t\ttable.appendChild(bodyEl);\n\n\t\tthis.mapElementStyles(this.table.element, table, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\"]);\n\t\treturn table;\n\t};\n\n\tExport.prototype.lookupTableStyles = function () {\n\t\tvar styles = {};\n\n\t\t//lookup row styles\n\t\tif (this.cloneTableStyle && window.getComputedStyle) {\n\t\t\tstyles.oddRow = this.table.element.querySelector(\".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\t\tstyles.evenRow = this.table.element.querySelector(\".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\t\tstyles.calcRow = this.table.element.querySelector(\".tabulator-row.tabulator-calcs\");\n\t\t\tstyles.firstRow = this.table.element.querySelector(\".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\t\tstyles.firstGroup = this.table.element.getElementsByClassName(\"tabulator-group\")[0];\n\n\t\t\tif (styles.firstRow) {\n\t\t\t\tstyles.styleCells = styles.firstRow.getElementsByClassName(\"tabulator-cell\");\n\t\t\t\tstyles.firstCell = styles.styleCells[0];\n\t\t\t\tstyles.lastCell = styles.styleCells[styles.styleCells.length - 1];\n\t\t\t}\n\t\t}\n\n\t\treturn styles;\n\t};\n\n\tExport.prototype.genereateHeaderElement = function (row, setup, styles) {\n\t\tvar _this52 = this;\n\n\t\tvar rowEl = document.createElement(\"tr\");\n\n\t\trow.columns.forEach(function (column) {\n\t\t\tif (column) {\n\t\t\t\tvar cellEl = document.createElement(\"th\");\n\t\t\t\tvar classNames = column.component._column.definition.cssClass ? column.component._column.definition.cssClass.split(\" \") : [];\n\n\t\t\t\tcellEl.colSpan = column.width;\n\t\t\t\tcellEl.rowSpan = column.height;\n\n\t\t\t\tcellEl.innerHTML = column.value;\n\n\t\t\t\tif (_this52.cloneTableStyle) {\n\t\t\t\t\tcellEl.style.boxSizing = \"border-box\";\n\t\t\t\t}\n\n\t\t\t\tclassNames.forEach(function (className) {\n\t\t\t\t\tcellEl.classList.add(className);\n\t\t\t\t});\n\n\t\t\t\t_this52.mapElementStyles(column.component.getElement(), cellEl, [\"text-align\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\t\t\t\t_this52.mapElementStyles(column.component._column.contentElement, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n\n\t\t\t\tif (column.component._column.visible) {\n\t\t\t\t\t_this52.mapElementStyles(column.component.getElement(), cellEl, [\"width\"]);\n\t\t\t\t} else {\n\t\t\t\t\tif (column.component._column.definition.width) {\n\t\t\t\t\t\tcellEl.style.width = column.component._column.definition.width + \"px\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (column.component._column.parent) {\n\t\t\t\t\t_this52.mapElementStyles(column.component._column.parent.groupElement, cellEl, [\"border-top\"]);\n\t\t\t\t}\n\n\t\t\t\trowEl.appendChild(cellEl);\n\t\t\t}\n\t\t});\n\n\t\treturn rowEl;\n\t};\n\n\tExport.prototype.genereateGroupElement = function (row, setup, styles) {\n\n\t\tvar rowEl = document.createElement(\"tr\"),\n\t\t    cellEl = document.createElement(\"td\"),\n\t\t    group = row.columns[0];\n\n\t\trowEl.classList.add(\"tabulator-print-table-row\");\n\n\t\tif (setup.groupHeader && setup.groupHeader[row.indent]) {\n\t\t\tgroup.value = setup.groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n\t\t} else {\n\t\t\tif (setup.groupHeader === false) {\n\t\t\t\tgroup.value = group.value;\n\t\t\t} else {\n\t\t\t\tgroup.value = row.component._group.generator(group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n\t\t\t}\n\t\t}\n\n\t\tcellEl.colSpan = group.width;\n\t\tcellEl.innerHTML = group.value;\n\n\t\trowEl.classList.add(\"tabulator-print-table-group\");\n\t\trowEl.classList.add(\"tabulator-group-level-\" + row.indent);\n\n\t\tif (group.component.getVisibility()) {\n\t\t\trowEl.classList.add(\"tabulator-group-visible\");\n\t\t}\n\n\t\tthis.mapElementStyles(styles.firstGroup, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\t\tthis.mapElementStyles(styles.firstGroup, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n\n\t\trowEl.appendChild(cellEl);\n\n\t\treturn rowEl;\n\t};\n\n\tExport.prototype.genereateCalcElement = function (row, setup, styles) {\n\t\tvar rowEl = this.genereateRowElement(row, setup, styles);\n\n\t\trowEl.classList.add(\"tabulator-print-table-calcs\");\n\t\tthis.mapElementStyles(styles.calcRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\n\t\treturn rowEl;\n\t};\n\n\tExport.prototype.genereateRowElement = function (row, setup, styles) {\n\t\tvar _this53 = this;\n\n\t\tvar rowEl = document.createElement(\"tr\");\n\n\t\trowEl.classList.add(\"tabulator-print-table-row\");\n\n\t\trow.columns.forEach(function (col) {\n\n\t\t\tif (col) {\n\t\t\t\tvar cellEl = document.createElement(\"td\"),\n\t\t\t\t    column = col.component._column,\n\t\t\t\t    value = col.value;\n\n\t\t\t\tvar cellWrapper = {\n\t\t\t\t\tmodules: {},\n\t\t\t\t\tgetValue: function getValue() {\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t},\n\t\t\t\t\tgetField: function getField() {\n\t\t\t\t\t\treturn column.definition.field;\n\t\t\t\t\t},\n\t\t\t\t\tgetElement: function getElement() {\n\t\t\t\t\t\treturn cellEl;\n\t\t\t\t\t},\n\t\t\t\t\tgetColumn: function getColumn() {\n\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t},\n\t\t\t\t\tgetData: function getData() {\n\t\t\t\t\t\treturn rowData;\n\t\t\t\t\t},\n\t\t\t\t\tgetRow: function getRow() {\n\t\t\t\t\t\treturn row.getComponent();\n\t\t\t\t\t},\n\t\t\t\t\tgetComponent: function getComponent() {\n\t\t\t\t\t\treturn cellWrapper;\n\t\t\t\t\t},\n\t\t\t\t\tcolumn: column\n\t\t\t\t};\n\n\t\t\t\tvar classNames = column.definition.cssClass ? column.definition.cssClass.split(\" \") : [];\n\n\t\t\t\tclassNames.forEach(function (className) {\n\t\t\t\t\tcellEl.classList.add(className);\n\t\t\t\t});\n\n\t\t\t\tif (_this53.table.modExists(\"format\") && _this53.config.formatCells !== false) {\n\t\t\t\t\tvalue = _this53.table.modules.format.formatExportValue(cellWrapper, _this53.colVisProp);\n\t\t\t\t} else {\n\t\t\t\t\tswitch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\tvalue = JSON.stringify(value);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\tcase \"null\":\n\t\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tvalue = value;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (value instanceof Node) {\n\t\t\t\t\tcellEl.appendChild(value);\n\t\t\t\t} else {\n\t\t\t\t\tcellEl.innerHTML = value;\n\t\t\t\t}\n\n\t\t\t\tif (styles.firstCell) {\n\t\t\t\t\t_this53.mapElementStyles(styles.firstCell, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\n\t\t\t\t\tif (column.definition.align) {\n\t\t\t\t\t\tcellEl.style.textAlign = column.definition.align;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (_this53.table.options.dataTree && _this53.config.dataTree !== false) {\n\t\t\t\t\tif (setup.treeElementField && setup.treeElementField == column.field || !setup.treeElementField && i == 0) {\n\t\t\t\t\t\tif (row.component._row.modules.dataTree.controlEl) {\n\t\t\t\t\t\t\tcellEl.insertBefore(row.component._row.modules.dataTree.controlEl.cloneNode(true), cellEl.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (row.component._row.modules.dataTree.branchEl) {\n\t\t\t\t\t\t\tcellEl.insertBefore(row.component._row.modules.dataTree.branchEl.cloneNode(true), cellEl.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\trowEl.appendChild(cellEl);\n\n\t\t\t\tif (cellWrapper.modules.format && cellWrapper.modules.format.renderedCallback) {\n\t\t\t\t\tcellWrapper.modules.format.renderedCallback();\n\t\t\t\t}\n\n\t\t\t\tif (setup.rowFormatter && _this53.config.formatCells !== false) {\n\t\t\t\t\tvar rowComponent = row.getComponent();\n\n\t\t\t\t\trowComponent.getElement = function () {\n\t\t\t\t\t\treturn rowEl;\n\t\t\t\t\t};\n\n\t\t\t\t\tsetup.rowFormatter(rowComponent);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn rowEl;\n\t};\n\n\tExport.prototype.genereateHTMLTable = function (list) {\n\t\tvar holder = document.createElement(\"div\");\n\n\t\tholder.appendChild(this.genereateTableElement(list));\n\n\t\treturn holder.innerHTML;\n\t};\n\n\tExport.prototype.getHtml = function (visible, style, config, colVisProp) {\n\t\tvar list = this.generateExportList(config || this.table.options.htmlOutputConfig, style, visible, colVisProp || \"htmlOutput\");\n\n\t\treturn this.genereateHTMLTable(list);\n\t};\n\n\tExport.prototype.mapElementStyles = function (from, to, props) {\n\t\tif (this.cloneTableStyle && from && to) {\n\n\t\t\tvar lookup = {\n\t\t\t\t\"background-color\": \"backgroundColor\",\n\t\t\t\t\"color\": \"fontColor\",\n\t\t\t\t\"width\": \"width\",\n\t\t\t\t\"font-weight\": \"fontWeight\",\n\t\t\t\t\"font-family\": \"fontFamily\",\n\t\t\t\t\"font-size\": \"fontSize\",\n\t\t\t\t\"text-align\": \"textAlign\",\n\t\t\t\t\"border-top\": \"borderTop\",\n\t\t\t\t\"border-left\": \"borderLeft\",\n\t\t\t\t\"border-right\": \"borderRight\",\n\t\t\t\t\"border-bottom\": \"borderBottom\",\n\t\t\t\t\"padding-top\": \"paddingTop\",\n\t\t\t\t\"padding-left\": \"paddingLeft\",\n\t\t\t\t\"padding-right\": \"paddingRight\",\n\t\t\t\t\"padding-bottom\": \"paddingBottom\"\n\t\t\t};\n\n\t\t\tif (window.getComputedStyle) {\n\t\t\t\tvar fromStyle = window.getComputedStyle(from);\n\n\t\t\t\tprops.forEach(function (prop) {\n\t\t\t\t\tto.style[lookup[prop]] = fromStyle.getPropertyValue(prop);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"export\", Export);\n\n\tvar Filter = function Filter(table) {\n\n\t\tthis.table = table; //hold Tabulator object\n\n\t\tthis.filterList = []; //hold filter list\n\t\tthis.headerFilters = {}; //hold column filters\n\t\tthis.headerFilterColumns = []; //hold columns that use header filters\n\n\t\tthis.prevHeaderFilterChangeCheck = \"\";\n\t\tthis.prevHeaderFilterChangeCheck = \"{}\";\n\n\t\tthis.changed = false; //has filtering changed since last render\n\t};\n\n\t//initialize column header filter\n\tFilter.prototype.initializeColumn = function (column, value) {\n\t\tvar self = this,\n\t\t    field = column.getField(),\n\t\t    params;\n\n\t\t//handle successfull value change\n\t\tfunction success(value) {\n\t\t\tvar filterType = column.modules.filter.tagType == \"input\" && column.modules.filter.attrType == \"text\" || column.modules.filter.tagType == \"textarea\" ? \"partial\" : \"match\",\n\t\t\t    type = \"\",\n\t\t\t    filterChangeCheck = \"\",\n\t\t\t    filterFunc;\n\n\t\t\tif (typeof column.modules.filter.prevSuccess === \"undefined\" || column.modules.filter.prevSuccess !== value) {\n\n\t\t\t\tcolumn.modules.filter.prevSuccess = value;\n\n\t\t\t\tif (!column.modules.filter.emptyFunc(value)) {\n\t\t\t\t\tcolumn.modules.filter.value = value;\n\n\t\t\t\t\tswitch (_typeof(column.definition.headerFilterFunc)) {\n\t\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\t\tif (self.filters[column.definition.headerFilterFunc]) {\n\t\t\t\t\t\t\t\ttype = column.definition.headerFilterFunc;\n\t\t\t\t\t\t\t\tfilterFunc = function filterFunc(data) {\n\t\t\t\t\t\t\t\t\tvar params = column.definition.headerFilterFuncParams || {};\n\t\t\t\t\t\t\t\t\tvar fieldVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\t\t\tparams = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n\n\t\t\t\t\t\t\t\t\treturn self.filters[column.definition.headerFilterFunc](value, fieldVal, data, params);\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconsole.warn(\"Header Filter Error - Matching filter function not found: \", column.definition.headerFilterFunc);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"function\":\n\t\t\t\t\t\t\tfilterFunc = function filterFunc(data) {\n\t\t\t\t\t\t\t\tvar params = column.definition.headerFilterFuncParams || {};\n\t\t\t\t\t\t\t\tvar fieldVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\t\tparams = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n\n\t\t\t\t\t\t\t\treturn column.definition.headerFilterFunc(value, fieldVal, data, params);\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\ttype = filterFunc;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!filterFunc) {\n\t\t\t\t\t\tswitch (filterType) {\n\t\t\t\t\t\t\tcase \"partial\":\n\t\t\t\t\t\t\t\tfilterFunc = function filterFunc(data) {\n\t\t\t\t\t\t\t\t\tvar colVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\t\t\tif (typeof colVal !== 'undefined' && colVal !== null) {\n\t\t\t\t\t\t\t\t\t\treturn String(colVal).toLowerCase().indexOf(String(value).toLowerCase()) > -1;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\ttype = \"like\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tfilterFunc = function filterFunc(data) {\n\t\t\t\t\t\t\t\t\treturn column.getFieldValue(data) == value;\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\ttype = \"=\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tself.headerFilters[field] = { value: value, func: filterFunc, type: type, params: params || {} };\n\t\t\t\t} else {\n\t\t\t\t\tdelete self.headerFilters[field];\n\t\t\t\t}\n\n\t\t\t\tfilterChangeCheck = JSON.stringify(self.headerFilters);\n\n\t\t\t\tif (self.prevHeaderFilterChangeCheck !== filterChangeCheck) {\n\t\t\t\t\tself.prevHeaderFilterChangeCheck = filterChangeCheck;\n\n\t\t\t\t\tself.changed = true;\n\t\t\t\t\tself.table.rowManager.filterRefresh();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\tcolumn.modules.filter = {\n\t\t\tsuccess: success,\n\t\t\tattrType: false,\n\t\t\ttagType: false,\n\t\t\temptyFunc: false\n\t\t};\n\n\t\tthis.generateHeaderFilterElement(column);\n\t};\n\n\tFilter.prototype.generateHeaderFilterElement = function (column, initialValue, reinitialize) {\n\t\tvar _this54 = this;\n\n\t\tvar self = this,\n\t\t    success = column.modules.filter.success,\n\t\t    field = column.getField(),\n\t\t    filterElement,\n\t\t    editor,\n\t\t    editorElement,\n\t\t    cellWrapper,\n\t\t    typingTimer,\n\t\t    searchTrigger,\n\t\t    params;\n\n\t\t//handle aborted edit\n\t\tfunction cancel() {}\n\n\t\tif (column.modules.filter.headerElement && column.modules.filter.headerElement.parentNode) {\n\t\t\tcolumn.contentElement.removeChild(column.modules.filter.headerElement.parentNode);\n\t\t}\n\n\t\tif (field) {\n\n\t\t\t//set empty value function\n\t\t\tcolumn.modules.filter.emptyFunc = column.definition.headerFilterEmptyCheck || function (value) {\n\t\t\t\treturn !value && value !== \"0\";\n\t\t\t};\n\n\t\t\tfilterElement = document.createElement(\"div\");\n\t\t\tfilterElement.classList.add(\"tabulator-header-filter\");\n\n\t\t\t//set column editor\n\t\t\tswitch (_typeof(column.definition.headerFilter)) {\n\t\t\t\tcase \"string\":\n\t\t\t\t\tif (self.table.modules.edit.editors[column.definition.headerFilter]) {\n\t\t\t\t\t\teditor = self.table.modules.edit.editors[column.definition.headerFilter];\n\n\t\t\t\t\t\tif ((column.definition.headerFilter === \"tick\" || column.definition.headerFilter === \"tickCross\") && !column.definition.headerFilterEmptyCheck) {\n\t\t\t\t\t\t\tcolumn.modules.filter.emptyFunc = function (value) {\n\t\t\t\t\t\t\t\treturn value !== true && value !== false;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn(\"Filter Error - Cannot build header filter, No such editor found: \", column.definition.editor);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\teditor = column.definition.headerFilter;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tif (column.modules.edit && column.modules.edit.editor) {\n\t\t\t\t\t\teditor = column.modules.edit.editor;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (column.definition.formatter && self.table.modules.edit.editors[column.definition.formatter]) {\n\t\t\t\t\t\t\teditor = self.table.modules.edit.editors[column.definition.formatter];\n\n\t\t\t\t\t\t\tif ((column.definition.formatter === \"tick\" || column.definition.formatter === \"tickCross\") && !column.definition.headerFilterEmptyCheck) {\n\t\t\t\t\t\t\t\tcolumn.modules.filter.emptyFunc = function (value) {\n\t\t\t\t\t\t\t\t\treturn value !== true && value !== false;\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\teditor = self.table.modules.edit.editors[\"input\"];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (editor) {\n\n\t\t\t\tcellWrapper = {\n\t\t\t\t\tgetValue: function getValue() {\n\t\t\t\t\t\treturn typeof initialValue !== \"undefined\" ? initialValue : \"\";\n\t\t\t\t\t},\n\t\t\t\t\tgetField: function getField() {\n\t\t\t\t\t\treturn column.definition.field;\n\t\t\t\t\t},\n\t\t\t\t\tgetElement: function getElement() {\n\t\t\t\t\t\treturn filterElement;\n\t\t\t\t\t},\n\t\t\t\t\tgetColumn: function getColumn() {\n\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t},\n\t\t\t\t\tgetRow: function getRow() {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tnormalizeHeight: function normalizeHeight() {}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tparams = column.definition.headerFilterParams || {};\n\n\t\t\t\tparams = typeof params === \"function\" ? params.call(self.table) : params;\n\n\t\t\t\teditorElement = editor.call(this.table.modules.edit, cellWrapper, function () {}, success, cancel, params);\n\n\t\t\t\tif (!editorElement) {\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor returned a value of false\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!(editorElement instanceof Node)) {\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor should return an instance of Node, the editor returned:\", editorElement);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//set Placeholder Text\n\t\t\t\tif (field) {\n\t\t\t\t\tself.table.modules.localize.bind(\"headerFilters|columns|\" + column.definition.field, function (value) {\n\t\t\t\t\t\teditorElement.setAttribute(\"placeholder\", typeof value !== \"undefined\" && value ? value : self.table.modules.localize.getText(\"headerFilters|default\"));\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tself.table.modules.localize.bind(\"headerFilters|default\", function (value) {\n\t\t\t\t\t\teditorElement.setAttribute(\"placeholder\", typeof self.column.definition.headerFilterPlaceholder !== \"undefined\" && self.column.definition.headerFilterPlaceholder ? self.column.definition.headerFilterPlaceholder : value);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t//focus on element on click\n\t\t\t\teditorElement.addEventListener(\"click\", function (e) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\teditorElement.focus();\n\t\t\t\t});\n\n\t\t\t\teditorElement.addEventListener(\"focus\", function (e) {\n\t\t\t\t\tvar left = _this54.table.columnManager.element.scrollLeft;\n\n\t\t\t\t\tif (left !== _this54.table.rowManager.element.scrollLeft) {\n\t\t\t\t\t\t_this54.table.rowManager.scrollHorizontal(left);\n\t\t\t\t\t\t_this54.table.columnManager.scrollHorizontal(left);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t//live update filters as user types\n\t\t\t\ttypingTimer = false;\n\n\t\t\t\tsearchTrigger = function searchTrigger(e) {\n\t\t\t\t\tif (typingTimer) {\n\t\t\t\t\t\tclearTimeout(typingTimer);\n\t\t\t\t\t}\n\n\t\t\t\t\ttypingTimer = setTimeout(function () {\n\t\t\t\t\t\tsuccess(editorElement.value);\n\t\t\t\t\t}, self.table.options.headerFilterLiveFilterDelay);\n\t\t\t\t};\n\n\t\t\t\tcolumn.modules.filter.headerElement = editorElement;\n\t\t\t\tcolumn.modules.filter.attrType = editorElement.hasAttribute(\"type\") ? editorElement.getAttribute(\"type\").toLowerCase() : \"\";\n\t\t\t\tcolumn.modules.filter.tagType = editorElement.tagName.toLowerCase();\n\n\t\t\t\tif (column.definition.headerFilterLiveFilter !== false) {\n\n\t\t\t\t\tif (!(column.definition.headerFilter === 'autocomplete' || column.definition.headerFilter === 'tickCross' || (column.definition.editor === 'autocomplete' || column.definition.editor === 'tickCross') && column.definition.headerFilter === true)) {\n\t\t\t\t\t\teditorElement.addEventListener(\"keyup\", searchTrigger);\n\t\t\t\t\t\teditorElement.addEventListener(\"search\", searchTrigger);\n\n\t\t\t\t\t\t//update number filtered columns on change\n\t\t\t\t\t\tif (column.modules.filter.attrType == \"number\") {\n\t\t\t\t\t\t\teditorElement.addEventListener(\"change\", function (e) {\n\t\t\t\t\t\t\t\tsuccess(editorElement.value);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//change text inputs to search inputs to allow for clearing of field\n\t\t\t\t\t\tif (column.modules.filter.attrType == \"text\" && this.table.browser !== \"ie\") {\n\t\t\t\t\t\t\teditorElement.setAttribute(\"type\", \"search\");\n\t\t\t\t\t\t\t// editorElement.off(\"change blur\"); //prevent blur from triggering filter and preventing selection click\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t//prevent input and select elements from propegating click to column sorters etc\n\t\t\t\t\tif (column.modules.filter.tagType == \"input\" || column.modules.filter.tagType == \"select\" || column.modules.filter.tagType == \"textarea\") {\n\t\t\t\t\t\teditorElement.addEventListener(\"mousedown\", function (e) {\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfilterElement.appendChild(editorElement);\n\n\t\t\t\tcolumn.contentElement.appendChild(filterElement);\n\n\t\t\t\tif (!reinitialize) {\n\t\t\t\t\tself.headerFilterColumns.push(column);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.warn(\"Filter Error - Cannot add header filter, column has no field set:\", column.definition.title);\n\t\t}\n\t};\n\n\t//hide all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\n\tFilter.prototype.hideHeaderFilterElements = function () {\n\t\tthis.headerFilterColumns.forEach(function (column) {\n\t\t\tif (column.modules.filter && column.modules.filter.headerElement) {\n\t\t\t\tcolumn.modules.filter.headerElement.style.display = 'none';\n\t\t\t}\n\t\t});\n\t};\n\n\t//show all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\n\tFilter.prototype.showHeaderFilterElements = function () {\n\t\tthis.headerFilterColumns.forEach(function (column) {\n\t\t\tif (column.modules.filter && column.modules.filter.headerElement) {\n\t\t\t\tcolumn.modules.filter.headerElement.style.display = '';\n\t\t\t}\n\t\t});\n\t};\n\n\t//programatically set focus of header filter\n\tFilter.prototype.setHeaderFilterFocus = function (column) {\n\t\tif (column.modules.filter && column.modules.filter.headerElement) {\n\t\t\tcolumn.modules.filter.headerElement.focus();\n\t\t} else {\n\t\t\tconsole.warn(\"Column Filter Focus Error - No header filter set on column:\", column.getField());\n\t\t}\n\t};\n\n\t//programmatically get value of header filter\n\tFilter.prototype.getHeaderFilterValue = function (column) {\n\t\tif (column.modules.filter && column.modules.filter.headerElement) {\n\t\t\treturn column.modules.filter.headerElement.value;\n\t\t} else {\n\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t}\n\t};\n\n\t//programatically set value of header filter\n\tFilter.prototype.setHeaderFilterValue = function (column, value) {\n\t\tif (column) {\n\t\t\tif (column.modules.filter && column.modules.filter.headerElement) {\n\t\t\t\tthis.generateHeaderFilterElement(column, value, true);\n\t\t\t\tcolumn.modules.filter.success(value);\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t\t}\n\t\t}\n\t};\n\n\tFilter.prototype.reloadHeaderFilter = function (column) {\n\t\tif (column) {\n\t\t\tif (column.modules.filter && column.modules.filter.headerElement) {\n\t\t\t\tthis.generateHeaderFilterElement(column, column.modules.filter.value, true);\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t\t}\n\t\t}\n\t};\n\n\t//check if the filters has changed since last use\n\tFilter.prototype.hasChanged = function () {\n\t\tvar changed = this.changed;\n\t\tthis.changed = false;\n\t\treturn changed;\n\t};\n\n\t//set standard filters\n\tFilter.prototype.setFilter = function (field, type, value, params) {\n\t\tvar self = this;\n\n\t\tself.filterList = [];\n\n\t\tif (!Array.isArray(field)) {\n\t\t\tfield = [{ field: field, type: type, value: value, params: params }];\n\t\t}\n\n\t\tself.addFilter(field);\n\t};\n\n\t//add filter to array\n\tFilter.prototype.addFilter = function (field, type, value, params) {\n\t\tvar self = this;\n\n\t\tif (!Array.isArray(field)) {\n\t\t\tfield = [{ field: field, type: type, value: value, params: params }];\n\t\t}\n\n\t\tfield.forEach(function (filter) {\n\n\t\t\tfilter = self.findFilter(filter);\n\n\t\t\tif (filter) {\n\t\t\t\tself.filterList.push(filter);\n\n\t\t\t\tself.changed = true;\n\t\t\t}\n\t\t});\n\n\t\tif (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.filter) {\n\t\t\tthis.table.modules.persistence.save(\"filter\");\n\t\t}\n\t};\n\n\tFilter.prototype.findFilter = function (filter) {\n\t\tvar self = this,\n\t\t    column;\n\n\t\tif (Array.isArray(filter)) {\n\t\t\treturn this.findSubFilters(filter);\n\t\t}\n\n\t\tvar filterFunc = false;\n\n\t\tif (typeof filter.field == \"function\") {\n\t\t\tfilterFunc = function filterFunc(data) {\n\t\t\t\treturn filter.field(data, filter.type || {}); // pass params to custom filter function\n\t\t\t};\n\t\t} else {\n\n\t\t\tif (self.filters[filter.type]) {\n\n\t\t\t\tcolumn = self.table.columnManager.getColumnByField(filter.field);\n\n\t\t\t\tif (column) {\n\t\t\t\t\tfilterFunc = function filterFunc(data) {\n\t\t\t\t\t\treturn self.filters[filter.type](filter.value, column.getFieldValue(data), data, filter.params || {});\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tfilterFunc = function filterFunc(data) {\n\t\t\t\t\t\treturn self.filters[filter.type](filter.value, data[filter.field], data, filter.params || {});\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Filter Error - No such filter type found, ignoring: \", filter.type);\n\t\t\t}\n\t\t}\n\n\t\tfilter.func = filterFunc;\n\n\t\treturn filter.func ? filter : false;\n\t};\n\n\tFilter.prototype.findSubFilters = function (filters) {\n\t\tvar self = this,\n\t\t    output = [];\n\n\t\tfilters.forEach(function (filter) {\n\t\t\tfilter = self.findFilter(filter);\n\n\t\t\tif (filter) {\n\t\t\t\toutput.push(filter);\n\t\t\t}\n\t\t});\n\n\t\treturn output.length ? output : false;\n\t};\n\n\t//get all filters\n\tFilter.prototype.getFilters = function (all, ajax) {\n\t\tvar output = [];\n\n\t\tif (all) {\n\t\t\toutput = this.getHeaderFilters();\n\t\t}\n\n\t\tif (ajax) {\n\t\t\toutput.forEach(function (item) {\n\t\t\t\tif (typeof item.type == \"function\") {\n\t\t\t\t\titem.type = \"function\";\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\toutput = output.concat(this.filtersToArray(this.filterList, ajax));\n\n\t\treturn output;\n\t};\n\n\t//filter to Object\n\tFilter.prototype.filtersToArray = function (filterList, ajax) {\n\t\tvar _this55 = this;\n\n\t\tvar output = [];\n\n\t\tfilterList.forEach(function (filter) {\n\t\t\tvar item;\n\n\t\t\tif (Array.isArray(filter)) {\n\t\t\t\toutput.push(_this55.filtersToArray(filter, ajax));\n\t\t\t} else {\n\t\t\t\titem = { field: filter.field, type: filter.type, value: filter.value };\n\n\t\t\t\tif (ajax) {\n\t\t\t\t\tif (typeof item.type == \"function\") {\n\t\t\t\t\t\titem.type = \"function\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\toutput.push(item);\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t};\n\n\t//get all filters\n\tFilter.prototype.getHeaderFilters = function () {\n\t\tvar self = this,\n\t\t    output = [];\n\n\t\tfor (var key in this.headerFilters) {\n\t\t\toutput.push({ field: key, type: this.headerFilters[key].type, value: this.headerFilters[key].value });\n\t\t}\n\n\t\treturn output;\n\t};\n\n\t//remove filter from array\n\tFilter.prototype.removeFilter = function (field, type, value) {\n\t\tvar self = this;\n\n\t\tif (!Array.isArray(field)) {\n\t\t\tfield = [{ field: field, type: type, value: value }];\n\t\t}\n\n\t\tfield.forEach(function (filter) {\n\t\t\tvar index = -1;\n\n\t\t\tif (_typeof(filter.field) == \"object\") {\n\t\t\t\tindex = self.filterList.findIndex(function (element) {\n\t\t\t\t\treturn filter === element;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tindex = self.filterList.findIndex(function (element) {\n\t\t\t\t\treturn filter.field === element.field && filter.type === element.type && filter.value === element.value;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (index > -1) {\n\t\t\t\tself.filterList.splice(index, 1);\n\t\t\t\tself.changed = true;\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Filter Error - No matching filter type found, ignoring: \", filter.type);\n\t\t\t}\n\t\t});\n\n\t\tif (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.filter) {\n\t\t\tthis.table.modules.persistence.save(\"filter\");\n\t\t}\n\t};\n\n\t//clear filters\n\tFilter.prototype.clearFilter = function (all) {\n\t\tthis.filterList = [];\n\n\t\tif (all) {\n\t\t\tthis.clearHeaderFilter();\n\t\t}\n\n\t\tthis.changed = true;\n\n\t\tif (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.filter) {\n\t\t\tthis.table.modules.persistence.save(\"filter\");\n\t\t}\n\t};\n\n\t//clear header filters\n\tFilter.prototype.clearHeaderFilter = function () {\n\t\tvar self = this;\n\n\t\tthis.headerFilters = {};\n\t\tself.prevHeaderFilterChangeCheck = \"{}\";\n\n\t\tthis.headerFilterColumns.forEach(function (column) {\n\t\t\tcolumn.modules.filter.value = null;\n\t\t\tcolumn.modules.filter.prevSuccess = undefined;\n\t\t\tself.reloadHeaderFilter(column);\n\t\t});\n\n\t\tthis.changed = true;\n\t};\n\n\t//search data and return matching rows\n\tFilter.prototype.search = function (searchType, field, type, value) {\n\t\tvar self = this,\n\t\t    activeRows = [],\n\t\t    filterList = [];\n\n\t\tif (!Array.isArray(field)) {\n\t\t\tfield = [{ field: field, type: type, value: value }];\n\t\t}\n\n\t\tfield.forEach(function (filter) {\n\t\t\tfilter = self.findFilter(filter);\n\n\t\t\tif (filter) {\n\t\t\t\tfilterList.push(filter);\n\t\t\t}\n\t\t});\n\n\t\tthis.table.rowManager.rows.forEach(function (row) {\n\t\t\tvar match = true;\n\n\t\t\tfilterList.forEach(function (filter) {\n\t\t\t\tif (!self.filterRecurse(filter, row.getData())) {\n\t\t\t\t\tmatch = false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (match) {\n\t\t\t\tactiveRows.push(searchType === \"data\" ? row.getData(\"data\") : row.getComponent());\n\t\t\t}\n\t\t});\n\n\t\treturn activeRows;\n\t};\n\n\t//filter row array\n\tFilter.prototype.filter = function (rowList, filters) {\n\t\tvar self = this,\n\t\t    activeRows = [],\n\t\t    activeRowComponents = [];\n\n\t\tif (self.table.options.dataFiltering) {\n\t\t\tself.table.options.dataFiltering.call(self.table, self.getFilters());\n\t\t}\n\n\t\tif (!self.table.options.ajaxFiltering && (self.filterList.length || Object.keys(self.headerFilters).length)) {\n\n\t\t\trowList.forEach(function (row) {\n\t\t\t\tif (self.filterRow(row)) {\n\t\t\t\t\tactiveRows.push(row);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tactiveRows = rowList.slice(0);\n\t\t}\n\n\t\tif (self.table.options.dataFiltered) {\n\n\t\t\tactiveRows.forEach(function (row) {\n\t\t\t\tactiveRowComponents.push(row.getComponent());\n\t\t\t});\n\n\t\t\tself.table.options.dataFiltered.call(self.table, self.getFilters(), activeRowComponents);\n\t\t}\n\n\t\treturn activeRows;\n\t};\n\n\t//filter individual row\n\tFilter.prototype.filterRow = function (row, filters) {\n\t\tvar self = this,\n\t\t    match = true,\n\t\t    data = row.getData();\n\n\t\tself.filterList.forEach(function (filter) {\n\t\t\tif (!self.filterRecurse(filter, data)) {\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t});\n\n\t\tfor (var field in self.headerFilters) {\n\t\t\tif (!self.headerFilters[field].func(data)) {\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t}\n\n\t\treturn match;\n\t};\n\n\tFilter.prototype.filterRecurse = function (filter, data) {\n\t\tvar self = this,\n\t\t    match = false;\n\n\t\tif (Array.isArray(filter)) {\n\t\t\tfilter.forEach(function (subFilter) {\n\t\t\t\tif (self.filterRecurse(subFilter, data)) {\n\t\t\t\t\tmatch = true;\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tmatch = filter.func(data);\n\t\t}\n\n\t\treturn match;\n\t};\n\n\t//list of available filters\n\tFilter.prototype.filters = {\n\n\t\t//equal to\n\t\t\"=\": function _(filterVal, rowVal, rowData, filterParams) {\n\t\t\treturn rowVal == filterVal ? true : false;\n\t\t},\n\n\t\t//less than\n\t\t\"<\": function _(filterVal, rowVal, rowData, filterParams) {\n\t\t\treturn rowVal < filterVal ? true : false;\n\t\t},\n\n\t\t//less than or equal to\n\t\t\"<=\": function _(filterVal, rowVal, rowData, filterParams) {\n\t\t\treturn rowVal <= filterVal ? true : false;\n\t\t},\n\n\t\t//greater than\n\t\t\">\": function _(filterVal, rowVal, rowData, filterParams) {\n\t\t\treturn rowVal > filterVal ? true : false;\n\t\t},\n\n\t\t//greater than or equal to\n\t\t\">=\": function _(filterVal, rowVal, rowData, filterParams) {\n\t\t\treturn rowVal >= filterVal ? true : false;\n\t\t},\n\n\t\t//not equal to\n\t\t\"!=\": function _(filterVal, rowVal, rowData, filterParams) {\n\t\t\treturn rowVal != filterVal ? true : false;\n\t\t},\n\n\t\t\"regex\": function regex(filterVal, rowVal, rowData, filterParams) {\n\n\t\t\tif (typeof filterVal == \"string\") {\n\t\t\t\tfilterVal = new RegExp(filterVal);\n\t\t\t}\n\n\t\t\treturn filterVal.test(rowVal);\n\t\t},\n\n\t\t//contains the string\n\t\t\"like\": function like(filterVal, rowVal, rowData, filterParams) {\n\t\t\tif (filterVal === null || typeof filterVal === \"undefined\") {\n\t\t\t\treturn rowVal === filterVal ? true : false;\n\t\t\t} else {\n\t\t\t\tif (typeof rowVal !== 'undefined' && rowVal !== null) {\n\t\t\t\t\treturn String(rowVal).toLowerCase().indexOf(filterVal.toLowerCase()) > -1;\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//contains the keywords\n\t\t\"keywords\": function keywords(filterVal, rowVal, rowData, filterParams) {\n\t\t\tvar keywords = filterVal.toLowerCase().split(typeof filterParams.separator === \"undefined\" ? \" \" : filterParams.separator),\n\t\t\t    value = String(rowVal === null || typeof rowVal === \"undefined\" ? \"\" : rowVal).toLowerCase(),\n\t\t\t    matches = [];\n\n\t\t\tkeywords.forEach(function (keyword) {\n\t\t\t\tif (value.includes(keyword)) {\n\t\t\t\t\tmatches.push(true);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn filterParams.matchAll ? matches.length === keywords.length : !!matches.length;\n\t\t},\n\n\t\t//starts with the string\n\t\t\"starts\": function starts(filterVal, rowVal, rowData, filterParams) {\n\t\t\tif (filterVal === null || typeof filterVal === \"undefined\") {\n\t\t\t\treturn rowVal === filterVal ? true : false;\n\t\t\t} else {\n\t\t\t\tif (typeof rowVal !== 'undefined' && rowVal !== null) {\n\t\t\t\t\treturn String(rowVal).toLowerCase().startsWith(filterVal.toLowerCase());\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//ends with the string\n\t\t\"ends\": function ends(filterVal, rowVal, rowData, filterParams) {\n\t\t\tif (filterVal === null || typeof filterVal === \"undefined\") {\n\t\t\t\treturn rowVal === filterVal ? true : false;\n\t\t\t} else {\n\t\t\t\tif (typeof rowVal !== 'undefined' && rowVal !== null) {\n\t\t\t\t\treturn String(rowVal).toLowerCase().endsWith(filterVal.toLowerCase());\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//in array\n\t\t\"in\": function _in(filterVal, rowVal, rowData, filterParams) {\n\t\t\tif (Array.isArray(filterVal)) {\n\t\t\t\treturn filterVal.length ? filterVal.indexOf(rowVal) > -1 : true;\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Filter Error - filter value is not an array:\", filterVal);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"filter\", Filter);\n\n\tvar Format = function Format(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t};\n\n\t//initialize column formatter\n\tFormat.prototype.initializeColumn = function (column) {\n\t\tcolumn.modules.format = this.lookupFormatter(column, \"\");\n\n\t\tif (typeof column.definition.formatterPrint !== \"undefined\") {\n\t\t\tcolumn.modules.format.print = this.lookupFormatter(column, \"Print\");\n\t\t}\n\n\t\tif (typeof column.definition.formatterClipboard !== \"undefined\") {\n\t\t\tcolumn.modules.format.clipboard = this.lookupFormatter(column, \"Clipboard\");\n\t\t}\n\n\t\tif (typeof column.definition.formatterHtmlOutput !== \"undefined\") {\n\t\t\tcolumn.modules.format.htmlOutput = this.lookupFormatter(column, \"HtmlOutput\");\n\t\t}\n\t};\n\n\tFormat.prototype.lookupFormatter = function (column, type) {\n\t\tvar config = { params: column.definition[\"formatter\" + type + \"Params\"] || {} },\n\t\t    formatter = column.definition[\"formatter\" + type];\n\n\t\t//set column formatter\n\t\tswitch (typeof formatter === 'undefined' ? 'undefined' : _typeof(formatter)) {\n\t\t\tcase \"string\":\n\n\t\t\t\tif (formatter === \"tick\") {\n\t\t\t\t\tformatter = \"tickCross\";\n\n\t\t\t\t\tif (typeof config.params.crossElement == \"undefined\") {\n\t\t\t\t\t\tconfig.params.crossElement = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tconsole.warn(\"DEPRECATION WARNING - the tick formatter has been deprecated, please use the tickCross formatter with the crossElement param set to false\");\n\t\t\t\t}\n\n\t\t\t\tif (this.formatters[formatter]) {\n\t\t\t\t\tconfig.formatter = this.formatters[formatter];\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"Formatter Error - No such formatter found: \", formatter);\n\t\t\t\t\tconfig.formatter = this.formatters.plaintext;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tconfig.formatter = formatter;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconfig.formatter = this.formatters.plaintext;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn config;\n\t};\n\n\tFormat.prototype.cellRendered = function (cell) {\n\t\tif (cell.modules.format && cell.modules.format.renderedCallback) {\n\t\t\tcell.modules.format.renderedCallback();\n\t\t}\n\t};\n\n\t//return a formatted value for a cell\n\tFormat.prototype.formatValue = function (cell) {\n\t\tvar component = cell.getComponent(),\n\t\t    params = typeof cell.column.modules.format.params === \"function\" ? cell.column.modules.format.params(component) : cell.column.modules.format.params;\n\n\t\tfunction onRendered(callback) {\n\t\t\tif (!cell.modules.format) {\n\t\t\t\tcell.modules.format = {};\n\t\t\t}\n\n\t\t\tcell.modules.format.renderedCallback = callback;\n\t\t}\n\n\t\treturn cell.column.modules.format.formatter.call(this, component, params, onRendered);\n\t};\n\n\tFormat.prototype.formatExportValue = function (cell, type) {\n\t\tvar formatter = cell.column.modules.format[type],\n\t\t    params;\n\n\t\tif (formatter) {\n\t\t\tvar onRendered = function onRendered(callback) {\n\t\t\t\tif (!cell.modules.format) {\n\t\t\t\t\tcell.modules.format = {};\n\t\t\t\t}\n\n\t\t\t\tcell.modules.format.renderedCallback = callback;\n\t\t\t};\n\n\t\t\tparams = typeof formatter.params === \"function\" ? formatter.params(component) : formatter.params;\n\n\t\t\treturn formatter.formatter.call(this, cell.getComponent(), params, onRendered);\n\t\t} else {\n\t\t\treturn this.formatValue(cell);\n\t\t}\n\t};\n\n\tFormat.prototype.sanitizeHTML = function (value) {\n\t\tif (value) {\n\t\t\tvar entityMap = {\n\t\t\t\t'&': '&amp;',\n\t\t\t\t'<': '&lt;',\n\t\t\t\t'>': '&gt;',\n\t\t\t\t'\"': '&quot;',\n\t\t\t\t\"'\": '&#39;',\n\t\t\t\t'/': '&#x2F;',\n\t\t\t\t'`': '&#x60;',\n\t\t\t\t'=': '&#x3D;'\n\t\t\t};\n\n\t\t\treturn String(value).replace(/[&<>\"'`=\\/]/g, function (s) {\n\t\t\t\treturn entityMap[s];\n\t\t\t});\n\t\t} else {\n\t\t\treturn value;\n\t\t}\n\t};\n\n\tFormat.prototype.emptyToSpace = function (value) {\n\t\treturn value === null || typeof value === \"undefined\" || value === \"\" ? \"&nbsp;\" : value;\n\t};\n\n\t//get formatter for cell\n\tFormat.prototype.getFormatter = function (formatter) {\n\t\tvar formatter;\n\n\t\tswitch (typeof formatter === 'undefined' ? 'undefined' : _typeof(formatter)) {\n\t\t\tcase \"string\":\n\t\t\t\tif (this.formatters[formatter]) {\n\t\t\t\t\tformatter = this.formatters[formatter];\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"Formatter Error - No such formatter found: \", formatter);\n\t\t\t\t\tformatter = this.formatters.plaintext;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tformatter = formatter;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tformatter = this.formatters.plaintext;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn formatter;\n\t};\n\n\t//default data formatters\n\tFormat.prototype.formatters = {\n\t\t//plain text value\n\t\tplaintext: function plaintext(cell, formatterParams, onRendered) {\n\t\t\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n\t\t},\n\n\t\t//html text value\n\t\thtml: function html(cell, formatterParams, onRendered) {\n\t\t\treturn cell.getValue();\n\t\t},\n\n\t\t//multiline text area\n\t\ttextarea: function textarea(cell, formatterParams, onRendered) {\n\t\t\tcell.getElement().style.whiteSpace = \"pre-wrap\";\n\t\t\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n\t\t},\n\n\t\t//currency formatting\n\t\tmoney: function money(cell, formatterParams, onRendered) {\n\t\t\tvar floatVal = parseFloat(cell.getValue()),\n\t\t\t    number,\n\t\t\t    integer,\n\t\t\t    decimal,\n\t\t\t    rgx;\n\n\t\t\tvar decimalSym = formatterParams.decimal || \".\";\n\t\t\tvar thousandSym = formatterParams.thousand || \",\";\n\t\t\tvar symbol = formatterParams.symbol || \"\";\n\t\t\tvar after = !!formatterParams.symbolAfter;\n\t\t\tvar precision = typeof formatterParams.precision !== \"undefined\" ? formatterParams.precision : 2;\n\n\t\t\tif (isNaN(floatVal)) {\n\t\t\t\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n\t\t\t}\n\n\t\t\tnumber = precision !== false ? floatVal.toFixed(precision) : floatVal;\n\t\t\tnumber = String(number).split(\".\");\n\n\t\t\tinteger = number[0];\n\t\t\tdecimal = number.length > 1 ? decimalSym + number[1] : \"\";\n\n\t\t\trgx = /(\\d+)(\\d{3})/;\n\n\t\t\twhile (rgx.test(integer)) {\n\t\t\t\tinteger = integer.replace(rgx, \"$1\" + thousandSym + \"$2\");\n\t\t\t}\n\n\t\t\treturn after ? integer + decimal + symbol : symbol + integer + decimal;\n\t\t},\n\n\t\t//clickable anchor tag\n\t\tlink: function link(cell, formatterParams, onRendered) {\n\t\t\tvar value = cell.getValue(),\n\t\t\t    urlPrefix = formatterParams.urlPrefix || \"\",\n\t\t\t    download = formatterParams.download,\n\t\t\t    label = value,\n\t\t\t    el = document.createElement(\"a\"),\n\t\t\t    data;\n\n\t\t\tif (formatterParams.labelField) {\n\t\t\t\tdata = cell.getData();\n\t\t\t\tlabel = data[formatterParams.labelField];\n\t\t\t}\n\n\t\t\tif (formatterParams.label) {\n\t\t\t\tswitch (_typeof(formatterParams.label)) {\n\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\tlabel = formatterParams.label;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"function\":\n\t\t\t\t\t\tlabel = formatterParams.label(cell);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (label) {\n\t\t\t\tif (formatterParams.urlField) {\n\t\t\t\t\tdata = cell.getData();\n\t\t\t\t\tvalue = data[formatterParams.urlField];\n\t\t\t\t}\n\n\t\t\t\tif (formatterParams.url) {\n\t\t\t\t\tswitch (_typeof(formatterParams.url)) {\n\t\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\t\tvalue = formatterParams.url;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"function\":\n\t\t\t\t\t\t\tvalue = formatterParams.url(cell);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tel.setAttribute(\"href\", urlPrefix + value);\n\n\t\t\t\tif (formatterParams.target) {\n\t\t\t\t\tel.setAttribute(\"target\", formatterParams.target);\n\t\t\t\t}\n\n\t\t\t\tif (formatterParams.download) {\n\n\t\t\t\t\tif (typeof download == \"function\") {\n\t\t\t\t\t\tdownload = download(cell);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdownload = download === true ? \"\" : download;\n\t\t\t\t\t}\n\n\t\t\t\t\tel.setAttribute(\"download\", download);\n\t\t\t\t}\n\n\t\t\t\tel.innerHTML = this.emptyToSpace(this.sanitizeHTML(label));\n\n\t\t\t\treturn el;\n\t\t\t} else {\n\t\t\t\treturn \"&nbsp;\";\n\t\t\t}\n\t\t},\n\n\t\t//image element\n\t\timage: function image(cell, formatterParams, onRendered) {\n\t\t\tvar el = document.createElement(\"img\");\n\t\t\tel.setAttribute(\"src\", cell.getValue());\n\n\t\t\tswitch (_typeof(formatterParams.height)) {\n\t\t\t\tcase \"number\":\n\t\t\t\t\tel.style.height = formatterParams.height + \"px\";\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"string\":\n\t\t\t\t\tel.style.height = formatterParams.height;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tswitch (_typeof(formatterParams.width)) {\n\t\t\t\tcase \"number\":\n\t\t\t\t\tel.style.width = formatterParams.width + \"px\";\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"string\":\n\t\t\t\t\tel.style.width = formatterParams.width;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tel.addEventListener(\"load\", function () {\n\t\t\t\tcell.getRow().normalizeHeight();\n\t\t\t});\n\n\t\t\treturn el;\n\t\t},\n\n\t\t//tick or cross\n\t\ttickCross: function tickCross(cell, formatterParams, onRendered) {\n\t\t\tvar value = cell.getValue(),\n\t\t\t    element = cell.getElement(),\n\t\t\t    empty = formatterParams.allowEmpty,\n\t\t\t    truthy = formatterParams.allowTruthy,\n\t\t\t    tick = typeof formatterParams.tickElement !== \"undefined\" ? formatterParams.tickElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>',\n\t\t\t    cross = typeof formatterParams.crossElement !== \"undefined\" ? formatterParams.crossElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\"  viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n\n\t\t\tif (truthy && value || value === true || value === \"true\" || value === \"True\" || value === 1 || value === \"1\") {\n\t\t\t\telement.setAttribute(\"aria-checked\", true);\n\t\t\t\treturn tick || \"\";\n\t\t\t} else {\n\t\t\t\tif (empty && (value === \"null\" || value === \"\" || value === null || typeof value === \"undefined\")) {\n\t\t\t\t\telement.setAttribute(\"aria-checked\", \"mixed\");\n\t\t\t\t\treturn \"\";\n\t\t\t\t} else {\n\t\t\t\t\telement.setAttribute(\"aria-checked\", false);\n\t\t\t\t\treturn cross || \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tdatetime: function datetime(cell, formatterParams, onRendered) {\n\t\t\tvar inputFormat = formatterParams.inputFormat || \"YYYY-MM-DD hh:mm:ss\";\n\t\t\tvar outputFormat = formatterParams.outputFormat || \"DD/MM/YYYY hh:mm:ss\";\n\t\t\tvar invalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n\t\t\tvar value = cell.getValue();\n\n\t\t\tvar newDatetime = moment(value, inputFormat);\n\n\t\t\tif (newDatetime.isValid()) {\n\t\t\t\treturn formatterParams.timezone ? newDatetime.tz(formatterParams.timezone).format(outputFormat) : newDatetime.format(outputFormat);\n\t\t\t} else {\n\n\t\t\t\tif (invalid === true) {\n\t\t\t\t\treturn value;\n\t\t\t\t} else if (typeof invalid === \"function\") {\n\t\t\t\t\treturn invalid(value);\n\t\t\t\t} else {\n\t\t\t\t\treturn invalid;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tdatetimediff: function datetime(cell, formatterParams, onRendered) {\n\t\t\tvar inputFormat = formatterParams.inputFormat || \"YYYY-MM-DD hh:mm:ss\";\n\t\t\tvar invalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n\t\t\tvar suffix = typeof formatterParams.suffix !== \"undefined\" ? formatterParams.suffix : false;\n\t\t\tvar unit = typeof formatterParams.unit !== \"undefined\" ? formatterParams.unit : undefined;\n\t\t\tvar humanize = typeof formatterParams.humanize !== \"undefined\" ? formatterParams.humanize : false;\n\t\t\tvar date = typeof formatterParams.date !== \"undefined\" ? formatterParams.date : moment();\n\t\t\tvar value = cell.getValue();\n\n\t\t\tvar newDatetime = moment(value, inputFormat);\n\n\t\t\tif (newDatetime.isValid()) {\n\t\t\t\tif (humanize) {\n\t\t\t\t\treturn moment.duration(newDatetime.diff(date)).humanize(suffix);\n\t\t\t\t} else {\n\t\t\t\t\treturn newDatetime.diff(date, unit) + (suffix ? \" \" + suffix : \"\");\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tif (invalid === true) {\n\t\t\t\t\treturn value;\n\t\t\t\t} else if (typeof invalid === \"function\") {\n\t\t\t\t\treturn invalid(value);\n\t\t\t\t} else {\n\t\t\t\t\treturn invalid;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//select\n\t\tlookup: function lookup(cell, formatterParams, onRendered) {\n\t\t\tvar value = cell.getValue();\n\n\t\t\tif (typeof formatterParams[value] === \"undefined\") {\n\t\t\t\tconsole.warn('Missing display value for ' + value);\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\treturn formatterParams[value];\n\t\t},\n\n\t\t//star rating\n\t\tstar: function star(cell, formatterParams, onRendered) {\n\t\t\tvar value = cell.getValue(),\n\t\t\t    element = cell.getElement(),\n\t\t\t    maxStars = formatterParams && formatterParams.stars ? formatterParams.stars : 5,\n\t\t\t    stars = document.createElement(\"span\"),\n\t\t\t    star = document.createElementNS('http://www.w3.org/2000/svg', \"svg\"),\n\t\t\t    starActive = '<polygon fill=\"#FFEA00\" stroke=\"#C1AB60\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>',\n\t\t\t    starInactive = '<polygon fill=\"#D2D2D2\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\n\t\t\t//style stars holder\n\t\t\tstars.style.verticalAlign = \"middle\";\n\n\t\t\t//style star\n\t\t\tstar.setAttribute(\"width\", \"14\");\n\t\t\tstar.setAttribute(\"height\", \"14\");\n\t\t\tstar.setAttribute(\"viewBox\", \"0 0 512 512\");\n\t\t\tstar.setAttribute(\"xml:space\", \"preserve\");\n\t\t\tstar.style.padding = \"0 1px\";\n\n\t\t\tvalue = value && !isNaN(value) ? parseInt(value) : 0;\n\n\t\t\tvalue = Math.max(0, Math.min(value, maxStars));\n\n\t\t\tfor (var i = 1; i <= maxStars; i++) {\n\t\t\t\tvar nextStar = star.cloneNode(true);\n\t\t\t\tnextStar.innerHTML = i <= value ? starActive : starInactive;\n\n\t\t\t\tstars.appendChild(nextStar);\n\t\t\t}\n\n\t\t\telement.style.whiteSpace = \"nowrap\";\n\t\t\telement.style.overflow = \"hidden\";\n\t\t\telement.style.textOverflow = \"ellipsis\";\n\n\t\t\telement.setAttribute(\"aria-label\", value);\n\n\t\t\treturn stars;\n\t\t},\n\n\t\ttraffic: function traffic(cell, formatterParams, onRendered) {\n\t\t\tvar value = this.sanitizeHTML(cell.getValue()) || 0,\n\t\t\t    el = document.createElement(\"span\"),\n\t\t\t    max = formatterParams && formatterParams.max ? formatterParams.max : 100,\n\t\t\t    min = formatterParams && formatterParams.min ? formatterParams.min : 0,\n\t\t\t    colors = formatterParams && typeof formatterParams.color !== \"undefined\" ? formatterParams.color : [\"red\", \"orange\", \"green\"],\n\t\t\t    color = \"#666666\",\n\t\t\t    percent,\n\t\t\t    percentValue;\n\n\t\t\tif (isNaN(value) || typeof cell.getValue() === \"undefined\") {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tel.classList.add(\"tabulator-traffic-light\");\n\n\t\t\t//make sure value is in range\n\t\t\tpercentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n\t\t\tpercentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\n\n\t\t\t//workout percentage\n\t\t\tpercent = (max - min) / 100;\n\t\t\tpercentValue = Math.round((percentValue - min) / percent);\n\n\t\t\t//set color\n\t\t\tswitch (typeof colors === 'undefined' ? 'undefined' : _typeof(colors)) {\n\t\t\t\tcase \"string\":\n\t\t\t\t\tcolor = colors;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"function\":\n\t\t\t\t\tcolor = colors(value);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"object\":\n\t\t\t\t\tif (Array.isArray(colors)) {\n\t\t\t\t\t\tvar unit = 100 / colors.length;\n\t\t\t\t\t\tvar index = Math.floor(percentValue / unit);\n\n\t\t\t\t\t\tindex = Math.min(index, colors.length - 1);\n\t\t\t\t\t\tindex = Math.max(index, 0);\n\t\t\t\t\t\tcolor = colors[index];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\tel.style.backgroundColor = color;\n\n\t\t\treturn el;\n\t\t},\n\n\t\t//progress bar\n\t\tprogress: function progress(cell, formatterParams, onRendered) {\n\t\t\t//progress bar\n\t\t\tvar value = this.sanitizeHTML(cell.getValue()) || 0,\n\t\t\t    element = cell.getElement(),\n\t\t\t    max = formatterParams && formatterParams.max ? formatterParams.max : 100,\n\t\t\t    min = formatterParams && formatterParams.min ? formatterParams.min : 0,\n\t\t\t    legendAlign = formatterParams && formatterParams.legendAlign ? formatterParams.legendAlign : \"center\",\n\t\t\t    percent,\n\t\t\t    percentValue,\n\t\t\t    color,\n\t\t\t    legend,\n\t\t\t    legendColor,\n\t\t\t    top,\n\t\t\t    left,\n\t\t\t    right,\n\t\t\t    bottom;\n\n\t\t\t//make sure value is in range\n\t\t\tpercentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n\t\t\tpercentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\n\n\t\t\t//workout percentage\n\t\t\tpercent = (max - min) / 100;\n\t\t\tpercentValue = Math.round((percentValue - min) / percent);\n\n\t\t\t//set bar color\n\t\t\tswitch (_typeof(formatterParams.color)) {\n\t\t\t\tcase \"string\":\n\t\t\t\t\tcolor = formatterParams.color;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"function\":\n\t\t\t\t\tcolor = formatterParams.color(value);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"object\":\n\t\t\t\t\tif (Array.isArray(formatterParams.color)) {\n\t\t\t\t\t\tvar unit = 100 / formatterParams.color.length;\n\t\t\t\t\t\tvar index = Math.floor(percentValue / unit);\n\n\t\t\t\t\t\tindex = Math.min(index, formatterParams.color.length - 1);\n\t\t\t\t\t\tindex = Math.max(index, 0);\n\t\t\t\t\t\tcolor = formatterParams.color[index];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\tcolor = \"#2DC214\";\n\t\t\t}\n\n\t\t\t//generate legend\n\t\t\tswitch (_typeof(formatterParams.legend)) {\n\t\t\t\tcase \"string\":\n\t\t\t\t\tlegend = formatterParams.legend;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"function\":\n\t\t\t\t\tlegend = formatterParams.legend(value);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\tlegend = value;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tlegend = false;\n\t\t\t}\n\n\t\t\t//set legend color\n\t\t\tswitch (_typeof(formatterParams.legendColor)) {\n\t\t\t\tcase \"string\":\n\t\t\t\t\tlegendColor = formatterParams.legendColor;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"function\":\n\t\t\t\t\tlegendColor = formatterParams.legendColor(value);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"object\":\n\t\t\t\t\tif (Array.isArray(formatterParams.legendColor)) {\n\t\t\t\t\t\tvar unit = 100 / formatterParams.legendColor.length;\n\t\t\t\t\t\tvar index = Math.floor(percentValue / unit);\n\n\t\t\t\t\t\tindex = Math.min(index, formatterParams.legendColor.length - 1);\n\t\t\t\t\t\tindex = Math.max(index, 0);\n\t\t\t\t\t\tlegendColor = formatterParams.legendColor[index];\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tlegendColor = \"#000\";\n\t\t\t}\n\n\t\t\telement.style.minWidth = \"30px\";\n\t\t\telement.style.position = \"relative\";\n\n\t\t\telement.setAttribute(\"aria-label\", percentValue);\n\n\t\t\tvar barEl = document.createElement(\"div\");\n\t\t\tbarEl.style.display = \"inline-block\";\n\t\t\tbarEl.style.position = \"relative\";\n\t\t\tbarEl.style.width = percentValue + \"%\";\n\t\t\tbarEl.style.backgroundColor = color;\n\t\t\tbarEl.style.height = \"100%\";\n\n\t\t\tbarEl.setAttribute('data-max', max);\n\t\t\tbarEl.setAttribute('data-min', min);\n\n\t\t\tif (legend) {\n\t\t\t\tvar legendEl = document.createElement(\"div\");\n\t\t\t\tlegendEl.style.position = \"absolute\";\n\t\t\t\tlegendEl.style.top = \"4px\";\n\t\t\t\tlegendEl.style.left = 0;\n\t\t\t\tlegendEl.style.textAlign = legendAlign;\n\t\t\t\tlegendEl.style.width = \"100%\";\n\t\t\t\tlegendEl.style.color = legendColor;\n\t\t\t\tlegendEl.innerHTML = legend;\n\t\t\t}\n\n\t\t\tonRendered(function () {\n\n\t\t\t\t//handle custom element needed if formatter is to be included in printed/downloaded output\n\t\t\t\tif (!(cell instanceof CellComponent)) {\n\t\t\t\t\tvar holderEl = document.createElement(\"div\");\n\t\t\t\t\tholderEl.style.position = \"absolute\";\n\t\t\t\t\tholderEl.style.top = \"4px\";\n\t\t\t\t\tholderEl.style.bottom = \"4px\";\n\t\t\t\t\tholderEl.style.left = \"4px\";\n\t\t\t\t\tholderEl.style.right = \"4px\";\n\n\t\t\t\t\telement.appendChild(holderEl);\n\n\t\t\t\t\telement = holderEl;\n\t\t\t\t}\n\n\t\t\t\telement.appendChild(barEl);\n\n\t\t\t\tif (legend) {\n\t\t\t\t\telement.appendChild(legendEl);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn \"\";\n\t\t},\n\n\t\t//background color\n\t\tcolor: function color(cell, formatterParams, onRendered) {\n\t\t\tcell.getElement().style.backgroundColor = this.sanitizeHTML(cell.getValue());\n\t\t\treturn \"\";\n\t\t},\n\n\t\t//tick icon\n\t\tbuttonTick: function buttonTick(cell, formatterParams, onRendered) {\n\t\t\treturn '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>';\n\t\t},\n\n\t\t//cross icon\n\t\tbuttonCross: function buttonCross(cell, formatterParams, onRendered) {\n\t\t\treturn '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n\t\t},\n\n\t\t//current row number\n\t\trownum: function rownum(cell, formatterParams, onRendered) {\n\t\t\treturn this.table.rowManager.activeRows.indexOf(cell.getRow()._getSelf()) + 1;\n\t\t},\n\n\t\t//row handle\n\t\thandle: function handle(cell, formatterParams, onRendered) {\n\t\t\tcell.getElement().classList.add(\"tabulator-row-handle\");\n\t\t\treturn \"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>\";\n\t\t},\n\n\t\tresponsiveCollapse: function responsiveCollapse(cell, formatterParams, onRendered) {\n\t\t\tvar self = this,\n\t\t\t    open = false,\n\t\t\t    el = document.createElement(\"div\"),\n\t\t\t    config = cell.getRow()._row.modules.responsiveLayout;\n\n\t\t\tel.classList.add(\"tabulator-responsive-collapse-toggle\");\n\t\t\tel.innerHTML = \"<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>\";\n\n\t\t\tcell.getElement().classList.add(\"tabulator-row-handle\");\n\n\t\t\tfunction toggleList(isOpen) {\n\t\t\t\tvar collapseEl = config.element;\n\n\t\t\t\tconfig.open = isOpen;\n\n\t\t\t\tif (collapseEl) {\n\n\t\t\t\t\tif (config.open) {\n\t\t\t\t\t\tel.classList.add(\"open\");\n\t\t\t\t\t\tcollapseEl.style.display = '';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tel.classList.remove(\"open\");\n\t\t\t\t\t\tcollapseEl.style.display = 'none';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tel.addEventListener(\"click\", function (e) {\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\ttoggleList(!config.open);\n\t\t\t});\n\n\t\t\ttoggleList(config.open);\n\n\t\t\treturn el;\n\t\t},\n\n\t\trowSelection: function rowSelection(cell) {\n\t\t\tvar _this56 = this;\n\n\t\t\tvar checkbox = document.createElement(\"input\");\n\n\t\t\tcheckbox.type = 'checkbox';\n\n\t\t\tif (this.table.modExists(\"selectRow\", true)) {\n\n\t\t\t\tcheckbox.addEventListener(\"click\", function (e) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t});\n\n\t\t\t\tif (typeof cell.getRow == 'function') {\n\t\t\t\t\tvar row = cell.getRow();\n\n\t\t\t\t\tcheckbox.addEventListener(\"change\", function (e) {\n\t\t\t\t\t\trow.toggleSelect();\n\t\t\t\t\t});\n\n\t\t\t\t\tcheckbox.checked = row.isSelected();\n\t\t\t\t\tthis.table.modules.selectRow.registerRowSelectCheckbox(row, checkbox);\n\t\t\t\t} else {\n\t\t\t\t\tcheckbox.addEventListener(\"change\", function (e) {\n\t\t\t\t\t\tif (_this56.table.modules.selectRow.selectedRows.length) {\n\t\t\t\t\t\t\t_this56.table.deselectRow();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_this56.table.selectRow();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.table.modules.selectRow.registerHeaderSelectCheckbox(checkbox);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn checkbox;\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"format\", Format);\n\n\tvar FrozenColumns = function FrozenColumns(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.leftColumns = [];\n\t\tthis.rightColumns = [];\n\t\tthis.leftMargin = 0;\n\t\tthis.rightMargin = 0;\n\t\tthis.rightPadding = 0;\n\t\tthis.initializationMode = \"left\";\n\t\tthis.active = false;\n\t\tthis.scrollEndTimer = false;\n\t};\n\n\t//reset initial state\n\tFrozenColumns.prototype.reset = function () {\n\t\tthis.initializationMode = \"left\";\n\t\tthis.leftColumns = [];\n\t\tthis.rightColumns = [];\n\t\tthis.leftMargin = 0;\n\t\tthis.rightMargin = 0;\n\t\tthis.rightMargin = 0;\n\t\tthis.active = false;\n\n\t\tthis.table.columnManager.headersElement.style.marginLeft = 0;\n\t\tthis.table.columnManager.element.style.paddingRight = 0;\n\t};\n\n\t//initialize specific column\n\tFrozenColumns.prototype.initializeColumn = function (column) {\n\t\tvar config = { margin: 0, edge: false };\n\n\t\tif (!column.isGroup) {\n\n\t\t\tif (this.frozenCheck(column)) {\n\n\t\t\t\tconfig.position = this.initializationMode;\n\n\t\t\t\tif (this.initializationMode == \"left\") {\n\t\t\t\t\tthis.leftColumns.push(column);\n\t\t\t\t} else {\n\t\t\t\t\tthis.rightColumns.unshift(column);\n\t\t\t\t}\n\n\t\t\t\tthis.active = true;\n\n\t\t\t\tcolumn.modules.frozen = config;\n\t\t\t} else {\n\t\t\t\tthis.initializationMode = \"right\";\n\t\t\t}\n\t\t}\n\t};\n\n\tFrozenColumns.prototype.frozenCheck = function (column) {\n\t\tvar frozen = false;\n\n\t\tif (column.parent.isGroup && column.definition.frozen) {\n\t\t\tconsole.warn(\"Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups\");\n\t\t}\n\n\t\tif (column.parent.isGroup) {\n\t\t\treturn this.frozenCheck(column.parent);\n\t\t} else {\n\t\t\treturn column.definition.frozen;\n\t\t}\n\n\t\treturn frozen;\n\t};\n\n\t//quick layout to smooth horizontal scrolling\n\tFrozenColumns.prototype.scrollHorizontal = function () {\n\t\tvar _this57 = this;\n\n\t\tvar rows;\n\n\t\tif (this.active) {\n\t\t\tclearTimeout(this.scrollEndTimer);\n\n\t\t\t//layout all rows after scroll is complete\n\t\t\tthis.scrollEndTimer = setTimeout(function () {\n\t\t\t\t_this57.layout();\n\t\t\t}, 100);\n\n\t\t\trows = this.table.rowManager.getVisibleRows();\n\n\t\t\tthis.calcMargins();\n\n\t\t\tthis.layoutColumnPosition();\n\n\t\t\tthis.layoutCalcRows();\n\n\t\t\trows.forEach(function (row) {\n\t\t\t\tif (row.type === \"row\") {\n\t\t\t\t\t_this57.layoutRow(row);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.table.rowManager.tableElement.style.marginRight = this.rightMargin;\n\t\t}\n\t};\n\n\t//calculate margins for rows\n\tFrozenColumns.prototype.calcMargins = function () {\n\t\tthis.leftMargin = this._calcSpace(this.leftColumns, this.leftColumns.length) + \"px\";\n\t\tthis.table.columnManager.headersElement.style.marginLeft = this.leftMargin;\n\n\t\tthis.rightMargin = this._calcSpace(this.rightColumns, this.rightColumns.length) + \"px\";\n\t\tthis.table.columnManager.element.style.paddingRight = this.rightMargin;\n\n\t\t//calculate right frozen columns\n\t\tthis.rightPadding = this.table.rowManager.element.clientWidth + this.table.columnManager.scrollLeft;\n\t};\n\n\t//layout calculation rows\n\tFrozenColumns.prototype.layoutCalcRows = function () {\n\t\tif (this.table.modExists(\"columnCalcs\")) {\n\t\t\tif (this.table.modules.columnCalcs.topInitialized && this.table.modules.columnCalcs.topRow) {\n\t\t\t\tthis.layoutRow(this.table.modules.columnCalcs.topRow);\n\t\t\t}\n\t\t\tif (this.table.modules.columnCalcs.botInitialized && this.table.modules.columnCalcs.botRow) {\n\t\t\t\tthis.layoutRow(this.table.modules.columnCalcs.botRow);\n\t\t\t}\n\t\t}\n\t};\n\n\t//calculate column positions and layout headers\n\tFrozenColumns.prototype.layoutColumnPosition = function (allCells) {\n\t\tvar _this58 = this;\n\n\t\tvar leftParents = [];\n\n\t\tthis.leftColumns.forEach(function (column, i) {\n\t\t\tcolumn.modules.frozen.margin = _this58._calcSpace(_this58.leftColumns, i) + _this58.table.columnManager.scrollLeft + \"px\";\n\n\t\t\tif (i == _this58.leftColumns.length - 1) {\n\t\t\t\tcolumn.modules.frozen.edge = true;\n\t\t\t} else {\n\t\t\t\tcolumn.modules.frozen.edge = false;\n\t\t\t}\n\n\t\t\tif (column.parent.isGroup) {\n\t\t\t\tvar parentEl = _this58.getColGroupParentElement(column);\n\t\t\t\tif (!leftParents.includes(parentEl)) {\n\t\t\t\t\t_this58.layoutElement(parentEl, column);\n\t\t\t\t\tleftParents.push(parentEl);\n\t\t\t\t}\n\n\t\t\t\tif (column.modules.frozen.edge) {\n\t\t\t\t\tparentEl.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t_this58.layoutElement(column.getElement(), column);\n\t\t\t}\n\n\t\t\tif (allCells) {\n\t\t\t\tcolumn.cells.forEach(function (cell) {\n\t\t\t\t\t_this58.layoutElement(cell.getElement(), column);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tthis.rightColumns.forEach(function (column, i) {\n\t\t\tcolumn.modules.frozen.margin = _this58.rightPadding - _this58._calcSpace(_this58.rightColumns, i + 1) + \"px\";\n\n\t\t\tif (i == _this58.rightColumns.length - 1) {\n\t\t\t\tcolumn.modules.frozen.edge = true;\n\t\t\t} else {\n\t\t\t\tcolumn.modules.frozen.edge = false;\n\t\t\t}\n\n\t\t\tif (column.parent.isGroup) {\n\t\t\t\t_this58.layoutElement(_this58.getColGroupParentElement(column), column);\n\t\t\t} else {\n\t\t\t\t_this58.layoutElement(column.getElement(), column);\n\t\t\t}\n\n\t\t\tif (allCells) {\n\t\t\t\tcolumn.cells.forEach(function (cell) {\n\t\t\t\t\t_this58.layoutElement(cell.getElement(), column);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n\tFrozenColumns.prototype.getColGroupParentElement = function (column) {\n\t\treturn column.parent.isGroup ? this.getColGroupParentElement(column.parent) : column.getElement();\n\t};\n\n\t//layout columns appropropriatly\n\tFrozenColumns.prototype.layout = function () {\n\t\tvar self = this,\n\t\t    rightMargin = 0;\n\n\t\tif (self.active) {\n\n\t\t\t//calculate row padding\n\t\t\tthis.calcMargins();\n\n\t\t\t// self.table.rowManager.activeRows.forEach(function(row){\n\t\t\t// \tself.layoutRow(row);\n\t\t\t// });\n\n\t\t\t// if(self.table.options.dataTree){\n\t\t\tself.table.rowManager.getDisplayRows().forEach(function (row) {\n\t\t\t\tif (row.type === \"row\") {\n\t\t\t\t\tself.layoutRow(row);\n\t\t\t\t}\n\t\t\t});\n\t\t\t// }\n\n\t\t\tthis.layoutCalcRows();\n\n\t\t\t//calculate left columns\n\t\t\tthis.layoutColumnPosition(true);\n\n\t\t\t// if(tableHolder.scrollHeight > tableHolder.clientHeight){\n\t\t\t// \trightMargin -= tableHolder.offsetWidth - tableHolder.clientWidth;\n\t\t\t// }\n\n\t\t\tthis.table.rowManager.tableElement.style.marginRight = this.rightMargin;\n\t\t}\n\t};\n\n\tFrozenColumns.prototype.layoutRow = function (row) {\n\t\tvar _this59 = this;\n\n\t\tvar rowEl = row.getElement();\n\n\t\trowEl.style.paddingLeft = this.leftMargin;\n\t\t// rowEl.style.paddingRight = this.rightMargin + \"px\";\n\n\t\tthis.leftColumns.forEach(function (column) {\n\t\t\tvar cell = row.getCell(column);\n\n\t\t\tif (cell) {\n\t\t\t\t_this59.layoutElement(cell.getElement(), column);\n\t\t\t}\n\t\t});\n\n\t\tthis.rightColumns.forEach(function (column) {\n\t\t\tvar cell = row.getCell(column);\n\n\t\t\tif (cell) {\n\t\t\t\t_this59.layoutElement(cell.getElement(), column);\n\t\t\t}\n\t\t});\n\t};\n\n\tFrozenColumns.prototype.layoutElement = function (element, column) {\n\n\t\tif (column.modules.frozen) {\n\t\t\telement.style.position = \"absolute\";\n\t\t\telement.style.left = column.modules.frozen.margin;\n\n\t\t\telement.classList.add(\"tabulator-frozen\");\n\n\t\t\tif (column.modules.frozen.edge) {\n\t\t\t\telement.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\n\t\t\t}\n\t\t}\n\t};\n\n\tFrozenColumns.prototype._calcSpace = function (columns, index) {\n\t\tvar width = 0;\n\n\t\tfor (var _i9 = 0; _i9 < index; _i9++) {\n\t\t\tif (columns[_i9].visible) {\n\t\t\t\twidth += columns[_i9].getWidth();\n\t\t\t}\n\t\t}\n\n\t\treturn width;\n\t};\n\n\tTabulator.prototype.registerModule(\"frozenColumns\", FrozenColumns);\n\tvar FrozenRows = function FrozenRows(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.topElement = document.createElement(\"div\");\n\t\tthis.rows = [];\n\t\tthis.displayIndex = 0; //index in display pipeline\n\t};\n\n\tFrozenRows.prototype.initialize = function () {\n\t\tthis.rows = [];\n\n\t\tthis.topElement.classList.add(\"tabulator-frozen-rows-holder\");\n\n\t\t// this.table.columnManager.element.append(this.topElement);\n\t\tthis.table.columnManager.getElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\n\t};\n\n\tFrozenRows.prototype.setDisplayIndex = function (index) {\n\t\tthis.displayIndex = index;\n\t};\n\n\tFrozenRows.prototype.getDisplayIndex = function () {\n\t\treturn this.displayIndex;\n\t};\n\n\tFrozenRows.prototype.isFrozen = function () {\n\t\treturn !!this.rows.length;\n\t};\n\n\t//filter frozen rows out of display data\n\tFrozenRows.prototype.getRows = function (rows) {\n\t\tvar self = this,\n\t\t    frozen = [],\n\t\t    output = rows.slice(0);\n\n\t\tthis.rows.forEach(function (row) {\n\t\t\tvar index = output.indexOf(row);\n\n\t\t\tif (index > -1) {\n\t\t\t\toutput.splice(index, 1);\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t};\n\n\tFrozenRows.prototype.freezeRow = function (row) {\n\t\tif (!row.modules.frozen) {\n\t\t\trow.modules.frozen = true;\n\t\t\tthis.topElement.appendChild(row.getElement());\n\t\t\trow.initialize();\n\t\t\trow.normalizeHeight();\n\t\t\tthis.table.rowManager.adjustTableSize();\n\n\t\t\tthis.rows.push(row);\n\n\t\t\tthis.table.rowManager.refreshActiveData(\"display\");\n\n\t\t\tthis.styleRows();\n\t\t} else {\n\t\t\tconsole.warn(\"Freeze Error - Row is already frozen\");\n\t\t}\n\t};\n\n\tFrozenRows.prototype.unfreezeRow = function (row) {\n\t\tvar index = this.rows.indexOf(row);\n\n\t\tif (row.modules.frozen) {\n\n\t\t\trow.modules.frozen = false;\n\n\t\t\tthis.detachRow(row);\n\n\t\t\tthis.table.rowManager.adjustTableSize();\n\n\t\t\tthis.table.rowManager.refreshActiveData(\"display\");\n\n\t\t\tif (this.rows.length) {\n\t\t\t\tthis.styleRows();\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.warn(\"Freeze Error - Row is already unfrozen\");\n\t\t}\n\t};\n\n\tFrozenRows.prototype.detachRow = function (row) {\n\t\tvar index = this.rows.indexOf(row);\n\n\t\tif (index > -1) {\n\t\t\tvar rowEl = row.getElement();\n\t\t\trowEl.parentNode.removeChild(rowEl);\n\n\t\t\tthis.rows.splice(index, 1);\n\t\t}\n\t};\n\n\tFrozenRows.prototype.styleRows = function (row) {\n\t\tvar self = this;\n\n\t\tthis.rows.forEach(function (row, i) {\n\t\t\tself.table.rowManager.styleRow(row, i);\n\t\t});\n\t};\n\n\tTabulator.prototype.registerModule(\"frozenRows\", FrozenRows);\n\n\t//public group object\n\tvar GroupComponent = function GroupComponent(group) {\n\t\tthis._group = group;\n\t\tthis.type = \"GroupComponent\";\n\t};\n\n\tGroupComponent.prototype.getKey = function () {\n\t\treturn this._group.key;\n\t};\n\n\tGroupComponent.prototype.getField = function () {\n\t\treturn this._group.field;\n\t};\n\n\tGroupComponent.prototype.getElement = function () {\n\t\treturn this._group.element;\n\t};\n\n\tGroupComponent.prototype.getRows = function () {\n\t\treturn this._group.getRows(true);\n\t};\n\n\tGroupComponent.prototype.getSubGroups = function () {\n\t\treturn this._group.getSubGroups(true);\n\t};\n\n\tGroupComponent.prototype.getParentGroup = function () {\n\t\treturn this._group.parent ? this._group.parent.getComponent() : false;\n\t};\n\n\tGroupComponent.prototype.getVisibility = function () {\n\t\tconsole.warn(\"getVisibility function is deprecated, you should now use the isVisible function\");\n\t\treturn this._group.visible;\n\t};\n\n\tGroupComponent.prototype.isVisible = function () {\n\t\treturn this._group.visible;\n\t};\n\n\tGroupComponent.prototype.show = function () {\n\t\tthis._group.show();\n\t};\n\n\tGroupComponent.prototype.hide = function () {\n\t\tthis._group.hide();\n\t};\n\n\tGroupComponent.prototype.toggle = function () {\n\t\tthis._group.toggleVisibility();\n\t};\n\n\tGroupComponent.prototype._getSelf = function () {\n\t\treturn this._group;\n\t};\n\n\tGroupComponent.prototype.getTable = function () {\n\t\treturn this._group.groupManager.table;\n\t};\n\n\t//////////////////////////////////////////////////\n\t//////////////// Group Functions /////////////////\n\t//////////////////////////////////////////////////\n\n\tvar Group = function Group(groupManager, parent, level, key, field, generator, oldGroup) {\n\n\t\tthis.groupManager = groupManager;\n\t\tthis.parent = parent;\n\t\tthis.key = key;\n\t\tthis.level = level;\n\t\tthis.field = field;\n\t\tthis.hasSubGroups = level < groupManager.groupIDLookups.length - 1;\n\t\tthis.addRow = this.hasSubGroups ? this._addRowToGroup : this._addRow;\n\t\tthis.type = \"group\"; //type of element\n\t\tthis.old = oldGroup;\n\t\tthis.rows = [];\n\t\tthis.groups = [];\n\t\tthis.groupList = [];\n\t\tthis.generator = generator;\n\t\tthis.elementContents = false;\n\t\tthis.height = 0;\n\t\tthis.outerHeight = 0;\n\t\tthis.initialized = false;\n\t\tthis.calcs = {};\n\t\tthis.initialized = false;\n\t\tthis.modules = {};\n\t\tthis.arrowElement = false;\n\n\t\tthis.visible = oldGroup ? oldGroup.visible : typeof groupManager.startOpen[level] !== \"undefined\" ? groupManager.startOpen[level] : groupManager.startOpen[0];\n\n\t\tthis.component = null;\n\n\t\tthis.createElements();\n\t\tthis.addBindings();\n\n\t\tthis.createValueGroups();\n\t};\n\n\tGroup.prototype.wipe = function () {\n\t\tif (this.groupList.length) {\n\t\t\tthis.groupList.forEach(function (group) {\n\t\t\t\tgroup.wipe();\n\t\t\t});\n\t\t} else {\n\t\t\tthis.element = false;\n\t\t\tthis.arrowElement = false;\n\t\t\tthis.elementContents = false;\n\t\t}\n\t};\n\n\tGroup.prototype.createElements = function () {\n\t\tvar arrow = document.createElement(\"div\");\n\t\tarrow.classList.add(\"tabulator-arrow\");\n\n\t\tthis.element = document.createElement(\"div\");\n\t\tthis.element.classList.add(\"tabulator-row\");\n\t\tthis.element.classList.add(\"tabulator-group\");\n\t\tthis.element.classList.add(\"tabulator-group-level-\" + this.level);\n\t\tthis.element.setAttribute(\"role\", \"rowgroup\");\n\n\t\tthis.arrowElement = document.createElement(\"div\");\n\t\tthis.arrowElement.classList.add(\"tabulator-group-toggle\");\n\t\tthis.arrowElement.appendChild(arrow);\n\n\t\t//setup movable rows\n\t\tif (this.groupManager.table.options.movableRows !== false && this.groupManager.table.modExists(\"moveRow\")) {\n\t\t\tthis.groupManager.table.modules.moveRow.initializeGroupHeader(this);\n\t\t}\n\t};\n\n\tGroup.prototype.createValueGroups = function () {\n\t\tvar _this60 = this;\n\n\t\tvar level = this.level + 1;\n\t\tif (this.groupManager.allowedValues && this.groupManager.allowedValues[level]) {\n\t\t\tthis.groupManager.allowedValues[level].forEach(function (value) {\n\t\t\t\t_this60._createGroup(value, level);\n\t\t\t});\n\t\t}\n\t};\n\n\tGroup.prototype.addBindings = function () {\n\t\tvar self = this,\n\t\t    dblTap,\n\t\t    tapHold,\n\t\t    tap,\n\t\t    toggleElement;\n\n\t\t//handle group click events\n\t\tif (self.groupManager.table.options.groupClick) {\n\t\t\tself.element.addEventListener(\"click\", function (e) {\n\t\t\t\tself.groupManager.table.options.groupClick.call(self.groupManager.table, e, self.getComponent());\n\t\t\t});\n\t\t}\n\n\t\tif (self.groupManager.table.options.groupDblClick) {\n\t\t\tself.element.addEventListener(\"dblclick\", function (e) {\n\t\t\t\tself.groupManager.table.options.groupDblClick.call(self.groupManager.table, e, self.getComponent());\n\t\t\t});\n\t\t}\n\n\t\tif (self.groupManager.table.options.groupContext) {\n\t\t\tself.element.addEventListener(\"contextmenu\", function (e) {\n\t\t\t\tself.groupManager.table.options.groupContext.call(self.groupManager.table, e, self.getComponent());\n\t\t\t});\n\t\t}\n\n\t\tif (self.groupManager.table.options.groupContextMenu && self.groupManager.table.modExists(\"menu\")) {\n\t\t\tself.groupManager.table.modules.menu.initializeGroup.call(self.groupManager.table.modules.menu, self);\n\t\t}\n\n\t\tif (self.groupManager.table.options.groupTap) {\n\n\t\t\ttap = false;\n\n\t\t\tself.element.addEventListener(\"touchstart\", function (e) {\n\t\t\t\ttap = true;\n\t\t\t}, { passive: true });\n\n\t\t\tself.element.addEventListener(\"touchend\", function (e) {\n\t\t\t\tif (tap) {\n\t\t\t\t\tself.groupManager.table.options.groupTap(e, self.getComponent());\n\t\t\t\t}\n\n\t\t\t\ttap = false;\n\t\t\t});\n\t\t}\n\n\t\tif (self.groupManager.table.options.groupDblTap) {\n\n\t\t\tdblTap = null;\n\n\t\t\tself.element.addEventListener(\"touchend\", function (e) {\n\n\t\t\t\tif (dblTap) {\n\t\t\t\t\tclearTimeout(dblTap);\n\t\t\t\t\tdblTap = null;\n\n\t\t\t\t\tself.groupManager.table.options.groupDblTap(e, self.getComponent());\n\t\t\t\t} else {\n\n\t\t\t\t\tdblTap = setTimeout(function () {\n\t\t\t\t\t\tclearTimeout(dblTap);\n\t\t\t\t\t\tdblTap = null;\n\t\t\t\t\t}, 300);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (self.groupManager.table.options.groupTapHold) {\n\n\t\t\ttapHold = null;\n\n\t\t\tself.element.addEventListener(\"touchstart\", function (e) {\n\t\t\t\tclearTimeout(tapHold);\n\n\t\t\t\ttapHold = setTimeout(function () {\n\t\t\t\t\tclearTimeout(tapHold);\n\t\t\t\t\ttapHold = null;\n\t\t\t\t\ttap = false;\n\t\t\t\t\tself.groupManager.table.options.groupTapHold(e, self.getComponent());\n\t\t\t\t}, 1000);\n\t\t\t}, { passive: true });\n\n\t\t\tself.element.addEventListener(\"touchend\", function (e) {\n\t\t\t\tclearTimeout(tapHold);\n\t\t\t\ttapHold = null;\n\t\t\t});\n\t\t}\n\n\t\tif (self.groupManager.table.options.groupToggleElement) {\n\t\t\ttoggleElement = self.groupManager.table.options.groupToggleElement == \"arrow\" ? self.arrowElement : self.element;\n\n\t\t\ttoggleElement.addEventListener(\"click\", function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\tself.toggleVisibility();\n\t\t\t});\n\t\t}\n\t};\n\n\tGroup.prototype._createGroup = function (groupID, level) {\n\t\tvar groupKey = level + \"_\" + groupID;\n\t\tvar group = new Group(this.groupManager, this, level, groupID, this.groupManager.groupIDLookups[level].field, this.groupManager.headerGenerator[level] || this.groupManager.headerGenerator[0], this.old ? this.old.groups[groupKey] : false);\n\n\t\tthis.groups[groupKey] = group;\n\t\tthis.groupList.push(group);\n\t};\n\n\tGroup.prototype._addRowToGroup = function (row) {\n\n\t\tvar level = this.level + 1;\n\n\t\tif (this.hasSubGroups) {\n\t\t\tvar groupID = this.groupManager.groupIDLookups[level].func(row.getData()),\n\t\t\t    groupKey = level + \"_\" + groupID;\n\n\t\t\tif (this.groupManager.allowedValues && this.groupManager.allowedValues[level]) {\n\t\t\t\tif (this.groups[groupKey]) {\n\t\t\t\t\tthis.groups[groupKey].addRow(row);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!this.groups[groupKey]) {\n\t\t\t\t\tthis._createGroup(groupID, level);\n\t\t\t\t}\n\n\t\t\t\tthis.groups[groupKey].addRow(row);\n\t\t\t}\n\t\t}\n\t};\n\n\tGroup.prototype._addRow = function (row) {\n\t\tthis.rows.push(row);\n\t\trow.modules.group = this;\n\t};\n\n\tGroup.prototype.insertRow = function (row, to, after) {\n\t\tvar data = this.conformRowData({});\n\n\t\trow.updateData(data);\n\n\t\tvar toIndex = this.rows.indexOf(to);\n\n\t\tif (toIndex > -1) {\n\t\t\tif (after) {\n\t\t\t\tthis.rows.splice(toIndex + 1, 0, row);\n\t\t\t} else {\n\t\t\t\tthis.rows.splice(toIndex, 0, row);\n\t\t\t}\n\t\t} else {\n\t\t\tif (after) {\n\t\t\t\tthis.rows.push(row);\n\t\t\t} else {\n\t\t\t\tthis.rows.unshift(row);\n\t\t\t}\n\t\t}\n\n\t\trow.modules.group = this;\n\n\t\tthis.generateGroupHeaderContents();\n\n\t\tif (this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\") {\n\t\t\tthis.groupManager.table.modules.columnCalcs.recalcGroup(this);\n\t\t}\n\n\t\tthis.groupManager.updateGroupRows(true);\n\t};\n\n\tGroup.prototype.scrollHeader = function (left) {\n\t\tthis.arrowElement.style.marginLeft = left;\n\n\t\tthis.groupList.forEach(function (child) {\n\t\t\tchild.scrollHeader(left);\n\t\t});\n\t};\n\n\tGroup.prototype.getRowIndex = function (row) {};\n\n\t//update row data to match grouping contraints\n\tGroup.prototype.conformRowData = function (data) {\n\t\tif (this.field) {\n\t\t\tdata[this.field] = this.key;\n\t\t} else {\n\t\t\tconsole.warn(\"Data Conforming Error - Cannot conform row data to match new group as groupBy is a function\");\n\t\t}\n\n\t\tif (this.parent) {\n\t\t\tdata = this.parent.conformRowData(data);\n\t\t}\n\n\t\treturn data;\n\t};\n\n\tGroup.prototype.removeRow = function (row) {\n\t\tvar index = this.rows.indexOf(row);\n\t\tvar el = row.getElement();\n\n\t\tif (index > -1) {\n\t\t\tthis.rows.splice(index, 1);\n\t\t}\n\n\t\tif (!this.groupManager.table.options.groupValues && !this.rows.length) {\n\t\t\tif (this.parent) {\n\t\t\t\tthis.parent.removeGroup(this);\n\t\t\t} else {\n\t\t\t\tthis.groupManager.removeGroup(this);\n\t\t\t}\n\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t} else {\n\n\t\t\tif (el.parentNode) {\n\t\t\t\tel.parentNode.removeChild(el);\n\t\t\t}\n\n\t\t\tthis.generateGroupHeaderContents();\n\n\t\t\tif (this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\") {\n\t\t\t\tthis.groupManager.table.modules.columnCalcs.recalcGroup(this);\n\t\t\t}\n\t\t}\n\t};\n\n\tGroup.prototype.removeGroup = function (group) {\n\t\tvar groupKey = group.level + \"_\" + group.key,\n\t\t    index;\n\n\t\tif (this.groups[groupKey]) {\n\t\t\tdelete this.groups[groupKey];\n\n\t\t\tindex = this.groupList.indexOf(group);\n\n\t\t\tif (index > -1) {\n\t\t\t\tthis.groupList.splice(index, 1);\n\t\t\t}\n\n\t\t\tif (!this.groupList.length) {\n\t\t\t\tif (this.parent) {\n\t\t\t\t\tthis.parent.removeGroup(this);\n\t\t\t\t} else {\n\t\t\t\t\tthis.groupManager.removeGroup(this);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tGroup.prototype.getHeadersAndRows = function (noCalc) {\n\t\tvar output = [];\n\n\t\toutput.push(this);\n\n\t\tthis._visSet();\n\n\t\tif (this.visible) {\n\t\t\tif (this.groupList.length) {\n\t\t\t\tthis.groupList.forEach(function (group) {\n\t\t\t\t\toutput = output.concat(group.getHeadersAndRows(noCalc));\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (!noCalc && this.groupManager.table.options.columnCalcs != \"table\" && this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasTopCalcs()) {\n\t\t\t\t\tif (this.calcs.top) {\n\t\t\t\t\t\tthis.calcs.top.detachElement();\n\t\t\t\t\t\tthis.calcs.top.deleteCells();\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n\t\t\t\t\toutput.push(this.calcs.top);\n\t\t\t\t}\n\n\t\t\t\toutput = output.concat(this.rows);\n\n\t\t\t\tif (!noCalc && this.groupManager.table.options.columnCalcs != \"table\" && this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasBottomCalcs()) {\n\t\t\t\t\tif (this.calcs.bottom) {\n\t\t\t\t\t\tthis.calcs.bottom.detachElement();\n\t\t\t\t\t\tthis.calcs.bottom.deleteCells();\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n\t\t\t\t\toutput.push(this.calcs.bottom);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (!this.groupList.length && this.groupManager.table.options.columnCalcs != \"table\") {\n\n\t\t\t\tif (this.groupManager.table.modExists(\"columnCalcs\")) {\n\n\t\t\t\t\tif (!noCalc && this.groupManager.table.modules.columnCalcs.hasTopCalcs()) {\n\t\t\t\t\t\tif (this.calcs.top) {\n\t\t\t\t\t\t\tthis.calcs.top.detachElement();\n\t\t\t\t\t\t\tthis.calcs.top.deleteCells();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.groupManager.table.options.groupClosedShowCalcs) {\n\t\t\t\t\t\t\tthis.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n\t\t\t\t\t\t\toutput.push(this.calcs.top);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!noCalc && this.groupManager.table.modules.columnCalcs.hasBottomCalcs()) {\n\t\t\t\t\t\tif (this.calcs.bottom) {\n\t\t\t\t\t\t\tthis.calcs.bottom.detachElement();\n\t\t\t\t\t\t\tthis.calcs.bottom.deleteCells();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.groupManager.table.options.groupClosedShowCalcs) {\n\t\t\t\t\t\t\tthis.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n\t\t\t\t\t\t\toutput.push(this.calcs.bottom);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tGroup.prototype.getData = function (visible, transform) {\n\t\tvar self = this,\n\t\t    output = [];\n\n\t\tthis._visSet();\n\n\t\tif (!visible || visible && this.visible) {\n\t\t\tthis.rows.forEach(function (row) {\n\t\t\t\toutput.push(row.getData(transform || \"data\"));\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t};\n\n\t// Group.prototype.getRows = function(){\n\t// \tthis._visSet();\n\n\t// \treturn this.visible ? this.rows : [];\n\t// };\n\n\tGroup.prototype.getRowCount = function () {\n\t\tvar count = 0;\n\n\t\tif (this.groupList.length) {\n\t\t\tthis.groupList.forEach(function (group) {\n\t\t\t\tcount += group.getRowCount();\n\t\t\t});\n\t\t} else {\n\t\t\tcount = this.rows.length;\n\t\t}\n\t\treturn count;\n\t};\n\n\tGroup.prototype.toggleVisibility = function () {\n\t\tif (this.visible) {\n\t\t\tthis.hide();\n\t\t} else {\n\t\t\tthis.show();\n\t\t}\n\t};\n\n\tGroup.prototype.hide = function () {\n\t\tthis.visible = false;\n\n\t\tif (this.groupManager.table.rowManager.getRenderMode() == \"classic\" && !this.groupManager.table.options.pagination) {\n\n\t\t\tthis.element.classList.remove(\"tabulator-group-visible\");\n\n\t\t\tif (this.groupList.length) {\n\t\t\t\tthis.groupList.forEach(function (group) {\n\n\t\t\t\t\tvar rows = group.getHeadersAndRows();\n\n\t\t\t\t\trows.forEach(function (row) {\n\t\t\t\t\t\trow.detachElement();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.rows.forEach(function (row) {\n\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(), this.groupManager.getDisplayIndex());\n\n\t\t\tthis.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth();\n\t\t} else {\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t}\n\n\t\tthis.groupManager.table.options.groupVisibilityChanged.call(this.table, this.getComponent(), false);\n\t};\n\n\tGroup.prototype.show = function () {\n\t\tvar self = this;\n\n\t\tself.visible = true;\n\n\t\tif (this.groupManager.table.rowManager.getRenderMode() == \"classic\" && !this.groupManager.table.options.pagination) {\n\n\t\t\tthis.element.classList.add(\"tabulator-group-visible\");\n\n\t\t\tvar prev = self.getElement();\n\n\t\t\tif (this.groupList.length) {\n\t\t\t\tthis.groupList.forEach(function (group) {\n\t\t\t\t\tvar rows = group.getHeadersAndRows();\n\n\t\t\t\t\trows.forEach(function (row) {\n\t\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\t\tprev.parentNode.insertBefore(rowEl, prev.nextSibling);\n\t\t\t\t\t\trow.initialize();\n\t\t\t\t\t\tprev = rowEl;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tself.rows.forEach(function (row) {\n\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\tprev.parentNode.insertBefore(rowEl, prev.nextSibling);\n\t\t\t\t\trow.initialize();\n\t\t\t\t\tprev = rowEl;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(), this.groupManager.getDisplayIndex());\n\n\t\t\tthis.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth();\n\t\t} else {\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t}\n\n\t\tthis.groupManager.table.options.groupVisibilityChanged.call(this.table, this.getComponent(), true);\n\t};\n\n\tGroup.prototype._visSet = function () {\n\t\tvar data = [];\n\n\t\tif (typeof this.visible == \"function\") {\n\n\t\t\tthis.rows.forEach(function (row) {\n\t\t\t\tdata.push(row.getData());\n\t\t\t});\n\n\t\t\tthis.visible = this.visible(this.key, this.getRowCount(), data, this.getComponent());\n\t\t}\n\t};\n\n\tGroup.prototype.getRowGroup = function (row) {\n\t\tvar match = false;\n\t\tif (this.groupList.length) {\n\t\t\tthis.groupList.forEach(function (group) {\n\t\t\t\tvar result = group.getRowGroup(row);\n\n\t\t\t\tif (result) {\n\t\t\t\t\tmatch = result;\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tif (this.rows.find(function (item) {\n\t\t\t\treturn item === row;\n\t\t\t})) {\n\t\t\t\tmatch = this;\n\t\t\t}\n\t\t}\n\n\t\treturn match;\n\t};\n\n\tGroup.prototype.getSubGroups = function (component) {\n\t\tvar output = [];\n\n\t\tthis.groupList.forEach(function (child) {\n\t\t\toutput.push(component ? child.getComponent() : child);\n\t\t});\n\n\t\treturn output;\n\t};\n\n\tGroup.prototype.getRows = function (compoment) {\n\t\tvar output = [];\n\n\t\tthis.rows.forEach(function (row) {\n\t\t\toutput.push(compoment ? row.getComponent() : row);\n\t\t});\n\n\t\treturn output;\n\t};\n\n\tGroup.prototype.generateGroupHeaderContents = function () {\n\t\tvar data = [];\n\n\t\tthis.rows.forEach(function (row) {\n\t\t\tdata.push(row.getData());\n\t\t});\n\n\t\tthis.elementContents = this.generator(this.key, this.getRowCount(), data, this.getComponent());\n\n\t\twhile (this.element.firstChild) {\n\t\t\tthis.element.removeChild(this.element.firstChild);\n\t\t}if (typeof this.elementContents === \"string\") {\n\t\t\tthis.element.innerHTML = this.elementContents;\n\t\t} else {\n\t\t\tthis.element.appendChild(this.elementContents);\n\t\t}\n\n\t\tthis.element.insertBefore(this.arrowElement, this.element.firstChild);\n\t};\n\n\t////////////// Standard Row Functions //////////////\n\n\tGroup.prototype.getElement = function () {\n\t\tthis.addBindingsd = false;\n\n\t\tthis._visSet();\n\n\t\tif (this.visible) {\n\t\t\tthis.element.classList.add(\"tabulator-group-visible\");\n\t\t} else {\n\t\t\tthis.element.classList.remove(\"tabulator-group-visible\");\n\t\t}\n\n\t\tfor (var i = 0; i < this.element.childNodes.length; ++i) {\n\t\t\tthis.element.childNodes[i].parentNode.removeChild(this.element.childNodes[i]);\n\t\t}\n\n\t\tthis.generateGroupHeaderContents();\n\n\t\t// this.addBindings();\n\n\t\treturn this.element;\n\t};\n\n\tGroup.prototype.detachElement = function () {\n\t\tif (this.element && this.element.parentNode) {\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\t};\n\n\t//normalize the height of elements in the row\n\tGroup.prototype.normalizeHeight = function () {\n\t\tthis.setHeight(this.element.clientHeight);\n\t};\n\n\tGroup.prototype.initialize = function (force) {\n\t\tif (!this.initialized || force) {\n\t\t\tthis.normalizeHeight();\n\t\t\tthis.initialized = true;\n\t\t}\n\t};\n\n\tGroup.prototype.reinitialize = function () {\n\t\tthis.initialized = false;\n\t\tthis.height = 0;\n\n\t\tif (Tabulator.prototype.helpers.elVisible(this.element)) {\n\t\t\tthis.initialize(true);\n\t\t}\n\t};\n\n\tGroup.prototype.setHeight = function (height) {\n\t\tif (this.height != height) {\n\t\t\tthis.height = height;\n\t\t\tthis.outerHeight = this.element.offsetHeight;\n\t\t}\n\t};\n\n\t//return rows outer height\n\tGroup.prototype.getHeight = function () {\n\t\treturn this.outerHeight;\n\t};\n\n\tGroup.prototype.getGroup = function () {\n\t\treturn this;\n\t};\n\n\tGroup.prototype.reinitializeHeight = function () {};\n\tGroup.prototype.calcHeight = function () {};\n\tGroup.prototype.setCellHeight = function () {};\n\tGroup.prototype.clearCellHeight = function () {};\n\n\t//////////////// Object Generation /////////////////\n\tGroup.prototype.getComponent = function () {\n\t\tif (!this.component) {\n\t\t\tthis.component = new GroupComponent(this);\n\t\t}\n\n\t\treturn this.component;\n\t};\n\n\t//////////////////////////////////////////////////\n\t////////////// Group Row Extension ///////////////\n\t//////////////////////////////////////////////////\n\n\tvar GroupRows = function GroupRows(table) {\n\n\t\tthis.table = table; //hold Tabulator object\n\n\t\tthis.groupIDLookups = false; //enable table grouping and set field to group by\n\t\tthis.startOpen = [function () {\n\t\t\treturn false;\n\t\t}]; //starting state of group\n\t\tthis.headerGenerator = [function () {\n\t\t\treturn \"\";\n\t\t}];\n\t\tthis.groupList = []; //ordered list of groups\n\t\tthis.allowedValues = false;\n\t\tthis.groups = {}; //hold row groups\n\t\tthis.displayIndex = 0; //index in display pipeline\n\t};\n\n\t//initialize group configuration\n\tGroupRows.prototype.initialize = function () {\n\t\tvar self = this,\n\t\t    groupBy = self.table.options.groupBy,\n\t\t    startOpen = self.table.options.groupStartOpen,\n\t\t    groupHeader = self.table.options.groupHeader;\n\n\t\tthis.allowedValues = self.table.options.groupValues;\n\n\t\tif (Array.isArray(groupBy) && Array.isArray(groupHeader) && groupBy.length > groupHeader.length) {\n\t\t\tconsole.warn(\"Error creating group headers, groupHeader array is shorter than groupBy array\");\n\t\t}\n\n\t\tself.headerGenerator = [function () {\n\t\t\treturn \"\";\n\t\t}];\n\t\tthis.startOpen = [function () {\n\t\t\treturn false;\n\t\t}]; //starting state of group\n\n\t\tself.table.modules.localize.bind(\"groups|item\", function (langValue, lang) {\n\t\t\tself.headerGenerator[0] = function (value, count, data) {\n\t\t\t\t//header layout function\n\t\t\t\treturn (typeof value === \"undefined\" ? \"\" : value) + \"<span>(\" + count + \" \" + (count === 1 ? langValue : lang.groups.items) + \")</span>\";\n\t\t\t};\n\t\t});\n\n\t\tthis.groupIDLookups = [];\n\n\t\tif (Array.isArray(groupBy) || groupBy) {\n\t\t\tif (this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"table\" && this.table.options.columnCalcs != \"both\") {\n\t\t\t\tthis.table.modules.columnCalcs.removeCalcs();\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"group\") {\n\n\t\t\t\tvar cols = this.table.columnManager.getRealColumns();\n\n\t\t\t\tcols.forEach(function (col) {\n\t\t\t\t\tif (col.definition.topCalc) {\n\t\t\t\t\t\tself.table.modules.columnCalcs.initializeTopRow();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (col.definition.bottomCalc) {\n\t\t\t\t\t\tself.table.modules.columnCalcs.initializeBottomRow();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (!Array.isArray(groupBy)) {\n\t\t\tgroupBy = [groupBy];\n\t\t}\n\n\t\tgroupBy.forEach(function (group, i) {\n\t\t\tvar lookupFunc, column;\n\n\t\t\tif (typeof group == \"function\") {\n\t\t\t\tlookupFunc = group;\n\t\t\t} else {\n\t\t\t\tcolumn = self.table.columnManager.getColumnByField(group);\n\n\t\t\t\tif (column) {\n\t\t\t\t\tlookupFunc = function lookupFunc(data) {\n\t\t\t\t\t\treturn column.getFieldValue(data);\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tlookupFunc = function lookupFunc(data) {\n\t\t\t\t\t\treturn data[group];\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tself.groupIDLookups.push({\n\t\t\t\tfield: typeof group === \"function\" ? false : group,\n\t\t\t\tfunc: lookupFunc,\n\t\t\t\tvalues: self.allowedValues ? self.allowedValues[i] : false\n\t\t\t});\n\t\t});\n\n\t\tif (startOpen) {\n\n\t\t\tif (!Array.isArray(startOpen)) {\n\t\t\t\tstartOpen = [startOpen];\n\t\t\t}\n\n\t\t\tstartOpen.forEach(function (level) {\n\t\t\t\tlevel = typeof level == \"function\" ? level : function () {\n\t\t\t\t\treturn true;\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tself.startOpen = startOpen;\n\t\t}\n\n\t\tif (groupHeader) {\n\t\t\tself.headerGenerator = Array.isArray(groupHeader) ? groupHeader : [groupHeader];\n\t\t}\n\n\t\tthis.initialized = true;\n\t};\n\n\tGroupRows.prototype.setDisplayIndex = function (index) {\n\t\tthis.displayIndex = index;\n\t};\n\n\tGroupRows.prototype.getDisplayIndex = function () {\n\t\treturn this.displayIndex;\n\t};\n\n\t//return appropriate rows with group headers\n\tGroupRows.prototype.getRows = function (rows) {\n\t\tif (this.groupIDLookups.length) {\n\n\t\t\tthis.table.options.dataGrouping.call(this.table);\n\n\t\t\tthis.generateGroups(rows);\n\n\t\t\tif (this.table.options.dataGrouped) {\n\t\t\t\tthis.table.options.dataGrouped.call(this.table, this.getGroups(true));\n\t\t\t}\n\n\t\t\treturn this.updateGroupRows();\n\t\t} else {\n\t\t\treturn rows.slice(0);\n\t\t}\n\t};\n\n\tGroupRows.prototype.getGroups = function (compoment) {\n\t\tvar groupComponents = [];\n\n\t\tthis.groupList.forEach(function (group) {\n\t\t\tgroupComponents.push(compoment ? group.getComponent() : group);\n\t\t});\n\n\t\treturn groupComponents;\n\t};\n\n\tGroupRows.prototype.getChildGroups = function (group) {\n\t\tvar _this61 = this;\n\n\t\tvar groupComponents = [];\n\n\t\tif (!group) {\n\t\t\tgroup = this;\n\t\t}\n\n\t\tgroup.groupList.forEach(function (child) {\n\t\t\tif (child.groupList.length) {\n\t\t\t\tgroupComponents = groupComponents.concat(_this61.getChildGroups(child));\n\t\t\t} else {\n\t\t\t\tgroupComponents.push(child);\n\t\t\t}\n\t\t});\n\n\t\treturn groupComponents;\n\t};\n\n\tGroupRows.prototype.wipe = function () {\n\t\tthis.groupList.forEach(function (group) {\n\t\t\tgroup.wipe();\n\t\t});\n\t};\n\n\tGroupRows.prototype.pullGroupListData = function (groupList) {\n\t\tvar self = this;\n\t\tvar groupListData = [];\n\n\t\tgroupList.forEach(function (group) {\n\t\t\tvar groupHeader = {};\n\t\t\tgroupHeader.level = 0;\n\t\t\tgroupHeader.rowCount = 0;\n\t\t\tgroupHeader.headerContent = \"\";\n\t\t\tvar childData = [];\n\n\t\t\tif (group.hasSubGroups) {\n\t\t\t\tchildData = self.pullGroupListData(group.groupList);\n\n\t\t\t\tgroupHeader.level = group.level;\n\t\t\t\tgroupHeader.rowCount = childData.length - group.groupList.length; // data length minus number of sub-headers\n\t\t\t\tgroupHeader.headerContent = group.generator(group.key, groupHeader.rowCount, group.rows, group);\n\n\t\t\t\tgroupListData.push(groupHeader);\n\t\t\t\tgroupListData = groupListData.concat(childData);\n\t\t\t} else {\n\t\t\t\tgroupHeader.level = group.level;\n\t\t\t\tgroupHeader.headerContent = group.generator(group.key, group.rows.length, group.rows, group);\n\t\t\t\tgroupHeader.rowCount = group.getRows().length;\n\n\t\t\t\tgroupListData.push(groupHeader);\n\n\t\t\t\tgroup.getRows().forEach(function (row) {\n\t\t\t\t\tgroupListData.push(row.getData(\"data\"));\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn groupListData;\n\t};\n\n\tGroupRows.prototype.getGroupedData = function () {\n\n\t\treturn this.pullGroupListData(this.groupList);\n\t};\n\n\tGroupRows.prototype.getRowGroup = function (row) {\n\t\tvar match = false;\n\n\t\tthis.groupList.forEach(function (group) {\n\t\t\tvar result = group.getRowGroup(row);\n\n\t\t\tif (result) {\n\t\t\t\tmatch = result;\n\t\t\t}\n\t\t});\n\n\t\treturn match;\n\t};\n\n\tGroupRows.prototype.countGroups = function () {\n\t\treturn this.groupList.length;\n\t};\n\n\tGroupRows.prototype.generateGroups = function (rows) {\n\t\tvar self = this,\n\t\t    oldGroups = self.groups;\n\n\t\tself.groups = {};\n\t\tself.groupList = [];\n\n\t\tif (this.allowedValues && this.allowedValues[0]) {\n\t\t\tthis.allowedValues[0].forEach(function (value) {\n\t\t\t\tself.createGroup(value, 0, oldGroups);\n\t\t\t});\n\n\t\t\trows.forEach(function (row) {\n\t\t\t\tself.assignRowToExistingGroup(row, oldGroups);\n\t\t\t});\n\t\t} else {\n\t\t\trows.forEach(function (row) {\n\t\t\t\tself.assignRowToGroup(row, oldGroups);\n\t\t\t});\n\t\t}\n\t};\n\n\tGroupRows.prototype.createGroup = function (groupID, level, oldGroups) {\n\t\tvar groupKey = level + \"_\" + groupID,\n\t\t    group;\n\n\t\toldGroups = oldGroups || [];\n\n\t\tgroup = new Group(this, false, level, groupID, this.groupIDLookups[0].field, this.headerGenerator[0], oldGroups[groupKey]);\n\n\t\tthis.groups[groupKey] = group;\n\t\tthis.groupList.push(group);\n\t};\n\n\t// GroupRows.prototype.assignRowToGroup = function(row, oldGroups){\n\t// \tvar groupID = this.groupIDLookups[0].func(row.getData()),\n\t// \tgroupKey = \"0_\" + groupID;\n\n\t// \tif(!this.groups[groupKey]){\n\t// \t\tthis.createGroup(groupID, 0, oldGroups);\n\t// \t}\n\n\t// \tthis.groups[groupKey].addRow(row);\n\t// };\n\n\tGroupRows.prototype.assignRowToExistingGroup = function (row, oldGroups) {\n\t\tvar groupID = this.groupIDLookups[0].func(row.getData()),\n\t\t    groupKey = \"0_\" + groupID;\n\n\t\tif (this.groups[groupKey]) {\n\t\t\tthis.groups[groupKey].addRow(row);\n\t\t}\n\t};\n\n\tGroupRows.prototype.assignRowToGroup = function (row, oldGroups) {\n\t\tvar groupID = this.groupIDLookups[0].func(row.getData()),\n\t\t    newGroupNeeded = !this.groups[\"0_\" + groupID];\n\n\t\tif (newGroupNeeded) {\n\t\t\tthis.createGroup(groupID, 0, oldGroups);\n\t\t}\n\n\t\tthis.groups[\"0_\" + groupID].addRow(row);\n\n\t\treturn !newGroupNeeded;\n\t};\n\n\tGroupRows.prototype.updateGroupRows = function (force) {\n\t\tvar self = this,\n\t\t    output = [],\n\t\t    oldRowCount;\n\n\t\tself.groupList.forEach(function (group) {\n\t\t\toutput = output.concat(group.getHeadersAndRows());\n\t\t});\n\n\t\t//force update of table display\n\t\tif (force) {\n\n\t\t\tvar displayIndex = self.table.rowManager.setDisplayRows(output, this.getDisplayIndex());\n\n\t\t\tif (displayIndex !== true) {\n\t\t\t\tthis.setDisplayIndex(displayIndex);\n\t\t\t}\n\n\t\t\tself.table.rowManager.refreshActiveData(\"group\", true, true);\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tGroupRows.prototype.scrollHeaders = function (left) {\n\t\tleft = left + \"px\";\n\n\t\tthis.groupList.forEach(function (group) {\n\t\t\tgroup.scrollHeader(left);\n\t\t});\n\t};\n\n\tGroupRows.prototype.removeGroup = function (group) {\n\t\tvar groupKey = group.level + \"_\" + group.key,\n\t\t    index;\n\n\t\tif (this.groups[groupKey]) {\n\t\t\tdelete this.groups[groupKey];\n\n\t\t\tindex = this.groupList.indexOf(group);\n\n\t\t\tif (index > -1) {\n\t\t\t\tthis.groupList.splice(index, 1);\n\t\t\t}\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"groupRows\", GroupRows);\n\tvar History = function History(table) {\n\t\tthis.table = table; //hold Tabulator object\n\n\t\tthis.history = [];\n\t\tthis.index = -1;\n\t};\n\n\tHistory.prototype.clear = function () {\n\t\tthis.history = [];\n\t\tthis.index = -1;\n\t};\n\n\tHistory.prototype.action = function (type, component, data) {\n\n\t\tthis.history = this.history.slice(0, this.index + 1);\n\n\t\tthis.history.push({\n\t\t\ttype: type,\n\t\t\tcomponent: component,\n\t\t\tdata: data\n\t\t});\n\n\t\tthis.index++;\n\t};\n\n\tHistory.prototype.getHistoryUndoSize = function () {\n\t\treturn this.index + 1;\n\t};\n\n\tHistory.prototype.getHistoryRedoSize = function () {\n\t\treturn this.history.length - (this.index + 1);\n\t};\n\n\tHistory.prototype.undo = function () {\n\n\t\tif (this.index > -1) {\n\t\t\tvar action = this.history[this.index];\n\n\t\t\tthis.undoers[action.type].call(this, action);\n\n\t\t\tthis.index--;\n\n\t\t\tthis.table.options.historyUndo.call(this.table, action.type, action.component.getComponent(), action.data);\n\n\t\t\treturn true;\n\t\t} else {\n\t\t\tconsole.warn(\"History Undo Error - No more history to undo\");\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tHistory.prototype.redo = function () {\n\t\tif (this.history.length - 1 > this.index) {\n\n\t\t\tthis.index++;\n\n\t\t\tvar action = this.history[this.index];\n\n\t\t\tthis.redoers[action.type].call(this, action);\n\n\t\t\tthis.table.options.historyRedo.call(this.table, action.type, action.component.getComponent(), action.data);\n\n\t\t\treturn true;\n\t\t} else {\n\t\t\tconsole.warn(\"History Redo Error - No more history to redo\");\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tHistory.prototype.undoers = {\n\t\tcellEdit: function cellEdit(action) {\n\t\t\taction.component.setValueProcessData(action.data.oldValue);\n\t\t},\n\n\t\trowAdd: function rowAdd(action) {\n\t\t\taction.component.deleteActual();\n\t\t},\n\n\t\trowDelete: function rowDelete(action) {\n\t\t\tvar newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n\n\t\t\tif (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n\t\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\n\t\t\t}\n\n\t\t\tthis._rebindRow(action.component, newRow);\n\t\t},\n\n\t\trowMove: function rowMove(action) {\n\t\t\tthis.table.rowManager.moveRowActual(action.component, this.table.rowManager.rows[action.data.posFrom], !action.data.after);\n\t\t\tthis.table.rowManager.redraw();\n\t\t}\n\t};\n\n\tHistory.prototype.redoers = {\n\t\tcellEdit: function cellEdit(action) {\n\t\t\taction.component.setValueProcessData(action.data.newValue);\n\t\t},\n\n\t\trowAdd: function rowAdd(action) {\n\t\t\tvar newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n\n\t\t\tif (this.table.options.groupBy && this.table.modExists(\"groupRows\")) {\n\t\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\n\t\t\t}\n\n\t\t\tthis._rebindRow(action.component, newRow);\n\t\t},\n\n\t\trowDelete: function rowDelete(action) {\n\t\t\taction.component.deleteActual();\n\t\t},\n\n\t\trowMove: function rowMove(action) {\n\t\t\tthis.table.rowManager.moveRowActual(action.component, this.table.rowManager.rows[action.data.posTo], action.data.after);\n\t\t\tthis.table.rowManager.redraw();\n\t\t}\n\t};\n\n\t//rebind rows to new element after deletion\n\tHistory.prototype._rebindRow = function (oldRow, newRow) {\n\t\tthis.history.forEach(function (action) {\n\t\t\tif (action.component instanceof Row) {\n\t\t\t\tif (action.component === oldRow) {\n\t\t\t\t\taction.component = newRow;\n\t\t\t\t}\n\t\t\t} else if (action.component instanceof Cell) {\n\t\t\t\tif (action.component.row === oldRow) {\n\t\t\t\t\tvar field = action.component.column.getField();\n\n\t\t\t\t\tif (field) {\n\t\t\t\t\t\taction.component = newRow.getCell(field);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\tTabulator.prototype.registerModule(\"history\", History);\n\tvar HtmlTableImport = function HtmlTableImport(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.fieldIndex = [];\n\t\tthis.hasIndex = false;\n\t};\n\n\tHtmlTableImport.prototype.parseTable = function () {\n\t\tvar self = this,\n\t\t    element = self.table.element,\n\t\t    options = self.table.options,\n\t\t    columns = options.columns,\n\t\t    headers = element.getElementsByTagName(\"th\"),\n\t\t    rows = element.getElementsByTagName(\"tbody\")[0],\n\t\t    data = [],\n\t\t    newTable;\n\n\t\tself.hasIndex = false;\n\n\t\tself.table.options.htmlImporting.call(this.table);\n\n\t\trows = rows ? rows.getElementsByTagName(\"tr\") : [];\n\n\t\t//check for tablator inline options\n\t\tself._extractOptions(element, options);\n\n\t\tif (headers.length) {\n\t\t\tself._extractHeaders(headers, rows);\n\t\t} else {\n\t\t\tself._generateBlankHeaders(headers, rows);\n\t\t}\n\n\t\t//iterate through table rows and build data set\n\t\tfor (var index = 0; index < rows.length; index++) {\n\t\t\tvar row = rows[index],\n\t\t\t    cells = row.getElementsByTagName(\"td\"),\n\t\t\t    item = {};\n\n\t\t\t//create index if the dont exist in table\n\t\t\tif (!self.hasIndex) {\n\t\t\t\titem[options.index] = index;\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < cells.length; i++) {\n\t\t\t\tvar cell = cells[i];\n\t\t\t\tif (typeof this.fieldIndex[i] !== \"undefined\") {\n\t\t\t\t\titem[this.fieldIndex[i]] = cell.innerHTML;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//add row data to item\n\t\t\tdata.push(item);\n\t\t}\n\n\t\t//create new element\n\t\tvar newElement = document.createElement(\"div\");\n\n\t\t//transfer attributes to new element\n\t\tvar attributes = element.attributes;\n\n\t\t// loop through attributes and apply them on div\n\n\t\tfor (var i in attributes) {\n\t\t\tif (_typeof(attributes[i]) == \"object\") {\n\t\t\t\tnewElement.setAttribute(attributes[i].name, attributes[i].value);\n\t\t\t}\n\t\t}\n\n\t\t// replace table with div element\n\t\telement.parentNode.replaceChild(newElement, element);\n\n\t\toptions.data = data;\n\n\t\tself.table.options.htmlImported.call(this.table);\n\n\t\t// // newElement.tabulator(options);\n\n\t\tthis.table.element = newElement;\n\t};\n\n\t//extract tabulator attribute options\n\tHtmlTableImport.prototype._extractOptions = function (element, options, defaultOptions) {\n\t\tvar attributes = element.attributes;\n\t\tvar optionsArr = defaultOptions ? Object.assign([], defaultOptions) : Object.keys(options);\n\t\tvar optionsList = {};\n\n\t\toptionsArr.forEach(function (item) {\n\t\t\toptionsList[item.toLowerCase()] = item;\n\t\t});\n\n\t\tfor (var index in attributes) {\n\t\t\tvar attrib = attributes[index];\n\t\t\tvar name;\n\n\t\t\tif (attrib && (typeof attrib === 'undefined' ? 'undefined' : _typeof(attrib)) == \"object\" && attrib.name && attrib.name.indexOf(\"tabulator-\") === 0) {\n\t\t\t\tname = attrib.name.replace(\"tabulator-\", \"\");\n\n\t\t\t\tif (typeof optionsList[name] !== \"undefined\") {\n\t\t\t\t\toptions[optionsList[name]] = this._attribValue(attrib.value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t//get value of attribute\n\tHtmlTableImport.prototype._attribValue = function (value) {\n\t\tif (value === \"true\") {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (value === \"false\") {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn value;\n\t};\n\n\t//find column if it has already been defined\n\tHtmlTableImport.prototype._findCol = function (title) {\n\t\tvar match = this.table.options.columns.find(function (column) {\n\t\t\treturn column.title === title;\n\t\t});\n\n\t\treturn match || false;\n\t};\n\n\t//extract column from headers\n\tHtmlTableImport.prototype._extractHeaders = function (headers, rows) {\n\t\tfor (var index = 0; index < headers.length; index++) {\n\t\t\tvar header = headers[index],\n\t\t\t    exists = false,\n\t\t\t    col = this._findCol(header.textContent),\n\t\t\t    width,\n\t\t\t    attributes;\n\n\t\t\tif (col) {\n\t\t\t\texists = true;\n\t\t\t} else {\n\t\t\t\tcol = { title: header.textContent.trim() };\n\t\t\t}\n\n\t\t\tif (!col.field) {\n\t\t\t\tcol.field = header.textContent.trim().toLowerCase().replace(\" \", \"_\");\n\t\t\t}\n\n\t\t\twidth = header.getAttribute(\"width\");\n\n\t\t\tif (width && !col.width) {\n\t\t\t\tcol.width = width;\n\t\t\t}\n\n\t\t\t//check for tablator inline options\n\t\t\tattributes = header.attributes;\n\n\t\t\t// //check for tablator inline options\n\t\t\tthis._extractOptions(header, col, Column.prototype.defaultOptionList);\n\n\t\t\tthis.fieldIndex[index] = col.field;\n\n\t\t\tif (col.field == this.table.options.index) {\n\t\t\t\tthis.hasIndex = true;\n\t\t\t}\n\n\t\t\tif (!exists) {\n\t\t\t\tthis.table.options.columns.push(col);\n\t\t\t}\n\t\t}\n\t};\n\n\t//generate blank headers\n\tHtmlTableImport.prototype._generateBlankHeaders = function (headers, rows) {\n\t\tfor (var index = 0; index < headers.length; index++) {\n\t\t\tvar header = headers[index],\n\t\t\t    col = { title: \"\", field: \"col\" + index };\n\n\t\t\tthis.fieldIndex[index] = col.field;\n\n\t\t\tvar width = header.getAttribute(\"width\");\n\n\t\t\tif (width) {\n\t\t\t\tcol.width = width;\n\t\t\t}\n\n\t\t\tthis.table.options.columns.push(col);\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"htmlTableImport\", HtmlTableImport);\n\tvar Keybindings = function Keybindings(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.watchKeys = null;\n\t\tthis.pressedKeys = null;\n\t\tthis.keyupBinding = false;\n\t\tthis.keydownBinding = false;\n\t};\n\n\tKeybindings.prototype.initialize = function () {\n\t\tvar bindings = this.table.options.keybindings,\n\t\t    mergedBindings = {};\n\n\t\tthis.watchKeys = {};\n\t\tthis.pressedKeys = [];\n\n\t\tif (bindings !== false) {\n\n\t\t\tfor (var key in this.bindings) {\n\t\t\t\tmergedBindings[key] = this.bindings[key];\n\t\t\t}\n\n\t\t\tif (Object.keys(bindings).length) {\n\n\t\t\t\tfor (var _key in bindings) {\n\t\t\t\t\tmergedBindings[_key] = bindings[_key];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.mapBindings(mergedBindings);\n\t\t\tthis.bindEvents();\n\t\t}\n\t};\n\n\tKeybindings.prototype.mapBindings = function (bindings) {\n\t\tvar _this62 = this;\n\n\t\tvar self = this;\n\n\t\tvar _loop2 = function _loop2(key) {\n\n\t\t\tif (_this62.actions[key]) {\n\n\t\t\t\tif (bindings[key]) {\n\n\t\t\t\t\tif (_typeof(bindings[key]) !== \"object\") {\n\t\t\t\t\t\tbindings[key] = [bindings[key]];\n\t\t\t\t\t}\n\n\t\t\t\t\tbindings[key].forEach(function (binding) {\n\t\t\t\t\t\tself.mapBinding(key, binding);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Key Binding Error - no such action:\", key);\n\t\t\t}\n\t\t};\n\n\t\tfor (var key in bindings) {\n\t\t\t_loop2(key);\n\t\t}\n\t};\n\n\tKeybindings.prototype.mapBinding = function (action, symbolsList) {\n\t\tvar self = this;\n\n\t\tvar binding = {\n\t\t\taction: this.actions[action],\n\t\t\tkeys: [],\n\t\t\tctrl: false,\n\t\t\tshift: false,\n\t\t\tmeta: false\n\t\t};\n\n\t\tvar symbols = symbolsList.toString().toLowerCase().split(\" \").join(\"\").split(\"+\");\n\n\t\tsymbols.forEach(function (symbol) {\n\t\t\tswitch (symbol) {\n\t\t\t\tcase \"ctrl\":\n\t\t\t\t\tbinding.ctrl = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"shift\":\n\t\t\t\t\tbinding.shift = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"meta\":\n\t\t\t\t\tbinding.meta = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tsymbol = parseInt(symbol);\n\t\t\t\t\tbinding.keys.push(symbol);\n\n\t\t\t\t\tif (!self.watchKeys[symbol]) {\n\t\t\t\t\t\tself.watchKeys[symbol] = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tself.watchKeys[symbol].push(binding);\n\t\t\t}\n\t\t});\n\t};\n\n\tKeybindings.prototype.bindEvents = function () {\n\t\tvar self = this;\n\n\t\tthis.keyupBinding = function (e) {\n\t\t\tvar code = e.keyCode;\n\t\t\tvar bindings = self.watchKeys[code];\n\n\t\t\tif (bindings) {\n\n\t\t\t\tself.pressedKeys.push(code);\n\n\t\t\t\tbindings.forEach(function (binding) {\n\t\t\t\t\tself.checkBinding(e, binding);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tthis.keydownBinding = function (e) {\n\t\t\tvar code = e.keyCode;\n\t\t\tvar bindings = self.watchKeys[code];\n\n\t\t\tif (bindings) {\n\n\t\t\t\tvar index = self.pressedKeys.indexOf(code);\n\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tself.pressedKeys.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.table.element.addEventListener(\"keydown\", this.keyupBinding);\n\n\t\tthis.table.element.addEventListener(\"keyup\", this.keydownBinding);\n\t};\n\n\tKeybindings.prototype.clearBindings = function () {\n\t\tif (this.keyupBinding) {\n\t\t\tthis.table.element.removeEventListener(\"keydown\", this.keyupBinding);\n\t\t}\n\n\t\tif (this.keydownBinding) {\n\t\t\tthis.table.element.removeEventListener(\"keyup\", this.keydownBinding);\n\t\t}\n\t};\n\n\tKeybindings.prototype.checkBinding = function (e, binding) {\n\t\tvar self = this,\n\t\t    match = true;\n\n\t\tif (e.ctrlKey == binding.ctrl && e.shiftKey == binding.shift && e.metaKey == binding.meta) {\n\t\t\tbinding.keys.forEach(function (key) {\n\t\t\t\tvar index = self.pressedKeys.indexOf(key);\n\n\t\t\t\tif (index == -1) {\n\t\t\t\t\tmatch = false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (match) {\n\t\t\t\tbinding.action.call(self, e);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t};\n\n\t//default bindings\n\tKeybindings.prototype.bindings = {\n\t\tnavPrev: \"shift + 9\",\n\t\tnavNext: 9,\n\t\tnavUp: 38,\n\t\tnavDown: 40,\n\t\tscrollPageUp: 33,\n\t\tscrollPageDown: 34,\n\t\tscrollToStart: 36,\n\t\tscrollToEnd: 35,\n\t\tundo: \"ctrl + 90\",\n\t\tredo: \"ctrl + 89\",\n\t\tcopyToClipboard: \"ctrl + 67\"\n\t};\n\n\t//default actions\n\tKeybindings.prototype.actions = {\n\t\tkeyBlock: function keyBlock(e) {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t},\n\t\tscrollPageUp: function scrollPageUp(e) {\n\t\t\tvar rowManager = this.table.rowManager,\n\t\t\t    newPos = rowManager.scrollTop - rowManager.height,\n\t\t\t    scrollMax = rowManager.element.scrollHeight;\n\n\t\t\te.preventDefault();\n\n\t\t\tif (rowManager.displayRowsCount) {\n\t\t\t\tif (newPos >= 0) {\n\t\t\t\t\trowManager.element.scrollTop = newPos;\n\t\t\t\t} else {\n\t\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.table.element.focus();\n\t\t},\n\t\tscrollPageDown: function scrollPageDown(e) {\n\t\t\tvar rowManager = this.table.rowManager,\n\t\t\t    newPos = rowManager.scrollTop + rowManager.height,\n\t\t\t    scrollMax = rowManager.element.scrollHeight;\n\n\t\t\te.preventDefault();\n\n\t\t\tif (rowManager.displayRowsCount) {\n\t\t\t\tif (newPos <= scrollMax) {\n\t\t\t\t\trowManager.element.scrollTop = newPos;\n\t\t\t\t} else {\n\t\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.table.element.focus();\n\t\t},\n\t\tscrollToStart: function scrollToStart(e) {\n\t\t\tvar rowManager = this.table.rowManager;\n\n\t\t\te.preventDefault();\n\n\t\t\tif (rowManager.displayRowsCount) {\n\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n\t\t\t}\n\n\t\t\tthis.table.element.focus();\n\t\t},\n\t\tscrollToEnd: function scrollToEnd(e) {\n\t\t\tvar rowManager = this.table.rowManager;\n\n\t\t\te.preventDefault();\n\n\t\t\tif (rowManager.displayRowsCount) {\n\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n\t\t\t}\n\n\t\t\tthis.table.element.focus();\n\t\t},\n\t\tnavPrev: function navPrev(e) {\n\t\t\tvar cell = false;\n\n\t\t\tif (this.table.modExists(\"edit\")) {\n\t\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\t\tif (cell) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tcell.nav().prev();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tnavNext: function navNext(e) {\n\t\t\tvar cell = false;\n\t\t\tvar newRow = this.table.options.tabEndNewRow;\n\t\t\tvar nav;\n\n\t\t\tif (this.table.modExists(\"edit\")) {\n\t\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\t\tif (cell) {\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tnav = cell.nav();\n\n\t\t\t\t\tif (!nav.next()) {\n\t\t\t\t\t\tif (newRow) {\n\n\t\t\t\t\t\t\tcell.getElement().firstChild.blur();\n\n\t\t\t\t\t\t\tif (newRow === true) {\n\t\t\t\t\t\t\t\tnewRow = this.table.addRow({});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (typeof newRow == \"function\") {\n\t\t\t\t\t\t\t\t\tnewRow = this.table.addRow(newRow(cell.row.getComponent()));\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tnewRow = this.table.addRow(Object.assign({}, newRow));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tnewRow.then(function () {\n\t\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\t\tnav.next();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tnavLeft: function navLeft(e) {\n\t\t\tvar cell = false;\n\n\t\t\tif (this.table.modExists(\"edit\")) {\n\t\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\t\tif (cell) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tcell.nav().left();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tnavRight: function navRight(e) {\n\t\t\tvar cell = false;\n\n\t\t\tif (this.table.modExists(\"edit\")) {\n\t\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\t\tif (cell) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tcell.nav().right();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tnavUp: function navUp(e) {\n\t\t\tvar cell = false;\n\n\t\t\tif (this.table.modExists(\"edit\")) {\n\t\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\t\tif (cell) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tcell.nav().up();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tnavDown: function navDown(e) {\n\t\t\tvar cell = false;\n\n\t\t\tif (this.table.modExists(\"edit\")) {\n\t\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\t\tif (cell) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tcell.nav().down();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tundo: function undo(e) {\n\t\t\tvar cell = false;\n\t\t\tif (this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")) {\n\n\t\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\t\tif (!cell) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.table.modules.history.undo();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tredo: function redo(e) {\n\t\t\tvar cell = false;\n\t\t\tif (this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")) {\n\n\t\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\t\tif (!cell) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.table.modules.history.redo();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tcopyToClipboard: function copyToClipboard(e) {\n\t\t\tif (!this.table.modules.edit.currentCell) {\n\t\t\t\tif (this.table.modExists(\"clipboard\", true)) {\n\t\t\t\t\tthis.table.modules.clipboard.copy(false, true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"keybindings\", Keybindings);\n\tvar Menu = function Menu(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.menuEl = false;\n\t\tthis.blurEvent = this.hideMenu.bind(this);\n\t\tthis.escEvent = this.escMenu.bind(this);\n\t\tthis.nestedMenuBlock = false;\n\t};\n\n\tMenu.prototype.initializeColumnHeader = function (column) {\n\t\tvar _this63 = this;\n\n\t\tvar headerMenuEl;\n\n\t\tif (column.definition.headerContextMenu) {\n\t\t\tcolumn.getElement().addEventListener(\"contextmenu\", function (e) {\n\t\t\t\tvar menu = typeof column.definition.headerContextMenu == \"function\" ? column.definition.headerContextMenu(column.getComponent()) : column.definition.headerContextMenu;\n\n\t\t\t\te.preventDefault();\n\n\t\t\t\t_this63.loadMenu(e, column, menu);\n\t\t\t});\n\t\t}\n\n\t\tif (column.definition.headerMenu) {\n\n\t\t\theaderMenuEl = document.createElement(\"span\");\n\t\t\theaderMenuEl.classList.add(\"tabulator-header-menu-button\");\n\t\t\theaderMenuEl.innerHTML = \"&vellip;\";\n\n\t\t\theaderMenuEl.addEventListener(\"click\", function (e) {\n\t\t\t\tvar menu = typeof column.definition.headerMenu == \"function\" ? column.definition.headerMenu(column.getComponent()) : column.definition.headerMenu;\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\n\t\t\t\t_this63.loadMenu(e, column, menu);\n\t\t\t});\n\n\t\t\tcolumn.titleElement.insertBefore(headerMenuEl, column.titleElement.firstChild);\n\t\t}\n\t};\n\n\tMenu.prototype.initializeCell = function (cell) {\n\t\tvar _this64 = this;\n\n\t\tcell.getElement().addEventListener(\"contextmenu\", function (e) {\n\t\t\tvar menu = typeof cell.column.definition.contextMenu == \"function\" ? cell.column.definition.contextMenu(cell.getComponent()) : cell.column.definition.contextMenu;\n\n\t\t\tif (menu) {\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t}\n\n\t\t\t_this64.loadMenu(e, cell, menu);\n\t\t});\n\t};\n\n\tMenu.prototype.initializeRow = function (row) {\n\t\tvar _this65 = this;\n\n\t\trow.getElement().addEventListener(\"contextmenu\", function (e) {\n\t\t\tvar menu = typeof _this65.table.options.rowContextMenu == \"function\" ? _this65.table.options.rowContextMenu(row.getComponent()) : _this65.table.options.rowContextMenu;\n\n\t\t\t_this65.loadMenu(e, row, menu);\n\t\t});\n\t};\n\n\tMenu.prototype.initializeGroup = function (group) {\n\t\tvar _this66 = this;\n\n\t\tgroup.getElement().addEventListener(\"contextmenu\", function (e) {\n\t\t\tvar menu = typeof _this66.table.options.groupContextMenu == \"function\" ? _this66.table.options.groupContextMenu(group.getComponent()) : _this66.table.options.groupContextMenu;\n\n\t\t\t_this66.loadMenu(e, group, menu);\n\t\t});\n\t};\n\n\tMenu.prototype.loadMenu = function (e, component, menu) {\n\t\tvar _this67 = this;\n\n\t\tvar docHeight = Math.max(document.body.offsetHeight, window.innerHeight);\n\n\t\te.preventDefault();\n\n\t\t//abort if no menu set\n\t\tif (!menu || !menu.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.nestedMenuBlock) {\n\t\t\t//abort if child menu already open\n\t\t\tif (this.isOpen()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.nestedMenuBlock = setTimeout(function () {\n\t\t\t\t_this67.nestedMenuBlock = false;\n\t\t\t}, 100);\n\t\t}\n\n\t\tthis.hideMenu();\n\n\t\tthis.menuEl = document.createElement(\"div\");\n\t\tthis.menuEl.classList.add(\"tabulator-menu\");\n\n\t\tmenu.forEach(function (item) {\n\t\t\tvar itemEl = document.createElement(\"div\");\n\t\t\tvar label = item.label;\n\t\t\tvar disabled = item.disabled;\n\n\t\t\tif (item.separator) {\n\t\t\t\titemEl.classList.add(\"tabulator-menu-separator\");\n\t\t\t} else {\n\t\t\t\titemEl.classList.add(\"tabulator-menu-item\");\n\n\t\t\t\tif (typeof label == \"function\") {\n\t\t\t\t\tlabel = label(component.getComponent());\n\t\t\t\t}\n\n\t\t\t\tif (label instanceof Node) {\n\t\t\t\t\titemEl.appendChild(label);\n\t\t\t\t} else {\n\t\t\t\t\titemEl.innerHTML = label;\n\t\t\t\t}\n\n\t\t\t\tif (typeof disabled == \"function\") {\n\t\t\t\t\tdisabled = disabled(component.getComponent());\n\t\t\t\t}\n\n\t\t\t\tif (disabled) {\n\t\t\t\t\titemEl.classList.add(\"tabulator-menu-item-disabled\");\n\t\t\t\t\titemEl.addEventListener(\"click\", function (e) {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\titemEl.addEventListener(\"click\", function (e) {\n\t\t\t\t\t\t_this67.hideMenu();\n\t\t\t\t\t\titem.action(e, component.getComponent());\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t_this67.menuEl.appendChild(itemEl);\n\t\t});\n\n\t\tthis.menuEl.style.top = e.pageY + \"px\";\n\t\tthis.menuEl.style.left = e.pageX + \"px\";\n\n\t\tdocument.body.addEventListener(\"click\", this.blurEvent);\n\t\tthis.table.rowManager.element.addEventListener(\"scroll\", this.blurEvent);\n\n\t\tsetTimeout(function () {\n\t\t\tdocument.body.addEventListener(\"contextmenu\", _this67.blurEvent);\n\t\t}, 100);\n\n\t\tdocument.body.addEventListener(\"keydown\", this.escEvent);\n\n\t\tdocument.body.appendChild(this.menuEl);\n\n\t\t//move menu to start on right edge if it is too close to the edge of the screen\n\t\tif (e.pageX + this.menuEl.offsetWidth >= document.body.offsetWidth) {\n\t\t\tthis.menuEl.style.left = \"\";\n\t\t\tthis.menuEl.style.right = document.body.offsetWidth - e.pageX + \"px\";\n\t\t}\n\n\t\t//move menu to start on bottom edge if it is too close to the edge of the screen\n\t\tif (e.pageY + this.menuEl.offsetHeight >= docHeight) {\n\t\t\tthis.menuEl.style.top = \"\";\n\t\t\tthis.menuEl.style.bottom = docHeight - e.pageY + \"px\";\n\t\t}\n\t};\n\n\tMenu.prototype.isOpen = function () {\n\t\treturn !!this.menuEl.parentNode;\n\t};\n\n\tMenu.prototype.escMenu = function (e) {\n\t\tif (e.keyCode == 27) {\n\t\t\tthis.hideMenu();\n\t\t}\n\t};\n\n\tMenu.prototype.hideMenu = function () {\n\t\tif (this.menuEl.parentNode) {\n\t\t\tthis.menuEl.parentNode.removeChild(this.menuEl);\n\t\t}\n\n\t\tif (this.escEvent) {\n\t\t\tdocument.body.removeEventListener(\"keydown\", this.escEvent);\n\t\t}\n\n\t\tif (this.blurEvent) {\n\t\t\tdocument.body.removeEventListener(\"click\", this.blurEvent);\n\t\t\tdocument.body.removeEventListener(\"contextmenu\", this.blurEvent);\n\t\t\tthis.table.rowManager.element.removeEventListener(\"scroll\", this.blurEvent);\n\t\t}\n\t};\n\n\t//default accessors\n\tMenu.prototype.menus = {};\n\n\tTabulator.prototype.registerModule(\"menu\", Menu);\n\tvar MoveColumns = function MoveColumns(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.placeholderElement = this.createPlaceholderElement();\n\t\tthis.hoverElement = false; //floating column header element\n\t\tthis.checkTimeout = false; //click check timeout holder\n\t\tthis.checkPeriod = 250; //period to wait on mousedown to consider this a move and not a click\n\t\tthis.moving = false; //currently moving column\n\t\tthis.toCol = false; //destination column\n\t\tthis.toColAfter = false; //position of moving column relative to the desitnation column\n\t\tthis.startX = 0; //starting position within header element\n\t\tthis.autoScrollMargin = 40; //auto scroll on edge when within margin\n\t\tthis.autoScrollStep = 5; //auto scroll distance in pixels\n\t\tthis.autoScrollTimeout = false; //auto scroll timeout\n\t\tthis.touchMove = false;\n\n\t\tthis.moveHover = this.moveHover.bind(this);\n\t\tthis.endMove = this.endMove.bind(this);\n\t};\n\n\tMoveColumns.prototype.createPlaceholderElement = function () {\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-col\");\n\t\tel.classList.add(\"tabulator-col-placeholder\");\n\n\t\treturn el;\n\t};\n\n\tMoveColumns.prototype.initializeColumn = function (column) {\n\t\tvar self = this,\n\t\t    config = {},\n\t\t    colEl;\n\n\t\tif (!column.modules.frozen) {\n\n\t\t\tcolEl = column.getElement();\n\n\t\t\tconfig.mousemove = function (e) {\n\t\t\t\tif (column.parent === self.moving.parent) {\n\t\t\t\t\tif ((self.touchMove ? e.touches[0].pageX : e.pageX) - Tabulator.prototype.helpers.elOffset(colEl).left + self.table.columnManager.element.scrollLeft > column.getWidth() / 2) {\n\t\t\t\t\t\tif (self.toCol !== column || !self.toColAfter) {\n\t\t\t\t\t\t\tcolEl.parentNode.insertBefore(self.placeholderElement, colEl.nextSibling);\n\t\t\t\t\t\t\tself.moveColumn(column, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (self.toCol !== column || self.toColAfter) {\n\t\t\t\t\t\t\tcolEl.parentNode.insertBefore(self.placeholderElement, colEl);\n\t\t\t\t\t\t\tself.moveColumn(column, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.bind(self);\n\n\t\t\tcolEl.addEventListener(\"mousedown\", function (e) {\n\t\t\t\tself.touchMove = false;\n\t\t\t\tif (e.which === 1) {\n\t\t\t\t\tself.checkTimeout = setTimeout(function () {\n\t\t\t\t\t\tself.startMove(e, column);\n\t\t\t\t\t}, self.checkPeriod);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tcolEl.addEventListener(\"mouseup\", function (e) {\n\t\t\t\tif (e.which === 1) {\n\t\t\t\t\tif (self.checkTimeout) {\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tself.bindTouchEvents(column);\n\t\t}\n\n\t\tcolumn.modules.moveColumn = config;\n\t};\n\n\tMoveColumns.prototype.bindTouchEvents = function (column) {\n\t\tvar self = this,\n\t\t    colEl = column.getElement(),\n\t\t    startXMove = false,\n\t\t    //shifting center position of the cell\n\t\tdir = false,\n\t\t    currentCol,\n\t\t    nextCol,\n\t\t    prevCol,\n\t\t    nextColWidth,\n\t\t    prevColWidth,\n\t\t    nextColWidthLast,\n\t\t    prevColWidthLast;\n\n\t\tcolEl.addEventListener(\"touchstart\", function (e) {\n\t\t\tself.checkTimeout = setTimeout(function () {\n\t\t\t\tself.touchMove = true;\n\t\t\t\tcurrentCol = column;\n\t\t\t\tnextCol = column.nextColumn();\n\t\t\t\tnextColWidth = nextCol ? nextCol.getWidth() / 2 : 0;\n\t\t\t\tprevCol = column.prevColumn();\n\t\t\t\tprevColWidth = prevCol ? prevCol.getWidth() / 2 : 0;\n\t\t\t\tnextColWidthLast = 0;\n\t\t\t\tprevColWidthLast = 0;\n\t\t\t\tstartXMove = false;\n\n\t\t\t\tself.startMove(e, column);\n\t\t\t}, self.checkPeriod);\n\t\t}, { passive: true });\n\n\t\tcolEl.addEventListener(\"touchmove\", function (e) {\n\t\t\tvar halfCol, diff, moveToCol;\n\n\t\t\tif (self.moving) {\n\t\t\t\tself.moveHover(e);\n\n\t\t\t\tif (!startXMove) {\n\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t}\n\n\t\t\t\tdiff = e.touches[0].pageX - startXMove;\n\n\t\t\t\tif (diff > 0) {\n\t\t\t\t\tif (nextCol && diff - nextColWidthLast > nextColWidth) {\n\t\t\t\t\t\tmoveToCol = nextCol;\n\n\t\t\t\t\t\tif (moveToCol !== column) {\n\t\t\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t\t\t\tmoveToCol.getElement().parentNode.insertBefore(self.placeholderElement, moveToCol.getElement().nextSibling);\n\t\t\t\t\t\t\tself.moveColumn(moveToCol, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (prevCol && -diff - prevColWidthLast > prevColWidth) {\n\t\t\t\t\t\tmoveToCol = prevCol;\n\n\t\t\t\t\t\tif (moveToCol !== column) {\n\t\t\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t\t\t\tmoveToCol.getElement().parentNode.insertBefore(self.placeholderElement, moveToCol.getElement());\n\t\t\t\t\t\t\tself.moveColumn(moveToCol, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (moveToCol) {\n\t\t\t\t\tcurrentCol = moveToCol;\n\t\t\t\t\tnextCol = moveToCol.nextColumn();\n\t\t\t\t\tnextColWidthLast = nextColWidth;\n\t\t\t\t\tnextColWidth = nextCol ? nextCol.getWidth() / 2 : 0;\n\t\t\t\t\tprevCol = moveToCol.prevColumn();\n\t\t\t\t\tprevColWidthLast = prevColWidth;\n\t\t\t\t\tprevColWidth = prevCol ? prevCol.getWidth() / 2 : 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}, { passive: true });\n\n\t\tcolEl.addEventListener(\"touchend\", function (e) {\n\t\t\tif (self.checkTimeout) {\n\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t}\n\t\t\tif (self.moving) {\n\t\t\t\tself.endMove(e);\n\t\t\t}\n\t\t});\n\t};\n\n\tMoveColumns.prototype.startMove = function (e, column) {\n\t\tvar element = column.getElement();\n\n\t\tthis.moving = column;\n\t\tthis.startX = (this.touchMove ? e.touches[0].pageX : e.pageX) - Tabulator.prototype.helpers.elOffset(element).left;\n\n\t\tthis.table.element.classList.add(\"tabulator-block-select\");\n\n\t\t//create placeholder\n\t\tthis.placeholderElement.style.width = column.getWidth() + \"px\";\n\t\tthis.placeholderElement.style.height = column.getHeight() + \"px\";\n\n\t\telement.parentNode.insertBefore(this.placeholderElement, element);\n\t\telement.parentNode.removeChild(element);\n\n\t\t//create hover element\n\t\tthis.hoverElement = element.cloneNode(true);\n\t\tthis.hoverElement.classList.add(\"tabulator-moving\");\n\n\t\tthis.table.columnManager.getElement().appendChild(this.hoverElement);\n\n\t\tthis.hoverElement.style.left = \"0\";\n\t\tthis.hoverElement.style.bottom = \"0\";\n\n\t\tif (!this.touchMove) {\n\t\t\tthis._bindMouseMove();\n\n\t\t\tdocument.body.addEventListener(\"mousemove\", this.moveHover);\n\t\t\tdocument.body.addEventListener(\"mouseup\", this.endMove);\n\t\t}\n\n\t\tthis.moveHover(e);\n\t};\n\n\tMoveColumns.prototype._bindMouseMove = function () {\n\t\tthis.table.columnManager.columnsByIndex.forEach(function (column) {\n\t\t\tif (column.modules.moveColumn.mousemove) {\n\t\t\t\tcolumn.getElement().addEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n\t\t\t}\n\t\t});\n\t};\n\n\tMoveColumns.prototype._unbindMouseMove = function () {\n\t\tthis.table.columnManager.columnsByIndex.forEach(function (column) {\n\t\t\tif (column.modules.moveColumn.mousemove) {\n\t\t\t\tcolumn.getElement().removeEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n\t\t\t}\n\t\t});\n\t};\n\n\tMoveColumns.prototype.moveColumn = function (column, after) {\n\t\tvar movingCells = this.moving.getCells();\n\n\t\tthis.toCol = column;\n\t\tthis.toColAfter = after;\n\n\t\tif (after) {\n\t\t\tcolumn.getCells().forEach(function (cell, i) {\n\t\t\t\tvar cellEl = cell.getElement();\n\t\t\t\tcellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl.nextSibling);\n\t\t\t});\n\t\t} else {\n\t\t\tcolumn.getCells().forEach(function (cell, i) {\n\t\t\t\tvar cellEl = cell.getElement();\n\t\t\t\tcellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl);\n\t\t\t});\n\t\t}\n\t};\n\n\tMoveColumns.prototype.endMove = function (e) {\n\t\tif (e.which === 1 || this.touchMove) {\n\t\t\tthis._unbindMouseMove();\n\n\t\t\tthis.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n\t\t\tthis.placeholderElement.parentNode.removeChild(this.placeholderElement);\n\t\t\tthis.hoverElement.parentNode.removeChild(this.hoverElement);\n\n\t\t\tthis.table.element.classList.remove(\"tabulator-block-select\");\n\n\t\t\tif (this.toCol) {\n\t\t\t\tthis.table.columnManager.moveColumnActual(this.moving, this.toCol, this.toColAfter);\n\t\t\t}\n\n\t\t\tthis.moving = false;\n\t\t\tthis.toCol = false;\n\t\t\tthis.toColAfter = false;\n\n\t\t\tif (!this.touchMove) {\n\t\t\t\tdocument.body.removeEventListener(\"mousemove\", this.moveHover);\n\t\t\t\tdocument.body.removeEventListener(\"mouseup\", this.endMove);\n\t\t\t}\n\t\t}\n\t};\n\n\tMoveColumns.prototype.moveHover = function (e) {\n\t\tvar self = this,\n\t\t    columnHolder = self.table.columnManager.getElement(),\n\t\t    scrollLeft = columnHolder.scrollLeft,\n\t\t    xPos = (self.touchMove ? e.touches[0].pageX : e.pageX) - Tabulator.prototype.helpers.elOffset(columnHolder).left + scrollLeft,\n\t\t    scrollPos;\n\n\t\tself.hoverElement.style.left = xPos - self.startX + \"px\";\n\n\t\tif (xPos - scrollLeft < self.autoScrollMargin) {\n\t\t\tif (!self.autoScrollTimeout) {\n\t\t\t\tself.autoScrollTimeout = setTimeout(function () {\n\t\t\t\t\tscrollPos = Math.max(0, scrollLeft - 5);\n\t\t\t\t\tself.table.rowManager.getElement().scrollLeft = scrollPos;\n\t\t\t\t\tself.autoScrollTimeout = false;\n\t\t\t\t}, 1);\n\t\t\t}\n\t\t}\n\n\t\tif (scrollLeft + columnHolder.clientWidth - xPos < self.autoScrollMargin) {\n\t\t\tif (!self.autoScrollTimeout) {\n\t\t\t\tself.autoScrollTimeout = setTimeout(function () {\n\t\t\t\t\tscrollPos = Math.min(columnHolder.clientWidth, scrollLeft + 5);\n\t\t\t\t\tself.table.rowManager.getElement().scrollLeft = scrollPos;\n\t\t\t\t\tself.autoScrollTimeout = false;\n\t\t\t\t}, 1);\n\t\t\t}\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"moveColumn\", MoveColumns);\n\n\tvar MoveRows = function MoveRows(table) {\n\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.placeholderElement = this.createPlaceholderElement();\n\t\tthis.hoverElement = false; //floating row header element\n\t\tthis.checkTimeout = false; //click check timeout holder\n\t\tthis.checkPeriod = 150; //period to wait on mousedown to consider this a move and not a click\n\t\tthis.moving = false; //currently moving row\n\t\tthis.toRow = false; //destination row\n\t\tthis.toRowAfter = false; //position of moving row relative to the desitnation row\n\t\tthis.hasHandle = false; //row has handle instead of fully movable row\n\t\tthis.startY = 0; //starting Y position within header element\n\t\tthis.startX = 0; //starting X position within header element\n\n\t\tthis.moveHover = this.moveHover.bind(this);\n\t\tthis.endMove = this.endMove.bind(this);\n\t\tthis.tableRowDropEvent = false;\n\n\t\tthis.touchMove = false;\n\n\t\tthis.connection = false;\n\t\tthis.connectionSelectorsTables = false;\n\t\tthis.connectionSelectorsElements = false;\n\t\tthis.connectionElements = [];\n\t\tthis.connections = [];\n\n\t\tthis.connectedTable = false;\n\t\tthis.connectedRow = false;\n\t};\n\n\tMoveRows.prototype.createPlaceholderElement = function () {\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-row\");\n\t\tel.classList.add(\"tabulator-row-placeholder\");\n\n\t\treturn el;\n\t};\n\n\tMoveRows.prototype.initialize = function (handle) {\n\t\tthis.connectionSelectorsTables = this.table.options.movableRowsConnectedTables;\n\t\tthis.connectionSelectorsElements = this.table.options.movableRowsConnectedElements;\n\n\t\tthis.connection = this.connectionSelectorsTables || this.connectionSelectorsElements;\n\t};\n\n\tMoveRows.prototype.setHandle = function (handle) {\n\t\tthis.hasHandle = handle;\n\t};\n\n\tMoveRows.prototype.initializeGroupHeader = function (group) {\n\t\tvar self = this,\n\t\t    config = {},\n\t\t    rowEl;\n\n\t\t//inter table drag drop\n\t\tconfig.mouseup = function (e) {\n\t\t\tself.tableRowDrop(e, row);\n\t\t}.bind(self);\n\n\t\t//same table drag drop\n\t\tconfig.mousemove = function (e) {\n\t\t\tif (e.pageY - Tabulator.prototype.helpers.elOffset(group.element).top + self.table.rowManager.element.scrollTop > group.getHeight() / 2) {\n\t\t\t\tif (self.toRow !== group || !self.toRowAfter) {\n\t\t\t\t\tvar rowEl = group.getElement();\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n\t\t\t\t\tself.moveRow(group, true);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (self.toRow !== group || self.toRowAfter) {\n\t\t\t\t\tvar rowEl = group.getElement();\n\t\t\t\t\tif (rowEl.previousSibling) {\n\t\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n\t\t\t\t\t\tself.moveRow(group, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(self);\n\n\t\tgroup.modules.moveRow = config;\n\t};\n\n\tMoveRows.prototype.initializeRow = function (row) {\n\t\tvar self = this,\n\t\t    config = {},\n\t\t    rowEl;\n\n\t\t//inter table drag drop\n\t\tconfig.mouseup = function (e) {\n\t\t\tself.tableRowDrop(e, row);\n\t\t}.bind(self);\n\n\t\t//same table drag drop\n\t\tconfig.mousemove = function (e) {\n\t\t\tif (e.pageY - Tabulator.prototype.helpers.elOffset(row.element).top + self.table.rowManager.element.scrollTop > row.getHeight() / 2) {\n\t\t\t\tif (self.toRow !== row || !self.toRowAfter) {\n\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n\t\t\t\t\tself.moveRow(row, true);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (self.toRow !== row || self.toRowAfter) {\n\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n\t\t\t\t\tself.moveRow(row, false);\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(self);\n\n\t\tif (!this.hasHandle) {\n\n\t\t\trowEl = row.getElement();\n\n\t\t\trowEl.addEventListener(\"mousedown\", function (e) {\n\t\t\t\tif (e.which === 1) {\n\t\t\t\t\tself.checkTimeout = setTimeout(function () {\n\t\t\t\t\t\tself.startMove(e, row);\n\t\t\t\t\t}, self.checkPeriod);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\trowEl.addEventListener(\"mouseup\", function (e) {\n\t\t\t\tif (e.which === 1) {\n\t\t\t\t\tif (self.checkTimeout) {\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.bindTouchEvents(row, row.getElement());\n\t\t}\n\n\t\trow.modules.moveRow = config;\n\t};\n\n\tMoveRows.prototype.initializeCell = function (cell) {\n\t\tvar self = this,\n\t\t    cellEl = cell.getElement();\n\n\t\tcellEl.addEventListener(\"mousedown\", function (e) {\n\t\t\tif (e.which === 1) {\n\t\t\t\tself.checkTimeout = setTimeout(function () {\n\t\t\t\t\tself.startMove(e, cell.row);\n\t\t\t\t}, self.checkPeriod);\n\t\t\t}\n\t\t});\n\n\t\tcellEl.addEventListener(\"mouseup\", function (e) {\n\t\t\tif (e.which === 1) {\n\t\t\t\tif (self.checkTimeout) {\n\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.bindTouchEvents(cell.row, cell.getElement());\n\t};\n\n\tMoveRows.prototype.bindTouchEvents = function (row, element) {\n\t\tvar self = this,\n\t\t    startYMove = false,\n\t\t    //shifting center position of the cell\n\t\tdir = false,\n\t\t    currentRow,\n\t\t    nextRow,\n\t\t    prevRow,\n\t\t    nextRowHeight,\n\t\t    prevRowHeight,\n\t\t    nextRowHeightLast,\n\t\t    prevRowHeightLast;\n\n\t\telement.addEventListener(\"touchstart\", function (e) {\n\t\t\tself.checkTimeout = setTimeout(function () {\n\t\t\t\tself.touchMove = true;\n\t\t\t\tcurrentRow = row;\n\t\t\t\tnextRow = row.nextRow();\n\t\t\t\tnextRowHeight = nextRow ? nextRow.getHeight() / 2 : 0;\n\t\t\t\tprevRow = row.prevRow();\n\t\t\t\tprevRowHeight = prevRow ? prevRow.getHeight() / 2 : 0;\n\t\t\t\tnextRowHeightLast = 0;\n\t\t\t\tprevRowHeightLast = 0;\n\t\t\t\tstartYMove = false;\n\n\t\t\t\tself.startMove(e, row);\n\t\t\t}, self.checkPeriod);\n\t\t}, { passive: true });\n\t\tthis.moving, this.toRow, this.toRowAfter;\n\t\telement.addEventListener(\"touchmove\", function (e) {\n\n\t\t\tvar halfCol, diff, moveToRow;\n\n\t\t\tif (self.moving) {\n\t\t\t\te.preventDefault();\n\n\t\t\t\tself.moveHover(e);\n\n\t\t\t\tif (!startYMove) {\n\t\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t\t}\n\n\t\t\t\tdiff = e.touches[0].pageY - startYMove;\n\n\t\t\t\tif (diff > 0) {\n\t\t\t\t\tif (nextRow && diff - nextRowHeightLast > nextRowHeight) {\n\t\t\t\t\t\tmoveToRow = nextRow;\n\n\t\t\t\t\t\tif (moveToRow !== row) {\n\t\t\t\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t\t\t\t\tmoveToRow.getElement().parentNode.insertBefore(self.placeholderElement, moveToRow.getElement().nextSibling);\n\t\t\t\t\t\t\tself.moveRow(moveToRow, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (prevRow && -diff - prevRowHeightLast > prevRowHeight) {\n\t\t\t\t\t\tmoveToRow = prevRow;\n\n\t\t\t\t\t\tif (moveToRow !== row) {\n\t\t\t\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t\t\t\t\tmoveToRow.getElement().parentNode.insertBefore(self.placeholderElement, moveToRow.getElement());\n\t\t\t\t\t\t\tself.moveRow(moveToRow, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (moveToRow) {\n\t\t\t\t\tcurrentRow = moveToRow;\n\t\t\t\t\tnextRow = moveToRow.nextRow();\n\t\t\t\t\tnextRowHeightLast = nextRowHeight;\n\t\t\t\t\tnextRowHeight = nextRow ? nextRow.getHeight() / 2 : 0;\n\t\t\t\t\tprevRow = moveToRow.prevRow();\n\t\t\t\t\tprevRowHeightLast = prevRowHeight;\n\t\t\t\t\tprevRowHeight = prevRow ? prevRow.getHeight() / 2 : 0;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\telement.addEventListener(\"touchend\", function (e) {\n\t\t\tif (self.checkTimeout) {\n\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t}\n\t\t\tif (self.moving) {\n\t\t\t\tself.endMove(e);\n\t\t\t\tself.touchMove = false;\n\t\t\t}\n\t\t});\n\t};\n\n\tMoveRows.prototype._bindMouseMove = function () {\n\t\tvar self = this;\n\n\t\tself.table.rowManager.getDisplayRows().forEach(function (row) {\n\t\t\tif ((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow.mousemove) {\n\t\t\t\trow.getElement().addEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n\t\t\t}\n\t\t});\n\t};\n\n\tMoveRows.prototype._unbindMouseMove = function () {\n\t\tvar self = this;\n\n\t\tself.table.rowManager.getDisplayRows().forEach(function (row) {\n\t\t\tif ((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow.mousemove) {\n\t\t\t\trow.getElement().removeEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n\t\t\t}\n\t\t});\n\t};\n\n\tMoveRows.prototype.startMove = function (e, row) {\n\t\tvar element = row.getElement();\n\n\t\tthis.setStartPosition(e, row);\n\n\t\tthis.moving = row;\n\n\t\tthis.table.element.classList.add(\"tabulator-block-select\");\n\n\t\t//create placeholder\n\t\tthis.placeholderElement.style.width = row.getWidth() + \"px\";\n\t\tthis.placeholderElement.style.height = row.getHeight() + \"px\";\n\n\t\tif (!this.connection) {\n\t\t\telement.parentNode.insertBefore(this.placeholderElement, element);\n\t\t\telement.parentNode.removeChild(element);\n\t\t} else {\n\t\t\tthis.table.element.classList.add(\"tabulator-movingrow-sending\");\n\t\t\tthis.connectToTables(row);\n\t\t}\n\n\t\t//create hover element\n\t\tthis.hoverElement = element.cloneNode(true);\n\t\tthis.hoverElement.classList.add(\"tabulator-moving\");\n\n\t\tif (this.connection) {\n\t\t\tdocument.body.appendChild(this.hoverElement);\n\t\t\tthis.hoverElement.style.left = \"0\";\n\t\t\tthis.hoverElement.style.top = \"0\";\n\t\t\tthis.hoverElement.style.width = this.table.element.clientWidth + \"px\";\n\t\t\tthis.hoverElement.style.whiteSpace = \"nowrap\";\n\t\t\tthis.hoverElement.style.overflow = \"hidden\";\n\t\t\tthis.hoverElement.style.pointerEvents = \"none\";\n\t\t} else {\n\t\t\tthis.table.rowManager.getTableElement().appendChild(this.hoverElement);\n\n\t\t\tthis.hoverElement.style.left = \"0\";\n\t\t\tthis.hoverElement.style.top = \"0\";\n\n\t\t\tthis._bindMouseMove();\n\t\t}\n\n\t\tdocument.body.addEventListener(\"mousemove\", this.moveHover);\n\t\tdocument.body.addEventListener(\"mouseup\", this.endMove);\n\n\t\tthis.moveHover(e);\n\t};\n\n\tMoveRows.prototype.setStartPosition = function (e, row) {\n\t\tvar pageX = this.touchMove ? e.touches[0].pageX : e.pageX,\n\t\t    pageY = this.touchMove ? e.touches[0].pageY : e.pageY,\n\t\t    element,\n\t\t    position;\n\n\t\telement = row.getElement();\n\t\tif (this.connection) {\n\t\t\tposition = element.getBoundingClientRect();\n\n\t\t\tthis.startX = position.left - pageX + window.pageXOffset;\n\t\t\tthis.startY = position.top - pageY + window.pageYOffset;\n\t\t} else {\n\t\t\tthis.startY = pageY - element.getBoundingClientRect().top;\n\t\t}\n\t};\n\n\tMoveRows.prototype.endMove = function (e) {\n\t\tif (!e || e.which === 1 || this.touchMove) {\n\t\t\tthis._unbindMouseMove();\n\n\t\t\tif (!this.connection) {\n\t\t\t\tthis.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n\t\t\t\tthis.placeholderElement.parentNode.removeChild(this.placeholderElement);\n\t\t\t}\n\n\t\t\tthis.hoverElement.parentNode.removeChild(this.hoverElement);\n\n\t\t\tthis.table.element.classList.remove(\"tabulator-block-select\");\n\n\t\t\tif (this.toRow) {\n\t\t\t\tthis.table.rowManager.moveRow(this.moving, this.toRow, this.toRowAfter);\n\t\t\t}\n\n\t\t\tthis.moving = false;\n\t\t\tthis.toRow = false;\n\t\t\tthis.toRowAfter = false;\n\n\t\t\tdocument.body.removeEventListener(\"mousemove\", this.moveHover);\n\t\t\tdocument.body.removeEventListener(\"mouseup\", this.endMove);\n\n\t\t\tif (this.connection) {\n\t\t\t\tthis.table.element.classList.remove(\"tabulator-movingrow-sending\");\n\t\t\t\tthis.disconnectFromTables();\n\t\t\t}\n\t\t}\n\t};\n\n\tMoveRows.prototype.moveRow = function (row, after) {\n\t\tthis.toRow = row;\n\t\tthis.toRowAfter = after;\n\t};\n\n\tMoveRows.prototype.moveHover = function (e) {\n\t\tif (this.connection) {\n\t\t\tthis.moveHoverConnections.call(this, e);\n\t\t} else {\n\t\t\tthis.moveHoverTable.call(this, e);\n\t\t}\n\t};\n\n\tMoveRows.prototype.moveHoverTable = function (e) {\n\t\tvar rowHolder = this.table.rowManager.getElement(),\n\t\t    scrollTop = rowHolder.scrollTop,\n\t\t    yPos = (this.touchMove ? e.touches[0].pageY : e.pageY) - rowHolder.getBoundingClientRect().top + scrollTop,\n\t\t    scrollPos;\n\n\t\tthis.hoverElement.style.top = yPos - this.startY + \"px\";\n\t};\n\n\tMoveRows.prototype.moveHoverConnections = function (e) {\n\t\tthis.hoverElement.style.left = this.startX + (this.touchMove ? e.touches[0].pageX : e.pageX) + \"px\";\n\t\tthis.hoverElement.style.top = this.startY + (this.touchMove ? e.touches[0].pageY : e.pageY) + \"px\";\n\t};\n\n\tMoveRows.prototype.elementRowDrop = function (e, element, row) {\n\t\tif (this.table.options.movableRowsElementDrop) {\n\t\t\tthis.table.options.movableRowsElementDrop(e, element, row ? row.getComponent() : false);\n\t\t}\n\t};\n\n\t//establish connection with other tables\n\tMoveRows.prototype.connectToTables = function (row) {\n\t\tvar _this68 = this;\n\n\t\tvar connectionTables;\n\n\t\tif (this.connectionSelectorsTables) {\n\t\t\tconnectionTables = this.table.modules.comms.getConnections(this.connectionSelectorsTables);\n\n\t\t\tthis.table.options.movableRowsSendingStart.call(this.table, connectionTables);\n\n\t\t\tthis.table.modules.comms.send(this.connectionSelectorsTables, \"moveRow\", \"connect\", {\n\t\t\t\trow: row\n\t\t\t});\n\t\t}\n\n\t\tif (this.connectionSelectorsElements) {\n\n\t\t\tthis.connectionElements = [];\n\n\t\t\tif (!Array.isArray(this.connectionSelectorsElements)) {\n\t\t\t\tthis.connectionSelectorsElements = [this.connectionSelectorsElements];\n\t\t\t}\n\n\t\t\tthis.connectionSelectorsElements.forEach(function (query) {\n\t\t\t\tif (typeof query === \"string\") {\n\t\t\t\t\t_this68.connectionElements = _this68.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(query)));\n\t\t\t\t} else {\n\t\t\t\t\t_this68.connectionElements.push(query);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.connectionElements.forEach(function (element) {\n\t\t\t\tvar dropEvent = function dropEvent(e) {\n\t\t\t\t\t_this68.elementRowDrop(e, element, _this68.moving);\n\t\t\t\t};\n\n\t\t\t\telement.addEventListener(\"mouseup\", dropEvent);\n\t\t\t\telement.tabulatorElementDropEvent = dropEvent;\n\n\t\t\t\telement.classList.add(\"tabulator-movingrow-receiving\");\n\t\t\t});\n\t\t}\n\t};\n\n\t//disconnect from other tables\n\tMoveRows.prototype.disconnectFromTables = function () {\n\t\tvar connectionTables;\n\n\t\tif (this.connectionSelectorsTables) {\n\t\t\tconnectionTables = this.table.modules.comms.getConnections(this.connectionSelectorsTables);\n\n\t\t\tthis.table.options.movableRowsSendingStop.call(this.table, connectionTables);\n\n\t\t\tthis.table.modules.comms.send(this.connectionSelectorsTables, \"moveRow\", \"disconnect\");\n\t\t}\n\n\t\tthis.connectionElements.forEach(function (element) {\n\t\t\telement.classList.remove(\"tabulator-movingrow-receiving\");\n\t\t\telement.removeEventListener(\"mouseup\", element.tabulatorElementDropEvent);\n\t\t\tdelete element.tabulatorElementDropEvent;\n\t\t});\n\t};\n\n\t//accept incomming connection\n\tMoveRows.prototype.connect = function (table, row) {\n\t\tvar self = this;\n\t\tif (!this.connectedTable) {\n\t\t\tthis.connectedTable = table;\n\t\t\tthis.connectedRow = row;\n\n\t\t\tthis.table.element.classList.add(\"tabulator-movingrow-receiving\");\n\n\t\t\tself.table.rowManager.getDisplayRows().forEach(function (row) {\n\t\t\t\tif (row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup) {\n\t\t\t\t\trow.getElement().addEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tself.tableRowDropEvent = self.tableRowDrop.bind(self);\n\n\t\t\tself.table.element.addEventListener(\"mouseup\", self.tableRowDropEvent);\n\n\t\t\tthis.table.options.movableRowsReceivingStart.call(this.table, row, table);\n\n\t\t\treturn true;\n\t\t} else {\n\t\t\tconsole.warn(\"Move Row Error - Table cannot accept connection, already connected to table:\", this.connectedTable);\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t//close incomming connection\n\tMoveRows.prototype.disconnect = function (table) {\n\t\tvar self = this;\n\t\tif (table === this.connectedTable) {\n\t\t\tthis.connectedTable = false;\n\t\t\tthis.connectedRow = false;\n\n\t\t\tthis.table.element.classList.remove(\"tabulator-movingrow-receiving\");\n\n\t\t\tself.table.rowManager.getDisplayRows().forEach(function (row) {\n\t\t\t\tif (row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup) {\n\t\t\t\t\trow.getElement().removeEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tself.table.element.removeEventListener(\"mouseup\", self.tableRowDropEvent);\n\n\t\t\tthis.table.options.movableRowsReceivingStop.call(this.table, table);\n\t\t} else {\n\t\t\tconsole.warn(\"Move Row Error - trying to disconnect from non connected table\");\n\t\t}\n\t};\n\n\tMoveRows.prototype.dropComplete = function (table, row, success) {\n\t\tvar sender = false;\n\n\t\tif (success) {\n\n\t\t\tswitch (_typeof(this.table.options.movableRowsSender)) {\n\t\t\t\tcase \"string\":\n\t\t\t\t\tsender = this.senders[this.table.options.movableRowsSender];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\t\tsender = this.table.options.movableRowsSender;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (sender) {\n\t\t\t\tsender.call(this, this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n\t\t\t} else {\n\t\t\t\tif (this.table.options.movableRowsSender) {\n\t\t\t\t\tconsole.warn(\"Mover Row Error - no matching sender found:\", this.table.options.movableRowsSender);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.table.options.movableRowsSent.call(this.table, this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n\t\t} else {\n\t\t\tthis.table.options.movableRowsSentFailed.call(this.table, this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n\t\t}\n\n\t\tthis.endMove();\n\t};\n\n\tMoveRows.prototype.tableRowDrop = function (e, row) {\n\t\tvar receiver = false,\n\t\t    success = false;\n\n\t\tconsole.trace(\"drop\");\n\n\t\te.stopImmediatePropagation();\n\n\t\tswitch (_typeof(this.table.options.movableRowsReceiver)) {\n\t\t\tcase \"string\":\n\t\t\t\treceiver = this.receivers[this.table.options.movableRowsReceiver];\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\treceiver = this.table.options.movableRowsReceiver;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (receiver) {\n\t\t\tsuccess = receiver.call(this, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t\t} else {\n\t\t\tconsole.warn(\"Mover Row Error - no matching receiver found:\", this.table.options.movableRowsReceiver);\n\t\t}\n\n\t\tif (success) {\n\t\t\tthis.table.options.movableRowsReceived.call(this.table, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t\t} else {\n\t\t\tthis.table.options.movableRowsReceivedFailed.call(this.table, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t\t}\n\n\t\tthis.table.modules.comms.send(this.connectedTable, \"moveRow\", \"dropcomplete\", {\n\t\t\trow: row,\n\t\t\tsuccess: success\n\t\t});\n\t};\n\n\tMoveRows.prototype.receivers = {\n\t\tinsert: function insert(fromRow, toRow, fromTable) {\n\t\t\tthis.table.addRow(fromRow.getData(), undefined, toRow);\n\t\t\treturn true;\n\t\t},\n\n\t\tadd: function add(fromRow, toRow, fromTable) {\n\t\t\tthis.table.addRow(fromRow.getData());\n\t\t\treturn true;\n\t\t},\n\n\t\tupdate: function update(fromRow, toRow, fromTable) {\n\t\t\tif (toRow) {\n\t\t\t\ttoRow.update(fromRow.getData());\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\n\t\treplace: function replace(fromRow, toRow, fromTable) {\n\t\t\tif (toRow) {\n\t\t\t\tthis.table.addRow(fromRow.getData(), undefined, toRow);\n\t\t\t\ttoRow.delete();\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tMoveRows.prototype.senders = {\n\t\tdelete: function _delete(fromRow, toRow, toTable) {\n\t\t\tfromRow.delete();\n\t\t}\n\t};\n\n\tMoveRows.prototype.commsReceived = function (table, action, data) {\n\t\tswitch (action) {\n\t\t\tcase \"connect\":\n\t\t\t\treturn this.connect(table, data.row);\n\t\t\t\tbreak;\n\n\t\t\tcase \"disconnect\":\n\t\t\t\treturn this.disconnect(table);\n\t\t\t\tbreak;\n\n\t\t\tcase \"dropcomplete\":\n\t\t\t\treturn this.dropComplete(table, data.row, data.success);\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"moveRow\", MoveRows);\n\tvar Mutator = function Mutator(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.allowedTypes = [\"\", \"data\", \"edit\", \"clipboard\"]; //list of muatation types\n\t\tthis.enabled = true;\n\t};\n\n\t//initialize column mutator\n\tMutator.prototype.initializeColumn = function (column) {\n\t\tvar self = this,\n\t\t    match = false,\n\t\t    config = {};\n\n\t\tthis.allowedTypes.forEach(function (type) {\n\t\t\tvar key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\t\t    mutator;\n\n\t\t\tif (column.definition[key]) {\n\t\t\t\tmutator = self.lookupMutator(column.definition[key]);\n\n\t\t\t\tif (mutator) {\n\t\t\t\t\tmatch = true;\n\n\t\t\t\t\tconfig[key] = {\n\t\t\t\t\t\tmutator: mutator,\n\t\t\t\t\t\tparams: column.definition[key + \"Params\"] || {}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (match) {\n\t\t\tcolumn.modules.mutate = config;\n\t\t}\n\t};\n\n\tMutator.prototype.lookupMutator = function (value) {\n\t\tvar mutator = false;\n\n\t\t//set column mutator\n\t\tswitch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n\t\t\tcase \"string\":\n\t\t\t\tif (this.mutators[value]) {\n\t\t\t\t\tmutator = this.mutators[value];\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"Mutator Error - No such mutator found, ignoring: \", value);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tmutator = value;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn mutator;\n\t};\n\n\t//apply mutator to row\n\tMutator.prototype.transformRow = function (data, type, updatedData) {\n\t\tvar self = this,\n\t\t    key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\t    value;\n\n\t\tif (this.enabled) {\n\n\t\t\tself.table.columnManager.traverse(function (column) {\n\t\t\t\tvar mutator, params, component;\n\n\t\t\t\tif (column.modules.mutate) {\n\t\t\t\t\tmutator = column.modules.mutate[key] || column.modules.mutate.mutator || false;\n\n\t\t\t\t\tif (mutator) {\n\t\t\t\t\t\tvalue = column.getFieldValue(typeof updatedData !== \"undefined\" ? updatedData : data);\n\n\t\t\t\t\t\tif (type == \"data\" || typeof value !== \"undefined\") {\n\t\t\t\t\t\t\tcomponent = column.getComponent();\n\t\t\t\t\t\t\tparams = typeof mutator.params === \"function\" ? mutator.params(value, data, type, component) : mutator.params;\n\t\t\t\t\t\t\tcolumn.setFieldValue(data, mutator.mutator(value, data, type, params, component));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn data;\n\t};\n\n\t//apply mutator to new cell value\n\tMutator.prototype.transformCell = function (cell, value) {\n\t\tvar mutator = cell.column.modules.mutate.mutatorEdit || cell.column.modules.mutate.mutator || false,\n\t\t    tempData = {};\n\n\t\tif (mutator) {\n\t\t\ttempData = Object.assign(tempData, cell.row.getData());\n\t\t\tcell.column.setFieldValue(tempData, value);\n\t\t\treturn mutator.mutator(value, tempData, \"edit\", mutator.params, cell.getComponent());\n\t\t} else {\n\t\t\treturn value;\n\t\t}\n\t};\n\n\tMutator.prototype.enable = function () {\n\t\tthis.enabled = true;\n\t};\n\n\tMutator.prototype.disable = function () {\n\t\tthis.enabled = false;\n\t};\n\n\t//default mutators\n\tMutator.prototype.mutators = {};\n\n\tTabulator.prototype.registerModule(\"mutator\", Mutator);\n\tvar Page = function Page(table) {\n\n\t\tthis.table = table; //hold Tabulator object\n\n\t\tthis.mode = \"local\";\n\t\tthis.progressiveLoad = false;\n\n\t\tthis.size = 0;\n\t\tthis.page = 1;\n\t\tthis.count = 5;\n\t\tthis.max = 1;\n\n\t\tthis.displayIndex = 0; //index in display pipeline\n\n\t\tthis.initialLoad = true;\n\n\t\tthis.pageSizes = [];\n\n\t\tthis.dataReceivedNames = {};\n\t\tthis.dataSentNames = {};\n\n\t\tthis.createElements();\n\t};\n\n\tPage.prototype.createElements = function () {\n\n\t\tvar button;\n\n\t\tthis.element = document.createElement(\"span\");\n\t\tthis.element.classList.add(\"tabulator-paginator\");\n\n\t\tthis.pagesElement = document.createElement(\"span\");\n\t\tthis.pagesElement.classList.add(\"tabulator-pages\");\n\n\t\tbutton = document.createElement(\"button\");\n\t\tbutton.classList.add(\"tabulator-page\");\n\t\tbutton.setAttribute(\"type\", \"button\");\n\t\tbutton.setAttribute(\"role\", \"button\");\n\t\tbutton.setAttribute(\"aria-label\", \"\");\n\t\tbutton.setAttribute(\"title\", \"\");\n\n\t\tthis.firstBut = button.cloneNode(true);\n\t\tthis.firstBut.setAttribute(\"data-page\", \"first\");\n\n\t\tthis.prevBut = button.cloneNode(true);\n\t\tthis.prevBut.setAttribute(\"data-page\", \"prev\");\n\n\t\tthis.nextBut = button.cloneNode(true);\n\t\tthis.nextBut.setAttribute(\"data-page\", \"next\");\n\n\t\tthis.lastBut = button.cloneNode(true);\n\t\tthis.lastBut.setAttribute(\"data-page\", \"last\");\n\n\t\tif (this.table.options.paginationSizeSelector) {\n\t\t\tthis.pageSizeSelect = document.createElement(\"select\");\n\t\t\tthis.pageSizeSelect.classList.add(\"tabulator-page-size\");\n\t\t}\n\t};\n\n\tPage.prototype.generatePageSizeSelectList = function () {\n\t\tvar _this69 = this;\n\n\t\tvar pageSizes = [];\n\n\t\tif (this.pageSizeSelect) {\n\n\t\t\tif (Array.isArray(this.table.options.paginationSizeSelector)) {\n\t\t\t\tpageSizes = this.table.options.paginationSizeSelector;\n\t\t\t\tthis.pageSizes = pageSizes;\n\n\t\t\t\tif (this.pageSizes.indexOf(this.size) == -1) {\n\t\t\t\t\tpageSizes.unshift(this.size);\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\tif (this.pageSizes.indexOf(this.size) == -1) {\n\t\t\t\t\tpageSizes = [];\n\n\t\t\t\t\tfor (var _i10 = 1; _i10 < 5; _i10++) {\n\t\t\t\t\t\tpageSizes.push(this.size * _i10);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.pageSizes = pageSizes;\n\t\t\t\t} else {\n\t\t\t\t\tpageSizes = this.pageSizes;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\twhile (this.pageSizeSelect.firstChild) {\n\t\t\t\tthis.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);\n\t\t\t}pageSizes.forEach(function (item) {\n\t\t\t\tvar itemEl = document.createElement(\"option\");\n\t\t\t\titemEl.value = item;\n\n\t\t\t\tif (item === true) {\n\t\t\t\t\t_this69.table.modules.localize.bind(\"pagination|all\", function (value) {\n\t\t\t\t\t\titemEl.innerHTML = value;\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\titemEl.innerHTML = item;\n\t\t\t\t}\n\n\t\t\t\t_this69.pageSizeSelect.appendChild(itemEl);\n\t\t\t});\n\n\t\t\tthis.pageSizeSelect.value = this.size;\n\t\t}\n\t};\n\n\t//setup pageination\n\tPage.prototype.initialize = function (hidden) {\n\t\tvar self = this,\n\t\t    pageSelectLabel,\n\t\t    testElRow,\n\t\t    testElCell;\n\n\t\t//update param names\n\t\tthis.dataSentNames = Object.assign({}, this.paginationDataSentNames);\n\t\tthis.dataSentNames = Object.assign(this.dataSentNames, this.table.options.paginationDataSent);\n\n\t\tthis.dataReceivedNames = Object.assign({}, this.paginationDataReceivedNames);\n\t\tthis.dataReceivedNames = Object.assign(this.dataReceivedNames, this.table.options.paginationDataReceived);\n\n\t\t//build pagination element\n\n\t\t//bind localizations\n\t\tself.table.modules.localize.bind(\"pagination|first\", function (value) {\n\t\t\tself.firstBut.innerHTML = value;\n\t\t});\n\n\t\tself.table.modules.localize.bind(\"pagination|first_title\", function (value) {\n\t\t\tself.firstBut.setAttribute(\"aria-label\", value);\n\t\t\tself.firstBut.setAttribute(\"title\", value);\n\t\t});\n\n\t\tself.table.modules.localize.bind(\"pagination|prev\", function (value) {\n\t\t\tself.prevBut.innerHTML = value;\n\t\t});\n\n\t\tself.table.modules.localize.bind(\"pagination|prev_title\", function (value) {\n\t\t\tself.prevBut.setAttribute(\"aria-label\", value);\n\t\t\tself.prevBut.setAttribute(\"title\", value);\n\t\t});\n\n\t\tself.table.modules.localize.bind(\"pagination|next\", function (value) {\n\t\t\tself.nextBut.innerHTML = value;\n\t\t});\n\n\t\tself.table.modules.localize.bind(\"pagination|next_title\", function (value) {\n\t\t\tself.nextBut.setAttribute(\"aria-label\", value);\n\t\t\tself.nextBut.setAttribute(\"title\", value);\n\t\t});\n\n\t\tself.table.modules.localize.bind(\"pagination|last\", function (value) {\n\t\t\tself.lastBut.innerHTML = value;\n\t\t});\n\n\t\tself.table.modules.localize.bind(\"pagination|last_title\", function (value) {\n\t\t\tself.lastBut.setAttribute(\"aria-label\", value);\n\t\t\tself.lastBut.setAttribute(\"title\", value);\n\t\t});\n\n\t\t//click bindings\n\t\tself.firstBut.addEventListener(\"click\", function () {\n\t\t\tself.setPage(1);\n\t\t});\n\n\t\tself.prevBut.addEventListener(\"click\", function () {\n\t\t\tself.previousPage();\n\t\t});\n\n\t\tself.nextBut.addEventListener(\"click\", function () {\n\t\t\tself.nextPage().then(function () {}).catch(function () {});\n\t\t});\n\n\t\tself.lastBut.addEventListener(\"click\", function () {\n\t\t\tself.setPage(self.max);\n\t\t});\n\n\t\tif (self.table.options.paginationElement) {\n\t\t\tself.element = self.table.options.paginationElement;\n\t\t}\n\n\t\tif (this.pageSizeSelect) {\n\t\t\tpageSelectLabel = document.createElement(\"label\");\n\n\t\t\tself.table.modules.localize.bind(\"pagination|page_size\", function (value) {\n\t\t\t\tself.pageSizeSelect.setAttribute(\"aria-label\", value);\n\t\t\t\tself.pageSizeSelect.setAttribute(\"title\", value);\n\t\t\t\tpageSelectLabel.innerHTML = value;\n\t\t\t});\n\n\t\t\tself.element.appendChild(pageSelectLabel);\n\t\t\tself.element.appendChild(self.pageSizeSelect);\n\n\t\t\tself.pageSizeSelect.addEventListener(\"change\", function (e) {\n\t\t\t\tself.setPageSize(self.pageSizeSelect.value == \"true\" ? true : self.pageSizeSelect.value);\n\t\t\t\tself.setPage(1).then(function () {}).catch(function () {});\n\t\t\t});\n\t\t}\n\n\t\t//append to DOM\n\t\tself.element.appendChild(self.firstBut);\n\t\tself.element.appendChild(self.prevBut);\n\t\tself.element.appendChild(self.pagesElement);\n\t\tself.element.appendChild(self.nextBut);\n\t\tself.element.appendChild(self.lastBut);\n\n\t\tif (!self.table.options.paginationElement && !hidden) {\n\t\t\tself.table.footerManager.append(self.element, self);\n\t\t}\n\n\t\t//set default values\n\t\tself.mode = self.table.options.pagination;\n\n\t\tif (self.table.options.paginationSize) {\n\t\t\tself.size = self.table.options.paginationSize;\n\t\t} else {\n\t\t\ttestElRow = document.createElement(\"div\");\n\t\t\ttestElRow.classList.add(\"tabulator-row\");\n\t\t\ttestElRow.style.visibility = hidden;\n\n\t\t\ttestElCell = document.createElement(\"div\");\n\t\t\ttestElCell.classList.add(\"tabulator-cell\");\n\t\t\ttestElCell.innerHTML = \"Page Row Test\";\n\n\t\t\ttestElRow.appendChild(testElCell);\n\n\t\t\tself.table.rowManager.getTableElement().appendChild(testElRow);\n\n\t\t\tself.size = Math.floor(self.table.rowManager.getElement().clientHeight / testElRow.offsetHeight);\n\n\t\t\tself.table.rowManager.getTableElement().removeChild(testElRow);\n\t\t}\n\n\t\t// self.page = self.table.options.paginationInitialPage || 1;\n\t\tself.count = self.table.options.paginationButtonCount;\n\n\t\tself.generatePageSizeSelectList();\n\t};\n\n\tPage.prototype.initializeProgressive = function (mode) {\n\t\tthis.initialize(true);\n\t\tthis.mode = \"progressive_\" + mode;\n\t\tthis.progressiveLoad = true;\n\t};\n\n\tPage.prototype.setDisplayIndex = function (index) {\n\t\tthis.displayIndex = index;\n\t};\n\n\tPage.prototype.getDisplayIndex = function () {\n\t\treturn this.displayIndex;\n\t};\n\n\t//calculate maximum page from number of rows\n\tPage.prototype.setMaxRows = function (rowCount) {\n\t\tif (!rowCount) {\n\t\t\tthis.max = 1;\n\t\t} else {\n\t\t\tthis.max = this.size === true ? 1 : Math.ceil(rowCount / this.size);\n\t\t}\n\n\t\tif (this.page > this.max) {\n\t\t\tthis.page = this.max;\n\t\t}\n\t};\n\n\t//reset to first page without triggering action\n\tPage.prototype.reset = function (force, columnsChanged) {\n\t\tif (this.mode == \"local\" || force) {\n\t\t\tthis.page = 1;\n\t\t}\n\n\t\tif (columnsChanged) {\n\t\t\tthis.initialLoad = true;\n\t\t}\n\n\t\treturn true;\n\t};\n\n\t//set the maxmum page\n\tPage.prototype.setMaxPage = function (max) {\n\n\t\tmax = parseInt(max);\n\n\t\tthis.max = max || 1;\n\n\t\tif (this.page > this.max) {\n\t\t\tthis.page = this.max;\n\t\t\tthis.trigger();\n\t\t}\n\t};\n\n\t//set current page number\n\tPage.prototype.setPage = function (page) {\n\t\tvar _this70 = this;\n\n\t\tvar self = this;\n\n\t\tswitch (page) {\n\t\t\tcase \"first\":\n\t\t\t\treturn this.setPage(1);\n\t\t\t\tbreak;\n\n\t\t\tcase \"prev\":\n\t\t\t\treturn this.previousPage();\n\t\t\t\tbreak;\n\n\t\t\tcase \"next\":\n\t\t\t\treturn this.nextPage();\n\t\t\t\tbreak;\n\n\t\t\tcase \"last\":\n\t\t\t\treturn this.setPage(this.max);\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tpage = parseInt(page);\n\n\t\t\tif (page > 0 && page <= _this70.max) {\n\t\t\t\t_this70.page = page;\n\t\t\t\t_this70.trigger().then(function () {\n\t\t\t\t\tresolve();\n\t\t\t\t}).catch(function () {\n\t\t\t\t\treject();\n\t\t\t\t});\n\n\t\t\t\tif (self.table.options.persistence && self.table.modExists(\"persistence\", true) && self.table.modules.persistence.config.page) {\n\t\t\t\t\tself.table.modules.persistence.save(\"page\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Pagination Error - Requested page is out of range of 1 - \" + _this70.max + \":\", page);\n\t\t\t\treject();\n\t\t\t}\n\t\t});\n\t};\n\n\tPage.prototype.setPageToRow = function (row) {\n\t\tvar _this71 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tvar rows = _this71.table.rowManager.getDisplayRows(_this71.displayIndex - 1);\n\t\t\tvar index = rows.indexOf(row);\n\n\t\t\tif (index > -1) {\n\t\t\t\tvar page = _this71.size === true ? 1 : Math.ceil((index + 1) / _this71.size);\n\n\t\t\t\t_this71.setPage(page).then(function () {\n\t\t\t\t\tresolve();\n\t\t\t\t}).catch(function () {\n\t\t\t\t\treject();\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Pagination Error - Requested row is not visible\");\n\t\t\t\treject();\n\t\t\t}\n\t\t});\n\t};\n\n\tPage.prototype.setPageSize = function (size) {\n\t\tif (size !== true) {\n\t\t\tsize = parseInt(size);\n\t\t}\n\n\t\tif (size > 0) {\n\t\t\tthis.size = size;\n\t\t}\n\n\t\tif (this.pageSizeSelect) {\n\t\t\t// this.pageSizeSelect.value = size;\n\t\t\tthis.generatePageSizeSelectList();\n\t\t}\n\n\t\tif (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.page) {\n\t\t\tthis.table.modules.persistence.save(\"page\");\n\t\t}\n\t};\n\n\t//setup the pagination buttons\n\tPage.prototype._setPageButtons = function () {\n\t\tvar self = this;\n\n\t\tvar leftSize = Math.floor((this.count - 1) / 2);\n\t\tvar rightSize = Math.ceil((this.count - 1) / 2);\n\t\tvar min = this.max - this.page + leftSize + 1 < this.count ? this.max - this.count + 1 : Math.max(this.page - leftSize, 1);\n\t\tvar max = this.page <= rightSize ? Math.min(this.count, this.max) : Math.min(this.page + rightSize, this.max);\n\n\t\twhile (self.pagesElement.firstChild) {\n\t\t\tself.pagesElement.removeChild(self.pagesElement.firstChild);\n\t\t}if (self.page == 1) {\n\t\t\tself.firstBut.disabled = true;\n\t\t\tself.prevBut.disabled = true;\n\t\t} else {\n\t\t\tself.firstBut.disabled = false;\n\t\t\tself.prevBut.disabled = false;\n\t\t}\n\n\t\tif (self.page == self.max) {\n\t\t\tself.lastBut.disabled = true;\n\t\t\tself.nextBut.disabled = true;\n\t\t} else {\n\t\t\tself.lastBut.disabled = false;\n\t\t\tself.nextBut.disabled = false;\n\t\t}\n\n\t\tfor (var _i11 = min; _i11 <= max; _i11++) {\n\t\t\tif (_i11 > 0 && _i11 <= self.max) {\n\t\t\t\tself.pagesElement.appendChild(self._generatePageButton(_i11));\n\t\t\t}\n\t\t}\n\n\t\tthis.footerRedraw();\n\t};\n\n\tPage.prototype._generatePageButton = function (page) {\n\t\tvar self = this,\n\t\t    button = document.createElement(\"button\");\n\n\t\tbutton.classList.add(\"tabulator-page\");\n\t\tif (page == self.page) {\n\t\t\tbutton.classList.add(\"active\");\n\t\t}\n\n\t\tbutton.setAttribute(\"type\", \"button\");\n\t\tbutton.setAttribute(\"role\", \"button\");\n\n\t\tself.table.modules.localize.bind(\"pagination|page_title\", function (value) {\n\t\t\tbutton.setAttribute(\"aria-label\", value + \" \" + page);\n\t\t\tbutton.setAttribute(\"title\", value + \" \" + page);\n\t\t});\n\n\t\tbutton.setAttribute(\"data-page\", page);\n\t\tbutton.textContent = page;\n\n\t\tbutton.addEventListener(\"click\", function (e) {\n\t\t\tself.setPage(page);\n\t\t});\n\n\t\treturn button;\n\t};\n\n\t//previous page\n\tPage.prototype.previousPage = function () {\n\t\tvar _this72 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tif (_this72.page > 1) {\n\t\t\t\t_this72.page--;\n\t\t\t\t_this72.trigger().then(function () {\n\t\t\t\t\tresolve();\n\t\t\t\t}).catch(function () {\n\t\t\t\t\treject();\n\t\t\t\t});\n\n\t\t\t\tif (_this72.table.options.persistence && _this72.table.modExists(\"persistence\", true) && _this72.table.modules.persistence.config.page) {\n\t\t\t\t\t_this72.table.modules.persistence.save(\"page\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Pagination Error - Previous page would be less than page 1:\", 0);\n\t\t\t\treject();\n\t\t\t}\n\t\t});\n\t};\n\n\t//next page\n\tPage.prototype.nextPage = function () {\n\t\tvar _this73 = this;\n\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tif (_this73.page < _this73.max) {\n\t\t\t\t_this73.page++;\n\t\t\t\t_this73.trigger().then(function () {\n\t\t\t\t\tresolve();\n\t\t\t\t}).catch(function () {\n\t\t\t\t\treject();\n\t\t\t\t});\n\n\t\t\t\tif (_this73.table.options.persistence && _this73.table.modExists(\"persistence\", true) && _this73.table.modules.persistence.config.page) {\n\t\t\t\t\t_this73.table.modules.persistence.save(\"page\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!_this73.progressiveLoad) {\n\t\t\t\t\tconsole.warn(\"Pagination Error - Next page would be greater than maximum page of \" + _this73.max + \":\", _this73.max + 1);\n\t\t\t\t}\n\t\t\t\treject();\n\t\t\t}\n\t\t});\n\t};\n\n\t//return current page number\n\tPage.prototype.getPage = function () {\n\t\treturn this.page;\n\t};\n\n\t//return max page number\n\tPage.prototype.getPageMax = function () {\n\t\treturn this.max;\n\t};\n\n\tPage.prototype.getPageSize = function (size) {\n\t\treturn this.size;\n\t};\n\n\tPage.prototype.getMode = function () {\n\t\treturn this.mode;\n\t};\n\n\t//return appropriate rows for current page\n\tPage.prototype.getRows = function (data) {\n\t\tvar output, start, end;\n\n\t\tif (this.mode == \"local\") {\n\t\t\toutput = [];\n\n\t\t\tif (this.size === true) {\n\t\t\t\tstart = 0;\n\t\t\t\tend = data.length - 1;\n\t\t\t} else {\n\t\t\t\tstart = this.size * (this.page - 1);\n\t\t\t\tend = start + parseInt(this.size);\n\t\t\t}\n\n\t\t\tthis._setPageButtons();\n\n\t\t\tfor (var _i12 = start; _i12 < end; _i12++) {\n\t\t\t\tif (data[_i12]) {\n\t\t\t\t\toutput.push(data[_i12]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn output;\n\t\t} else {\n\n\t\t\tthis._setPageButtons();\n\n\t\t\treturn data.slice(0);\n\t\t}\n\t};\n\n\tPage.prototype.trigger = function () {\n\t\tvar _this74 = this;\n\n\t\tvar left;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tswitch (_this74.mode) {\n\t\t\t\tcase \"local\":\n\t\t\t\t\tleft = _this74.table.rowManager.scrollLeft;\n\n\t\t\t\t\t_this74.table.rowManager.refreshActiveData(\"page\");\n\t\t\t\t\t_this74.table.rowManager.scrollHorizontal(left);\n\n\t\t\t\t\t_this74.table.options.pageLoaded.call(_this74.table, _this74.getPage());\n\t\t\t\t\tresolve();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"remote\":\n\t\t\t\tcase \"progressive_load\":\n\t\t\t\tcase \"progressive_scroll\":\n\t\t\t\t\t_this74.table.modules.ajax.blockActiveRequest();\n\t\t\t\t\t_this74._getRemotePage().then(function () {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}).catch(function () {\n\t\t\t\t\t\treject();\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.warn(\"Pagination Error - no such pagination mode:\", _this74.mode);\n\t\t\t\t\treject();\n\t\t\t}\n\t\t});\n\t};\n\n\tPage.prototype._getRemotePage = function () {\n\t\tvar _this75 = this;\n\n\t\tvar self = this,\n\t\t    oldParams,\n\t\t    pageParams;\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tif (!self.table.modExists(\"ajax\", true)) {\n\t\t\t\treject();\n\t\t\t}\n\n\t\t\t//record old params and restore after request has been made\n\t\t\toldParams = Tabulator.prototype.helpers.deepClone(self.table.modules.ajax.getParams() || {});\n\t\t\tpageParams = self.table.modules.ajax.getParams();\n\n\t\t\t//configure request params\n\t\t\tpageParams[_this75.dataSentNames.page] = self.page;\n\n\t\t\t//set page size if defined\n\t\t\tif (_this75.size) {\n\t\t\t\tpageParams[_this75.dataSentNames.size] = _this75.size;\n\t\t\t}\n\n\t\t\t//set sort data if defined\n\t\t\tif (_this75.table.options.ajaxSorting && _this75.table.modExists(\"sort\")) {\n\t\t\t\tvar sorters = self.table.modules.sort.getSort();\n\n\t\t\t\tsorters.forEach(function (item) {\n\t\t\t\t\tdelete item.column;\n\t\t\t\t});\n\n\t\t\t\tpageParams[_this75.dataSentNames.sorters] = sorters;\n\t\t\t}\n\n\t\t\t//set filter data if defined\n\t\t\tif (_this75.table.options.ajaxFiltering && _this75.table.modExists(\"filter\")) {\n\t\t\t\tvar filters = self.table.modules.filter.getFilters(true, true);\n\t\t\t\tpageParams[_this75.dataSentNames.filters] = filters;\n\t\t\t}\n\n\t\t\tself.table.modules.ajax.setParams(pageParams);\n\n\t\t\tself.table.modules.ajax.sendRequest(_this75.progressiveLoad).then(function (data) {\n\t\t\t\tself._parseRemoteData(data);\n\t\t\t\tresolve();\n\t\t\t}).catch(function (e) {\n\t\t\t\treject();\n\t\t\t});\n\n\t\t\tself.table.modules.ajax.setParams(oldParams);\n\t\t});\n\t};\n\n\tPage.prototype._parseRemoteData = function (data) {\n\t\tvar self = this,\n\t\t    left,\n\t\t    data,\n\t\t    margin;\n\n\t\tif (typeof data[this.dataReceivedNames.last_page] === \"undefined\") {\n\t\t\tconsole.warn(\"Remote Pagination Error - Server response missing '\" + this.dataReceivedNames.last_page + \"' property\");\n\t\t}\n\n\t\tif (data[this.dataReceivedNames.data]) {\n\t\t\tthis.max = parseInt(data[this.dataReceivedNames.last_page]) || 1;\n\n\t\t\tif (this.progressiveLoad) {\n\t\t\t\tswitch (this.mode) {\n\t\t\t\t\tcase \"progressive_load\":\n\n\t\t\t\t\t\tif (this.page == 1) {\n\t\t\t\t\t\t\tthis.table.rowManager.setData(data[this.dataReceivedNames.data], false, this.initialLoad && this.page == 1);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.table.rowManager.addRows(data[this.dataReceivedNames.data]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.page < this.max) {\n\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\tself.nextPage().then(function () {}).catch(function () {});\n\t\t\t\t\t\t\t}, self.table.options.ajaxProgressiveLoadDelay);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"progressive_scroll\":\n\t\t\t\t\t\tdata = this.table.rowManager.getData().concat(data[this.dataReceivedNames.data]);\n\n\t\t\t\t\t\tthis.table.rowManager.setData(data, true, this.initialLoad && this.page == 1);\n\n\t\t\t\t\t\tmargin = this.table.options.ajaxProgressiveLoadScrollMargin || this.table.rowManager.element.clientHeight * 2;\n\n\t\t\t\t\t\tif (self.table.rowManager.element.scrollHeight <= self.table.rowManager.element.clientHeight + margin) {\n\t\t\t\t\t\t\tself.nextPage().then(function () {}).catch(function () {});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tleft = this.table.rowManager.scrollLeft;\n\n\t\t\t\tthis.table.rowManager.setData(data[this.dataReceivedNames.data], false, this.initialLoad && this.page == 1);\n\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\n\t\t\t\tthis.table.columnManager.scrollHorizontal(left);\n\n\t\t\t\tthis.table.options.pageLoaded.call(this.table, this.getPage());\n\t\t\t}\n\n\t\t\tthis.initialLoad = false;\n\t\t} else {\n\t\t\tconsole.warn(\"Remote Pagination Error - Server response missing '\" + this.dataReceivedNames.data + \"' property\");\n\t\t}\n\t};\n\n\t//handle the footer element being redrawn\n\tPage.prototype.footerRedraw = function () {\n\t\tvar footer = this.table.footerManager.element;\n\n\t\tif (Math.ceil(footer.clientWidth) - footer.scrollWidth < 0) {\n\t\t\tthis.pagesElement.style.display = 'none';\n\t\t} else {\n\t\t\tthis.pagesElement.style.display = '';\n\n\t\t\tif (Math.ceil(footer.clientWidth) - footer.scrollWidth < 0) {\n\t\t\t\tthis.pagesElement.style.display = 'none';\n\t\t\t}\n\t\t}\n\t};\n\n\t//set the paramter names for pagination requests\n\tPage.prototype.paginationDataSentNames = {\n\t\t\"page\": \"page\",\n\t\t\"size\": \"size\",\n\t\t\"sorters\": \"sorters\",\n\t\t// \"sort_dir\":\"sort_dir\",\n\t\t\"filters\": \"filters\"\n\t\t// \"filter_value\":\"filter_value\",\n\t\t// \"filter_type\":\"filter_type\",\n\t};\n\n\t//set the property names for pagination responses\n\tPage.prototype.paginationDataReceivedNames = {\n\t\t\"current_page\": \"current_page\",\n\t\t\"last_page\": \"last_page\",\n\t\t\"data\": \"data\"\n\t};\n\n\tTabulator.prototype.registerModule(\"page\", Page);\n\n\tvar Persistence = function Persistence(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.mode = \"\";\n\t\tthis.id = \"\";\n\t\t// this.persistProps = [\"field\", \"width\", \"visible\"];\n\t\tthis.defWatcherBlock = false;\n\t\tthis.config = {};\n\t\tthis.readFunc = false;\n\t\tthis.writeFunc = false;\n\t};\n\n\t// Test for whether localStorage is available for use.\n\tPersistence.prototype.localStorageTest = function () {\n\t\tvar testKey = \"_tabulator_test\";\n\n\t\ttry {\n\t\t\twindow.localStorage.setItem(testKey, testKey);\n\t\t\twindow.localStorage.removeItem(testKey);\n\t\t\treturn true;\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t//setup parameters\n\tPersistence.prototype.initialize = function () {\n\t\t//determine persistent layout storage type\n\n\t\tvar mode = this.table.options.persistenceMode,\n\t\t    id = this.table.options.persistenceID,\n\t\t    retreivedData;\n\n\t\tthis.mode = mode !== true ? mode : this.localStorageTest() ? \"local\" : \"cookie\";\n\n\t\tif (this.table.options.persistenceReaderFunc) {\n\t\t\tif (typeof this.table.options.persistenceReaderFunc === \"function\") {\n\t\t\t\tthis.readFunc = this.table.options.persistenceReaderFunc;\n\t\t\t} else {\n\t\t\t\tif (this.readers[this.table.options.persistenceReaderFunc]) {\n\t\t\t\t\tthis.readFunc = this.readers[this.table.options.persistenceReaderFunc];\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"Persistence Read Error - invalid reader set\", this.table.options.persistenceReaderFunc);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.readers[this.mode]) {\n\t\t\t\tthis.readFunc = this.readers[this.mode];\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Persistence Read Error - invalid reader set\", this.mode);\n\t\t\t}\n\t\t}\n\n\t\tif (this.table.options.persistenceWriterFunc) {\n\t\t\tif (typeof this.table.options.persistenceWriterFunc === \"function\") {\n\t\t\t\tthis.writeFunc = this.table.options.persistenceWriterFunc;\n\t\t\t} else {\n\t\t\t\tif (this.readers[this.table.options.persistenceWriterFunc]) {\n\t\t\t\t\tthis.writeFunc = this.readers[this.table.options.persistenceWriterFunc];\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"Persistence Write Error - invalid reader set\", this.table.options.persistenceWriterFunc);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.writers[this.mode]) {\n\t\t\t\tthis.writeFunc = this.writers[this.mode];\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Persistence Write Error - invalid writer set\", this.mode);\n\t\t\t}\n\t\t}\n\n\t\t//set storage tag\n\t\tthis.id = \"tabulator-\" + (id || this.table.element.getAttribute(\"id\") || \"\");\n\n\t\tthis.config = {\n\t\t\tsort: this.table.options.persistence === true || this.table.options.persistence.sort,\n\t\t\tfilter: this.table.options.persistence === true || this.table.options.persistence.filter,\n\t\t\tgroup: this.table.options.persistence === true || this.table.options.persistence.group,\n\t\t\tpage: this.table.options.persistence === true || this.table.options.persistence.page,\n\t\t\tcolumns: this.table.options.persistence === true ? [\"title\", \"width\", \"visible\"] : this.table.options.persistence.columns\n\t\t};\n\n\t\t//load pagination data if needed\n\t\tif (this.config.page) {\n\t\t\tretreivedData = this.retreiveData(\"page\");\n\n\t\t\tif (retreivedData) {\n\t\t\t\tif (typeof retreivedData.paginationSize !== \"undefined\" && (this.config.page === true || this.config.page.size)) {\n\t\t\t\t\tthis.table.options.paginationSize = retreivedData.paginationSize;\n\t\t\t\t}\n\n\t\t\t\tif (typeof retreivedData.paginationInitialPage !== \"undefined\" && (this.config.page === true || this.config.page.page)) {\n\t\t\t\t\tthis.table.options.paginationInitialPage = retreivedData.paginationInitialPage;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//load group data if needed\n\t\tif (this.config.group) {\n\t\t\tretreivedData = this.retreiveData(\"group\");\n\n\t\t\tif (retreivedData) {\n\t\t\t\tif (typeof retreivedData.groupBy !== \"undefined\" && (this.config.group === true || this.config.group.groupBy)) {\n\t\t\t\t\tthis.table.options.groupBy = retreivedData.groupBy;\n\t\t\t\t}\n\t\t\t\tif (typeof retreivedData.groupStartOpen !== \"undefined\" && (this.config.group === true || this.config.group.groupStartOpen)) {\n\t\t\t\t\tthis.table.options.groupStartOpen = retreivedData.groupStartOpen;\n\t\t\t\t}\n\t\t\t\tif (typeof retreivedData.groupHeader !== \"undefined\" && (this.config.group === true || this.config.group.groupHeader)) {\n\t\t\t\t\tthis.table.options.groupHeader = retreivedData.groupHeader;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tPersistence.prototype.initializeColumn = function (column) {\n\t\tvar self = this,\n\t\t    def,\n\t\t    keys;\n\n\t\tif (this.config.columns) {\n\t\t\tthis.defWatcherBlock = true;\n\n\t\t\tdef = column.getDefinition();\n\n\t\t\tkeys = this.config.columns === true ? Object.keys(def) : this.config.columns;\n\n\t\t\tkeys.forEach(function (key) {\n\t\t\t\tvar props = Object.getOwnPropertyDescriptor(def, key);\n\t\t\t\tvar value = def[key];\n\t\t\t\tif (props) {\n\t\t\t\t\tObject.defineProperty(def, key, {\n\t\t\t\t\t\tset: function set(newValue) {\n\t\t\t\t\t\t\tvalue = newValue;\n\n\t\t\t\t\t\t\tif (!self.defWatcherBlock) {\n\t\t\t\t\t\t\t\tself.save(\"columns\");\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (props.set) {\n\t\t\t\t\t\t\t\tprops.set(newValue);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tget: function get() {\n\t\t\t\t\t\t\tif (props.get) {\n\t\t\t\t\t\t\t\tprops.get();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.defWatcherBlock = false;\n\t\t}\n\t};\n\n\t//load saved definitions\n\tPersistence.prototype.load = function (type, current) {\n\t\tvar data = this.retreiveData(type);\n\n\t\tif (current) {\n\t\t\tdata = data ? this.mergeDefinition(current, data) : current;\n\t\t}\n\n\t\treturn data;\n\t};\n\n\t//retreive data from memory\n\tPersistence.prototype.retreiveData = function (type) {\n\t\treturn this.readFunc ? this.readFunc(this.id, type) : false;\n\t};\n\n\t//merge old and new column definitions\n\tPersistence.prototype.mergeDefinition = function (oldCols, newCols) {\n\t\tvar self = this,\n\t\t    output = [];\n\n\t\t// oldCols = oldCols || [];\n\t\tnewCols = newCols || [];\n\n\t\tnewCols.forEach(function (column, to) {\n\n\t\t\tvar from = self._findColumn(oldCols, column),\n\t\t\t    keys;\n\n\t\t\tif (from) {\n\n\t\t\t\tif (self.config.columns === true || self.config.columns == undefined) {\n\t\t\t\t\tkeys = Object.keys(from);\n\t\t\t\t\tkeys.push(\"width\");\n\t\t\t\t} else {\n\t\t\t\t\tkeys = self.config.columns;\n\t\t\t\t}\n\n\t\t\t\tkeys.forEach(function (key) {\n\t\t\t\t\tif (typeof column[key] !== \"undefined\") {\n\t\t\t\t\t\tfrom[key] = column[key];\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (from.columns) {\n\t\t\t\t\tfrom.columns = self.mergeDefinition(from.columns, column.columns);\n\t\t\t\t}\n\n\t\t\t\toutput.push(from);\n\t\t\t}\n\t\t});\n\n\t\toldCols.forEach(function (column, i) {\n\t\t\tvar from = self._findColumn(newCols, column);\n\t\t\tif (!from) {\n\t\t\t\tif (output.length > i) {\n\t\t\t\t\toutput.splice(i, 0, column);\n\t\t\t\t} else {\n\t\t\t\t\toutput.push(column);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t};\n\n\t//find matching columns\n\tPersistence.prototype._findColumn = function (columns, subject) {\n\t\tvar type = subject.columns ? \"group\" : subject.field ? \"field\" : \"object\";\n\n\t\treturn columns.find(function (col) {\n\t\t\tswitch (type) {\n\t\t\t\tcase \"group\":\n\t\t\t\t\treturn col.title === subject.title && col.columns.length === subject.columns.length;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"field\":\n\t\t\t\t\treturn col.field === subject.field;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"object\":\n\t\t\t\t\treturn col === subject;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t};\n\n\t//save data\n\tPersistence.prototype.save = function (type) {\n\t\tvar data = {};\n\n\t\tswitch (type) {\n\t\t\tcase \"columns\":\n\t\t\t\tdata = this.parseColumns(this.table.columnManager.getColumns());\n\t\t\t\tbreak;\n\n\t\t\tcase \"filter\":\n\t\t\t\tdata = this.table.modules.filter.getFilters();\n\t\t\t\tbreak;\n\n\t\t\tcase \"sort\":\n\t\t\t\tdata = this.validateSorters(this.table.modules.sort.getSort());\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tdata = this.getGroupConfig();\n\t\t\t\tbreak;\n\n\t\t\tcase \"page\":\n\t\t\t\tdata = this.getPageConfig();\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (this.writeFunc) {\n\t\t\tthis.writeFunc(this.id, type, data);\n\t\t}\n\t};\n\n\t//ensure sorters contain no function data\n\tPersistence.prototype.validateSorters = function (data) {\n\t\tdata.forEach(function (item) {\n\t\t\titem.column = item.field;\n\t\t\tdelete item.field;\n\t\t});\n\n\t\treturn data;\n\t};\n\n\tPersistence.prototype.getGroupConfig = function () {\n\t\tif (this.config.group) {\n\t\t\tif (this.config.group === true || this.config.group.groupBy) {\n\t\t\t\tdata.groupBy = this.table.options.groupBy;\n\t\t\t}\n\n\t\t\tif (this.config.group === true || this.config.group.groupStartOpen) {\n\t\t\t\tdata.groupStartOpen = this.table.options.groupStartOpen;\n\t\t\t}\n\n\t\t\tif (this.config.group === true || this.config.group.groupHeader) {\n\t\t\t\tdata.groupHeader = this.table.options.groupHeader;\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t};\n\n\tPersistence.prototype.getPageConfig = function () {\n\t\tvar data = {};\n\n\t\tif (this.config.page) {\n\t\t\tif (this.config.page === true || this.config.page.size) {\n\t\t\t\tdata.paginationSize = this.table.modules.page.getPageSize();\n\t\t\t}\n\n\t\t\tif (this.config.page === true || this.config.page.page) {\n\t\t\t\tdata.paginationInitialPage = this.table.modules.page.getPage();\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t};\n\n\t//parse columns for data to store\n\tPersistence.prototype.parseColumns = function (columns) {\n\t\tvar self = this,\n\t\t    definitions = [];\n\n\t\tcolumns.forEach(function (column) {\n\t\t\tvar defStore = {},\n\t\t\t    colDef = column.getDefinition(),\n\t\t\t    keys;\n\n\t\t\tif (column.isGroup) {\n\t\t\t\tdefStore.title = colDef.title;\n\t\t\t\tdefStore.columns = self.parseColumns(column.getColumns());\n\t\t\t} else {\n\t\t\t\tdefStore.field = column.getField();\n\n\t\t\t\tif (self.config.columns === true || self.config.columns == undefined) {\n\t\t\t\t\tkeys = Object.keys(colDef);\n\t\t\t\t\tkeys.push(\"width\");\n\t\t\t\t} else {\n\t\t\t\t\tkeys = self.config.columns;\n\t\t\t\t}\n\n\t\t\t\tkeys.forEach(function (key) {\n\n\t\t\t\t\tswitch (key) {\n\t\t\t\t\t\tcase \"width\":\n\t\t\t\t\t\t\tdefStore.width = column.getWidth();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"visible\":\n\t\t\t\t\t\t\tdefStore.visible = column.visible;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tdefStore[key] = colDef[key];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tdefinitions.push(defStore);\n\t\t});\n\n\t\treturn definitions;\n\t};\n\n\t// read peristence information from storage\n\tPersistence.prototype.readers = {\n\t\tlocal: function local(id, type) {\n\t\t\tvar data = localStorage.getItem(id + \"-\" + type);\n\n\t\t\treturn data ? JSON.parse(data) : false;\n\t\t},\n\t\tcookie: function cookie(id, type) {\n\t\t\tvar cookie = document.cookie,\n\t\t\t    key = id + \"-\" + type,\n\t\t\t    cookiePos = cookie.indexOf(key + \"=\"),\n\t\t\t    end,\n\t\t\t    data;\n\n\t\t\t//if cookie exists, decode and load column data into tabulator\n\t\t\tif (cookiePos > -1) {\n\t\t\t\tcookie = cookie.substr(cookiePos);\n\n\t\t\t\tend = cookie.indexOf(\";\");\n\n\t\t\t\tif (end > -1) {\n\t\t\t\t\tcookie = cookie.substr(0, end);\n\t\t\t\t}\n\n\t\t\t\tdata = cookie.replace(key + \"=\", \"\");\n\t\t\t}\n\n\t\t\treturn data ? JSON.parse(data) : false;\n\t\t}\n\t};\n\n\t//write persistence information to storage\n\tPersistence.prototype.writers = {\n\t\tlocal: function local(id, type, data) {\n\t\t\tlocalStorage.setItem(id + \"-\" + type, JSON.stringify(data));\n\t\t},\n\t\tcookie: function cookie(id, type, data) {\n\t\t\tvar expireDate = new Date();\n\n\t\t\texpireDate.setDate(expireDate.getDate() + 10000);\n\n\t\t\tdocument.cookie = id + \"-\" + type + \"=\" + JSON.stringify(data) + \"; expires=\" + expireDate.toUTCString();\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"persistence\", Persistence);\n\n\tvar Print = function Print(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.element = false;\n\t\tthis.manualBlock = false;\n\t};\n\n\tPrint.prototype.initialize = function () {\n\t\twindow.addEventListener(\"beforeprint\", this.replaceTable.bind(this));\n\t\twindow.addEventListener(\"afterprint\", this.cleanup.bind(this));\n\t};\n\n\tPrint.prototype.replaceTable = function () {\n\t\tif (!this.manualBlock) {\n\t\t\tthis.element = document.createElement(\"div\");\n\t\t\tthis.element.classList.add(\"tabulator-print-table\");\n\n\t\t\tthis.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig, this.table.options.printStyled, this.table.options.printRowRange, \"print\"));\n\n\t\t\tthis.table.element.style.display = \"none\";\n\n\t\t\tthis.table.element.parentNode.insertBefore(this.element, this.table.element);\n\t\t}\n\t};\n\n\tPrint.prototype.cleanup = function () {\n\t\tdocument.body.classList.remove(\"tabulator-print-fullscreen-hide\");\n\n\t\tif (this.element && this.element.parentNode) {\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\tthis.table.element.style.display = \"\";\n\t\t}\n\t};\n\n\tPrint.prototype.printFullscreen = function (visible, style, config) {\n\t\tvar scrollX = window.scrollX,\n\t\t    scrollY = window.scrollY,\n\t\t    headerEl = document.createElement(\"div\"),\n\t\t    footerEl = document.createElement(\"div\"),\n\t\t    tableEl = this.table.modules.export.genereateTable(typeof config != \"undefined\" ? config : this.table.options.printConfig, typeof style != \"undefined\" ? style : this.table.options.printStyled, visible, \"print\"),\n\t\t    headerContent,\n\t\t    footerContent;\n\n\t\tthis.manualBlock = true;\n\n\t\tthis.element = document.createElement(\"div\");\n\t\tthis.element.classList.add(\"tabulator-print-fullscreen\");\n\n\t\tif (this.table.options.printHeader) {\n\t\t\theaderEl.classList.add(\"tabulator-print-header\");\n\n\t\t\theaderContent = typeof this.table.options.printHeader == \"function\" ? this.table.options.printHeader.call(this.table) : this.table.options.printHeader;\n\n\t\t\tif (typeof headerContent == \"string\") {\n\t\t\t\theaderEl.innerHTML = headerContent;\n\t\t\t} else {\n\t\t\t\theaderEl.appendChild(headerContent);\n\t\t\t}\n\n\t\t\tthis.element.appendChild(headerEl);\n\t\t}\n\n\t\tthis.element.appendChild(tableEl);\n\n\t\tif (this.table.options.printFooter) {\n\t\t\tfooterEl.classList.add(\"tabulator-print-footer\");\n\n\t\t\tfooterContent = typeof this.table.options.printFooter == \"function\" ? this.table.options.printFooter.call(this.table) : this.table.options.printFooter;\n\n\t\t\tif (typeof footerContent == \"string\") {\n\t\t\t\tfooterEl.innerHTML = footerContent;\n\t\t\t} else {\n\t\t\t\tfooterEl.appendChild(footerContent);\n\t\t\t}\n\n\t\t\tthis.element.appendChild(footerEl);\n\t\t}\n\n\t\tdocument.body.classList.add(\"tabulator-print-fullscreen-hide\");\n\t\tdocument.body.appendChild(this.element);\n\n\t\tif (this.table.options.printFormatter) {\n\t\t\tthis.table.options.printFormatter(this.element, tableEl);\n\t\t}\n\n\t\twindow.print();\n\n\t\tthis.cleanup();\n\n\t\twindow.scrollTo(scrollX, scrollY);\n\n\t\tthis.manualBlock = false;\n\t};\n\n\tTabulator.prototype.registerModule(\"print\", Print);\n\tvar ReactiveData = function ReactiveData(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.data = false;\n\t\tthis.blocked = false; //block reactivity while performing update\n\t\tthis.origFuncs = {}; // hold original data array functions to allow replacement after data is done with\n\t\tthis.currentVersion = 0;\n\t};\n\n\tReactiveData.prototype.watchData = function (data) {\n\t\tvar self = this,\n\t\t    pushFunc,\n\t\t    version;\n\n\t\tthis.currentVersion++;\n\n\t\tversion = this.currentVersion;\n\n\t\tself.unwatchData();\n\n\t\tself.data = data;\n\n\t\t//override array push function\n\t\tself.origFuncs.push = data.push;\n\n\t\tObject.defineProperty(self.data, \"push\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function value() {\n\t\t\t\tvar args = Array.from(arguments);\n\n\t\t\t\tif (!self.blocked && version === self.currentVersion) {\n\t\t\t\t\targs.forEach(function (arg) {\n\t\t\t\t\t\tself.table.rowManager.addRowActual(arg, false);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn self.origFuncs.push.apply(data, arguments);\n\t\t\t}\n\t\t});\n\n\t\t//override array unshift function\n\t\tself.origFuncs.unshift = data.unshift;\n\n\t\tObject.defineProperty(self.data, \"unshift\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function value() {\n\t\t\t\tvar args = Array.from(arguments);\n\n\t\t\t\tif (!self.blocked && version === self.currentVersion) {\n\t\t\t\t\targs.forEach(function (arg) {\n\t\t\t\t\t\tself.table.rowManager.addRowActual(arg, true);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn self.origFuncs.unshift.apply(data, arguments);\n\t\t\t}\n\t\t});\n\n\t\t//override array shift function\n\t\tself.origFuncs.shift = data.shift;\n\n\t\tObject.defineProperty(self.data, \"shift\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function value() {\n\t\t\t\tvar row;\n\n\t\t\t\tif (!self.blocked && version === self.currentVersion) {\n\t\t\t\t\tif (self.data.length) {\n\t\t\t\t\t\trow = self.table.rowManager.getRowFromDataObject(self.data[0]);\n\n\t\t\t\t\t\tif (row) {\n\t\t\t\t\t\t\trow.deleteActual();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn self.origFuncs.shift.call(data);\n\t\t\t}\n\t\t});\n\n\t\t//override array pop function\n\t\tself.origFuncs.pop = data.pop;\n\n\t\tObject.defineProperty(self.data, \"pop\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function value() {\n\t\t\t\tvar row;\n\t\t\t\tif (!self.blocked && version === self.currentVersion) {\n\t\t\t\t\tif (self.data.length) {\n\t\t\t\t\t\trow = self.table.rowManager.getRowFromDataObject(self.data[self.data.length - 1]);\n\n\t\t\t\t\t\tif (row) {\n\t\t\t\t\t\t\trow.deleteActual();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn self.origFuncs.pop.call(data);\n\t\t\t}\n\t\t});\n\n\t\t//override array splice function\n\t\tself.origFuncs.splice = data.splice;\n\n\t\tObject.defineProperty(self.data, \"splice\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function value() {\n\t\t\t\tvar args = Array.from(arguments),\n\t\t\t\t    start = args[0] < 0 ? data.length + args[0] : args[0],\n\t\t\t\t    end = args[1],\n\t\t\t\t    newRows = args[2] ? args.slice(2) : false,\n\t\t\t\t    startRow;\n\n\t\t\t\tif (!self.blocked && version === self.currentVersion) {\n\n\t\t\t\t\t//add new rows\n\t\t\t\t\tif (newRows) {\n\t\t\t\t\t\tstartRow = data[start] ? self.table.rowManager.getRowFromDataObject(data[start]) : false;\n\n\t\t\t\t\t\tif (startRow) {\n\t\t\t\t\t\t\tnewRows.forEach(function (rowData) {\n\t\t\t\t\t\t\t\tself.table.rowManager.addRowActual(rowData, true, startRow, true);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnewRows = newRows.slice().reverse();\n\n\t\t\t\t\t\t\tnewRows.forEach(function (rowData) {\n\t\t\t\t\t\t\t\tself.table.rowManager.addRowActual(rowData, true, false, true);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t//delete removed rows\n\t\t\t\t\tif (end !== 0) {\n\t\t\t\t\t\tvar oldRows = data.slice(start, typeof args[1] === \"undefined\" ? args[1] : start + end);\n\n\t\t\t\t\t\toldRows.forEach(function (rowData, i) {\n\t\t\t\t\t\t\tvar row = self.table.rowManager.getRowFromDataObject(rowData);\n\n\t\t\t\t\t\t\tif (row) {\n\t\t\t\t\t\t\t\trow.deleteActual(i !== oldRows.length - 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tif (newRows || end !== 0) {\n\t\t\t\t\t\tself.table.rowManager.reRenderInPosition();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn self.origFuncs.splice.apply(data, arguments);\n\t\t\t}\n\t\t});\n\t};\n\n\tReactiveData.prototype.unwatchData = function () {\n\t\tif (this.data !== false) {\n\t\t\tfor (var key in this.origFuncs) {\n\t\t\t\tObject.defineProperty(this.data, key, {\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tconfigurable: true,\n\t\t\t\t\twritable: true,\n\t\t\t\t\tvalue: this.origFuncs.key\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\tReactiveData.prototype.watchRow = function (row) {\n\t\tvar self = this,\n\t\t    data = row.getData();\n\n\t\tthis.blocked = true;\n\n\t\tfor (var key in data) {\n\t\t\tthis.watchKey(row, data, key);\n\t\t}\n\n\t\tthis.blocked = false;\n\t};\n\n\tReactiveData.prototype.watchKey = function (row, data, key) {\n\t\tvar self = this,\n\t\t    props = Object.getOwnPropertyDescriptor(data, key),\n\t\t    value = data[key],\n\t\t    version = this.currentVersion;\n\n\t\tObject.defineProperty(data, key, {\n\t\t\tset: function set(newValue) {\n\t\t\t\tvalue = newValue;\n\t\t\t\tif (!self.blocked && version === self.currentVersion) {\n\t\t\t\t\tvar update = {};\n\t\t\t\t\tupdate[key] = newValue;\n\t\t\t\t\trow.updateData(update);\n\t\t\t\t}\n\n\t\t\t\tif (props.set) {\n\t\t\t\t\tprops.set(newValue);\n\t\t\t\t}\n\t\t\t},\n\t\t\tget: function get() {\n\n\t\t\t\tif (props.get) {\n\t\t\t\t\tprops.get();\n\t\t\t\t}\n\n\t\t\t\treturn value;\n\t\t\t}\n\t\t});\n\t};\n\n\tReactiveData.prototype.unwatchRow = function (row) {\n\t\tvar data = row.getData();\n\n\t\tfor (var key in data) {\n\t\t\tObject.defineProperty(data, key, {\n\t\t\t\tvalue: data[key]\n\t\t\t});\n\t\t}\n\t};\n\n\tReactiveData.prototype.block = function () {\n\t\tthis.blocked = true;\n\t};\n\n\tReactiveData.prototype.unblock = function () {\n\t\tthis.blocked = false;\n\t};\n\n\tTabulator.prototype.registerModule(\"reactiveData\", ReactiveData);\n\n\tvar ResizeColumns = function ResizeColumns(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.startColumn = false;\n\t\tthis.startX = false;\n\t\tthis.startWidth = false;\n\t\tthis.handle = null;\n\t\tthis.prevHandle = null;\n\t};\n\n\tResizeColumns.prototype.initializeColumn = function (type, column, element) {\n\t\tvar self = this,\n\t\t    variableHeight = false,\n\t\t    mode = this.table.options.resizableColumns;\n\n\t\t//set column resize mode\n\t\tif (type === \"header\") {\n\t\t\tvariableHeight = column.definition.formatter == \"textarea\" || column.definition.variableHeight;\n\t\t\tcolumn.modules.resize = { variableHeight: variableHeight };\n\t\t}\n\n\t\tif (mode === true || mode == type) {\n\n\t\t\tvar handle = document.createElement('div');\n\t\t\thandle.className = \"tabulator-col-resize-handle\";\n\n\t\t\tvar prevHandle = document.createElement('div');\n\t\t\tprevHandle.className = \"tabulator-col-resize-handle prev\";\n\n\t\t\thandle.addEventListener(\"click\", function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\n\t\t\tvar handleDown = function handleDown(e) {\n\t\t\t\tvar nearestColumn = column.getLastColumn();\n\n\t\t\t\tif (nearestColumn && self._checkResizability(nearestColumn)) {\n\t\t\t\t\tself.startColumn = column;\n\t\t\t\t\tself._mouseDown(e, nearestColumn, handle);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\thandle.addEventListener(\"mousedown\", handleDown);\n\t\t\thandle.addEventListener(\"touchstart\", handleDown, { passive: true });\n\n\t\t\t//reszie column on  double click\n\t\t\thandle.addEventListener(\"dblclick\", function (e) {\n\t\t\t\tvar col = column.getLastColumn();\n\n\t\t\t\tif (col && self._checkResizability(col)) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tcol.reinitializeWidth(true);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tprevHandle.addEventListener(\"click\", function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\n\t\t\tvar prevHandleDown = function prevHandleDown(e) {\n\t\t\t\tvar nearestColumn, colIndex, prevColumn;\n\n\t\t\t\tnearestColumn = column.getFirstColumn();\n\n\t\t\t\tif (nearestColumn) {\n\t\t\t\t\tcolIndex = self.table.columnManager.findColumnIndex(nearestColumn);\n\t\t\t\t\tprevColumn = colIndex > 0 ? self.table.columnManager.getColumnByIndex(colIndex - 1) : false;\n\n\t\t\t\t\tif (prevColumn && self._checkResizability(prevColumn)) {\n\t\t\t\t\t\tself.startColumn = column;\n\t\t\t\t\t\tself._mouseDown(e, prevColumn, prevHandle);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tprevHandle.addEventListener(\"mousedown\", prevHandleDown);\n\t\t\tprevHandle.addEventListener(\"touchstart\", prevHandleDown, { passive: true });\n\n\t\t\t//resize column on double click\n\t\t\tprevHandle.addEventListener(\"dblclick\", function (e) {\n\t\t\t\tvar nearestColumn, colIndex, prevColumn;\n\n\t\t\t\tnearestColumn = column.getFirstColumn();\n\n\t\t\t\tif (nearestColumn) {\n\t\t\t\t\tcolIndex = self.table.columnManager.findColumnIndex(nearestColumn);\n\t\t\t\t\tprevColumn = colIndex > 0 ? self.table.columnManager.getColumnByIndex(colIndex - 1) : false;\n\n\t\t\t\t\tif (prevColumn && self._checkResizability(prevColumn)) {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\tprevColumn.reinitializeWidth(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\telement.appendChild(handle);\n\t\t\telement.appendChild(prevHandle);\n\t\t}\n\t};\n\n\tResizeColumns.prototype._checkResizability = function (column) {\n\t\treturn typeof column.definition.resizable != \"undefined\" ? column.definition.resizable : this.table.options.resizableColumns;\n\t};\n\n\tResizeColumns.prototype._mouseDown = function (e, column, handle) {\n\t\tvar self = this;\n\n\t\tself.table.element.classList.add(\"tabulator-block-select\");\n\n\t\tfunction mouseMove(e) {\n\t\t\t// self.table.columnManager.tempScrollBlock();\n\n\t\t\tcolumn.setWidth(self.startWidth + ((typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX) - self.startX));\n\n\t\t\tif (!self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight) {\n\t\t\t\tcolumn.checkCellHeights();\n\t\t\t}\n\t\t}\n\n\t\tfunction mouseUp(e) {\n\n\t\t\t//block editor from taking action while resizing is taking place\n\t\t\tif (self.startColumn.modules.edit) {\n\t\t\t\tself.startColumn.modules.edit.blocked = false;\n\t\t\t}\n\n\t\t\tif (self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight) {\n\t\t\t\tcolumn.checkCellHeights();\n\t\t\t}\n\n\t\t\tdocument.body.removeEventListener(\"mouseup\", mouseUp);\n\t\t\tdocument.body.removeEventListener(\"mousemove\", mouseMove);\n\n\t\t\thandle.removeEventListener(\"touchmove\", mouseMove);\n\t\t\thandle.removeEventListener(\"touchend\", mouseUp);\n\n\t\t\tself.table.element.classList.remove(\"tabulator-block-select\");\n\n\t\t\tif (self.table.options.persistence && self.table.modExists(\"persistence\", true) && self.table.modules.persistence.config.columns) {\n\t\t\t\tself.table.modules.persistence.save(\"columns\");\n\t\t\t}\n\n\t\t\tself.table.options.columnResized.call(self.table, column.getComponent());\n\t\t}\n\n\t\te.stopPropagation(); //prevent resize from interfereing with movable columns\n\n\t\t//block editor from taking action while resizing is taking place\n\t\tif (self.startColumn.modules.edit) {\n\t\t\tself.startColumn.modules.edit.blocked = true;\n\t\t}\n\n\t\tself.startX = typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX;\n\t\tself.startWidth = column.getWidth();\n\n\t\tdocument.body.addEventListener(\"mousemove\", mouseMove);\n\t\tdocument.body.addEventListener(\"mouseup\", mouseUp);\n\t\thandle.addEventListener(\"touchmove\", mouseMove, { passive: true });\n\t\thandle.addEventListener(\"touchend\", mouseUp);\n\t};\n\n\tTabulator.prototype.registerModule(\"resizeColumns\", ResizeColumns);\n\tvar ResizeRows = function ResizeRows(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.startColumn = false;\n\t\tthis.startY = false;\n\t\tthis.startHeight = false;\n\t\tthis.handle = null;\n\t\tthis.prevHandle = null;\n\t};\n\n\tResizeRows.prototype.initializeRow = function (row) {\n\t\tvar self = this,\n\t\t    rowEl = row.getElement();\n\n\t\tvar handle = document.createElement('div');\n\t\thandle.className = \"tabulator-row-resize-handle\";\n\n\t\tvar prevHandle = document.createElement('div');\n\t\tprevHandle.className = \"tabulator-row-resize-handle prev\";\n\n\t\thandle.addEventListener(\"click\", function (e) {\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tvar handleDown = function handleDown(e) {\n\t\t\tself.startRow = row;\n\t\t\tself._mouseDown(e, row, handle);\n\t\t};\n\n\t\thandle.addEventListener(\"mousedown\", handleDown);\n\t\thandle.addEventListener(\"touchstart\", handleDown, { passive: true });\n\n\t\tprevHandle.addEventListener(\"click\", function (e) {\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tvar prevHandleDown = function prevHandleDown(e) {\n\t\t\tvar prevRow = self.table.rowManager.prevDisplayRow(row);\n\n\t\t\tif (prevRow) {\n\t\t\t\tself.startRow = prevRow;\n\t\t\t\tself._mouseDown(e, prevRow, prevHandle);\n\t\t\t}\n\t\t};\n\n\t\tprevHandle.addEventListener(\"mousedown\", prevHandleDown);\n\t\tprevHandle.addEventListener(\"touchstart\", prevHandleDown, { passive: true });\n\n\t\trowEl.appendChild(handle);\n\t\trowEl.appendChild(prevHandle);\n\t};\n\n\tResizeRows.prototype._mouseDown = function (e, row, handle) {\n\t\tvar self = this;\n\n\t\tself.table.element.classList.add(\"tabulator-block-select\");\n\n\t\tfunction mouseMove(e) {\n\t\t\trow.setHeight(self.startHeight + ((typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY) - self.startY));\n\t\t}\n\n\t\tfunction mouseUp(e) {\n\n\t\t\t// //block editor from taking action while resizing is taking place\n\t\t\t// if(self.startColumn.modules.edit){\n\t\t\t// \tself.startColumn.modules.edit.blocked = false;\n\t\t\t// }\n\n\t\t\tdocument.body.removeEventListener(\"mouseup\", mouseMove);\n\t\t\tdocument.body.removeEventListener(\"mousemove\", mouseMove);\n\n\t\t\thandle.removeEventListener(\"touchmove\", mouseMove);\n\t\t\thandle.removeEventListener(\"touchend\", mouseUp);\n\n\t\t\tself.table.element.classList.remove(\"tabulator-block-select\");\n\n\t\t\tself.table.options.rowResized.call(this.table, row.getComponent());\n\t\t}\n\n\t\te.stopPropagation(); //prevent resize from interfereing with movable columns\n\n\t\t//block editor from taking action while resizing is taking place\n\t\t// if(self.startColumn.modules.edit){\n\t\t// \tself.startColumn.modules.edit.blocked = true;\n\t\t// }\n\n\t\tself.startY = typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY;\n\t\tself.startHeight = row.getHeight();\n\n\t\tdocument.body.addEventListener(\"mousemove\", mouseMove);\n\t\tdocument.body.addEventListener(\"mouseup\", mouseUp);\n\n\t\thandle.addEventListener(\"touchmove\", mouseMove, { passive: true });\n\t\thandle.addEventListener(\"touchend\", mouseUp);\n\t};\n\n\tTabulator.prototype.registerModule(\"resizeRows\", ResizeRows);\n\tvar ResizeTable = function ResizeTable(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.binding = false;\n\t\tthis.observer = false;\n\t\tthis.containerObserver = false;\n\n\t\tthis.tableHeight = 0;\n\t\tthis.tableWidth = 0;\n\t\tthis.containerHeight = 0;\n\t\tthis.containerWidth = 0;\n\n\t\tthis.autoResize = false;\n\t};\n\n\tResizeTable.prototype.initialize = function (row) {\n\t\tvar _this76 = this;\n\n\t\tvar table = this.table,\n\t\t    tableStyle;\n\n\t\tthis.tableHeight = table.element.clientHeight;\n\t\tthis.tableWidth = table.element.clientWidth;\n\n\t\tif (table.element.parentNode) {\n\t\t\tthis.containerHeight = table.element.parentNode.clientHeight;\n\t\t\tthis.containerWidth = table.element.parentNode.clientWidth;\n\t\t}\n\n\t\tif (typeof ResizeObserver !== \"undefined\" && table.rowManager.getRenderMode() === \"virtual\") {\n\n\t\t\tthis.autoResize = true;\n\n\t\t\tthis.observer = new ResizeObserver(function (entry) {\n\t\t\t\tif (!table.browserMobile || table.browserMobile && !table.modules.edit.currentCell) {\n\n\t\t\t\t\tvar nodeHeight = Math.floor(entry[0].contentRect.height);\n\t\t\t\t\tvar nodeWidth = Math.floor(entry[0].contentRect.width);\n\n\t\t\t\t\tif (_this76.tableHeight != nodeHeight || _this76.tableWidth != nodeWidth) {\n\t\t\t\t\t\t_this76.tableHeight = nodeHeight;\n\t\t\t\t\t\t_this76.tableWidth = nodeWidth;\n\n\t\t\t\t\t\tif (table.element.parentNode) {\n\t\t\t\t\t\t\t_this76.containerHeight = table.element.parentNode.clientHeight;\n\t\t\t\t\t\t\t_this76.containerWidth = table.element.parentNode.clientWidth;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttable.redraw();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.observer.observe(table.element);\n\n\t\t\ttableStyle = window.getComputedStyle(table.element);\n\n\t\t\tif (this.table.element.parentNode && !this.table.rowManager.fixedHeight && (tableStyle.getPropertyValue(\"max-height\") || tableStyle.getPropertyValue(\"min-height\"))) {\n\n\t\t\t\tthis.containerObserver = new ResizeObserver(function (entry) {\n\t\t\t\t\tif (!table.browserMobile || table.browserMobile && !table.modules.edit.currentCell) {\n\n\t\t\t\t\t\tvar nodeHeight = Math.floor(entry[0].contentRect.height);\n\t\t\t\t\t\tvar nodeWidth = Math.floor(entry[0].contentRect.width);\n\n\t\t\t\t\t\tif (_this76.containerHeight != nodeHeight || _this76.containerWidth != nodeWidth) {\n\t\t\t\t\t\t\t_this76.containerHeight = nodeHeight;\n\t\t\t\t\t\t\t_this76.containerWidth = nodeWidth;\n\t\t\t\t\t\t\t_this76.tableHeight = table.element.clientHeight;\n\t\t\t\t\t\t\t_this76.tableWidth = table.element.clientWidth;\n\n\t\t\t\t\t\t\ttable.redraw();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttable.redraw();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis.containerObserver.observe(this.table.element.parentNode);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.binding = function () {\n\t\t\t\tif (!table.browserMobile || table.browserMobile && !table.modules.edit.currentCell) {\n\t\t\t\t\ttable.redraw();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\twindow.addEventListener(\"resize\", this.binding);\n\t\t}\n\t};\n\n\tResizeTable.prototype.clearBindings = function (row) {\n\t\tif (this.binding) {\n\t\t\twindow.removeEventListener(\"resize\", this.binding);\n\t\t}\n\n\t\tif (this.observer) {\n\t\t\tthis.observer.unobserve(this.table.element);\n\t\t}\n\n\t\tif (this.containerObserver) {\n\t\t\tthis.containerObserver.unobserve(this.table.element.parentNode);\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"resizeTable\", ResizeTable);\n\tvar ResponsiveLayout = function ResponsiveLayout(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.columns = [];\n\t\tthis.hiddenColumns = [];\n\t\tthis.mode = \"\";\n\t\tthis.index = 0;\n\t\tthis.collapseFormatter = [];\n\t\tthis.collapseStartOpen = true;\n\t\tthis.collapseHandleColumn = false;\n\t};\n\n\t//generate resposive columns list\n\tResponsiveLayout.prototype.initialize = function () {\n\t\tvar self = this,\n\t\t    columns = [];\n\n\t\tthis.mode = this.table.options.responsiveLayout;\n\t\tthis.collapseFormatter = this.table.options.responsiveLayoutCollapseFormatter || this.formatCollapsedData;\n\t\tthis.collapseStartOpen = this.table.options.responsiveLayoutCollapseStartOpen;\n\t\tthis.hiddenColumns = [];\n\n\t\t//detemine level of responsivity for each column\n\t\tthis.table.columnManager.columnsByIndex.forEach(function (column, i) {\n\t\t\tif (column.modules.responsive) {\n\t\t\t\tif (column.modules.responsive.order && column.modules.responsive.visible) {\n\t\t\t\t\tcolumn.modules.responsive.index = i;\n\t\t\t\t\tcolumns.push(column);\n\n\t\t\t\t\tif (!column.visible && self.mode === \"collapse\") {\n\t\t\t\t\t\tself.hiddenColumns.push(column);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t//sort list by responsivity\n\t\tcolumns = columns.reverse();\n\t\tcolumns = columns.sort(function (a, b) {\n\t\t\tvar diff = b.modules.responsive.order - a.modules.responsive.order;\n\t\t\treturn diff || b.modules.responsive.index - a.modules.responsive.index;\n\t\t});\n\n\t\tthis.columns = columns;\n\n\t\tif (this.mode === \"collapse\") {\n\t\t\tthis.generateCollapsedContent();\n\t\t}\n\n\t\t//assign collapse column\n\t\tfor (var _iterator = this.table.columnManager.columnsByIndex, _isArray = Array.isArray(_iterator), _i13 = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n\t\t\tvar _ref;\n\n\t\t\tif (_isArray) {\n\t\t\t\tif (_i13 >= _iterator.length) break;\n\t\t\t\t_ref = _iterator[_i13++];\n\t\t\t} else {\n\t\t\t\t_i13 = _iterator.next();\n\t\t\t\tif (_i13.done) break;\n\t\t\t\t_ref = _i13.value;\n\t\t\t}\n\n\t\t\tvar col = _ref;\n\n\t\t\tif (col.definition.formatter == \"responsiveCollapse\") {\n\t\t\t\tthis.collapseHandleColumn = col;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (this.collapseHandleColumn) {\n\t\t\tif (this.hiddenColumns.length) {\n\t\t\t\tthis.collapseHandleColumn.show();\n\t\t\t} else {\n\t\t\t\tthis.collapseHandleColumn.hide();\n\t\t\t}\n\t\t}\n\t};\n\n\t//define layout information\n\tResponsiveLayout.prototype.initializeColumn = function (column) {\n\t\tvar def = column.getDefinition();\n\n\t\tcolumn.modules.responsive = { order: typeof def.responsive === \"undefined\" ? 1 : def.responsive, visible: def.visible === false ? false : true };\n\t};\n\n\tResponsiveLayout.prototype.initializeRow = function (row) {\n\t\tvar el;\n\n\t\tif (row.type !== \"calc\") {\n\t\t\tel = document.createElement(\"div\");\n\t\t\tel.classList.add(\"tabulator-responsive-collapse\");\n\n\t\t\trow.modules.responsiveLayout = {\n\t\t\t\telement: el,\n\t\t\t\topen: this.collapseStartOpen\n\t\t\t};\n\n\t\t\tif (!this.collapseStartOpen) {\n\t\t\t\tel.style.display = 'none';\n\t\t\t}\n\t\t}\n\t};\n\n\tResponsiveLayout.prototype.layoutRow = function (row) {\n\t\tvar rowEl = row.getElement();\n\n\t\tif (row.modules.responsiveLayout) {\n\t\t\trowEl.appendChild(row.modules.responsiveLayout.element);\n\t\t\tthis.generateCollapsedRowContent(row);\n\t\t}\n\t};\n\n\t//update column visibility\n\tResponsiveLayout.prototype.updateColumnVisibility = function (column, visible) {\n\t\tvar index;\n\t\tif (column.modules.responsive) {\n\t\t\tcolumn.modules.responsive.visible = visible;\n\t\t\tthis.initialize();\n\t\t}\n\t};\n\n\tResponsiveLayout.prototype.hideColumn = function (column) {\n\t\tvar colCount = this.hiddenColumns.length;\n\n\t\tcolumn.hide(false, true);\n\n\t\tif (this.mode === \"collapse\") {\n\t\t\tthis.hiddenColumns.unshift(column);\n\t\t\tthis.generateCollapsedContent();\n\n\t\t\tif (this.collapseHandleColumn && !colCount) {\n\t\t\t\tthis.collapseHandleColumn.show();\n\t\t\t}\n\t\t}\n\t};\n\n\tResponsiveLayout.prototype.showColumn = function (column) {\n\t\tvar index;\n\n\t\tcolumn.show(false, true);\n\t\t//set column width to prevent calculation loops on uninitialized columns\n\t\tcolumn.setWidth(column.getWidth());\n\n\t\tif (this.mode === \"collapse\") {\n\t\t\tindex = this.hiddenColumns.indexOf(column);\n\n\t\t\tif (index > -1) {\n\t\t\t\tthis.hiddenColumns.splice(index, 1);\n\t\t\t}\n\n\t\t\tthis.generateCollapsedContent();\n\n\t\t\tif (this.collapseHandleColumn && !this.hiddenColumns.length) {\n\t\t\t\tthis.collapseHandleColumn.hide();\n\t\t\t}\n\t\t}\n\t};\n\n\t//redraw columns to fit space\n\tResponsiveLayout.prototype.update = function () {\n\t\tvar self = this,\n\t\t    working = true;\n\n\t\twhile (working) {\n\n\t\t\tvar width = self.table.modules.layout.getMode() == \"fitColumns\" ? self.table.columnManager.getFlexBaseWidth() : self.table.columnManager.getWidth();\n\n\t\t\tvar diff = (self.table.options.headerVisible ? self.table.columnManager.element.clientWidth : self.table.element.clientWidth) - width;\n\n\t\t\tif (diff < 0) {\n\t\t\t\t//table is too wide\n\t\t\t\tvar column = self.columns[self.index];\n\n\t\t\t\tif (column) {\n\t\t\t\t\tself.hideColumn(column);\n\t\t\t\t\tself.index++;\n\t\t\t\t} else {\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\t//table has spare space\n\t\t\t\tvar _column = self.columns[self.index - 1];\n\n\t\t\t\tif (_column) {\n\t\t\t\t\tif (diff > 0) {\n\t\t\t\t\t\tif (diff >= _column.getWidth()) {\n\t\t\t\t\t\t\tself.showColumn(_column);\n\t\t\t\t\t\t\tself.index--;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tworking = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tworking = false;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!self.table.rowManager.activeRowsCount) {\n\t\t\t\tself.table.rowManager.renderEmptyScroll();\n\t\t\t}\n\t\t}\n\t};\n\n\tResponsiveLayout.prototype.generateCollapsedContent = function () {\n\t\tvar self = this,\n\t\t    rows = this.table.rowManager.getDisplayRows();\n\n\t\trows.forEach(function (row) {\n\t\t\tself.generateCollapsedRowContent(row);\n\t\t});\n\t};\n\n\tResponsiveLayout.prototype.generateCollapsedRowContent = function (row) {\n\t\tvar el, contents;\n\n\t\tif (row.modules.responsiveLayout) {\n\t\t\tel = row.modules.responsiveLayout.element;\n\n\t\t\twhile (el.firstChild) {\n\t\t\t\tel.removeChild(el.firstChild);\n\t\t\t}contents = this.collapseFormatter(this.generateCollapsedRowData(row));\n\t\t\tif (contents) {\n\t\t\t\tel.appendChild(contents);\n\t\t\t}\n\t\t}\n\t};\n\n\tResponsiveLayout.prototype.generateCollapsedRowData = function (row) {\n\t\tvar self = this,\n\t\t    data = row.getData(),\n\t\t    output = [],\n\t\t    mockCellComponent;\n\n\t\tthis.hiddenColumns.forEach(function (column) {\n\t\t\tvar value = column.getFieldValue(data);\n\n\t\t\tif (column.definition.title && column.field) {\n\t\t\t\tif (column.modules.format && self.table.options.responsiveLayoutCollapseUseFormatters) {\n\n\t\t\t\t\tmockCellComponent = {\n\t\t\t\t\t\tvalue: false,\n\t\t\t\t\t\tdata: {},\n\t\t\t\t\t\tgetValue: function getValue() {\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetData: function getData() {\n\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetElement: function getElement() {\n\t\t\t\t\t\t\treturn document.createElement(\"div\");\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetRow: function getRow() {\n\t\t\t\t\t\t\treturn row.getComponent();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetColumn: function getColumn() {\n\t\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\toutput.push({\n\t\t\t\t\t\ttitle: column.definition.title,\n\t\t\t\t\t\tvalue: column.modules.format.formatter.call(self.table.modules.format, mockCellComponent, column.modules.format.params)\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\toutput.push({\n\t\t\t\t\t\ttitle: column.definition.title,\n\t\t\t\t\t\tvalue: value\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t};\n\n\tResponsiveLayout.prototype.formatCollapsedData = function (data) {\n\t\tvar list = document.createElement(\"table\"),\n\t\t    listContents = \"\";\n\n\t\tdata.forEach(function (item) {\n\t\t\tvar div = document.createElement(\"div\");\n\n\t\t\tif (item.value instanceof Node) {\n\t\t\t\tdiv.appendChild(item.value);\n\t\t\t\titem.value = div.innerHTML;\n\t\t\t}\n\n\t\t\tlistContents += \"<tr><td><strong>\" + item.title + \"</strong></td><td>\" + item.value + \"</td></tr>\";\n\t\t});\n\n\t\tlist.innerHTML = listContents;\n\n\t\treturn Object.keys(data).length ? list : \"\";\n\t};\n\n\tTabulator.prototype.registerModule(\"responsiveLayout\", ResponsiveLayout);\n\n\tvar SelectRow = function SelectRow(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.selecting = false; //flag selecting in progress\n\t\tthis.lastClickedRow = false; //last clicked row\n\t\tthis.selectPrev = []; //hold previously selected element for drag drop selection\n\t\tthis.selectedRows = []; //hold selected rows\n\t\tthis.headerCheckboxElement = null; // hold header select element\n\t};\n\n\tSelectRow.prototype.clearSelectionData = function (silent) {\n\t\tthis.selecting = false;\n\t\tthis.lastClickedRow = false;\n\t\tthis.selectPrev = [];\n\t\tthis.selectedRows = [];\n\n\t\tif (!silent) {\n\t\t\tthis._rowSelectionChanged();\n\t\t}\n\t};\n\n\tSelectRow.prototype.initializeRow = function (row) {\n\t\tvar self = this,\n\t\t    element = row.getElement();\n\n\t\t// trigger end of row selection\n\t\tvar endSelect = function endSelect() {\n\n\t\t\tsetTimeout(function () {\n\t\t\t\tself.selecting = false;\n\t\t\t}, 50);\n\n\t\t\tdocument.body.removeEventListener(\"mouseup\", endSelect);\n\t\t};\n\n\t\trow.modules.select = { selected: false };\n\n\t\t//set row selection class\n\t\tif (self.table.options.selectableCheck.call(this.table, row.getComponent())) {\n\t\t\telement.classList.add(\"tabulator-selectable\");\n\t\t\telement.classList.remove(\"tabulator-unselectable\");\n\n\t\t\tif (self.table.options.selectable && self.table.options.selectable != \"highlight\") {\n\t\t\t\tif (self.table.options.selectableRangeMode === \"click\") {\n\t\t\t\t\telement.addEventListener(\"click\", function (e) {\n\t\t\t\t\t\tif (e.shiftKey) {\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t\tself.lastClickedRow = self.lastClickedRow || row;\n\n\t\t\t\t\t\t\tvar lastClickedRowIdx = self.table.rowManager.getDisplayRowIndex(self.lastClickedRow);\n\t\t\t\t\t\t\tvar rowIdx = self.table.rowManager.getDisplayRowIndex(row);\n\n\t\t\t\t\t\t\tvar fromRowIdx = lastClickedRowIdx <= rowIdx ? lastClickedRowIdx : rowIdx;\n\t\t\t\t\t\t\tvar toRowIdx = lastClickedRowIdx >= rowIdx ? lastClickedRowIdx : rowIdx;\n\n\t\t\t\t\t\t\tvar rows = self.table.rowManager.getDisplayRows().slice(0);\n\t\t\t\t\t\t\tvar toggledRows = rows.splice(fromRowIdx, toRowIdx - fromRowIdx + 1);\n\n\t\t\t\t\t\t\tif (e.ctrlKey || e.metaKey) {\n\t\t\t\t\t\t\t\ttoggledRows.forEach(function (toggledRow) {\n\t\t\t\t\t\t\t\t\tif (toggledRow !== self.lastClickedRow) {\n\n\t\t\t\t\t\t\t\t\t\tif (self.table.options.selectable !== true && !self.isRowSelected(row)) {\n\t\t\t\t\t\t\t\t\t\t\tif (self.selectedRows.length < self.table.options.selectable) {\n\t\t\t\t\t\t\t\t\t\t\t\tself.toggleRow(toggledRow);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tself.toggleRow(toggledRow);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tself.lastClickedRow = row;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tself.deselectRows(undefined, true);\n\n\t\t\t\t\t\t\t\tif (self.table.options.selectable !== true) {\n\t\t\t\t\t\t\t\t\tif (toggledRows.length > self.table.options.selectable) {\n\t\t\t\t\t\t\t\t\t\ttoggledRows = toggledRows.slice(0, self.table.options.selectable);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tself.selectRows(toggledRows);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t} else if (e.ctrlKey || e.metaKey) {\n\t\t\t\t\t\t\tself.toggleRow(row);\n\t\t\t\t\t\t\tself.lastClickedRow = row;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tself.deselectRows(undefined, true);\n\t\t\t\t\t\t\tself.selectRows(row);\n\t\t\t\t\t\t\tself.lastClickedRow = row;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\telement.addEventListener(\"click\", function (e) {\n\t\t\t\t\t\tif (!self.table.modExists(\"edit\") || !self.table.modules.edit.getCurrentCell()) {\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!self.selecting) {\n\t\t\t\t\t\t\tself.toggleRow(row);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\telement.addEventListener(\"mousedown\", function (e) {\n\t\t\t\t\t\tif (e.shiftKey) {\n\t\t\t\t\t\t\tself.table._clearSelection();\n\n\t\t\t\t\t\t\tself.selecting = true;\n\n\t\t\t\t\t\t\tself.selectPrev = [];\n\n\t\t\t\t\t\t\tdocument.body.addEventListener(\"mouseup\", endSelect);\n\t\t\t\t\t\t\tdocument.body.addEventListener(\"keyup\", endSelect);\n\n\t\t\t\t\t\t\tself.toggleRow(row);\n\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\telement.addEventListener(\"mouseenter\", function (e) {\n\t\t\t\t\t\tif (self.selecting) {\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t\tself.toggleRow(row);\n\n\t\t\t\t\t\t\tif (self.selectPrev[1] == row) {\n\t\t\t\t\t\t\t\tself.toggleRow(self.selectPrev[0]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\telement.addEventListener(\"mouseout\", function (e) {\n\t\t\t\t\t\tif (self.selecting) {\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t\tself.selectPrev.unshift(row);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\telement.classList.add(\"tabulator-unselectable\");\n\t\t\telement.classList.remove(\"tabulator-selectable\");\n\t\t}\n\t};\n\n\t//toggle row selection\n\tSelectRow.prototype.toggleRow = function (row) {\n\t\tif (this.table.options.selectableCheck.call(this.table, row.getComponent())) {\n\t\t\tif (row.modules.select && row.modules.select.selected) {\n\t\t\t\tthis._deselectRow(row);\n\t\t\t} else {\n\t\t\t\tthis._selectRow(row);\n\t\t\t}\n\t\t}\n\t};\n\n\t//select a number of rows\n\tSelectRow.prototype.selectRows = function (rows) {\n\t\tvar _this77 = this;\n\n\t\tvar rowMatch;\n\n\t\tswitch (typeof rows === 'undefined' ? 'undefined' : _typeof(rows)) {\n\t\t\tcase \"undefined\":\n\t\t\t\tthis.table.rowManager.rows.forEach(function (row) {\n\t\t\t\t\t_this77._selectRow(row, true, true);\n\t\t\t\t});\n\n\t\t\t\tthis._rowSelectionChanged();\n\t\t\t\tbreak;\n\n\t\t\tcase \"string\":\n\n\t\t\t\trowMatch = this.table.rowManager.findRow(rows);\n\n\t\t\t\tif (rowMatch) {\n\t\t\t\t\tthis._selectRow(rowMatch, true, true);\n\t\t\t\t} else {\n\t\t\t\t\tthis.table.rowManager.getRows(rows).forEach(function (row) {\n\t\t\t\t\t\t_this77._selectRow(row, true, true);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tthis._rowSelectionChanged();\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tif (Array.isArray(rows)) {\n\t\t\t\t\trows.forEach(function (row) {\n\t\t\t\t\t\t_this77._selectRow(row, true, true);\n\t\t\t\t\t});\n\n\t\t\t\t\tthis._rowSelectionChanged();\n\t\t\t\t} else {\n\t\t\t\t\tthis._selectRow(rows, false, true);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\t//select an individual row\n\tSelectRow.prototype._selectRow = function (rowInfo, silent, force) {\n\t\tvar index;\n\n\t\t//handle max row count\n\t\tif (!isNaN(this.table.options.selectable) && this.table.options.selectable !== true && !force) {\n\t\t\tif (this.selectedRows.length >= this.table.options.selectable) {\n\t\t\t\tif (this.table.options.selectableRollingSelection) {\n\t\t\t\t\tthis._deselectRow(this.selectedRows[0]);\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar row = this.table.rowManager.findRow(rowInfo);\n\n\t\tif (row) {\n\t\t\tif (this.selectedRows.indexOf(row) == -1) {\n\t\t\t\tif (!row.modules.select) {\n\t\t\t\t\trow.modules.select = {};\n\t\t\t\t}\n\n\t\t\t\trow.modules.select.selected = true;\n\t\t\t\tif (row.modules.select.checkboxEl) {\n\t\t\t\t\trow.modules.select.checkboxEl.checked = true;\n\t\t\t\t}\n\t\t\t\trow.getElement().classList.add(\"tabulator-selected\");\n\n\t\t\t\tthis.selectedRows.push(row);\n\n\t\t\t\tif (this.table.options.dataTreeSelectPropagate) {\n\t\t\t\t\tthis.childRowSelection(row, true);\n\t\t\t\t}\n\n\t\t\t\tif (!silent) {\n\t\t\t\t\tthis.table.options.rowSelected.call(this.table, row.getComponent());\n\t\t\t\t}\n\n\t\t\t\tthis._rowSelectionChanged(silent);\n\t\t\t}\n\t\t} else {\n\t\t\tif (!silent) {\n\t\t\t\tconsole.warn(\"Selection Error - No such row found, ignoring selection:\" + rowInfo);\n\t\t\t}\n\t\t}\n\t};\n\n\tSelectRow.prototype.isRowSelected = function (row) {\n\t\treturn this.selectedRows.indexOf(row) !== -1;\n\t};\n\n\t//deselect a number of rows\n\tSelectRow.prototype.deselectRows = function (rows, silent) {\n\t\tvar self = this,\n\t\t    rowCount;\n\n\t\tif (typeof rows == \"undefined\") {\n\n\t\t\trowCount = self.selectedRows.length;\n\n\t\t\tfor (var _i14 = 0; _i14 < rowCount; _i14++) {\n\t\t\t\tself._deselectRow(self.selectedRows[0], true);\n\t\t\t}\n\n\t\t\tself._rowSelectionChanged(silent);\n\t\t} else {\n\t\t\tif (Array.isArray(rows)) {\n\t\t\t\trows.forEach(function (row) {\n\t\t\t\t\tself._deselectRow(row, true);\n\t\t\t\t});\n\n\t\t\t\tself._rowSelectionChanged(silent);\n\t\t\t} else {\n\t\t\t\tself._deselectRow(rows, silent);\n\t\t\t}\n\t\t}\n\t};\n\n\t//deselect an individual row\n\tSelectRow.prototype._deselectRow = function (rowInfo, silent) {\n\t\tvar self = this,\n\t\t    row = self.table.rowManager.findRow(rowInfo),\n\t\t    index;\n\n\t\tif (row) {\n\t\t\tindex = self.selectedRows.findIndex(function (selectedRow) {\n\t\t\t\treturn selectedRow == row;\n\t\t\t});\n\n\t\t\tif (index > -1) {\n\n\t\t\t\tif (!row.modules.select) {\n\t\t\t\t\trow.modules.select = {};\n\t\t\t\t}\n\n\t\t\t\trow.modules.select.selected = false;\n\t\t\t\tif (row.modules.select.checkboxEl) {\n\t\t\t\t\trow.modules.select.checkboxEl.checked = false;\n\t\t\t\t}\n\t\t\t\trow.getElement().classList.remove(\"tabulator-selected\");\n\t\t\t\tself.selectedRows.splice(index, 1);\n\n\t\t\t\tif (this.table.options.dataTreeSelectPropagate) {\n\t\t\t\t\tthis.childRowSelection(row, false);\n\t\t\t\t}\n\n\t\t\t\tif (!silent) {\n\t\t\t\t\tself.table.options.rowDeselected.call(this.table, row.getComponent());\n\t\t\t\t}\n\n\t\t\t\tself._rowSelectionChanged(silent);\n\t\t\t}\n\t\t} else {\n\t\t\tif (!silent) {\n\t\t\t\tconsole.warn(\"Deselection Error - No such row found, ignoring selection:\" + rowInfo);\n\t\t\t}\n\t\t}\n\t};\n\n\tSelectRow.prototype.getSelectedData = function () {\n\t\tvar data = [];\n\n\t\tthis.selectedRows.forEach(function (row) {\n\t\t\tdata.push(row.getData());\n\t\t});\n\n\t\treturn data;\n\t};\n\n\tSelectRow.prototype.getSelectedRows = function () {\n\n\t\tvar rows = [];\n\n\t\tthis.selectedRows.forEach(function (row) {\n\t\t\trows.push(row.getComponent());\n\t\t});\n\n\t\treturn rows;\n\t};\n\n\tSelectRow.prototype._rowSelectionChanged = function (silent) {\n\t\tif (this.headerCheckboxElement) {\n\t\t\tif (this.selectedRows.length === 0) {\n\t\t\t\tthis.headerCheckboxElement.checked = false;\n\t\t\t\tthis.headerCheckboxElement.indeterminate = false;\n\t\t\t} else if (this.table.rowManager.rows.length === this.selectedRows.length) {\n\t\t\t\tthis.headerCheckboxElement.checked = true;\n\t\t\t\tthis.headerCheckboxElement.indeterminate = false;\n\t\t\t} else {\n\t\t\t\tthis.headerCheckboxElement.indeterminate = true;\n\t\t\t\tthis.headerCheckboxElement.checked = false;\n\t\t\t}\n\t\t}\n\n\t\tif (!silent) {\n\t\t\tthis.table.options.rowSelectionChanged.call(this.table, this.getSelectedData(), this.getSelectedRows());\n\t\t}\n\t};\n\n\tSelectRow.prototype.registerRowSelectCheckbox = function (row, element) {\n\t\tif (!row._row.modules.select) {\n\t\t\trow._row.modules.select = {};\n\t\t}\n\n\t\trow._row.modules.select.checkboxEl = element;\n\t};\n\n\tSelectRow.prototype.registerHeaderSelectCheckbox = function (element) {\n\t\tthis.headerCheckboxElement = element;\n\t};\n\n\tSelectRow.prototype.childRowSelection = function (row, select) {\n\t\tvar children = this.table.modules.dataTree.getChildren(row);\n\n\t\tif (select) {\n\t\t\tfor (var _iterator2 = children, _isArray2 = Array.isArray(_iterator2), _i15 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n\t\t\t\tvar _ref2;\n\n\t\t\t\tif (_isArray2) {\n\t\t\t\t\tif (_i15 >= _iterator2.length) break;\n\t\t\t\t\t_ref2 = _iterator2[_i15++];\n\t\t\t\t} else {\n\t\t\t\t\t_i15 = _iterator2.next();\n\t\t\t\t\tif (_i15.done) break;\n\t\t\t\t\t_ref2 = _i15.value;\n\t\t\t\t}\n\n\t\t\t\tvar child = _ref2;\n\n\t\t\t\tthis._selectRow(child, true);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (var _iterator3 = children, _isArray3 = Array.isArray(_iterator3), _i16 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {\n\t\t\t\tvar _ref3;\n\n\t\t\t\tif (_isArray3) {\n\t\t\t\t\tif (_i16 >= _iterator3.length) break;\n\t\t\t\t\t_ref3 = _iterator3[_i16++];\n\t\t\t\t} else {\n\t\t\t\t\t_i16 = _iterator3.next();\n\t\t\t\t\tif (_i16.done) break;\n\t\t\t\t\t_ref3 = _i16.value;\n\t\t\t\t}\n\n\t\t\t\tvar _child = _ref3;\n\n\t\t\t\tthis._deselectRow(_child, true);\n\t\t\t}\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"selectRow\", SelectRow);\n\n\tvar Sort = function Sort(table) {\n\t\tthis.table = table; //hold Tabulator object\n\t\tthis.sortList = []; //holder current sort\n\t\tthis.changed = false; //has the sort changed since last render\n\t};\n\n\t//initialize column header for sorting\n\tSort.prototype.initializeColumn = function (column, content) {\n\t\tvar self = this,\n\t\t    sorter = false,\n\t\t    colEl,\n\t\t    arrowEl;\n\n\t\tswitch (_typeof(column.definition.sorter)) {\n\t\t\tcase \"string\":\n\t\t\t\tif (self.sorters[column.definition.sorter]) {\n\t\t\t\t\tsorter = self.sorters[column.definition.sorter];\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"Sort Error - No such sorter found: \", column.definition.sorter);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\tsorter = column.definition.sorter;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tcolumn.modules.sort = {\n\t\t\tsorter: sorter, dir: \"none\",\n\t\t\tparams: column.definition.sorterParams || {},\n\t\t\tstartingDir: column.definition.headerSortStartingDir || \"asc\",\n\t\t\ttristate: typeof column.definition.headerSortTristate !== \"undefined\" ? column.definition.headerSortTristate : this.table.options.headerSortTristate\n\t\t};\n\n\t\tif (typeof column.definition.headerSort === \"undefined\" ? this.table.options.headerSort !== false : column.definition.headerSort !== false) {\n\n\t\t\tcolEl = column.getElement();\n\n\t\t\tcolEl.classList.add(\"tabulator-sortable\");\n\n\t\t\tarrowEl = document.createElement(\"div\");\n\t\t\tarrowEl.classList.add(\"tabulator-arrow\");\n\t\t\t//create sorter arrow\n\t\t\tcontent.appendChild(arrowEl);\n\n\t\t\t//sort on click\n\t\t\tcolEl.addEventListener(\"click\", function (e) {\n\t\t\t\tvar dir = \"\",\n\t\t\t\t    sorters = [],\n\t\t\t\t    match = false;\n\n\t\t\t\tif (column.modules.sort) {\n\t\t\t\t\tif (column.modules.sort.tristate) {\n\t\t\t\t\t\tif (column.modules.sort.dir == \"none\") {\n\t\t\t\t\t\t\tdir = column.modules.sort.startingDir;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (column.modules.sort.dir == column.modules.sort.startingDir) {\n\t\t\t\t\t\t\t\tdir = column.modules.sort.dir == \"asc\" ? \"desc\" : \"asc\";\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdir = \"none\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tswitch (column.modules.sort.dir) {\n\t\t\t\t\t\t\tcase \"asc\":\n\t\t\t\t\t\t\t\tdir = \"desc\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase \"desc\":\n\t\t\t\t\t\t\t\tdir = \"asc\";\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tdir = column.modules.sort.startingDir;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (self.table.options.columnHeaderSortMulti && (e.shiftKey || e.ctrlKey)) {\n\t\t\t\t\t\tsorters = self.getSort();\n\n\t\t\t\t\t\tmatch = sorters.findIndex(function (sorter) {\n\t\t\t\t\t\t\treturn sorter.field === column.getField();\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (match > -1) {\n\t\t\t\t\t\t\tsorters[match].dir = dir;\n\n\t\t\t\t\t\t\tif (match != sorters.length - 1) {\n\t\t\t\t\t\t\t\tmatch = sorters.splice(match, 1)[0];\n\t\t\t\t\t\t\t\tif (dir != \"none\") {\n\t\t\t\t\t\t\t\t\tsorters.push(match);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (dir != \"none\") {\n\t\t\t\t\t\t\t\tsorters.push({ column: column, dir: dir });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//add to existing sort\n\t\t\t\t\t\tself.setSort(sorters);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (dir == \"none\") {\n\t\t\t\t\t\t\tself.clear();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t//sort by column only\n\t\t\t\t\t\t\tself.setSort(column, dir);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tself.table.rowManager.sorterRefresh(!self.sortList.length);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\t//check if the sorters have changed since last use\n\tSort.prototype.hasChanged = function () {\n\t\tvar changed = this.changed;\n\t\tthis.changed = false;\n\t\treturn changed;\n\t};\n\n\t//return current sorters\n\tSort.prototype.getSort = function () {\n\t\tvar self = this,\n\t\t    sorters = [];\n\n\t\tself.sortList.forEach(function (item) {\n\t\t\tif (item.column) {\n\t\t\t\tsorters.push({ column: item.column.getComponent(), field: item.column.getField(), dir: item.dir });\n\t\t\t}\n\t\t});\n\n\t\treturn sorters;\n\t};\n\n\t//change sort list and trigger sort\n\tSort.prototype.setSort = function (sortList, dir) {\n\t\tvar self = this,\n\t\t    newSortList = [];\n\n\t\tif (!Array.isArray(sortList)) {\n\t\t\tsortList = [{ column: sortList, dir: dir }];\n\t\t}\n\n\t\tsortList.forEach(function (item) {\n\t\t\tvar column;\n\n\t\t\tcolumn = self.table.columnManager.findColumn(item.column);\n\n\t\t\tif (column) {\n\t\t\t\titem.column = column;\n\t\t\t\tnewSortList.push(item);\n\t\t\t\tself.changed = true;\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"Sort Warning - Sort field does not exist and is being ignored: \", item.column);\n\t\t\t}\n\t\t});\n\n\t\tself.sortList = newSortList;\n\n\t\tif (this.table.options.persistence && this.table.modExists(\"persistence\", true) && this.table.modules.persistence.config.sort) {\n\t\t\tthis.table.modules.persistence.save(\"sort\");\n\t\t}\n\t};\n\n\t//clear sorters\n\tSort.prototype.clear = function () {\n\t\tthis.setSort([]);\n\t};\n\n\t//find appropriate sorter for column\n\tSort.prototype.findSorter = function (column) {\n\t\tvar row = this.table.rowManager.activeRows[0],\n\t\t    sorter = \"string\",\n\t\t    field,\n\t\t    value;\n\n\t\tif (row) {\n\t\t\trow = row.getData();\n\t\t\tfield = column.getField();\n\n\t\t\tif (field) {\n\n\t\t\t\tvalue = column.getFieldValue(row);\n\n\t\t\t\tswitch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"boolean\":\n\t\t\t\t\t\tsorter = \"boolean\";\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tif (!isNaN(value) && value !== \"\") {\n\t\t\t\t\t\t\tsorter = \"number\";\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)) {\n\t\t\t\t\t\t\t\tsorter = \"alphanum\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.sorters[sorter];\n\t};\n\n\t//work through sort list sorting data\n\tSort.prototype.sort = function (data) {\n\t\tvar self = this,\n\t\t    sortList = this.table.options.sortOrderReverse ? self.sortList.slice().reverse() : self.sortList,\n\t\t    sortListActual = [],\n\t\t    rowComponents = [],\n\t\t    lastSort;\n\n\t\tif (self.table.options.dataSorting) {\n\t\t\tself.table.options.dataSorting.call(self.table, self.getSort());\n\t\t}\n\n\t\tself.clearColumnHeaders();\n\n\t\tif (!self.table.options.ajaxSorting) {\n\n\t\t\t//build list of valid sorters and trigger column specific callbacks before sort begins\n\t\t\tsortList.forEach(function (item, i) {\n\t\t\t\tvar sortObj = item.column.modules.sort;\n\n\t\t\t\tif (item.column && sortObj) {\n\n\t\t\t\t\t//if no sorter has been defined, take a guess\n\t\t\t\t\tif (!sortObj.sorter) {\n\t\t\t\t\t\tsortObj.sorter = self.findSorter(item.column);\n\t\t\t\t\t}\n\n\t\t\t\t\titem.params = typeof sortObj.params === \"function\" ? sortObj.params(item.column.getComponent(), item.dir) : sortObj.params;\n\n\t\t\t\t\tsortListActual.push(item);\n\t\t\t\t}\n\n\t\t\t\tself.setColumnHeader(item.column, item.dir);\n\t\t\t});\n\n\t\t\t//sort data\n\t\t\tif (sortListActual.length) {\n\t\t\t\tself._sortItems(data, sortListActual);\n\t\t\t}\n\t\t} else {\n\t\t\tsortList.forEach(function (item, i) {\n\t\t\t\tself.setColumnHeader(item.column, item.dir);\n\t\t\t});\n\t\t}\n\n\t\tif (self.table.options.dataSorted) {\n\t\t\tdata.forEach(function (row) {\n\t\t\t\trowComponents.push(row.getComponent());\n\t\t\t});\n\n\t\t\tself.table.options.dataSorted.call(self.table, self.getSort(), rowComponents);\n\t\t}\n\t};\n\n\t//clear sort arrows on columns\n\tSort.prototype.clearColumnHeaders = function () {\n\t\tthis.table.columnManager.getRealColumns().forEach(function (column) {\n\t\t\tif (column.modules.sort) {\n\t\t\t\tcolumn.modules.sort.dir = \"none\";\n\t\t\t\tcolumn.getElement().setAttribute(\"aria-sort\", \"none\");\n\t\t\t}\n\t\t});\n\t};\n\n\t//set the column header sort direction\n\tSort.prototype.setColumnHeader = function (column, dir) {\n\t\tcolumn.modules.sort.dir = dir;\n\t\tcolumn.getElement().setAttribute(\"aria-sort\", dir);\n\t};\n\n\t//sort each item in sort list\n\tSort.prototype._sortItems = function (data, sortList) {\n\t\tvar _this78 = this;\n\n\t\tvar sorterCount = sortList.length - 1;\n\n\t\tdata.sort(function (a, b) {\n\t\t\tvar result;\n\n\t\t\tfor (var i = sorterCount; i >= 0; i--) {\n\t\t\t\tvar sortItem = sortList[i];\n\n\t\t\t\tresult = _this78._sortRow(a, b, sortItem.column, sortItem.dir, sortItem.params);\n\n\t\t\t\tif (result !== 0) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t});\n\t};\n\n\t//process individual rows for a sort function on active data\n\tSort.prototype._sortRow = function (a, b, column, dir, params) {\n\t\tvar el1Comp, el2Comp, colComp;\n\n\t\t//switch elements depending on search direction\n\t\tvar el1 = dir == \"asc\" ? a : b;\n\t\tvar el2 = dir == \"asc\" ? b : a;\n\n\t\ta = column.getFieldValue(el1.getData());\n\t\tb = column.getFieldValue(el2.getData());\n\n\t\ta = typeof a !== \"undefined\" ? a : \"\";\n\t\tb = typeof b !== \"undefined\" ? b : \"\";\n\n\t\tel1Comp = el1.getComponent();\n\t\tel2Comp = el2.getComponent();\n\n\t\treturn column.modules.sort.sorter.call(this, a, b, el1Comp, el2Comp, column.getComponent(), dir, params);\n\t};\n\n\t//default data sorters\n\tSort.prototype.sorters = {\n\n\t\t//sort numbers\n\t\tnumber: function number(a, b, aRow, bRow, column, dir, params) {\n\t\t\tvar alignEmptyValues = params.alignEmptyValues;\n\t\t\tvar decimal = params.decimalSeparator || \".\";\n\t\t\tvar thousand = params.thousandSeparator || \",\";\n\t\t\tvar emptyAlign = 0;\n\n\t\t\ta = parseFloat(String(a).split(thousand).join(\"\").split(decimal).join(\".\"));\n\t\t\tb = parseFloat(String(b).split(thousand).join(\"\").split(decimal).join(\".\"));\n\n\t\t\t//handle non numeric values\n\t\t\tif (isNaN(a)) {\n\t\t\t\temptyAlign = isNaN(b) ? 0 : -1;\n\t\t\t} else if (isNaN(b)) {\n\t\t\t\temptyAlign = 1;\n\t\t\t} else {\n\t\t\t\t//compare valid values\n\t\t\t\treturn a - b;\n\t\t\t}\n\n\t\t\t//fix empty values in position\n\t\t\tif (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n\t\t\t\temptyAlign *= -1;\n\t\t\t}\n\n\t\t\treturn emptyAlign;\n\t\t},\n\n\t\t//sort strings\n\t\tstring: function string(a, b, aRow, bRow, column, dir, params) {\n\t\t\tvar alignEmptyValues = params.alignEmptyValues;\n\t\t\tvar emptyAlign = 0;\n\t\t\tvar locale;\n\n\t\t\t//handle empty values\n\t\t\tif (!a) {\n\t\t\t\temptyAlign = !b ? 0 : -1;\n\t\t\t} else if (!b) {\n\t\t\t\temptyAlign = 1;\n\t\t\t} else {\n\t\t\t\t//compare valid values\n\t\t\t\tswitch (_typeof(params.locale)) {\n\t\t\t\t\tcase \"boolean\":\n\t\t\t\t\t\tif (params.locale) {\n\t\t\t\t\t\t\tlocale = this.table.modules.localize.getLocale();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\tlocale = params.locale;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\treturn String(a).toLowerCase().localeCompare(String(b).toLowerCase(), locale);\n\t\t\t}\n\n\t\t\t//fix empty values in position\n\t\t\tif (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n\t\t\t\temptyAlign *= -1;\n\t\t\t}\n\n\t\t\treturn emptyAlign;\n\t\t},\n\n\t\t//sort date\n\t\tdate: function date(a, b, aRow, bRow, column, dir, params) {\n\t\t\tif (!params.format) {\n\t\t\t\tparams.format = \"DD/MM/YYYY\";\n\t\t\t}\n\n\t\t\treturn this.sorters.datetime.call(this, a, b, aRow, bRow, column, dir, params);\n\t\t},\n\n\t\t//sort HH:mm formatted times\n\t\ttime: function time(a, b, aRow, bRow, column, dir, params) {\n\t\t\tif (!params.format) {\n\t\t\t\tparams.format = \"HH:mm\";\n\t\t\t}\n\n\t\t\treturn this.sorters.datetime.call(this, a, b, aRow, bRow, column, dir, params);\n\t\t},\n\n\t\t//sort datetime\n\t\tdatetime: function datetime(a, b, aRow, bRow, column, dir, params) {\n\t\t\tvar format = params.format || \"DD/MM/YYYY HH:mm:ss\",\n\t\t\t    alignEmptyValues = params.alignEmptyValues,\n\t\t\t    emptyAlign = 0;\n\n\t\t\tif (typeof moment != \"undefined\") {\n\t\t\t\ta = moment(a, format);\n\t\t\t\tb = moment(b, format);\n\n\t\t\t\tif (!a.isValid()) {\n\t\t\t\t\temptyAlign = !b.isValid() ? 0 : -1;\n\t\t\t\t} else if (!b.isValid()) {\n\t\t\t\t\temptyAlign = 1;\n\t\t\t\t} else {\n\t\t\t\t\t//compare valid values\n\t\t\t\t\treturn a - b;\n\t\t\t\t}\n\n\t\t\t\t//fix empty values in position\n\t\t\t\tif (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n\t\t\t\t\temptyAlign *= -1;\n\t\t\t\t}\n\n\t\t\t\treturn emptyAlign;\n\t\t\t} else {\n\t\t\t\tconsole.error(\"Sort Error - 'datetime' sorter is dependant on moment.js\");\n\t\t\t}\n\t\t},\n\n\t\t//sort booleans\n\t\tboolean: function boolean(a, b, aRow, bRow, column, dir, params) {\n\t\t\tvar el1 = a === true || a === \"true\" || a === \"True\" || a === 1 ? 1 : 0;\n\t\t\tvar el2 = b === true || b === \"true\" || b === \"True\" || b === 1 ? 1 : 0;\n\n\t\t\treturn el1 - el2;\n\t\t},\n\n\t\t//sort if element contains any data\n\t\tarray: function array(a, b, aRow, bRow, column, dir, params) {\n\t\t\tvar el1 = 0;\n\t\t\tvar el2 = 0;\n\t\t\tvar type = params.type || \"length\";\n\t\t\tvar alignEmptyValues = params.alignEmptyValues;\n\t\t\tvar emptyAlign = 0;\n\n\t\t\tfunction calc(value) {\n\n\t\t\t\tswitch (type) {\n\t\t\t\t\tcase \"length\":\n\t\t\t\t\t\treturn value.length;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"sum\":\n\t\t\t\t\t\treturn value.reduce(function (c, d) {\n\t\t\t\t\t\t\treturn c + d;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"max\":\n\t\t\t\t\t\treturn Math.max.apply(null, value);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"min\":\n\t\t\t\t\t\treturn Math.min.apply(null, value);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"avg\":\n\t\t\t\t\t\treturn value.reduce(function (c, d) {\n\t\t\t\t\t\t\treturn c + d;\n\t\t\t\t\t\t}) / value.length;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//handle non array values\n\t\t\tif (!Array.isArray(a)) {\n\t\t\t\talignEmptyValues = !Array.isArray(b) ? 0 : -1;\n\t\t\t} else if (!Array.isArray(b)) {\n\t\t\t\talignEmptyValues = 1;\n\t\t\t} else {\n\n\t\t\t\t//compare valid values\n\t\t\t\tel1 = a ? calc(a) : 0;\n\t\t\t\tel2 = b ? calc(b) : 0;\n\n\t\t\t\treturn el1 - el2;\n\t\t\t}\n\n\t\t\t//fix empty values in position\n\t\t\tif (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n\t\t\t\temptyAlign *= -1;\n\t\t\t}\n\n\t\t\treturn emptyAlign;\n\t\t},\n\n\t\t//sort if element contains any data\n\t\texists: function exists(a, b, aRow, bRow, column, dir, params) {\n\t\t\tvar el1 = typeof a == \"undefined\" ? 0 : 1;\n\t\t\tvar el2 = typeof b == \"undefined\" ? 0 : 1;\n\n\t\t\treturn el1 - el2;\n\t\t},\n\n\t\t//sort alpha numeric strings\n\t\talphanum: function alphanum(as, bs, aRow, bRow, column, dir, params) {\n\t\t\tvar a,\n\t\t\t    b,\n\t\t\t    a1,\n\t\t\t    b1,\n\t\t\t    i = 0,\n\t\t\t    L,\n\t\t\t    rx = /(\\d+)|(\\D+)/g,\n\t\t\t    rd = /\\d/;\n\t\t\tvar alignEmptyValues = params.alignEmptyValues;\n\t\t\tvar emptyAlign = 0;\n\n\t\t\t//handle empty values\n\t\t\tif (!as && as !== 0) {\n\t\t\t\temptyAlign = !bs && bs !== 0 ? 0 : -1;\n\t\t\t} else if (!bs && bs !== 0) {\n\t\t\t\temptyAlign = 1;\n\t\t\t} else {\n\n\t\t\t\tif (isFinite(as) && isFinite(bs)) return as - bs;\n\t\t\t\ta = String(as).toLowerCase();\n\t\t\t\tb = String(bs).toLowerCase();\n\t\t\t\tif (a === b) return 0;\n\t\t\t\tif (!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1;\n\t\t\t\ta = a.match(rx);\n\t\t\t\tb = b.match(rx);\n\t\t\t\tL = a.length > b.length ? b.length : a.length;\n\t\t\t\twhile (i < L) {\n\t\t\t\t\ta1 = a[i];\n\t\t\t\t\tb1 = b[i++];\n\t\t\t\t\tif (a1 !== b1) {\n\t\t\t\t\t\tif (isFinite(a1) && isFinite(b1)) {\n\t\t\t\t\t\t\tif (a1.charAt(0) === \"0\") a1 = \".\" + a1;\n\t\t\t\t\t\t\tif (b1.charAt(0) === \"0\") b1 = \".\" + b1;\n\t\t\t\t\t\t\treturn a1 - b1;\n\t\t\t\t\t\t} else return a1 > b1 ? 1 : -1;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn a.length > b.length;\n\t\t\t}\n\n\t\t\t//fix empty values in position\n\t\t\tif (alignEmptyValues === \"top\" && dir === \"desc\" || alignEmptyValues === \"bottom\" && dir === \"asc\") {\n\t\t\t\temptyAlign *= -1;\n\t\t\t}\n\n\t\t\treturn emptyAlign;\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"sort\", Sort);\n\n\tvar Validate = function Validate(table) {\n\t\tthis.table = table;\n\t\tthis.invalidCells = [];\n\t};\n\n\t//validate\n\tValidate.prototype.initializeColumn = function (column) {\n\t\tvar self = this,\n\t\t    config = [],\n\t\t    validator;\n\n\t\tif (column.definition.validator) {\n\n\t\t\tif (Array.isArray(column.definition.validator)) {\n\t\t\t\tcolumn.definition.validator.forEach(function (item) {\n\t\t\t\t\tvalidator = self._extractValidator(item);\n\n\t\t\t\t\tif (validator) {\n\t\t\t\t\t\tconfig.push(validator);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tvalidator = this._extractValidator(column.definition.validator);\n\n\t\t\t\tif (validator) {\n\t\t\t\t\tconfig.push(validator);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcolumn.modules.validate = config.length ? config : false;\n\t\t}\n\t};\n\n\tValidate.prototype._extractValidator = function (value) {\n\t\tvar type, params, pos;\n\n\t\tswitch (typeof value === 'undefined' ? 'undefined' : _typeof(value)) {\n\t\t\tcase \"string\":\n\t\t\t\tpos = value.indexOf(':');\n\n\t\t\t\tif (pos > -1) {\n\t\t\t\t\ttype = value.substring(0, pos);\n\t\t\t\t\tparams = value.substring(pos + 1);\n\t\t\t\t} else {\n\t\t\t\t\ttype = value;\n\t\t\t\t}\n\n\t\t\t\treturn this._buildValidator(type, params);\n\t\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\t\treturn this._buildValidator(value);\n\t\t\t\tbreak;\n\n\t\t\tcase \"object\":\n\t\t\t\treturn this._buildValidator(value.type, value.parameters);\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\tValidate.prototype._buildValidator = function (type, params) {\n\n\t\tvar func = typeof type == \"function\" ? type : this.validators[type];\n\n\t\tif (!func) {\n\t\t\tconsole.warn(\"Validator Setup Error - No matching validator found:\", type);\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn {\n\t\t\t\ttype: typeof type == \"function\" ? \"function\" : type,\n\t\t\t\tfunc: func,\n\t\t\t\tparams: params\n\t\t\t};\n\t\t}\n\t};\n\n\tValidate.prototype.validate = function (validators, cell, value) {\n\t\tvar self = this,\n\t\t    valid = [],\n\t\t    invalidIndex = this.invalidCells.indexOf(cell);\n\n\t\tif (validators) {\n\t\t\tvalidators.forEach(function (item) {\n\t\t\t\tif (!item.func.call(self, cell.getComponent(), value, item.params)) {\n\t\t\t\t\tvalid.push({\n\t\t\t\t\t\ttype: item.type,\n\t\t\t\t\t\tparameters: item.params\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tvalid = valid.length ? valid : true;\n\n\t\tif (!cell.modules.validate) {\n\t\t\tcell.modules.validate = {};\n\t\t}\n\n\t\tif (valid === true) {\n\t\t\tcell.modules.validate.invalid = false;\n\t\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\n\n\t\t\tif (invalidIndex > -1) {\n\t\t\t\tthis.invalidCells.splice(invalidIndex, 1);\n\t\t\t}\n\t\t} else {\n\t\t\tcell.modules.validate.invalid = true;\n\n\t\t\tif (this.table.options.validationMode !== \"manual\") {\n\t\t\t\tcell.getElement().classList.add(\"tabulator-validation-fail\");\n\t\t\t}\n\n\t\t\tif (invalidIndex == -1) {\n\t\t\t\tthis.invalidCells.push(cell);\n\t\t\t}\n\t\t}\n\n\t\treturn valid;\n\t};\n\n\tValidate.prototype.getInvalidCells = function () {\n\t\tvar output = [];\n\n\t\tthis.invalidCells.forEach(function (cell) {\n\t\t\toutput.push(cell.getComponent());\n\t\t});\n\n\t\treturn output;\n\t};\n\n\tValidate.prototype.clearValidation = function (cell) {\n\t\tvar invalidIndex;\n\n\t\tif (cell.modules.validate && cell.modules.validate.invalid) {\n\n\t\t\tcell.element.classList.remove(\"tabulator-validation-fail\");\n\t\t\tcell.modules.validate.invalid = false;\n\n\t\t\tinvalidIndex = this.invalidCells.indexOf(cell);\n\n\t\t\tif (invalidIndex > -1) {\n\t\t\t\tthis.invalidCells.splice(invalidIndex, 1);\n\t\t\t}\n\t\t}\n\t};\n\n\tValidate.prototype.validators = {\n\n\t\t//is integer\n\t\tinteger: function integer(cell, value, parameters) {\n\t\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tvalue = Number(value);\n\t\t\treturn typeof value === 'number' && isFinite(value) && Math.floor(value) === value;\n\t\t},\n\n\t\t//is float\n\t\tfloat: function float(cell, value, parameters) {\n\t\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tvalue = Number(value);\n\t\t\treturn typeof value === 'number' && isFinite(value) && value % 1 !== 0;\n\t\t},\n\n\t\t//must be a number\n\t\tnumeric: function numeric(cell, value, parameters) {\n\t\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn !isNaN(value);\n\t\t},\n\n\t\t//must be a string\n\t\tstring: function string(cell, value, parameters) {\n\t\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn isNaN(value);\n\t\t},\n\n\t\t//maximum value\n\t\tmax: function max(cell, value, parameters) {\n\t\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn parseFloat(value) <= parameters;\n\t\t},\n\n\t\t//minimum value\n\t\tmin: function min(cell, value, parameters) {\n\t\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn parseFloat(value) >= parameters;\n\t\t},\n\n\t\t//starts with  value\n\t\tstarts: function starts(cell, value, parameters) {\n\t\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn String(value).toLowerCase().startsWith(String(parameters).toLowerCase());\n\t\t},\n\n\t\t//ends with  value\n\t\tends: function ends(cell, value, parameters) {\n\t\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn String(value).toLowerCase().endsWith(String(parameters).toLowerCase());\n\t\t},\n\n\t\t//minimum string length\n\t\tminLength: function minLength(cell, value, parameters) {\n\t\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn String(value).length >= parameters;\n\t\t},\n\n\t\t//maximum string length\n\t\tmaxLength: function maxLength(cell, value, parameters) {\n\t\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn String(value).length <= parameters;\n\t\t},\n\n\t\t//in provided value list\n\t\tin: function _in(cell, value, parameters) {\n\t\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (typeof parameters == \"string\") {\n\t\t\t\tparameters = parameters.split(\"|\");\n\t\t\t}\n\n\t\t\treturn value === \"\" || parameters.indexOf(value) > -1;\n\t\t},\n\n\t\t//must match provided regex\n\t\tregex: function regex(cell, value, parameters) {\n\t\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tvar reg = new RegExp(parameters);\n\n\t\t\treturn reg.test(value);\n\t\t},\n\n\t\t//value must be unique in this column\n\t\tunique: function unique(cell, value, parameters) {\n\t\t\tif (value === \"\" || value === null || typeof value === \"undefined\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tvar unique = true;\n\n\t\t\tvar cellData = cell.getData();\n\t\t\tvar column = cell.getColumn()._getSelf();\n\n\t\t\tthis.table.rowManager.rows.forEach(function (row) {\n\t\t\t\tvar data = row.getData();\n\n\t\t\t\tif (data !== cellData) {\n\t\t\t\t\tif (value == column.getFieldValue(data)) {\n\t\t\t\t\t\tunique = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn unique;\n\t\t},\n\n\t\t//must have a value\n\t\trequired: function required(cell, value, parameters) {\n\t\t\treturn value !== \"\" && value !== null && typeof value !== \"undefined\";\n\t\t}\n\t};\n\n\tTabulator.prototype.registerModule(\"validate\", Validate);\n\n\treturn Tabulator;\n});"]},"metadata":{},"sourceType":"script"}