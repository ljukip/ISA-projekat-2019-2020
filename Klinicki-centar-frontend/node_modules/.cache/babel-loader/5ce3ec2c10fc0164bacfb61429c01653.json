{"ast":null,"code":"/*\r\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\r\n * the License. A copy of the License is located at\r\n *\r\n *     http://aws.amazon.com/apache2.0/\r\n *\r\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\r\n * and limitations under the License.\r\n */\nvar MIME_MAP = [{\n  type: 'text/plain',\n  ext: 'txt'\n}, {\n  type: 'text/html',\n  ext: 'html'\n}, {\n  type: 'text/javascript',\n  ext: 'js'\n}, {\n  type: 'text/css',\n  ext: 'css'\n}, {\n  type: 'text/csv',\n  ext: 'csv'\n}, {\n  type: 'text/yaml',\n  ext: 'yml'\n}, {\n  type: 'text/yaml',\n  ext: 'yaml'\n}, {\n  type: 'text/calendar',\n  ext: 'ics'\n}, {\n  type: 'text/calendar',\n  ext: 'ical'\n}, {\n  type: 'image/apng',\n  ext: 'apng'\n}, {\n  type: 'image/bmp',\n  ext: 'bmp'\n}, {\n  type: 'image/gif',\n  ext: 'gif'\n}, {\n  type: 'image/x-icon',\n  ext: 'ico'\n}, {\n  type: 'image/x-icon',\n  ext: 'cur'\n}, {\n  type: 'image/jpeg',\n  ext: 'jpg'\n}, {\n  type: 'image/jpeg',\n  ext: 'jpeg'\n}, {\n  type: 'image/jpeg',\n  ext: 'jfif'\n}, {\n  type: 'image/jpeg',\n  ext: 'pjp'\n}, {\n  type: 'image/jpeg',\n  ext: 'pjpeg'\n}, {\n  type: 'image/png',\n  ext: 'png'\n}, {\n  type: 'image/svg+xml',\n  ext: 'svg'\n}, {\n  type: 'image/tiff',\n  ext: 'tif'\n}, {\n  type: 'image/tiff',\n  ext: 'tiff'\n}, {\n  type: 'image/webp',\n  ext: 'webp'\n}, {\n  type: 'application/json',\n  ext: 'json'\n}, {\n  type: 'application/xml',\n  ext: 'xml'\n}, {\n  type: 'application/x-sh',\n  ext: 'sh'\n}, {\n  type: 'application/zip',\n  ext: 'zip'\n}, {\n  type: 'application/x-rar-compressed',\n  ext: 'rar'\n}, {\n  type: 'application/x-tar',\n  ext: 'tar'\n}, {\n  type: 'application/x-bzip',\n  ext: 'bz'\n}, {\n  type: 'application/x-bzip2',\n  ext: 'bz2'\n}, {\n  type: 'application/pdf',\n  ext: 'pdf'\n}, {\n  type: 'application/java-archive',\n  ext: 'jar'\n}, {\n  type: 'application/msword',\n  ext: 'doc'\n}, {\n  type: 'application/vnd.ms-excel',\n  ext: 'xls'\n}, {\n  type: 'application/vnd.ms-excel',\n  ext: 'xlsx'\n}, {\n  type: 'message/rfc822',\n  ext: 'eml'\n}];\nexport var isEmpty = function (obj) {\n  if (obj === void 0) {\n    obj = {};\n  }\n\n  return Object.keys(obj).length === 0;\n};\nexport var sortByField = function (list, field, dir) {\n  if (!list || !list.sort) {\n    return false;\n  }\n\n  var dirX = dir && dir === 'desc' ? -1 : 1;\n  list.sort(function (a, b) {\n    var a_val = a[field];\n    var b_val = b[field];\n\n    if (typeof b_val === 'undefined') {\n      return typeof a_val === 'undefined' ? 0 : 1 * dirX;\n    }\n\n    if (typeof a_val === 'undefined') {\n      return -1 * dirX;\n    }\n\n    if (a_val < b_val) {\n      return -1 * dirX;\n    }\n\n    if (a_val > b_val) {\n      return 1 * dirX;\n    }\n\n    return 0;\n  });\n  return true;\n};\nexport var objectLessAttributes = function (obj, less) {\n  var ret = Object.assign({}, obj);\n\n  if (less) {\n    if (typeof less === 'string') {\n      delete ret[less];\n    } else {\n      less.forEach(function (attr) {\n        delete ret[attr];\n      });\n    }\n  }\n\n  return ret;\n};\nexport var filenameToContentType = function (filename, defVal) {\n  if (defVal === void 0) {\n    defVal = 'application/octet-stream';\n  }\n\n  var name = filename.toLowerCase();\n  var filtered = MIME_MAP.filter(function (mime) {\n    return name.endsWith('.' + mime.ext);\n  });\n  return filtered.length > 0 ? filtered[0].type : defVal;\n};\nexport var isTextFile = function (contentType) {\n  var type = contentType.toLowerCase();\n\n  if (type.startsWith('text/')) {\n    return true;\n  }\n\n  return 'application/json' === type || 'application/xml' === type || 'application/sh' === type;\n};\nexport var generateRandomString = function () {\n  var result = '';\n  var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n\n  for (var i = 32; i > 0; i -= 1) {\n    result += chars[Math.floor(Math.random() * chars.length)];\n  }\n\n  return result;\n};\nexport var makeQuerablePromise = function (promise) {\n  if (promise.isResolved) return promise;\n  var isPending = true;\n  var isRejected = false;\n  var isFullfilled = false;\n  var result = promise.then(function (data) {\n    isFullfilled = true;\n    isPending = false;\n    return data;\n  }, function (e) {\n    isRejected = true;\n    isPending = false;\n    throw e;\n  });\n\n  result.isFullfilled = function () {\n    return isFullfilled;\n  };\n\n  result.isPending = function () {\n    return isPending;\n  };\n\n  result.isRejected = function () {\n    return isRejected;\n  };\n\n  return result;\n};\nexport var browserOrNode = function () {\n  var isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  var isNode = typeof process !== 'undefined' && process.versions != null && process.versions.node != null;\n  return {\n    isBrowser: isBrowser,\n    isNode: isNode\n  };\n};\n/**\r\n * transfer the first letter of the keys to lowercase\r\n * @param {Object} obj - the object need to be transferred\r\n * @param {Array} whiteListForItself - whitelist itself from being transferred\r\n * @param {Array} whiteListForChildren - whitelist its children keys from being transferred\r\n */\n\nexport var transferKeyToLowerCase = function (obj, whiteListForItself, whiteListForChildren) {\n  if (whiteListForItself === void 0) {\n    whiteListForItself = [];\n  }\n\n  if (whiteListForChildren === void 0) {\n    whiteListForChildren = [];\n  }\n\n  if (!isStrictObject(obj)) return obj;\n  var ret = {};\n\n  for (var key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      var transferedKey = whiteListForItself.includes(key) ? key : key[0].toLowerCase() + key.slice(1);\n      ret[transferedKey] = whiteListForChildren.includes(key) ? obj[key] : transferKeyToLowerCase(obj[key], whiteListForItself, whiteListForChildren);\n    }\n  }\n\n  return ret;\n};\n/**\r\n * transfer the first letter of the keys to lowercase\r\n * @param {Object} obj - the object need to be transferred\r\n * @param {Array} whiteListForItself - whitelist itself from being transferred\r\n * @param {Array} whiteListForChildren - whitelist its children keys from being transferred\r\n */\n\nexport var transferKeyToUpperCase = function (obj, whiteListForItself, whiteListForChildren) {\n  if (whiteListForItself === void 0) {\n    whiteListForItself = [];\n  }\n\n  if (whiteListForChildren === void 0) {\n    whiteListForChildren = [];\n  }\n\n  if (!isStrictObject(obj)) return obj;\n  var ret = {};\n\n  for (var key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      var transferredKey = whiteListForItself.includes(key) ? key : key[0].toUpperCase() + key.slice(1);\n      ret[transferredKey] = whiteListForChildren.includes(key) ? obj[key] : transferKeyToUpperCase(obj[key], whiteListForItself, whiteListForChildren);\n    }\n  }\n\n  return ret;\n};\n/**\r\n * Return true if the object is a strict object\r\n * which means it's not Array, Function, Number, String, Boolean or Null\r\n * @param obj the Object\r\n */\n\nexport var isStrictObject = function (obj) {\n  return obj instanceof Object && !(obj instanceof Array) && !(obj instanceof Function) && !(obj instanceof Number) && !(obj instanceof String) && !(obj instanceof Boolean);\n};\n/**\r\n * @deprecated use per-function imports\r\n */\n\nvar JS =\n/** @class */\nfunction () {\n  function JS() {}\n\n  JS.isEmpty = isEmpty;\n  JS.sortByField = sortByField;\n  JS.objectLessAttributes = objectLessAttributes;\n  JS.filenameToContentType = filenameToContentType;\n  JS.isTextFile = isTextFile;\n  JS.generateRandomString = generateRandomString;\n  JS.makeQuerablePromise = makeQuerablePromise;\n  JS.browserOrNode = browserOrNode;\n  JS.transferKeyToLowerCase = transferKeyToLowerCase;\n  JS.transferKeyToUpperCase = transferKeyToUpperCase;\n  JS.isStrictObject = isStrictObject;\n  return JS;\n}();\n\nexport { JS };\n/**\r\n * @deprecated use per-function imports\r\n */\n\nexport default JS;","map":{"version":3,"sources":["../src/JS.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*\r\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\r\n * the License. A copy of the License is located at\r\n *\r\n *     http://aws.amazon.com/apache2.0/\r\n *\r\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\r\n * and limitations under the License.\r\n */\r\nvar MIME_MAP = [\r\n    { type: 'text/plain', ext: 'txt' },\r\n    { type: 'text/html', ext: 'html' },\r\n    { type: 'text/javascript', ext: 'js' },\r\n    { type: 'text/css', ext: 'css' },\r\n    { type: 'text/csv', ext: 'csv' },\r\n    { type: 'text/yaml', ext: 'yml' },\r\n    { type: 'text/yaml', ext: 'yaml' },\r\n    { type: 'text/calendar', ext: 'ics' },\r\n    { type: 'text/calendar', ext: 'ical' },\r\n    { type: 'image/apng', ext: 'apng' },\r\n    { type: 'image/bmp', ext: 'bmp' },\r\n    { type: 'image/gif', ext: 'gif' },\r\n    { type: 'image/x-icon', ext: 'ico' },\r\n    { type: 'image/x-icon', ext: 'cur' },\r\n    { type: 'image/jpeg', ext: 'jpg' },\r\n    { type: 'image/jpeg', ext: 'jpeg' },\r\n    { type: 'image/jpeg', ext: 'jfif' },\r\n    { type: 'image/jpeg', ext: 'pjp' },\r\n    { type: 'image/jpeg', ext: 'pjpeg' },\r\n    { type: 'image/png', ext: 'png' },\r\n    { type: 'image/svg+xml', ext: 'svg' },\r\n    { type: 'image/tiff', ext: 'tif' },\r\n    { type: 'image/tiff', ext: 'tiff' },\r\n    { type: 'image/webp', ext: 'webp' },\r\n    { type: 'application/json', ext: 'json' },\r\n    { type: 'application/xml', ext: 'xml' },\r\n    { type: 'application/x-sh', ext: 'sh' },\r\n    { type: 'application/zip', ext: 'zip' },\r\n    { type: 'application/x-rar-compressed', ext: 'rar' },\r\n    { type: 'application/x-tar', ext: 'tar' },\r\n    { type: 'application/x-bzip', ext: 'bz' },\r\n    { type: 'application/x-bzip2', ext: 'bz2' },\r\n    { type: 'application/pdf', ext: 'pdf' },\r\n    { type: 'application/java-archive', ext: 'jar' },\r\n    { type: 'application/msword', ext: 'doc' },\r\n    { type: 'application/vnd.ms-excel', ext: 'xls' },\r\n    { type: 'application/vnd.ms-excel', ext: 'xlsx' },\r\n    { type: 'message/rfc822', ext: 'eml' },\r\n];\r\nexport var isEmpty = function (obj) {\r\n    if (obj === void 0) { obj = {}; }\r\n    return Object.keys(obj).length === 0;\r\n};\r\nexport var sortByField = function (list, field, dir) {\r\n    if (!list || !list.sort) {\r\n        return false;\r\n    }\r\n    var dirX = dir && dir === 'desc' ? -1 : 1;\r\n    list.sort(function (a, b) {\r\n        var a_val = a[field];\r\n        var b_val = b[field];\r\n        if (typeof b_val === 'undefined') {\r\n            return typeof a_val === 'undefined' ? 0 : 1 * dirX;\r\n        }\r\n        if (typeof a_val === 'undefined') {\r\n            return -1 * dirX;\r\n        }\r\n        if (a_val < b_val) {\r\n            return -1 * dirX;\r\n        }\r\n        if (a_val > b_val) {\r\n            return 1 * dirX;\r\n        }\r\n        return 0;\r\n    });\r\n    return true;\r\n};\r\nexport var objectLessAttributes = function (obj, less) {\r\n    var ret = Object.assign({}, obj);\r\n    if (less) {\r\n        if (typeof less === 'string') {\r\n            delete ret[less];\r\n        }\r\n        else {\r\n            less.forEach(function (attr) {\r\n                delete ret[attr];\r\n            });\r\n        }\r\n    }\r\n    return ret;\r\n};\r\nexport var filenameToContentType = function (filename, defVal) {\r\n    if (defVal === void 0) { defVal = 'application/octet-stream'; }\r\n    var name = filename.toLowerCase();\r\n    var filtered = MIME_MAP.filter(function (mime) { return name.endsWith('.' + mime.ext); });\r\n    return filtered.length > 0 ? filtered[0].type : defVal;\r\n};\r\nexport var isTextFile = function (contentType) {\r\n    var type = contentType.toLowerCase();\r\n    if (type.startsWith('text/')) {\r\n        return true;\r\n    }\r\n    return ('application/json' === type ||\r\n        'application/xml' === type ||\r\n        'application/sh' === type);\r\n};\r\nexport var generateRandomString = function () {\r\n    var result = '';\r\n    var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\n    for (var i = 32; i > 0; i -= 1) {\r\n        result += chars[Math.floor(Math.random() * chars.length)];\r\n    }\r\n    return result;\r\n};\r\nexport var makeQuerablePromise = function (promise) {\r\n    if (promise.isResolved)\r\n        return promise;\r\n    var isPending = true;\r\n    var isRejected = false;\r\n    var isFullfilled = false;\r\n    var result = promise.then(function (data) {\r\n        isFullfilled = true;\r\n        isPending = false;\r\n        return data;\r\n    }, function (e) {\r\n        isRejected = true;\r\n        isPending = false;\r\n        throw e;\r\n    });\r\n    result.isFullfilled = function () { return isFullfilled; };\r\n    result.isPending = function () { return isPending; };\r\n    result.isRejected = function () { return isRejected; };\r\n    return result;\r\n};\r\nexport var browserOrNode = function () {\r\n    var isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\r\n    var isNode = typeof process !== 'undefined' &&\r\n        process.versions != null &&\r\n        process.versions.node != null;\r\n    return {\r\n        isBrowser: isBrowser,\r\n        isNode: isNode,\r\n    };\r\n};\r\n/**\r\n * transfer the first letter of the keys to lowercase\r\n * @param {Object} obj - the object need to be transferred\r\n * @param {Array} whiteListForItself - whitelist itself from being transferred\r\n * @param {Array} whiteListForChildren - whitelist its children keys from being transferred\r\n */\r\nexport var transferKeyToLowerCase = function (obj, whiteListForItself, whiteListForChildren) {\r\n    if (whiteListForItself === void 0) { whiteListForItself = []; }\r\n    if (whiteListForChildren === void 0) { whiteListForChildren = []; }\r\n    if (!isStrictObject(obj))\r\n        return obj;\r\n    var ret = {};\r\n    for (var key in obj) {\r\n        if (obj.hasOwnProperty(key)) {\r\n            var transferedKey = whiteListForItself.includes(key)\r\n                ? key\r\n                : key[0].toLowerCase() + key.slice(1);\r\n            ret[transferedKey] = whiteListForChildren.includes(key)\r\n                ? obj[key]\r\n                : transferKeyToLowerCase(obj[key], whiteListForItself, whiteListForChildren);\r\n        }\r\n    }\r\n    return ret;\r\n};\r\n/**\r\n * transfer the first letter of the keys to lowercase\r\n * @param {Object} obj - the object need to be transferred\r\n * @param {Array} whiteListForItself - whitelist itself from being transferred\r\n * @param {Array} whiteListForChildren - whitelist its children keys from being transferred\r\n */\r\nexport var transferKeyToUpperCase = function (obj, whiteListForItself, whiteListForChildren) {\r\n    if (whiteListForItself === void 0) { whiteListForItself = []; }\r\n    if (whiteListForChildren === void 0) { whiteListForChildren = []; }\r\n    if (!isStrictObject(obj))\r\n        return obj;\r\n    var ret = {};\r\n    for (var key in obj) {\r\n        if (obj.hasOwnProperty(key)) {\r\n            var transferredKey = whiteListForItself.includes(key)\r\n                ? key\r\n                : key[0].toUpperCase() + key.slice(1);\r\n            ret[transferredKey] = whiteListForChildren.includes(key)\r\n                ? obj[key]\r\n                : transferKeyToUpperCase(obj[key], whiteListForItself, whiteListForChildren);\r\n        }\r\n    }\r\n    return ret;\r\n};\r\n/**\r\n * Return true if the object is a strict object\r\n * which means it's not Array, Function, Number, String, Boolean or Null\r\n * @param obj the Object\r\n */\r\nexport var isStrictObject = function (obj) {\r\n    return (obj instanceof Object &&\r\n        !(obj instanceof Array) &&\r\n        !(obj instanceof Function) &&\r\n        !(obj instanceof Number) &&\r\n        !(obj instanceof String) &&\r\n        !(obj instanceof Boolean));\r\n};\r\n/**\r\n * @deprecated use per-function imports\r\n */\r\nvar JS = /** @class */ (function () {\r\n    function JS() {\r\n    }\r\n    JS.isEmpty = isEmpty;\r\n    JS.sortByField = sortByField;\r\n    JS.objectLessAttributes = objectLessAttributes;\r\n    JS.filenameToContentType = filenameToContentType;\r\n    JS.isTextFile = isTextFile;\r\n    JS.generateRandomString = generateRandomString;\r\n    JS.makeQuerablePromise = makeQuerablePromise;\r\n    JS.browserOrNode = browserOrNode;\r\n    JS.transferKeyToLowerCase = transferKeyToLowerCase;\r\n    JS.transferKeyToUpperCase = transferKeyToUpperCase;\r\n    JS.isStrictObject = isStrictObject;\r\n    return JS;\r\n}());\r\nexport { JS };\r\n/**\r\n * @deprecated use per-function imports\r\n */\r\nexport default JS;\r\n//# sourceMappingURL=JS.js.map"]},"metadata":{},"sourceType":"module"}